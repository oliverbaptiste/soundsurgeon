(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();var ki=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ia={exports:{}};/*!
 * jQuery JavaScript Library v3.6.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2022-08-26T17:52Z
 */(function(i){(function(e,t){i.exports=e.document?t(e,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}})(typeof window<"u"?window:ki,function(e,t){var n=[],r=Object.getPrototypeOf,a=n.slice,h=n.flat?function(s){return n.flat.call(s)}:function(s){return n.concat.apply([],s)},f=n.push,d=n.indexOf,p={},y=p.toString,b=p.hasOwnProperty,S=b.toString,N=S.call(Object),x={},k=function(o){return typeof o=="function"&&typeof o.nodeType!="number"&&typeof o.item!="function"},I=function(o){return o!=null&&o===o.window},v=e.document,D={type:!0,src:!0,nonce:!0,noModule:!0};function C(s,o,u){u=u||v;var l,m,g=u.createElement("script");if(g.text=s,o)for(l in D)m=o[l]||o.getAttribute&&o.getAttribute(l),m&&g.setAttribute(l,m);u.head.appendChild(g).parentNode.removeChild(g)}function A(s){return s==null?s+"":typeof s=="object"||typeof s=="function"?p[y.call(s)]||"object":typeof s}var w="3.6.1",c=function(s,o){return new c.fn.init(s,o)};c.fn=c.prototype={jquery:w,constructor:c,length:0,toArray:function(){return a.call(this)},get:function(s){return s==null?a.call(this):s<0?this[s+this.length]:this[s]},pushStack:function(s){var o=c.merge(this.constructor(),s);return o.prevObject=this,o},each:function(s){return c.each(this,s)},map:function(s){return this.pushStack(c.map(this,function(o,u){return s.call(o,u,o)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(c.grep(this,function(s,o){return(o+1)%2}))},odd:function(){return this.pushStack(c.grep(this,function(s,o){return o%2}))},eq:function(s){var o=this.length,u=+s+(s<0?o:0);return this.pushStack(u>=0&&u<o?[this[u]]:[])},end:function(){return this.prevObject||this.constructor()},push:f,sort:n.sort,splice:n.splice},c.extend=c.fn.extend=function(){var s,o,u,l,m,g,_=arguments[0]||{},O=1,E=arguments.length,V=!1;for(typeof _=="boolean"&&(V=_,_=arguments[O]||{},O++),typeof _!="object"&&!k(_)&&(_={}),O===E&&(_=this,O--);O<E;O++)if((s=arguments[O])!=null)for(o in s)l=s[o],!(o==="__proto__"||_===l)&&(V&&l&&(c.isPlainObject(l)||(m=Array.isArray(l)))?(u=_[o],m&&!Array.isArray(u)?g=[]:!m&&!c.isPlainObject(u)?g={}:g=u,m=!1,_[o]=c.extend(V,g,l)):l!==void 0&&(_[o]=l));return _},c.extend({expando:"jQuery"+(w+Math.random()).replace(/\D/g,""),isReady:!0,error:function(s){throw new Error(s)},noop:function(){},isPlainObject:function(s){var o,u;return!s||y.call(s)!=="[object Object]"?!1:(o=r(s),o?(u=b.call(o,"constructor")&&o.constructor,typeof u=="function"&&S.call(u)===N):!0)},isEmptyObject:function(s){var o;for(o in s)return!1;return!0},globalEval:function(s,o,u){C(s,{nonce:o&&o.nonce},u)},each:function(s,o){var u,l=0;if(R(s))for(u=s.length;l<u&&o.call(s[l],l,s[l])!==!1;l++);else for(l in s)if(o.call(s[l],l,s[l])===!1)break;return s},makeArray:function(s,o){var u=o||[];return s!=null&&(R(Object(s))?c.merge(u,typeof s=="string"?[s]:s):f.call(u,s)),u},inArray:function(s,o,u){return o==null?-1:d.call(o,s,u)},merge:function(s,o){for(var u=+o.length,l=0,m=s.length;l<u;l++)s[m++]=o[l];return s.length=m,s},grep:function(s,o,u){for(var l,m=[],g=0,_=s.length,O=!u;g<_;g++)l=!o(s[g],g),l!==O&&m.push(s[g]);return m},map:function(s,o,u){var l,m,g=0,_=[];if(R(s))for(l=s.length;g<l;g++)m=o(s[g],g,u),m!=null&&_.push(m);else for(g in s)m=o(s[g],g,u),m!=null&&_.push(m);return h(_)},guid:1,support:x}),typeof Symbol=="function"&&(c.fn[Symbol.iterator]=n[Symbol.iterator]),c.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(s,o){p["[object "+o+"]"]=o.toLowerCase()});function R(s){var o=!!s&&"length"in s&&s.length,u=A(s);return k(s)||I(s)?!1:u==="array"||o===0||typeof o=="number"&&o>0&&o-1 in s}var q=function(s){var o,u,l,m,g,_,O,E,V,j,G,L,B,oe,ge,ae,nt,Je,Nt,Me="sizzle"+1*new Date,me=s.document,yt=0,Ae=0,$e=gi(),ks=gi(),di=gi(),Et=gi(),Fn=function(T,M){return T===M&&(G=!0),0},Vn={}.hasOwnProperty,bt=[],Cn=bt.pop,Ft=bt.push,xn=bt.push,Jo=bt.slice,Ln=function(T,M){for(var P=0,K=T.length;P<K;P++)if(T[P]===M)return P;return-1},xr="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ee="[\\x20\\t\\r\\n\\f]",jn="(?:\\\\[\\da-fA-F]{1,6}"+Ee+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",ea="\\["+Ee+"*("+jn+")(?:"+Ee+"*([*^$|!~]?=)"+Ee+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+jn+"))|)"+Ee+"*\\]",Sr=":("+jn+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+ea+")*)|.*)\\)|)",Ou=new RegExp(Ee+"+","g"),pi=new RegExp("^"+Ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ee+"+$","g"),Du=new RegExp("^"+Ee+"*,"+Ee+"*"),ta=new RegExp("^"+Ee+"*([>+~]|"+Ee+")"+Ee+"*"),Iu=new RegExp(Ee+"|>"),Ru=new RegExp(Sr),Pu=new RegExp("^"+jn+"$"),mi={ID:new RegExp("^#("+jn+")"),CLASS:new RegExp("^\\.("+jn+")"),TAG:new RegExp("^("+jn+"|[*])"),ATTR:new RegExp("^"+ea),PSEUDO:new RegExp("^"+Sr),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ee+"*(even|odd|(([+-]|)(\\d*)n|)"+Ee+"*(?:([+-]|)"+Ee+"*(\\d+)|))"+Ee+"*\\)|)","i"),bool:new RegExp("^(?:"+xr+")$","i"),needsContext:new RegExp("^"+Ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ee+"*((?:-\\d)?\\d*)"+Ee+"*\\)|)(?=[^-]|$)","i")},qu=/HTML$/i,Fu=/^(?:input|select|textarea|button)$/i,Vu=/^h\d$/i,Ns=/^[^{]+\{\s*\[native \w/,Lu=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ar=/[+~]/,un=new RegExp("\\\\[\\da-fA-F]{1,6}"+Ee+"?|\\\\([^\\r\\n\\f])","g"),ln=function(T,M){var P="0x"+T.slice(1)-65536;return M||(P<0?String.fromCharCode(P+65536):String.fromCharCode(P>>10|55296,P&1023|56320))},na=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,sa=function(T,M){return M?T==="\0"?"\uFFFD":T.slice(0,-1)+"\\"+T.charCodeAt(T.length-1).toString(16)+" ":"\\"+T},ia=function(){L()},ju=_i(function(T){return T.disabled===!0&&T.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{xn.apply(bt=Jo.call(me.childNodes),me.childNodes),bt[me.childNodes.length].nodeType}catch{xn={apply:bt.length?function(M,P){Ft.apply(M,Jo.call(P))}:function(M,P){for(var K=M.length,F=0;M[K++]=P[F++];);M.length=K-1}}}function Ie(T,M,P,K){var F,$,X,J,ne,fe,he,pe=M&&M.ownerDocument,Te=M?M.nodeType:9;if(P=P||[],typeof T!="string"||!T||Te!==1&&Te!==9&&Te!==11)return P;if(!K&&(L(M),M=M||B,ge)){if(Te!==11&&(ne=Lu.exec(T)))if(F=ne[1]){if(Te===9)if(X=M.getElementById(F)){if(X.id===F)return P.push(X),P}else return P;else if(pe&&(X=pe.getElementById(F))&&Nt(M,X)&&X.id===F)return P.push(X),P}else{if(ne[2])return xn.apply(P,M.getElementsByTagName(T)),P;if((F=ne[3])&&u.getElementsByClassName&&M.getElementsByClassName)return xn.apply(P,M.getElementsByClassName(F)),P}if(u.qsa&&!Et[T+" "]&&(!ae||!ae.test(T))&&(Te!==1||M.nodeName.toLowerCase()!=="object")){if(he=T,pe=M,Te===1&&(Iu.test(T)||ta.test(T))){for(pe=Ar.test(T)&&Nr(M.parentNode)||M,(pe!==M||!u.scope)&&((J=M.getAttribute("id"))?J=J.replace(na,sa):M.setAttribute("id",J=Me)),fe=_(T),$=fe.length;$--;)fe[$]=(J?"#"+J:":scope")+" "+vi(fe[$]);he=fe.join(",")}try{return xn.apply(P,pe.querySelectorAll(he)),P}catch{Et(T,!0)}finally{J===Me&&M.removeAttribute("id")}}}return E(T.replace(pi,"$1"),M,P,K)}function gi(){var T=[];function M(P,K){return T.push(P+" ")>l.cacheLength&&delete M[T.shift()],M[P+" "]=K}return M}function Ut(T){return T[Me]=!0,T}function Ht(T){var M=B.createElement("fieldset");try{return!!T(M)}catch{return!1}finally{M.parentNode&&M.parentNode.removeChild(M),M=null}}function kr(T,M){for(var P=T.split("|"),K=P.length;K--;)l.attrHandle[P[K]]=M}function ra(T,M){var P=M&&T,K=P&&T.nodeType===1&&M.nodeType===1&&T.sourceIndex-M.sourceIndex;if(K)return K;if(P){for(;P=P.nextSibling;)if(P===M)return-1}return T?1:-1}function Wu(T){return function(M){var P=M.nodeName.toLowerCase();return P==="input"&&M.type===T}}function Bu(T){return function(M){var P=M.nodeName.toLowerCase();return(P==="input"||P==="button")&&M.type===T}}function oa(T){return function(M){return"form"in M?M.parentNode&&M.disabled===!1?"label"in M?"label"in M.parentNode?M.parentNode.disabled===T:M.disabled===T:M.isDisabled===T||M.isDisabled!==!T&&ju(M)===T:M.disabled===T:"label"in M?M.disabled===T:!1}}function Wn(T){return Ut(function(M){return M=+M,Ut(function(P,K){for(var F,$=T([],P.length,M),X=$.length;X--;)P[F=$[X]]&&(P[F]=!(K[F]=P[F]))})})}function Nr(T){return T&&typeof T.getElementsByTagName<"u"&&T}u=Ie.support={},g=Ie.isXML=function(T){var M=T&&T.namespaceURI,P=T&&(T.ownerDocument||T).documentElement;return!qu.test(M||P&&P.nodeName||"HTML")},L=Ie.setDocument=function(T){var M,P,K=T?T.ownerDocument||T:me;return K==B||K.nodeType!==9||!K.documentElement||(B=K,oe=B.documentElement,ge=!g(B),me!=B&&(P=B.defaultView)&&P.top!==P&&(P.addEventListener?P.addEventListener("unload",ia,!1):P.attachEvent&&P.attachEvent("onunload",ia)),u.scope=Ht(function(F){return oe.appendChild(F).appendChild(B.createElement("div")),typeof F.querySelectorAll<"u"&&!F.querySelectorAll(":scope fieldset div").length}),u.attributes=Ht(function(F){return F.className="i",!F.getAttribute("className")}),u.getElementsByTagName=Ht(function(F){return F.appendChild(B.createComment("")),!F.getElementsByTagName("*").length}),u.getElementsByClassName=Ns.test(B.getElementsByClassName),u.getById=Ht(function(F){return oe.appendChild(F).id=Me,!B.getElementsByName||!B.getElementsByName(Me).length}),u.getById?(l.filter.ID=function(F){var $=F.replace(un,ln);return function(X){return X.getAttribute("id")===$}},l.find.ID=function(F,$){if(typeof $.getElementById<"u"&&ge){var X=$.getElementById(F);return X?[X]:[]}}):(l.filter.ID=function(F){var $=F.replace(un,ln);return function(X){var J=typeof X.getAttributeNode<"u"&&X.getAttributeNode("id");return J&&J.value===$}},l.find.ID=function(F,$){if(typeof $.getElementById<"u"&&ge){var X,J,ne,fe=$.getElementById(F);if(fe){if(X=fe.getAttributeNode("id"),X&&X.value===F)return[fe];for(ne=$.getElementsByName(F),J=0;fe=ne[J++];)if(X=fe.getAttributeNode("id"),X&&X.value===F)return[fe]}return[]}}),l.find.TAG=u.getElementsByTagName?function(F,$){if(typeof $.getElementsByTagName<"u")return $.getElementsByTagName(F);if(u.qsa)return $.querySelectorAll(F)}:function(F,$){var X,J=[],ne=0,fe=$.getElementsByTagName(F);if(F==="*"){for(;X=fe[ne++];)X.nodeType===1&&J.push(X);return J}return fe},l.find.CLASS=u.getElementsByClassName&&function(F,$){if(typeof $.getElementsByClassName<"u"&&ge)return $.getElementsByClassName(F)},nt=[],ae=[],(u.qsa=Ns.test(B.querySelectorAll))&&(Ht(function(F){var $;oe.appendChild(F).innerHTML="<a id='"+Me+"'></a><select id='"+Me+"-\r\\' msallowcapture=''><option selected=''></option></select>",F.querySelectorAll("[msallowcapture^='']").length&&ae.push("[*^$]="+Ee+`*(?:''|"")`),F.querySelectorAll("[selected]").length||ae.push("\\["+Ee+"*(?:value|"+xr+")"),F.querySelectorAll("[id~="+Me+"-]").length||ae.push("~="),$=B.createElement("input"),$.setAttribute("name",""),F.appendChild($),F.querySelectorAll("[name='']").length||ae.push("\\["+Ee+"*name"+Ee+"*="+Ee+`*(?:''|"")`),F.querySelectorAll(":checked").length||ae.push(":checked"),F.querySelectorAll("a#"+Me+"+*").length||ae.push(".#.+[+~]"),F.querySelectorAll("\\\f"),ae.push("[\\r\\n\\f]")}),Ht(function(F){F.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var $=B.createElement("input");$.setAttribute("type","hidden"),F.appendChild($).setAttribute("name","D"),F.querySelectorAll("[name=d]").length&&ae.push("name"+Ee+"*[*^$|!~]?="),F.querySelectorAll(":enabled").length!==2&&ae.push(":enabled",":disabled"),oe.appendChild(F).disabled=!0,F.querySelectorAll(":disabled").length!==2&&ae.push(":enabled",":disabled"),F.querySelectorAll("*,:x"),ae.push(",.*:")})),(u.matchesSelector=Ns.test(Je=oe.matches||oe.webkitMatchesSelector||oe.mozMatchesSelector||oe.oMatchesSelector||oe.msMatchesSelector))&&Ht(function(F){u.disconnectedMatch=Je.call(F,"*"),Je.call(F,"[s!='']:x"),nt.push("!=",Sr)}),ae=ae.length&&new RegExp(ae.join("|")),nt=nt.length&&new RegExp(nt.join("|")),M=Ns.test(oe.compareDocumentPosition),Nt=M||Ns.test(oe.contains)?function(F,$){var X=F.nodeType===9?F.documentElement:F,J=$&&$.parentNode;return F===J||!!(J&&J.nodeType===1&&(X.contains?X.contains(J):F.compareDocumentPosition&&F.compareDocumentPosition(J)&16))}:function(F,$){if($){for(;$=$.parentNode;)if($===F)return!0}return!1},Fn=M?function(F,$){if(F===$)return G=!0,0;var X=!F.compareDocumentPosition-!$.compareDocumentPosition;return X||(X=(F.ownerDocument||F)==($.ownerDocument||$)?F.compareDocumentPosition($):1,X&1||!u.sortDetached&&$.compareDocumentPosition(F)===X?F==B||F.ownerDocument==me&&Nt(me,F)?-1:$==B||$.ownerDocument==me&&Nt(me,$)?1:j?Ln(j,F)-Ln(j,$):0:X&4?-1:1)}:function(F,$){if(F===$)return G=!0,0;var X,J=0,ne=F.parentNode,fe=$.parentNode,he=[F],pe=[$];if(!ne||!fe)return F==B?-1:$==B?1:ne?-1:fe?1:j?Ln(j,F)-Ln(j,$):0;if(ne===fe)return ra(F,$);for(X=F;X=X.parentNode;)he.unshift(X);for(X=$;X=X.parentNode;)pe.unshift(X);for(;he[J]===pe[J];)J++;return J?ra(he[J],pe[J]):he[J]==me?-1:pe[J]==me?1:0}),B},Ie.matches=function(T,M){return Ie(T,null,null,M)},Ie.matchesSelector=function(T,M){if(L(T),u.matchesSelector&&ge&&!Et[M+" "]&&(!nt||!nt.test(M))&&(!ae||!ae.test(M)))try{var P=Je.call(T,M);if(P||u.disconnectedMatch||T.document&&T.document.nodeType!==11)return P}catch{Et(M,!0)}return Ie(M,B,null,[T]).length>0},Ie.contains=function(T,M){return(T.ownerDocument||T)!=B&&L(T),Nt(T,M)},Ie.attr=function(T,M){(T.ownerDocument||T)!=B&&L(T);var P=l.attrHandle[M.toLowerCase()],K=P&&Vn.call(l.attrHandle,M.toLowerCase())?P(T,M,!ge):void 0;return K!==void 0?K:u.attributes||!ge?T.getAttribute(M):(K=T.getAttributeNode(M))&&K.specified?K.value:null},Ie.escape=function(T){return(T+"").replace(na,sa)},Ie.error=function(T){throw new Error("Syntax error, unrecognized expression: "+T)},Ie.uniqueSort=function(T){var M,P=[],K=0,F=0;if(G=!u.detectDuplicates,j=!u.sortStable&&T.slice(0),T.sort(Fn),G){for(;M=T[F++];)M===T[F]&&(K=P.push(F));for(;K--;)T.splice(P[K],1)}return j=null,T},m=Ie.getText=function(T){var M,P="",K=0,F=T.nodeType;if(F){if(F===1||F===9||F===11){if(typeof T.textContent=="string")return T.textContent;for(T=T.firstChild;T;T=T.nextSibling)P+=m(T)}else if(F===3||F===4)return T.nodeValue}else for(;M=T[K++];)P+=m(M);return P},l=Ie.selectors={cacheLength:50,createPseudo:Ut,match:mi,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(T){return T[1]=T[1].replace(un,ln),T[3]=(T[3]||T[4]||T[5]||"").replace(un,ln),T[2]==="~="&&(T[3]=" "+T[3]+" "),T.slice(0,4)},CHILD:function(T){return T[1]=T[1].toLowerCase(),T[1].slice(0,3)==="nth"?(T[3]||Ie.error(T[0]),T[4]=+(T[4]?T[5]+(T[6]||1):2*(T[3]==="even"||T[3]==="odd")),T[5]=+(T[7]+T[8]||T[3]==="odd")):T[3]&&Ie.error(T[0]),T},PSEUDO:function(T){var M,P=!T[6]&&T[2];return mi.CHILD.test(T[0])?null:(T[3]?T[2]=T[4]||T[5]||"":P&&Ru.test(P)&&(M=_(P,!0))&&(M=P.indexOf(")",P.length-M)-P.length)&&(T[0]=T[0].slice(0,M),T[2]=P.slice(0,M)),T.slice(0,3))}},filter:{TAG:function(T){var M=T.replace(un,ln).toLowerCase();return T==="*"?function(){return!0}:function(P){return P.nodeName&&P.nodeName.toLowerCase()===M}},CLASS:function(T){var M=$e[T+" "];return M||(M=new RegExp("(^|"+Ee+")"+T+"("+Ee+"|$)"))&&$e(T,function(P){return M.test(typeof P.className=="string"&&P.className||typeof P.getAttribute<"u"&&P.getAttribute("class")||"")})},ATTR:function(T,M,P){return function(K){var F=Ie.attr(K,T);return F==null?M==="!=":M?(F+="",M==="="?F===P:M==="!="?F!==P:M==="^="?P&&F.indexOf(P)===0:M==="*="?P&&F.indexOf(P)>-1:M==="$="?P&&F.slice(-P.length)===P:M==="~="?(" "+F.replace(Ou," ")+" ").indexOf(P)>-1:M==="|="?F===P||F.slice(0,P.length+1)===P+"-":!1):!0}},CHILD:function(T,M,P,K,F){var $=T.slice(0,3)!=="nth",X=T.slice(-4)!=="last",J=M==="of-type";return K===1&&F===0?function(ne){return!!ne.parentNode}:function(ne,fe,he){var pe,Te,Re,de,st,ht,Mt=$!==X?"nextSibling":"previousSibling",Ke=ne.parentNode,Es=J&&ne.nodeName.toLowerCase(),Ms=!he&&!J,Ot=!1;if(Ke){if($){for(;Mt;){for(de=ne;de=de[Mt];)if(J?de.nodeName.toLowerCase()===Es:de.nodeType===1)return!1;ht=Mt=T==="only"&&!ht&&"nextSibling"}return!0}if(ht=[X?Ke.firstChild:Ke.lastChild],X&&Ms){for(de=Ke,Re=de[Me]||(de[Me]={}),Te=Re[de.uniqueID]||(Re[de.uniqueID]={}),pe=Te[T]||[],st=pe[0]===yt&&pe[1],Ot=st&&pe[2],de=st&&Ke.childNodes[st];de=++st&&de&&de[Mt]||(Ot=st=0)||ht.pop();)if(de.nodeType===1&&++Ot&&de===ne){Te[T]=[yt,st,Ot];break}}else if(Ms&&(de=ne,Re=de[Me]||(de[Me]={}),Te=Re[de.uniqueID]||(Re[de.uniqueID]={}),pe=Te[T]||[],st=pe[0]===yt&&pe[1],Ot=st),Ot===!1)for(;(de=++st&&de&&de[Mt]||(Ot=st=0)||ht.pop())&&!((J?de.nodeName.toLowerCase()===Es:de.nodeType===1)&&++Ot&&(Ms&&(Re=de[Me]||(de[Me]={}),Te=Re[de.uniqueID]||(Re[de.uniqueID]={}),Te[T]=[yt,Ot]),de===ne)););return Ot-=F,Ot===K||Ot%K===0&&Ot/K>=0}}},PSEUDO:function(T,M){var P,K=l.pseudos[T]||l.setFilters[T.toLowerCase()]||Ie.error("unsupported pseudo: "+T);return K[Me]?K(M):K.length>1?(P=[T,T,"",M],l.setFilters.hasOwnProperty(T.toLowerCase())?Ut(function(F,$){for(var X,J=K(F,M),ne=J.length;ne--;)X=Ln(F,J[ne]),F[X]=!($[X]=J[ne])}):function(F){return K(F,0,P)}):K}},pseudos:{not:Ut(function(T){var M=[],P=[],K=O(T.replace(pi,"$1"));return K[Me]?Ut(function(F,$,X,J){for(var ne,fe=K(F,null,J,[]),he=F.length;he--;)(ne=fe[he])&&(F[he]=!($[he]=ne))}):function(F,$,X){return M[0]=F,K(M,null,X,P),M[0]=null,!P.pop()}}),has:Ut(function(T){return function(M){return Ie(T,M).length>0}}),contains:Ut(function(T){return T=T.replace(un,ln),function(M){return(M.textContent||m(M)).indexOf(T)>-1}}),lang:Ut(function(T){return Pu.test(T||"")||Ie.error("unsupported lang: "+T),T=T.replace(un,ln).toLowerCase(),function(M){var P;do if(P=ge?M.lang:M.getAttribute("xml:lang")||M.getAttribute("lang"))return P=P.toLowerCase(),P===T||P.indexOf(T+"-")===0;while((M=M.parentNode)&&M.nodeType===1);return!1}}),target:function(T){var M=s.location&&s.location.hash;return M&&M.slice(1)===T.id},root:function(T){return T===oe},focus:function(T){return T===B.activeElement&&(!B.hasFocus||B.hasFocus())&&!!(T.type||T.href||~T.tabIndex)},enabled:oa(!1),disabled:oa(!0),checked:function(T){var M=T.nodeName.toLowerCase();return M==="input"&&!!T.checked||M==="option"&&!!T.selected},selected:function(T){return T.parentNode&&T.parentNode.selectedIndex,T.selected===!0},empty:function(T){for(T=T.firstChild;T;T=T.nextSibling)if(T.nodeType<6)return!1;return!0},parent:function(T){return!l.pseudos.empty(T)},header:function(T){return Vu.test(T.nodeName)},input:function(T){return Fu.test(T.nodeName)},button:function(T){var M=T.nodeName.toLowerCase();return M==="input"&&T.type==="button"||M==="button"},text:function(T){var M;return T.nodeName.toLowerCase()==="input"&&T.type==="text"&&((M=T.getAttribute("type"))==null||M.toLowerCase()==="text")},first:Wn(function(){return[0]}),last:Wn(function(T,M){return[M-1]}),eq:Wn(function(T,M,P){return[P<0?P+M:P]}),even:Wn(function(T,M){for(var P=0;P<M;P+=2)T.push(P);return T}),odd:Wn(function(T,M){for(var P=1;P<M;P+=2)T.push(P);return T}),lt:Wn(function(T,M,P){for(var K=P<0?P+M:P>M?M:P;--K>=0;)T.push(K);return T}),gt:Wn(function(T,M,P){for(var K=P<0?P+M:P;++K<M;)T.push(K);return T})}},l.pseudos.nth=l.pseudos.eq;for(o in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})l.pseudos[o]=Wu(o);for(o in{submit:!0,reset:!0})l.pseudos[o]=Bu(o);function aa(){}aa.prototype=l.filters=l.pseudos,l.setFilters=new aa,_=Ie.tokenize=function(T,M){var P,K,F,$,X,J,ne,fe=ks[T+" "];if(fe)return M?0:fe.slice(0);for(X=T,J=[],ne=l.preFilter;X;){(!P||(K=Du.exec(X)))&&(K&&(X=X.slice(K[0].length)||X),J.push(F=[])),P=!1,(K=ta.exec(X))&&(P=K.shift(),F.push({value:P,type:K[0].replace(pi," ")}),X=X.slice(P.length));for($ in l.filter)(K=mi[$].exec(X))&&(!ne[$]||(K=ne[$](K)))&&(P=K.shift(),F.push({value:P,type:$,matches:K}),X=X.slice(P.length));if(!P)break}return M?X.length:X?Ie.error(T):ks(T,J).slice(0)};function vi(T){for(var M=0,P=T.length,K="";M<P;M++)K+=T[M].value;return K}function _i(T,M,P){var K=M.dir,F=M.next,$=F||K,X=P&&$==="parentNode",J=Ae++;return M.first?function(ne,fe,he){for(;ne=ne[K];)if(ne.nodeType===1||X)return T(ne,fe,he);return!1}:function(ne,fe,he){var pe,Te,Re,de=[yt,J];if(he){for(;ne=ne[K];)if((ne.nodeType===1||X)&&T(ne,fe,he))return!0}else for(;ne=ne[K];)if(ne.nodeType===1||X)if(Re=ne[Me]||(ne[Me]={}),Te=Re[ne.uniqueID]||(Re[ne.uniqueID]={}),F&&F===ne.nodeName.toLowerCase())ne=ne[K]||ne;else{if((pe=Te[$])&&pe[0]===yt&&pe[1]===J)return de[2]=pe[2];if(Te[$]=de,de[2]=T(ne,fe,he))return!0}return!1}}function Er(T){return T.length>1?function(M,P,K){for(var F=T.length;F--;)if(!T[F](M,P,K))return!1;return!0}:T[0]}function Ku(T,M,P){for(var K=0,F=M.length;K<F;K++)Ie(T,M[K],P);return P}function yi(T,M,P,K,F){for(var $,X=[],J=0,ne=T.length,fe=M!=null;J<ne;J++)($=T[J])&&(!P||P($,K,F))&&(X.push($),fe&&M.push(J));return X}function Mr(T,M,P,K,F,$){return K&&!K[Me]&&(K=Mr(K)),F&&!F[Me]&&(F=Mr(F,$)),Ut(function(X,J,ne,fe){var he,pe,Te,Re=[],de=[],st=J.length,ht=X||Ku(M||"*",ne.nodeType?[ne]:ne,[]),Mt=T&&(X||!M)?yi(ht,Re,T,ne,fe):ht,Ke=P?F||(X?T:st||K)?[]:J:Mt;if(P&&P(Mt,Ke,ne,fe),K)for(he=yi(Ke,de),K(he,[],ne,fe),pe=he.length;pe--;)(Te=he[pe])&&(Ke[de[pe]]=!(Mt[de[pe]]=Te));if(X){if(F||T){if(F){for(he=[],pe=Ke.length;pe--;)(Te=Ke[pe])&&he.push(Mt[pe]=Te);F(null,Ke=[],he,fe)}for(pe=Ke.length;pe--;)(Te=Ke[pe])&&(he=F?Ln(X,Te):Re[pe])>-1&&(X[he]=!(J[he]=Te))}}else Ke=yi(Ke===J?Ke.splice(st,Ke.length):Ke),F?F(null,J,Ke,fe):xn.apply(J,Ke)})}function Or(T){for(var M,P,K,F=T.length,$=l.relative[T[0].type],X=$||l.relative[" "],J=$?1:0,ne=_i(function(pe){return pe===M},X,!0),fe=_i(function(pe){return Ln(M,pe)>-1},X,!0),he=[function(pe,Te,Re){var de=!$&&(Re||Te!==V)||((M=Te).nodeType?ne(pe,Te,Re):fe(pe,Te,Re));return M=null,de}];J<F;J++)if(P=l.relative[T[J].type])he=[_i(Er(he),P)];else{if(P=l.filter[T[J].type].apply(null,T[J].matches),P[Me]){for(K=++J;K<F&&!l.relative[T[K].type];K++);return Mr(J>1&&Er(he),J>1&&vi(T.slice(0,J-1).concat({value:T[J-2].type===" "?"*":""})).replace(pi,"$1"),P,J<K&&Or(T.slice(J,K)),K<F&&Or(T=T.slice(K)),K<F&&vi(T))}he.push(P)}return Er(he)}function Uu(T,M){var P=M.length>0,K=T.length>0,F=function($,X,J,ne,fe){var he,pe,Te,Re=0,de="0",st=$&&[],ht=[],Mt=V,Ke=$||K&&l.find.TAG("*",fe),Es=yt+=Mt==null?1:Math.random()||.1,Ms=Ke.length;for(fe&&(V=X==B||X||fe);de!==Ms&&(he=Ke[de])!=null;de++){if(K&&he){for(pe=0,!X&&he.ownerDocument!=B&&(L(he),J=!ge);Te=T[pe++];)if(Te(he,X||B,J)){ne.push(he);break}fe&&(yt=Es)}P&&((he=!Te&&he)&&Re--,$&&st.push(he))}if(Re+=de,P&&de!==Re){for(pe=0;Te=M[pe++];)Te(st,ht,X,J);if($){if(Re>0)for(;de--;)st[de]||ht[de]||(ht[de]=Cn.call(ne));ht=yi(ht)}xn.apply(ne,ht),fe&&!$&&ht.length>0&&Re+M.length>1&&Ie.uniqueSort(ne)}return fe&&(yt=Es,V=Mt),st};return P?Ut(F):F}return O=Ie.compile=function(T,M){var P,K=[],F=[],$=di[T+" "];if(!$){for(M||(M=_(T)),P=M.length;P--;)$=Or(M[P]),$[Me]?K.push($):F.push($);$=di(T,Uu(F,K)),$.selector=T}return $},E=Ie.select=function(T,M,P,K){var F,$,X,J,ne,fe=typeof T=="function"&&T,he=!K&&_(T=fe.selector||T);if(P=P||[],he.length===1){if($=he[0]=he[0].slice(0),$.length>2&&(X=$[0]).type==="ID"&&M.nodeType===9&&ge&&l.relative[$[1].type]){if(M=(l.find.ID(X.matches[0].replace(un,ln),M)||[])[0],M)fe&&(M=M.parentNode);else return P;T=T.slice($.shift().value.length)}for(F=mi.needsContext.test(T)?0:$.length;F--&&(X=$[F],!l.relative[J=X.type]);)if((ne=l.find[J])&&(K=ne(X.matches[0].replace(un,ln),Ar.test($[0].type)&&Nr(M.parentNode)||M))){if($.splice(F,1),T=K.length&&vi($),!T)return xn.apply(P,K),P;break}}return(fe||O(T,he))(K,M,!ge,P,!M||Ar.test(T)&&Nr(M.parentNode)||M),P},u.sortStable=Me.split("").sort(Fn).join("")===Me,u.detectDuplicates=!!G,L(),u.sortDetached=Ht(function(T){return T.compareDocumentPosition(B.createElement("fieldset"))&1}),Ht(function(T){return T.innerHTML="<a href='#'></a>",T.firstChild.getAttribute("href")==="#"})||kr("type|href|height|width",function(T,M,P){if(!P)return T.getAttribute(M,M.toLowerCase()==="type"?1:2)}),(!u.attributes||!Ht(function(T){return T.innerHTML="<input/>",T.firstChild.setAttribute("value",""),T.firstChild.getAttribute("value")===""}))&&kr("value",function(T,M,P){if(!P&&T.nodeName.toLowerCase()==="input")return T.defaultValue}),Ht(function(T){return T.getAttribute("disabled")==null})||kr(xr,function(T,M,P){var K;if(!P)return T[M]===!0?M.toLowerCase():(K=T.getAttributeNode(M))&&K.specified?K.value:null}),Ie}(e);c.find=q,c.expr=q.selectors,c.expr[":"]=c.expr.pseudos,c.uniqueSort=c.unique=q.uniqueSort,c.text=q.getText,c.isXMLDoc=q.isXML,c.contains=q.contains,c.escapeSelector=q.escape;var H=function(s,o,u){for(var l=[],m=u!==void 0;(s=s[o])&&s.nodeType!==9;)if(s.nodeType===1){if(m&&c(s).is(u))break;l.push(s)}return l},U=function(s,o){for(var u=[];s;s=s.nextSibling)s.nodeType===1&&s!==o&&u.push(s);return u},z=c.expr.match.needsContext;function W(s,o){return s.nodeName&&s.nodeName.toLowerCase()===o.toLowerCase()}var se=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Q(s,o,u){return k(o)?c.grep(s,function(l,m){return!!o.call(l,m,l)!==u}):o.nodeType?c.grep(s,function(l){return l===o!==u}):typeof o!="string"?c.grep(s,function(l){return d.call(o,l)>-1!==u}):c.filter(o,s,u)}c.filter=function(s,o,u){var l=o[0];return u&&(s=":not("+s+")"),o.length===1&&l.nodeType===1?c.find.matchesSelector(l,s)?[l]:[]:c.find.matches(s,c.grep(o,function(m){return m.nodeType===1}))},c.fn.extend({find:function(s){var o,u,l=this.length,m=this;if(typeof s!="string")return this.pushStack(c(s).filter(function(){for(o=0;o<l;o++)if(c.contains(m[o],this))return!0}));for(u=this.pushStack([]),o=0;o<l;o++)c.find(s,m[o],u);return l>1?c.uniqueSort(u):u},filter:function(s){return this.pushStack(Q(this,s||[],!1))},not:function(s){return this.pushStack(Q(this,s||[],!0))},is:function(s){return!!Q(this,typeof s=="string"&&z.test(s)?c(s):s||[],!1).length}});var ue,ee=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,ie=c.fn.init=function(s,o,u){var l,m;if(!s)return this;if(u=u||ue,typeof s=="string")if(s[0]==="<"&&s[s.length-1]===">"&&s.length>=3?l=[null,s,null]:l=ee.exec(s),l&&(l[1]||!o))if(l[1]){if(o=o instanceof c?o[0]:o,c.merge(this,c.parseHTML(l[1],o&&o.nodeType?o.ownerDocument||o:v,!0)),se.test(l[1])&&c.isPlainObject(o))for(l in o)k(this[l])?this[l](o[l]):this.attr(l,o[l]);return this}else return m=v.getElementById(l[2]),m&&(this[0]=m,this.length=1),this;else return!o||o.jquery?(o||u).find(s):this.constructor(o).find(s);else{if(s.nodeType)return this[0]=s,this.length=1,this;if(k(s))return u.ready!==void 0?u.ready(s):s(c)}return c.makeArray(s,this)};ie.prototype=c.fn,ue=c(v);var _e=/^(?:parents|prev(?:Until|All))/,le={children:!0,contents:!0,next:!0,prev:!0};c.fn.extend({has:function(s){var o=c(s,this),u=o.length;return this.filter(function(){for(var l=0;l<u;l++)if(c.contains(this,o[l]))return!0})},closest:function(s,o){var u,l=0,m=this.length,g=[],_=typeof s!="string"&&c(s);if(!z.test(s)){for(;l<m;l++)for(u=this[l];u&&u!==o;u=u.parentNode)if(u.nodeType<11&&(_?_.index(u)>-1:u.nodeType===1&&c.find.matchesSelector(u,s))){g.push(u);break}}return this.pushStack(g.length>1?c.uniqueSort(g):g)},index:function(s){return s?typeof s=="string"?d.call(c(s),this[0]):d.call(this,s.jquery?s[0]:s):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(s,o){return this.pushStack(c.uniqueSort(c.merge(this.get(),c(s,o))))},addBack:function(s){return this.add(s==null?this.prevObject:this.prevObject.filter(s))}});function be(s,o){for(;(s=s[o])&&s.nodeType!==1;);return s}c.each({parent:function(s){var o=s.parentNode;return o&&o.nodeType!==11?o:null},parents:function(s){return H(s,"parentNode")},parentsUntil:function(s,o,u){return H(s,"parentNode",u)},next:function(s){return be(s,"nextSibling")},prev:function(s){return be(s,"previousSibling")},nextAll:function(s){return H(s,"nextSibling")},prevAll:function(s){return H(s,"previousSibling")},nextUntil:function(s,o,u){return H(s,"nextSibling",u)},prevUntil:function(s,o,u){return H(s,"previousSibling",u)},siblings:function(s){return U((s.parentNode||{}).firstChild,s)},children:function(s){return U(s.firstChild)},contents:function(s){return s.contentDocument!=null&&r(s.contentDocument)?s.contentDocument:(W(s,"template")&&(s=s.content||s),c.merge([],s.childNodes))}},function(s,o){c.fn[s]=function(u,l){var m=c.map(this,o,u);return s.slice(-5)!=="Until"&&(l=u),l&&typeof l=="string"&&(m=c.filter(l,m)),this.length>1&&(le[s]||c.uniqueSort(m),_e.test(s)&&m.reverse()),this.pushStack(m)}});var ce=/[^\x20\t\r\n\f]+/g;function Ne(s){var o={};return c.each(s.match(ce)||[],function(u,l){o[l]=!0}),o}c.Callbacks=function(s){s=typeof s=="string"?Ne(s):c.extend({},s);var o,u,l,m,g=[],_=[],O=-1,E=function(){for(m=m||s.once,l=o=!0;_.length;O=-1)for(u=_.shift();++O<g.length;)g[O].apply(u[0],u[1])===!1&&s.stopOnFalse&&(O=g.length,u=!1);s.memory||(u=!1),o=!1,m&&(u?g=[]:g="")},V={add:function(){return g&&(u&&!o&&(O=g.length-1,_.push(u)),function j(G){c.each(G,function(L,B){k(B)?(!s.unique||!V.has(B))&&g.push(B):B&&B.length&&A(B)!=="string"&&j(B)})}(arguments),u&&!o&&E()),this},remove:function(){return c.each(arguments,function(j,G){for(var L;(L=c.inArray(G,g,L))>-1;)g.splice(L,1),L<=O&&O--}),this},has:function(j){return j?c.inArray(j,g)>-1:g.length>0},empty:function(){return g&&(g=[]),this},disable:function(){return m=_=[],g=u="",this},disabled:function(){return!g},lock:function(){return m=_=[],!u&&!o&&(g=u=""),this},locked:function(){return!!m},fireWith:function(j,G){return m||(G=G||[],G=[j,G.slice?G.slice():G],_.push(G),o||E()),this},fire:function(){return V.fireWith(this,arguments),this},fired:function(){return!!l}};return V};function Qe(s){return s}function rt(s){throw s}function we(s,o,u,l){var m;try{s&&k(m=s.promise)?m.call(s).done(o).fail(u):s&&k(m=s.then)?m.call(s,o,u):o.apply(void 0,[s].slice(l))}catch(g){u.apply(void 0,[g])}}c.extend({Deferred:function(s){var o=[["notify","progress",c.Callbacks("memory"),c.Callbacks("memory"),2],["resolve","done",c.Callbacks("once memory"),c.Callbacks("once memory"),0,"resolved"],["reject","fail",c.Callbacks("once memory"),c.Callbacks("once memory"),1,"rejected"]],u="pending",l={state:function(){return u},always:function(){return m.done(arguments).fail(arguments),this},catch:function(g){return l.then(null,g)},pipe:function(){var g=arguments;return c.Deferred(function(_){c.each(o,function(O,E){var V=k(g[E[4]])&&g[E[4]];m[E[1]](function(){var j=V&&V.apply(this,arguments);j&&k(j.promise)?j.promise().progress(_.notify).done(_.resolve).fail(_.reject):_[E[0]+"With"](this,V?[j]:arguments)})}),g=null}).promise()},then:function(g,_,O){var E=0;function V(j,G,L,B){return function(){var oe=this,ge=arguments,ae=function(){var Je,Nt;if(!(j<E)){if(Je=L.apply(oe,ge),Je===G.promise())throw new TypeError("Thenable self-resolution");Nt=Je&&(typeof Je=="object"||typeof Je=="function")&&Je.then,k(Nt)?B?Nt.call(Je,V(E,G,Qe,B),V(E,G,rt,B)):(E++,Nt.call(Je,V(E,G,Qe,B),V(E,G,rt,B),V(E,G,Qe,G.notifyWith))):(L!==Qe&&(oe=void 0,ge=[Je]),(B||G.resolveWith)(oe,ge))}},nt=B?ae:function(){try{ae()}catch(Je){c.Deferred.exceptionHook&&c.Deferred.exceptionHook(Je,nt.stackTrace),j+1>=E&&(L!==rt&&(oe=void 0,ge=[Je]),G.rejectWith(oe,ge))}};j?nt():(c.Deferred.getStackHook&&(nt.stackTrace=c.Deferred.getStackHook()),e.setTimeout(nt))}}return c.Deferred(function(j){o[0][3].add(V(0,j,k(O)?O:Qe,j.notifyWith)),o[1][3].add(V(0,j,k(g)?g:Qe)),o[2][3].add(V(0,j,k(_)?_:rt))}).promise()},promise:function(g){return g!=null?c.extend(g,l):l}},m={};return c.each(o,function(g,_){var O=_[2],E=_[5];l[_[1]]=O.add,E&&O.add(function(){u=E},o[3-g][2].disable,o[3-g][3].disable,o[0][2].lock,o[0][3].lock),O.add(_[3].fire),m[_[0]]=function(){return m[_[0]+"With"](this===m?void 0:this,arguments),this},m[_[0]+"With"]=O.fireWith}),l.promise(m),s&&s.call(m,m),m},when:function(s){var o=arguments.length,u=o,l=Array(u),m=a.call(arguments),g=c.Deferred(),_=function(O){return function(E){l[O]=this,m[O]=arguments.length>1?a.call(arguments):E,--o||g.resolveWith(l,m)}};if(o<=1&&(we(s,g.done(_(u)).resolve,g.reject,!o),g.state()==="pending"||k(m[u]&&m[u].then)))return g.then();for(;u--;)we(m[u],_(u),g.reject);return g.promise()}});var qe=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;c.Deferred.exceptionHook=function(s,o){e.console&&e.console.warn&&s&&qe.test(s.name)&&e.console.warn("jQuery.Deferred exception: "+s.message,s.stack,o)},c.readyException=function(s){e.setTimeout(function(){throw s})};var tt=c.Deferred();c.fn.ready=function(s){return tt.then(s).catch(function(o){c.readyException(o)}),this},c.extend({isReady:!1,readyWait:1,ready:function(s){(s===!0?--c.readyWait:c.isReady)||(c.isReady=!0,!(s!==!0&&--c.readyWait>0)&&tt.resolveWith(v,[c]))}}),c.ready.then=tt.then;function re(){v.removeEventListener("DOMContentLoaded",re),e.removeEventListener("load",re),c.ready()}v.readyState==="complete"||v.readyState!=="loading"&&!v.documentElement.doScroll?e.setTimeout(c.ready):(v.addEventListener("DOMContentLoaded",re),e.addEventListener("load",re));var ut=function(s,o,u,l,m,g,_){var O=0,E=s.length,V=u==null;if(A(u)==="object"){m=!0;for(O in u)ut(s,o,O,u[O],!0,g,_)}else if(l!==void 0&&(m=!0,k(l)||(_=!0),V&&(_?(o.call(s,l),o=null):(V=o,o=function(j,G,L){return V.call(c(j),L)})),o))for(;O<E;O++)o(s[O],u,_?l:l.call(s[O],O,o(s[O],u)));return m?s:V?o.call(s):E?o(s[0],u):g},an=/^-ms-/,bn=/-([a-z])/g;function wn(s,o){return o.toUpperCase()}function Pt(s){return s.replace(an,"ms-").replace(bn,wn)}var Rn=function(s){return s.nodeType===1||s.nodeType===9||!+s.nodeType};function te(){this.expando=c.expando+te.uid++}te.uid=1,te.prototype={cache:function(s){var o=s[this.expando];return o||(o={},Rn(s)&&(s.nodeType?s[this.expando]=o:Object.defineProperty(s,this.expando,{value:o,configurable:!0}))),o},set:function(s,o,u){var l,m=this.cache(s);if(typeof o=="string")m[Pt(o)]=u;else for(l in o)m[Pt(l)]=o[l];return m},get:function(s,o){return o===void 0?this.cache(s):s[this.expando]&&s[this.expando][Pt(o)]},access:function(s,o,u){return o===void 0||o&&typeof o=="string"&&u===void 0?this.get(s,o):(this.set(s,o,u),u!==void 0?u:o)},remove:function(s,o){var u,l=s[this.expando];if(l!==void 0){if(o!==void 0)for(Array.isArray(o)?o=o.map(Pt):(o=Pt(o),o=o in l?[o]:o.match(ce)||[]),u=o.length;u--;)delete l[o[u]];(o===void 0||c.isEmptyObject(l))&&(s.nodeType?s[this.expando]=void 0:delete s[this.expando])}},hasData:function(s){var o=s[this.expando];return o!==void 0&&!c.isEmptyObject(o)}};var Z=new te,xe=new te,Le=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Se=/[A-Z]/g;function Be(s){return s==="true"?!0:s==="false"?!1:s==="null"?null:s===+s+""?+s:Le.test(s)?JSON.parse(s):s}function dt(s,o,u){var l;if(u===void 0&&s.nodeType===1)if(l="data-"+o.replace(Se,"-$&").toLowerCase(),u=s.getAttribute(l),typeof u=="string"){try{u=Be(u)}catch{}xe.set(s,o,u)}else u=void 0;return u}c.extend({hasData:function(s){return xe.hasData(s)||Z.hasData(s)},data:function(s,o,u){return xe.access(s,o,u)},removeData:function(s,o){xe.remove(s,o)},_data:function(s,o,u){return Z.access(s,o,u)},_removeData:function(s,o){Z.remove(s,o)}}),c.fn.extend({data:function(s,o){var u,l,m,g=this[0],_=g&&g.attributes;if(s===void 0){if(this.length&&(m=xe.get(g),g.nodeType===1&&!Z.get(g,"hasDataAttrs"))){for(u=_.length;u--;)_[u]&&(l=_[u].name,l.indexOf("data-")===0&&(l=Pt(l.slice(5)),dt(g,l,m[l])));Z.set(g,"hasDataAttrs",!0)}return m}return typeof s=="object"?this.each(function(){xe.set(this,s)}):ut(this,function(O){var E;if(g&&O===void 0)return E=xe.get(g,s),E!==void 0||(E=dt(g,s),E!==void 0)?E:void 0;this.each(function(){xe.set(this,s,O)})},null,o,arguments.length>1,null,!0)},removeData:function(s){return this.each(function(){xe.remove(this,s)})}}),c.extend({queue:function(s,o,u){var l;if(s)return o=(o||"fx")+"queue",l=Z.get(s,o),u&&(!l||Array.isArray(u)?l=Z.access(s,o,c.makeArray(u)):l.push(u)),l||[]},dequeue:function(s,o){o=o||"fx";var u=c.queue(s,o),l=u.length,m=u.shift(),g=c._queueHooks(s,o),_=function(){c.dequeue(s,o)};m==="inprogress"&&(m=u.shift(),l--),m&&(o==="fx"&&u.unshift("inprogress"),delete g.stop,m.call(s,_,g)),!l&&g&&g.empty.fire()},_queueHooks:function(s,o){var u=o+"queueHooks";return Z.get(s,u)||Z.access(s,u,{empty:c.Callbacks("once memory").add(function(){Z.remove(s,[o+"queue",u])})})}}),c.fn.extend({queue:function(s,o){var u=2;return typeof s!="string"&&(o=s,s="fx",u--),arguments.length<u?c.queue(this[0],s):o===void 0?this:this.each(function(){var l=c.queue(this,s,o);c._queueHooks(this,s),s==="fx"&&l[0]!=="inprogress"&&c.dequeue(this,s)})},dequeue:function(s){return this.each(function(){c.dequeue(this,s)})},clearQueue:function(s){return this.queue(s||"fx",[])},promise:function(s,o){var u,l=1,m=c.Deferred(),g=this,_=this.length,O=function(){--l||m.resolveWith(g,[g])};for(typeof s!="string"&&(o=s,s=void 0),s=s||"fx";_--;)u=Z.get(g[_],s+"queueHooks"),u&&u.empty&&(l++,u.empty.add(O));return O(),m.promise(o)}});var Wt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Bt=new RegExp("^(?:([+-])=|)("+Wt+")([a-z%]*)$","i"),kt=["Top","Right","Bottom","Left"],cn=v.documentElement,Tn=function(s){return c.contains(s.ownerDocument,s)},$c={composed:!0};cn.getRootNode&&(Tn=function(s){return c.contains(s.ownerDocument,s)||s.getRootNode($c)===s.ownerDocument});var ci=function(s,o){return s=o||s,s.style.display==="none"||s.style.display===""&&Tn(s)&&c.css(s,"display")==="none"};function Co(s,o,u,l){var m,g,_=20,O=l?function(){return l.cur()}:function(){return c.css(s,o,"")},E=O(),V=u&&u[3]||(c.cssNumber[o]?"":"px"),j=s.nodeType&&(c.cssNumber[o]||V!=="px"&&+E)&&Bt.exec(c.css(s,o));if(j&&j[3]!==V){for(E=E/2,V=V||j[3],j=+E||1;_--;)c.style(s,o,j+V),(1-g)*(1-(g=O()/E||.5))<=0&&(_=0),j=j/g;j=j*2,c.style(s,o,j+V),u=u||[]}return u&&(j=+j||+E||0,m=u[1]?j+(u[1]+1)*u[2]:+u[2],l&&(l.unit=V,l.start=j,l.end=m)),m}var xo={};function zc(s){var o,u=s.ownerDocument,l=s.nodeName,m=xo[l];return m||(o=u.body.appendChild(u.createElement(l)),m=c.css(o,"display"),o.parentNode.removeChild(o),m==="none"&&(m="block"),xo[l]=m,m)}function Jn(s,o){for(var u,l,m=[],g=0,_=s.length;g<_;g++)l=s[g],l.style&&(u=l.style.display,o?(u==="none"&&(m[g]=Z.get(l,"display")||null,m[g]||(l.style.display="")),l.style.display===""&&ci(l)&&(m[g]=zc(l))):u!=="none"&&(m[g]="none",Z.set(l,"display",u)));for(g=0;g<_;g++)m[g]!=null&&(s[g].style.display=m[g]);return s}c.fn.extend({show:function(){return Jn(this,!0)},hide:function(){return Jn(this)},toggle:function(s){return typeof s=="boolean"?s?this.show():this.hide():this.each(function(){ci(this)?c(this).show():c(this).hide()})}});var Ts=/^(?:checkbox|radio)$/i,So=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ao=/^$|^module$|\/(?:java|ecma)script/i;(function(){var s=v.createDocumentFragment(),o=s.appendChild(v.createElement("div")),u=v.createElement("input");u.setAttribute("type","radio"),u.setAttribute("checked","checked"),u.setAttribute("name","t"),o.appendChild(u),x.checkClone=o.cloneNode(!0).cloneNode(!0).lastChild.checked,o.innerHTML="<textarea>x</textarea>",x.noCloneChecked=!!o.cloneNode(!0).lastChild.defaultValue,o.innerHTML="<option></option>",x.option=!!o.lastChild})();var qt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};qt.tbody=qt.tfoot=qt.colgroup=qt.caption=qt.thead,qt.th=qt.td,x.option||(qt.optgroup=qt.option=[1,"<select multiple='multiple'>","</select>"]);function vt(s,o){var u;return typeof s.getElementsByTagName<"u"?u=s.getElementsByTagName(o||"*"):typeof s.querySelectorAll<"u"?u=s.querySelectorAll(o||"*"):u=[],o===void 0||o&&W(s,o)?c.merge([s],u):u}function lr(s,o){for(var u=0,l=s.length;u<l;u++)Z.set(s[u],"globalEval",!o||Z.get(o[u],"globalEval"))}var Gc=/<|&#?\w+;/;function ko(s,o,u,l,m){for(var g,_,O,E,V,j,G=o.createDocumentFragment(),L=[],B=0,oe=s.length;B<oe;B++)if(g=s[B],g||g===0)if(A(g)==="object")c.merge(L,g.nodeType?[g]:g);else if(!Gc.test(g))L.push(o.createTextNode(g));else{for(_=_||G.appendChild(o.createElement("div")),O=(So.exec(g)||["",""])[1].toLowerCase(),E=qt[O]||qt._default,_.innerHTML=E[1]+c.htmlPrefilter(g)+E[2],j=E[0];j--;)_=_.lastChild;c.merge(L,_.childNodes),_=G.firstChild,_.textContent=""}for(G.textContent="",B=0;g=L[B++];){if(l&&c.inArray(g,l)>-1){m&&m.push(g);continue}if(V=Tn(g),_=vt(G.appendChild(g),"script"),V&&lr(_),u)for(j=0;g=_[j++];)Ao.test(g.type||"")&&u.push(g)}return G}var No=/^([^.]*)(?:\.(.+)|)/;function es(){return!0}function ts(){return!1}function Xc(s,o){return s===Zc()==(o==="focus")}function Zc(){try{return v.activeElement}catch{}}function hr(s,o,u,l,m,g){var _,O;if(typeof o=="object"){typeof u!="string"&&(l=l||u,u=void 0);for(O in o)hr(s,O,u,l,o[O],g);return s}if(l==null&&m==null?(m=u,l=u=void 0):m==null&&(typeof u=="string"?(m=l,l=void 0):(m=l,l=u,u=void 0)),m===!1)m=ts;else if(!m)return s;return g===1&&(_=m,m=function(E){return c().off(E),_.apply(this,arguments)},m.guid=_.guid||(_.guid=c.guid++)),s.each(function(){c.event.add(this,o,m,l,u)})}c.event={global:{},add:function(s,o,u,l,m){var g,_,O,E,V,j,G,L,B,oe,ge,ae=Z.get(s);if(!!Rn(s))for(u.handler&&(g=u,u=g.handler,m=g.selector),m&&c.find.matchesSelector(cn,m),u.guid||(u.guid=c.guid++),(E=ae.events)||(E=ae.events=Object.create(null)),(_=ae.handle)||(_=ae.handle=function(nt){return typeof c<"u"&&c.event.triggered!==nt.type?c.event.dispatch.apply(s,arguments):void 0}),o=(o||"").match(ce)||[""],V=o.length;V--;)O=No.exec(o[V])||[],B=ge=O[1],oe=(O[2]||"").split(".").sort(),B&&(G=c.event.special[B]||{},B=(m?G.delegateType:G.bindType)||B,G=c.event.special[B]||{},j=c.extend({type:B,origType:ge,data:l,handler:u,guid:u.guid,selector:m,needsContext:m&&c.expr.match.needsContext.test(m),namespace:oe.join(".")},g),(L=E[B])||(L=E[B]=[],L.delegateCount=0,(!G.setup||G.setup.call(s,l,oe,_)===!1)&&s.addEventListener&&s.addEventListener(B,_)),G.add&&(G.add.call(s,j),j.handler.guid||(j.handler.guid=u.guid)),m?L.splice(L.delegateCount++,0,j):L.push(j),c.event.global[B]=!0)},remove:function(s,o,u,l,m){var g,_,O,E,V,j,G,L,B,oe,ge,ae=Z.hasData(s)&&Z.get(s);if(!(!ae||!(E=ae.events))){for(o=(o||"").match(ce)||[""],V=o.length;V--;){if(O=No.exec(o[V])||[],B=ge=O[1],oe=(O[2]||"").split(".").sort(),!B){for(B in E)c.event.remove(s,B+o[V],u,l,!0);continue}for(G=c.event.special[B]||{},B=(l?G.delegateType:G.bindType)||B,L=E[B]||[],O=O[2]&&new RegExp("(^|\\.)"+oe.join("\\.(?:.*\\.|)")+"(\\.|$)"),_=g=L.length;g--;)j=L[g],(m||ge===j.origType)&&(!u||u.guid===j.guid)&&(!O||O.test(j.namespace))&&(!l||l===j.selector||l==="**"&&j.selector)&&(L.splice(g,1),j.selector&&L.delegateCount--,G.remove&&G.remove.call(s,j));_&&!L.length&&((!G.teardown||G.teardown.call(s,oe,ae.handle)===!1)&&c.removeEvent(s,B,ae.handle),delete E[B])}c.isEmptyObject(E)&&Z.remove(s,"handle events")}},dispatch:function(s){var o,u,l,m,g,_,O=new Array(arguments.length),E=c.event.fix(s),V=(Z.get(this,"events")||Object.create(null))[E.type]||[],j=c.event.special[E.type]||{};for(O[0]=E,o=1;o<arguments.length;o++)O[o]=arguments[o];if(E.delegateTarget=this,!(j.preDispatch&&j.preDispatch.call(this,E)===!1)){for(_=c.event.handlers.call(this,E,V),o=0;(m=_[o++])&&!E.isPropagationStopped();)for(E.currentTarget=m.elem,u=0;(g=m.handlers[u++])&&!E.isImmediatePropagationStopped();)(!E.rnamespace||g.namespace===!1||E.rnamespace.test(g.namespace))&&(E.handleObj=g,E.data=g.data,l=((c.event.special[g.origType]||{}).handle||g.handler).apply(m.elem,O),l!==void 0&&(E.result=l)===!1&&(E.preventDefault(),E.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,E),E.result}},handlers:function(s,o){var u,l,m,g,_,O=[],E=o.delegateCount,V=s.target;if(E&&V.nodeType&&!(s.type==="click"&&s.button>=1)){for(;V!==this;V=V.parentNode||this)if(V.nodeType===1&&!(s.type==="click"&&V.disabled===!0)){for(g=[],_={},u=0;u<E;u++)l=o[u],m=l.selector+" ",_[m]===void 0&&(_[m]=l.needsContext?c(m,this).index(V)>-1:c.find(m,this,null,[V]).length),_[m]&&g.push(l);g.length&&O.push({elem:V,handlers:g})}}return V=this,E<o.length&&O.push({elem:V,handlers:o.slice(E)}),O},addProp:function(s,o){Object.defineProperty(c.Event.prototype,s,{enumerable:!0,configurable:!0,get:k(o)?function(){if(this.originalEvent)return o(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[s]},set:function(u){Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:u})}})},fix:function(s){return s[c.expando]?s:new c.Event(s)},special:{load:{noBubble:!0},click:{setup:function(s){var o=this||s;return Ts.test(o.type)&&o.click&&W(o,"input")&&ui(o,"click",es),!1},trigger:function(s){var o=this||s;return Ts.test(o.type)&&o.click&&W(o,"input")&&ui(o,"click"),!0},_default:function(s){var o=s.target;return Ts.test(o.type)&&o.click&&W(o,"input")&&Z.get(o,"click")||W(o,"a")}},beforeunload:{postDispatch:function(s){s.result!==void 0&&s.originalEvent&&(s.originalEvent.returnValue=s.result)}}}};function ui(s,o,u){if(!u){Z.get(s,o)===void 0&&c.event.add(s,o,es);return}Z.set(s,o,!1),c.event.add(s,o,{namespace:!1,handler:function(l){var m,g,_=Z.get(this,o);if(l.isTrigger&1&&this[o]){if(_.length)(c.event.special[o]||{}).delegateType&&l.stopPropagation();else if(_=a.call(arguments),Z.set(this,o,_),m=u(this,o),this[o](),g=Z.get(this,o),_!==g||m?Z.set(this,o,!1):g={},_!==g)return l.stopImmediatePropagation(),l.preventDefault(),g&&g.value}else _.length&&(Z.set(this,o,{value:c.event.trigger(c.extend(_[0],c.Event.prototype),_.slice(1),this)}),l.stopImmediatePropagation())}})}c.removeEvent=function(s,o,u){s.removeEventListener&&s.removeEventListener(o,u)},c.Event=function(s,o){if(!(this instanceof c.Event))return new c.Event(s,o);s&&s.type?(this.originalEvent=s,this.type=s.type,this.isDefaultPrevented=s.defaultPrevented||s.defaultPrevented===void 0&&s.returnValue===!1?es:ts,this.target=s.target&&s.target.nodeType===3?s.target.parentNode:s.target,this.currentTarget=s.currentTarget,this.relatedTarget=s.relatedTarget):this.type=s,o&&c.extend(this,o),this.timeStamp=s&&s.timeStamp||Date.now(),this[c.expando]=!0},c.Event.prototype={constructor:c.Event,isDefaultPrevented:ts,isPropagationStopped:ts,isImmediatePropagationStopped:ts,isSimulated:!1,preventDefault:function(){var s=this.originalEvent;this.isDefaultPrevented=es,s&&!this.isSimulated&&s.preventDefault()},stopPropagation:function(){var s=this.originalEvent;this.isPropagationStopped=es,s&&!this.isSimulated&&s.stopPropagation()},stopImmediatePropagation:function(){var s=this.originalEvent;this.isImmediatePropagationStopped=es,s&&!this.isSimulated&&s.stopImmediatePropagation(),this.stopPropagation()}},c.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},c.event.addProp),c.each({focus:"focusin",blur:"focusout"},function(s,o){c.event.special[s]={setup:function(){return ui(this,s,Xc),!1},trigger:function(){return ui(this,s),!0},_default:function(u){return Z.get(u.target,s)},delegateType:o}}),c.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(s,o){c.event.special[s]={delegateType:o,bindType:o,handle:function(u){var l,m=this,g=u.relatedTarget,_=u.handleObj;return(!g||g!==m&&!c.contains(m,g))&&(u.type=_.origType,l=_.handler.apply(this,arguments),u.type=o),l}}}),c.fn.extend({on:function(s,o,u,l){return hr(this,s,o,u,l)},one:function(s,o,u,l){return hr(this,s,o,u,l,1)},off:function(s,o,u){var l,m;if(s&&s.preventDefault&&s.handleObj)return l=s.handleObj,c(s.delegateTarget).off(l.namespace?l.origType+"."+l.namespace:l.origType,l.selector,l.handler),this;if(typeof s=="object"){for(m in s)this.off(m,o,s[m]);return this}return(o===!1||typeof o=="function")&&(u=o,o=void 0),u===!1&&(u=ts),this.each(function(){c.event.remove(this,s,u,o)})}});var Yc=/<script|<style|<link/i,Qc=/checked\s*(?:[^=]|=\s*.checked.)/i,Jc=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Eo(s,o){return W(s,"table")&&W(o.nodeType!==11?o:o.firstChild,"tr")&&c(s).children("tbody")[0]||s}function eu(s){return s.type=(s.getAttribute("type")!==null)+"/"+s.type,s}function tu(s){return(s.type||"").slice(0,5)==="true/"?s.type=s.type.slice(5):s.removeAttribute("type"),s}function Mo(s,o){var u,l,m,g,_,O,E;if(o.nodeType===1){if(Z.hasData(s)&&(g=Z.get(s),E=g.events,E)){Z.remove(o,"handle events");for(m in E)for(u=0,l=E[m].length;u<l;u++)c.event.add(o,m,E[m][u])}xe.hasData(s)&&(_=xe.access(s),O=c.extend({},_),xe.set(o,O))}}function nu(s,o){var u=o.nodeName.toLowerCase();u==="input"&&Ts.test(s.type)?o.checked=s.checked:(u==="input"||u==="textarea")&&(o.defaultValue=s.defaultValue)}function ns(s,o,u,l){o=h(o);var m,g,_,O,E,V,j=0,G=s.length,L=G-1,B=o[0],oe=k(B);if(oe||G>1&&typeof B=="string"&&!x.checkClone&&Qc.test(B))return s.each(function(ge){var ae=s.eq(ge);oe&&(o[0]=B.call(this,ge,ae.html())),ns(ae,o,u,l)});if(G&&(m=ko(o,s[0].ownerDocument,!1,s,l),g=m.firstChild,m.childNodes.length===1&&(m=g),g||l)){for(_=c.map(vt(m,"script"),eu),O=_.length;j<G;j++)E=m,j!==L&&(E=c.clone(E,!0,!0),O&&c.merge(_,vt(E,"script"))),u.call(s[j],E,j);if(O)for(V=_[_.length-1].ownerDocument,c.map(_,tu),j=0;j<O;j++)E=_[j],Ao.test(E.type||"")&&!Z.access(E,"globalEval")&&c.contains(V,E)&&(E.src&&(E.type||"").toLowerCase()!=="module"?c._evalUrl&&!E.noModule&&c._evalUrl(E.src,{nonce:E.nonce||E.getAttribute("nonce")},V):C(E.textContent.replace(Jc,""),E,V))}return s}function Oo(s,o,u){for(var l,m=o?c.filter(o,s):s,g=0;(l=m[g])!=null;g++)!u&&l.nodeType===1&&c.cleanData(vt(l)),l.parentNode&&(u&&Tn(l)&&lr(vt(l,"script")),l.parentNode.removeChild(l));return s}c.extend({htmlPrefilter:function(s){return s},clone:function(s,o,u){var l,m,g,_,O=s.cloneNode(!0),E=Tn(s);if(!x.noCloneChecked&&(s.nodeType===1||s.nodeType===11)&&!c.isXMLDoc(s))for(_=vt(O),g=vt(s),l=0,m=g.length;l<m;l++)nu(g[l],_[l]);if(o)if(u)for(g=g||vt(s),_=_||vt(O),l=0,m=g.length;l<m;l++)Mo(g[l],_[l]);else Mo(s,O);return _=vt(O,"script"),_.length>0&&lr(_,!E&&vt(s,"script")),O},cleanData:function(s){for(var o,u,l,m=c.event.special,g=0;(u=s[g])!==void 0;g++)if(Rn(u)){if(o=u[Z.expando]){if(o.events)for(l in o.events)m[l]?c.event.remove(u,l):c.removeEvent(u,l,o.handle);u[Z.expando]=void 0}u[xe.expando]&&(u[xe.expando]=void 0)}}}),c.fn.extend({detach:function(s){return Oo(this,s,!0)},remove:function(s){return Oo(this,s)},text:function(s){return ut(this,function(o){return o===void 0?c.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=o)})},null,s,arguments.length)},append:function(){return ns(this,arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var o=Eo(this,s);o.appendChild(s)}})},prepend:function(){return ns(this,arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var o=Eo(this,s);o.insertBefore(s,o.firstChild)}})},before:function(){return ns(this,arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this)})},after:function(){return ns(this,arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this.nextSibling)})},empty:function(){for(var s,o=0;(s=this[o])!=null;o++)s.nodeType===1&&(c.cleanData(vt(s,!1)),s.textContent="");return this},clone:function(s,o){return s=s==null?!1:s,o=o==null?s:o,this.map(function(){return c.clone(this,s,o)})},html:function(s){return ut(this,function(o){var u=this[0]||{},l=0,m=this.length;if(o===void 0&&u.nodeType===1)return u.innerHTML;if(typeof o=="string"&&!Yc.test(o)&&!qt[(So.exec(o)||["",""])[1].toLowerCase()]){o=c.htmlPrefilter(o);try{for(;l<m;l++)u=this[l]||{},u.nodeType===1&&(c.cleanData(vt(u,!1)),u.innerHTML=o);u=0}catch{}}u&&this.empty().append(o)},null,s,arguments.length)},replaceWith:function(){var s=[];return ns(this,arguments,function(o){var u=this.parentNode;c.inArray(this,s)<0&&(c.cleanData(vt(this)),u&&u.replaceChild(o,this))},s)}}),c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(s,o){c.fn[s]=function(u){for(var l,m=[],g=c(u),_=g.length-1,O=0;O<=_;O++)l=O===_?this:this.clone(!0),c(g[O])[o](l),f.apply(m,l.get());return this.pushStack(m)}});var fr=new RegExp("^("+Wt+")(?!px)[a-z%]+$","i"),dr=/^--/,li=function(s){var o=s.ownerDocument.defaultView;return(!o||!o.opener)&&(o=e),o.getComputedStyle(s)},Do=function(s,o,u){var l,m,g={};for(m in o)g[m]=s.style[m],s.style[m]=o[m];l=u.call(s);for(m in o)s.style[m]=g[m];return l},su=new RegExp(kt.join("|"),"i"),Io="[\\x20\\t\\r\\n\\f]",iu=new RegExp("^"+Io+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Io+"+$","g");(function(){function s(){if(!!V){E.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",V.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",cn.appendChild(E).appendChild(V);var j=e.getComputedStyle(V);u=j.top!=="1%",O=o(j.marginLeft)===12,V.style.right="60%",g=o(j.right)===36,l=o(j.width)===36,V.style.position="absolute",m=o(V.offsetWidth/3)===12,cn.removeChild(E),V=null}}function o(j){return Math.round(parseFloat(j))}var u,l,m,g,_,O,E=v.createElement("div"),V=v.createElement("div");!V.style||(V.style.backgroundClip="content-box",V.cloneNode(!0).style.backgroundClip="",x.clearCloneStyle=V.style.backgroundClip==="content-box",c.extend(x,{boxSizingReliable:function(){return s(),l},pixelBoxStyles:function(){return s(),g},pixelPosition:function(){return s(),u},reliableMarginLeft:function(){return s(),O},scrollboxSize:function(){return s(),m},reliableTrDimensions:function(){var j,G,L,B;return _==null&&(j=v.createElement("table"),G=v.createElement("tr"),L=v.createElement("div"),j.style.cssText="position:absolute;left:-11111px;border-collapse:separate",G.style.cssText="border:1px solid",G.style.height="1px",L.style.height="9px",L.style.display="block",cn.appendChild(j).appendChild(G).appendChild(L),B=e.getComputedStyle(G),_=parseInt(B.height,10)+parseInt(B.borderTopWidth,10)+parseInt(B.borderBottomWidth,10)===G.offsetHeight,cn.removeChild(j)),_}}))})();function Cs(s,o,u){var l,m,g,_,O=dr.test(o),E=s.style;return u=u||li(s),u&&(_=u.getPropertyValue(o)||u[o],O&&(_=_.replace(iu,"$1")),_===""&&!Tn(s)&&(_=c.style(s,o)),!x.pixelBoxStyles()&&fr.test(_)&&su.test(o)&&(l=E.width,m=E.minWidth,g=E.maxWidth,E.minWidth=E.maxWidth=E.width=_,_=u.width,E.width=l,E.minWidth=m,E.maxWidth=g)),_!==void 0?_+"":_}function Ro(s,o){return{get:function(){if(s()){delete this.get;return}return(this.get=o).apply(this,arguments)}}}var Po=["Webkit","Moz","ms"],qo=v.createElement("div").style,Fo={};function ru(s){for(var o=s[0].toUpperCase()+s.slice(1),u=Po.length;u--;)if(s=Po[u]+o,s in qo)return s}function pr(s){var o=c.cssProps[s]||Fo[s];return o||(s in qo?s:Fo[s]=ru(s)||s)}var ou=/^(none|table(?!-c[ea]).+)/,au={position:"absolute",visibility:"hidden",display:"block"},Vo={letterSpacing:"0",fontWeight:"400"};function Lo(s,o,u){var l=Bt.exec(o);return l?Math.max(0,l[2]-(u||0))+(l[3]||"px"):o}function mr(s,o,u,l,m,g){var _=o==="width"?1:0,O=0,E=0;if(u===(l?"border":"content"))return 0;for(;_<4;_+=2)u==="margin"&&(E+=c.css(s,u+kt[_],!0,m)),l?(u==="content"&&(E-=c.css(s,"padding"+kt[_],!0,m)),u!=="margin"&&(E-=c.css(s,"border"+kt[_]+"Width",!0,m))):(E+=c.css(s,"padding"+kt[_],!0,m),u!=="padding"?E+=c.css(s,"border"+kt[_]+"Width",!0,m):O+=c.css(s,"border"+kt[_]+"Width",!0,m));return!l&&g>=0&&(E+=Math.max(0,Math.ceil(s["offset"+o[0].toUpperCase()+o.slice(1)]-g-E-O-.5))||0),E}function jo(s,o,u){var l=li(s),m=!x.boxSizingReliable()||u,g=m&&c.css(s,"boxSizing",!1,l)==="border-box",_=g,O=Cs(s,o,l),E="offset"+o[0].toUpperCase()+o.slice(1);if(fr.test(O)){if(!u)return O;O="auto"}return(!x.boxSizingReliable()&&g||!x.reliableTrDimensions()&&W(s,"tr")||O==="auto"||!parseFloat(O)&&c.css(s,"display",!1,l)==="inline")&&s.getClientRects().length&&(g=c.css(s,"boxSizing",!1,l)==="border-box",_=E in s,_&&(O=s[E])),O=parseFloat(O)||0,O+mr(s,o,u||(g?"border":"content"),_,l,O)+"px"}c.extend({cssHooks:{opacity:{get:function(s,o){if(o){var u=Cs(s,"opacity");return u===""?"1":u}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(s,o,u,l){if(!(!s||s.nodeType===3||s.nodeType===8||!s.style)){var m,g,_,O=Pt(o),E=dr.test(o),V=s.style;if(E||(o=pr(O)),_=c.cssHooks[o]||c.cssHooks[O],u!==void 0){if(g=typeof u,g==="string"&&(m=Bt.exec(u))&&m[1]&&(u=Co(s,o,m),g="number"),u==null||u!==u)return;g==="number"&&!E&&(u+=m&&m[3]||(c.cssNumber[O]?"":"px")),!x.clearCloneStyle&&u===""&&o.indexOf("background")===0&&(V[o]="inherit"),(!_||!("set"in _)||(u=_.set(s,u,l))!==void 0)&&(E?V.setProperty(o,u):V[o]=u)}else return _&&"get"in _&&(m=_.get(s,!1,l))!==void 0?m:V[o]}},css:function(s,o,u,l){var m,g,_,O=Pt(o),E=dr.test(o);return E||(o=pr(O)),_=c.cssHooks[o]||c.cssHooks[O],_&&"get"in _&&(m=_.get(s,!0,u)),m===void 0&&(m=Cs(s,o,l)),m==="normal"&&o in Vo&&(m=Vo[o]),u===""||u?(g=parseFloat(m),u===!0||isFinite(g)?g||0:m):m}}),c.each(["height","width"],function(s,o){c.cssHooks[o]={get:function(u,l,m){if(l)return ou.test(c.css(u,"display"))&&(!u.getClientRects().length||!u.getBoundingClientRect().width)?Do(u,au,function(){return jo(u,o,m)}):jo(u,o,m)},set:function(u,l,m){var g,_=li(u),O=!x.scrollboxSize()&&_.position==="absolute",E=O||m,V=E&&c.css(u,"boxSizing",!1,_)==="border-box",j=m?mr(u,o,m,V,_):0;return V&&O&&(j-=Math.ceil(u["offset"+o[0].toUpperCase()+o.slice(1)]-parseFloat(_[o])-mr(u,o,"border",!1,_)-.5)),j&&(g=Bt.exec(l))&&(g[3]||"px")!=="px"&&(u.style[o]=l,l=c.css(u,o)),Lo(u,l,j)}}}),c.cssHooks.marginLeft=Ro(x.reliableMarginLeft,function(s,o){if(o)return(parseFloat(Cs(s,"marginLeft"))||s.getBoundingClientRect().left-Do(s,{marginLeft:0},function(){return s.getBoundingClientRect().left}))+"px"}),c.each({margin:"",padding:"",border:"Width"},function(s,o){c.cssHooks[s+o]={expand:function(u){for(var l=0,m={},g=typeof u=="string"?u.split(" "):[u];l<4;l++)m[s+kt[l]+o]=g[l]||g[l-2]||g[0];return m}},s!=="margin"&&(c.cssHooks[s+o].set=Lo)}),c.fn.extend({css:function(s,o){return ut(this,function(u,l,m){var g,_,O={},E=0;if(Array.isArray(l)){for(g=li(u),_=l.length;E<_;E++)O[l[E]]=c.css(u,l[E],!1,g);return O}return m!==void 0?c.style(u,l,m):c.css(u,l)},s,o,arguments.length>1)}});function _t(s,o,u,l,m){return new _t.prototype.init(s,o,u,l,m)}c.Tween=_t,_t.prototype={constructor:_t,init:function(s,o,u,l,m,g){this.elem=s,this.prop=u,this.easing=m||c.easing._default,this.options=o,this.start=this.now=this.cur(),this.end=l,this.unit=g||(c.cssNumber[u]?"":"px")},cur:function(){var s=_t.propHooks[this.prop];return s&&s.get?s.get(this):_t.propHooks._default.get(this)},run:function(s){var o,u=_t.propHooks[this.prop];return this.options.duration?this.pos=o=c.easing[this.easing](s,this.options.duration*s,0,1,this.options.duration):this.pos=o=s,this.now=(this.end-this.start)*o+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),u&&u.set?u.set(this):_t.propHooks._default.set(this),this}},_t.prototype.init.prototype=_t.prototype,_t.propHooks={_default:{get:function(s){var o;return s.elem.nodeType!==1||s.elem[s.prop]!=null&&s.elem.style[s.prop]==null?s.elem[s.prop]:(o=c.css(s.elem,s.prop,""),!o||o==="auto"?0:o)},set:function(s){c.fx.step[s.prop]?c.fx.step[s.prop](s):s.elem.nodeType===1&&(c.cssHooks[s.prop]||s.elem.style[pr(s.prop)]!=null)?c.style(s.elem,s.prop,s.now+s.unit):s.elem[s.prop]=s.now}}},_t.propHooks.scrollTop=_t.propHooks.scrollLeft={set:function(s){s.elem.nodeType&&s.elem.parentNode&&(s.elem[s.prop]=s.now)}},c.easing={linear:function(s){return s},swing:function(s){return .5-Math.cos(s*Math.PI)/2},_default:"swing"},c.fx=_t.prototype.init,c.fx.step={};var ss,hi,cu=/^(?:toggle|show|hide)$/,uu=/queueHooks$/;function gr(){hi&&(v.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(gr):e.setTimeout(gr,c.fx.interval),c.fx.tick())}function Wo(){return e.setTimeout(function(){ss=void 0}),ss=Date.now()}function fi(s,o){var u,l=0,m={height:s};for(o=o?1:0;l<4;l+=2-o)u=kt[l],m["margin"+u]=m["padding"+u]=s;return o&&(m.opacity=m.width=s),m}function Bo(s,o,u){for(var l,m=(Kt.tweeners[o]||[]).concat(Kt.tweeners["*"]),g=0,_=m.length;g<_;g++)if(l=m[g].call(u,o,s))return l}function lu(s,o,u){var l,m,g,_,O,E,V,j,G="width"in o||"height"in o,L=this,B={},oe=s.style,ge=s.nodeType&&ci(s),ae=Z.get(s,"fxshow");u.queue||(_=c._queueHooks(s,"fx"),_.unqueued==null&&(_.unqueued=0,O=_.empty.fire,_.empty.fire=function(){_.unqueued||O()}),_.unqueued++,L.always(function(){L.always(function(){_.unqueued--,c.queue(s,"fx").length||_.empty.fire()})}));for(l in o)if(m=o[l],cu.test(m)){if(delete o[l],g=g||m==="toggle",m===(ge?"hide":"show"))if(m==="show"&&ae&&ae[l]!==void 0)ge=!0;else continue;B[l]=ae&&ae[l]||c.style(s,l)}if(E=!c.isEmptyObject(o),!(!E&&c.isEmptyObject(B))){G&&s.nodeType===1&&(u.overflow=[oe.overflow,oe.overflowX,oe.overflowY],V=ae&&ae.display,V==null&&(V=Z.get(s,"display")),j=c.css(s,"display"),j==="none"&&(V?j=V:(Jn([s],!0),V=s.style.display||V,j=c.css(s,"display"),Jn([s]))),(j==="inline"||j==="inline-block"&&V!=null)&&c.css(s,"float")==="none"&&(E||(L.done(function(){oe.display=V}),V==null&&(j=oe.display,V=j==="none"?"":j)),oe.display="inline-block")),u.overflow&&(oe.overflow="hidden",L.always(function(){oe.overflow=u.overflow[0],oe.overflowX=u.overflow[1],oe.overflowY=u.overflow[2]})),E=!1;for(l in B)E||(ae?"hidden"in ae&&(ge=ae.hidden):ae=Z.access(s,"fxshow",{display:V}),g&&(ae.hidden=!ge),ge&&Jn([s],!0),L.done(function(){ge||Jn([s]),Z.remove(s,"fxshow");for(l in B)c.style(s,l,B[l])})),E=Bo(ge?ae[l]:0,l,L),l in ae||(ae[l]=E.start,ge&&(E.end=E.start,E.start=0))}}function hu(s,o){var u,l,m,g,_;for(u in s)if(l=Pt(u),m=o[l],g=s[u],Array.isArray(g)&&(m=g[1],g=s[u]=g[0]),u!==l&&(s[l]=g,delete s[u]),_=c.cssHooks[l],_&&"expand"in _){g=_.expand(g),delete s[l];for(u in g)u in s||(s[u]=g[u],o[u]=m)}else o[l]=m}function Kt(s,o,u){var l,m,g=0,_=Kt.prefilters.length,O=c.Deferred().always(function(){delete E.elem}),E=function(){if(m)return!1;for(var G=ss||Wo(),L=Math.max(0,V.startTime+V.duration-G),B=L/V.duration||0,oe=1-B,ge=0,ae=V.tweens.length;ge<ae;ge++)V.tweens[ge].run(oe);return O.notifyWith(s,[V,oe,L]),oe<1&&ae?L:(ae||O.notifyWith(s,[V,1,0]),O.resolveWith(s,[V]),!1)},V=O.promise({elem:s,props:c.extend({},o),opts:c.extend(!0,{specialEasing:{},easing:c.easing._default},u),originalProperties:o,originalOptions:u,startTime:ss||Wo(),duration:u.duration,tweens:[],createTween:function(G,L){var B=c.Tween(s,V.opts,G,L,V.opts.specialEasing[G]||V.opts.easing);return V.tweens.push(B),B},stop:function(G){var L=0,B=G?V.tweens.length:0;if(m)return this;for(m=!0;L<B;L++)V.tweens[L].run(1);return G?(O.notifyWith(s,[V,1,0]),O.resolveWith(s,[V,G])):O.rejectWith(s,[V,G]),this}}),j=V.props;for(hu(j,V.opts.specialEasing);g<_;g++)if(l=Kt.prefilters[g].call(V,s,j,V.opts),l)return k(l.stop)&&(c._queueHooks(V.elem,V.opts.queue).stop=l.stop.bind(l)),l;return c.map(j,Bo,V),k(V.opts.start)&&V.opts.start.call(s,V),V.progress(V.opts.progress).done(V.opts.done,V.opts.complete).fail(V.opts.fail).always(V.opts.always),c.fx.timer(c.extend(E,{elem:s,anim:V,queue:V.opts.queue})),V}c.Animation=c.extend(Kt,{tweeners:{"*":[function(s,o){var u=this.createTween(s,o);return Co(u.elem,s,Bt.exec(o),u),u}]},tweener:function(s,o){k(s)?(o=s,s=["*"]):s=s.match(ce);for(var u,l=0,m=s.length;l<m;l++)u=s[l],Kt.tweeners[u]=Kt.tweeners[u]||[],Kt.tweeners[u].unshift(o)},prefilters:[lu],prefilter:function(s,o){o?Kt.prefilters.unshift(s):Kt.prefilters.push(s)}}),c.speed=function(s,o,u){var l=s&&typeof s=="object"?c.extend({},s):{complete:u||!u&&o||k(s)&&s,duration:s,easing:u&&o||o&&!k(o)&&o};return c.fx.off?l.duration=0:typeof l.duration!="number"&&(l.duration in c.fx.speeds?l.duration=c.fx.speeds[l.duration]:l.duration=c.fx.speeds._default),(l.queue==null||l.queue===!0)&&(l.queue="fx"),l.old=l.complete,l.complete=function(){k(l.old)&&l.old.call(this),l.queue&&c.dequeue(this,l.queue)},l},c.fn.extend({fadeTo:function(s,o,u,l){return this.filter(ci).css("opacity",0).show().end().animate({opacity:o},s,u,l)},animate:function(s,o,u,l){var m=c.isEmptyObject(s),g=c.speed(o,u,l),_=function(){var O=Kt(this,c.extend({},s),g);(m||Z.get(this,"finish"))&&O.stop(!0)};return _.finish=_,m||g.queue===!1?this.each(_):this.queue(g.queue,_)},stop:function(s,o,u){var l=function(m){var g=m.stop;delete m.stop,g(u)};return typeof s!="string"&&(u=o,o=s,s=void 0),o&&this.queue(s||"fx",[]),this.each(function(){var m=!0,g=s!=null&&s+"queueHooks",_=c.timers,O=Z.get(this);if(g)O[g]&&O[g].stop&&l(O[g]);else for(g in O)O[g]&&O[g].stop&&uu.test(g)&&l(O[g]);for(g=_.length;g--;)_[g].elem===this&&(s==null||_[g].queue===s)&&(_[g].anim.stop(u),m=!1,_.splice(g,1));(m||!u)&&c.dequeue(this,s)})},finish:function(s){return s!==!1&&(s=s||"fx"),this.each(function(){var o,u=Z.get(this),l=u[s+"queue"],m=u[s+"queueHooks"],g=c.timers,_=l?l.length:0;for(u.finish=!0,c.queue(this,s,[]),m&&m.stop&&m.stop.call(this,!0),o=g.length;o--;)g[o].elem===this&&g[o].queue===s&&(g[o].anim.stop(!0),g.splice(o,1));for(o=0;o<_;o++)l[o]&&l[o].finish&&l[o].finish.call(this);delete u.finish})}}),c.each(["toggle","show","hide"],function(s,o){var u=c.fn[o];c.fn[o]=function(l,m,g){return l==null||typeof l=="boolean"?u.apply(this,arguments):this.animate(fi(o,!0),l,m,g)}}),c.each({slideDown:fi("show"),slideUp:fi("hide"),slideToggle:fi("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(s,o){c.fn[s]=function(u,l,m){return this.animate(o,u,l,m)}}),c.timers=[],c.fx.tick=function(){var s,o=0,u=c.timers;for(ss=Date.now();o<u.length;o++)s=u[o],!s()&&u[o]===s&&u.splice(o--,1);u.length||c.fx.stop(),ss=void 0},c.fx.timer=function(s){c.timers.push(s),c.fx.start()},c.fx.interval=13,c.fx.start=function(){hi||(hi=!0,gr())},c.fx.stop=function(){hi=null},c.fx.speeds={slow:600,fast:200,_default:400},c.fn.delay=function(s,o){return s=c.fx&&c.fx.speeds[s]||s,o=o||"fx",this.queue(o,function(u,l){var m=e.setTimeout(u,s);l.stop=function(){e.clearTimeout(m)}})},function(){var s=v.createElement("input"),o=v.createElement("select"),u=o.appendChild(v.createElement("option"));s.type="checkbox",x.checkOn=s.value!=="",x.optSelected=u.selected,s=v.createElement("input"),s.value="t",s.type="radio",x.radioValue=s.value==="t"}();var Ko,xs=c.expr.attrHandle;c.fn.extend({attr:function(s,o){return ut(this,c.attr,s,o,arguments.length>1)},removeAttr:function(s){return this.each(function(){c.removeAttr(this,s)})}}),c.extend({attr:function(s,o,u){var l,m,g=s.nodeType;if(!(g===3||g===8||g===2)){if(typeof s.getAttribute>"u")return c.prop(s,o,u);if((g!==1||!c.isXMLDoc(s))&&(m=c.attrHooks[o.toLowerCase()]||(c.expr.match.bool.test(o)?Ko:void 0)),u!==void 0){if(u===null){c.removeAttr(s,o);return}return m&&"set"in m&&(l=m.set(s,u,o))!==void 0?l:(s.setAttribute(o,u+""),u)}return m&&"get"in m&&(l=m.get(s,o))!==null?l:(l=c.find.attr(s,o),l==null?void 0:l)}},attrHooks:{type:{set:function(s,o){if(!x.radioValue&&o==="radio"&&W(s,"input")){var u=s.value;return s.setAttribute("type",o),u&&(s.value=u),o}}}},removeAttr:function(s,o){var u,l=0,m=o&&o.match(ce);if(m&&s.nodeType===1)for(;u=m[l++];)s.removeAttribute(u)}}),Ko={set:function(s,o,u){return o===!1?c.removeAttr(s,u):s.setAttribute(u,u),u}},c.each(c.expr.match.bool.source.match(/\w+/g),function(s,o){var u=xs[o]||c.find.attr;xs[o]=function(l,m,g){var _,O,E=m.toLowerCase();return g||(O=xs[E],xs[E]=_,_=u(l,m,g)!=null?E:null,xs[E]=O),_}});var fu=/^(?:input|select|textarea|button)$/i,du=/^(?:a|area)$/i;c.fn.extend({prop:function(s,o){return ut(this,c.prop,s,o,arguments.length>1)},removeProp:function(s){return this.each(function(){delete this[c.propFix[s]||s]})}}),c.extend({prop:function(s,o,u){var l,m,g=s.nodeType;if(!(g===3||g===8||g===2))return(g!==1||!c.isXMLDoc(s))&&(o=c.propFix[o]||o,m=c.propHooks[o]),u!==void 0?m&&"set"in m&&(l=m.set(s,u,o))!==void 0?l:s[o]=u:m&&"get"in m&&(l=m.get(s,o))!==null?l:s[o]},propHooks:{tabIndex:{get:function(s){var o=c.find.attr(s,"tabindex");return o?parseInt(o,10):fu.test(s.nodeName)||du.test(s.nodeName)&&s.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),x.optSelected||(c.propHooks.selected={get:function(s){var o=s.parentNode;return o&&o.parentNode&&o.parentNode.selectedIndex,null},set:function(s){var o=s.parentNode;o&&(o.selectedIndex,o.parentNode&&o.parentNode.selectedIndex)}}),c.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){c.propFix[this.toLowerCase()]=this});function Pn(s){var o=s.match(ce)||[];return o.join(" ")}function qn(s){return s.getAttribute&&s.getAttribute("class")||""}function vr(s){return Array.isArray(s)?s:typeof s=="string"?s.match(ce)||[]:[]}c.fn.extend({addClass:function(s){var o,u,l,m,g,_;return k(s)?this.each(function(O){c(this).addClass(s.call(this,O,qn(this)))}):(o=vr(s),o.length?this.each(function(){if(l=qn(this),u=this.nodeType===1&&" "+Pn(l)+" ",u){for(g=0;g<o.length;g++)m=o[g],u.indexOf(" "+m+" ")<0&&(u+=m+" ");_=Pn(u),l!==_&&this.setAttribute("class",_)}}):this)},removeClass:function(s){var o,u,l,m,g,_;return k(s)?this.each(function(O){c(this).removeClass(s.call(this,O,qn(this)))}):arguments.length?(o=vr(s),o.length?this.each(function(){if(l=qn(this),u=this.nodeType===1&&" "+Pn(l)+" ",u){for(g=0;g<o.length;g++)for(m=o[g];u.indexOf(" "+m+" ")>-1;)u=u.replace(" "+m+" "," ");_=Pn(u),l!==_&&this.setAttribute("class",_)}}):this):this.attr("class","")},toggleClass:function(s,o){var u,l,m,g,_=typeof s,O=_==="string"||Array.isArray(s);return k(s)?this.each(function(E){c(this).toggleClass(s.call(this,E,qn(this),o),o)}):typeof o=="boolean"&&O?o?this.addClass(s):this.removeClass(s):(u=vr(s),this.each(function(){if(O)for(g=c(this),m=0;m<u.length;m++)l=u[m],g.hasClass(l)?g.removeClass(l):g.addClass(l);else(s===void 0||_==="boolean")&&(l=qn(this),l&&Z.set(this,"__className__",l),this.setAttribute&&this.setAttribute("class",l||s===!1?"":Z.get(this,"__className__")||""))}))},hasClass:function(s){var o,u,l=0;for(o=" "+s+" ";u=this[l++];)if(u.nodeType===1&&(" "+Pn(qn(u))+" ").indexOf(o)>-1)return!0;return!1}});var pu=/\r/g;c.fn.extend({val:function(s){var o,u,l,m=this[0];return arguments.length?(l=k(s),this.each(function(g){var _;this.nodeType===1&&(l?_=s.call(this,g,c(this).val()):_=s,_==null?_="":typeof _=="number"?_+="":Array.isArray(_)&&(_=c.map(_,function(O){return O==null?"":O+""})),o=c.valHooks[this.type]||c.valHooks[this.nodeName.toLowerCase()],(!o||!("set"in o)||o.set(this,_,"value")===void 0)&&(this.value=_))})):m?(o=c.valHooks[m.type]||c.valHooks[m.nodeName.toLowerCase()],o&&"get"in o&&(u=o.get(m,"value"))!==void 0?u:(u=m.value,typeof u=="string"?u.replace(pu,""):u==null?"":u)):void 0}}),c.extend({valHooks:{option:{get:function(s){var o=c.find.attr(s,"value");return o!=null?o:Pn(c.text(s))}},select:{get:function(s){var o,u,l,m=s.options,g=s.selectedIndex,_=s.type==="select-one",O=_?null:[],E=_?g+1:m.length;for(g<0?l=E:l=_?g:0;l<E;l++)if(u=m[l],(u.selected||l===g)&&!u.disabled&&(!u.parentNode.disabled||!W(u.parentNode,"optgroup"))){if(o=c(u).val(),_)return o;O.push(o)}return O},set:function(s,o){for(var u,l,m=s.options,g=c.makeArray(o),_=m.length;_--;)l=m[_],(l.selected=c.inArray(c.valHooks.option.get(l),g)>-1)&&(u=!0);return u||(s.selectedIndex=-1),g}}}}),c.each(["radio","checkbox"],function(){c.valHooks[this]={set:function(s,o){if(Array.isArray(o))return s.checked=c.inArray(c(s).val(),o)>-1}},x.checkOn||(c.valHooks[this].get=function(s){return s.getAttribute("value")===null?"on":s.value})}),x.focusin="onfocusin"in e;var Uo=/^(?:focusinfocus|focusoutblur)$/,Ho=function(s){s.stopPropagation()};c.extend(c.event,{trigger:function(s,o,u,l){var m,g,_,O,E,V,j,G,L=[u||v],B=b.call(s,"type")?s.type:s,oe=b.call(s,"namespace")?s.namespace.split("."):[];if(g=G=_=u=u||v,!(u.nodeType===3||u.nodeType===8)&&!Uo.test(B+c.event.triggered)&&(B.indexOf(".")>-1&&(oe=B.split("."),B=oe.shift(),oe.sort()),E=B.indexOf(":")<0&&"on"+B,s=s[c.expando]?s:new c.Event(B,typeof s=="object"&&s),s.isTrigger=l?2:3,s.namespace=oe.join("."),s.rnamespace=s.namespace?new RegExp("(^|\\.)"+oe.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,s.result=void 0,s.target||(s.target=u),o=o==null?[s]:c.makeArray(o,[s]),j=c.event.special[B]||{},!(!l&&j.trigger&&j.trigger.apply(u,o)===!1))){if(!l&&!j.noBubble&&!I(u)){for(O=j.delegateType||B,Uo.test(O+B)||(g=g.parentNode);g;g=g.parentNode)L.push(g),_=g;_===(u.ownerDocument||v)&&L.push(_.defaultView||_.parentWindow||e)}for(m=0;(g=L[m++])&&!s.isPropagationStopped();)G=g,s.type=m>1?O:j.bindType||B,V=(Z.get(g,"events")||Object.create(null))[s.type]&&Z.get(g,"handle"),V&&V.apply(g,o),V=E&&g[E],V&&V.apply&&Rn(g)&&(s.result=V.apply(g,o),s.result===!1&&s.preventDefault());return s.type=B,!l&&!s.isDefaultPrevented()&&(!j._default||j._default.apply(L.pop(),o)===!1)&&Rn(u)&&E&&k(u[B])&&!I(u)&&(_=u[E],_&&(u[E]=null),c.event.triggered=B,s.isPropagationStopped()&&G.addEventListener(B,Ho),u[B](),s.isPropagationStopped()&&G.removeEventListener(B,Ho),c.event.triggered=void 0,_&&(u[E]=_)),s.result}},simulate:function(s,o,u){var l=c.extend(new c.Event,u,{type:s,isSimulated:!0});c.event.trigger(l,null,o)}}),c.fn.extend({trigger:function(s,o){return this.each(function(){c.event.trigger(s,o,this)})},triggerHandler:function(s,o){var u=this[0];if(u)return c.event.trigger(s,o,u,!0)}}),x.focusin||c.each({focus:"focusin",blur:"focusout"},function(s,o){var u=function(l){c.event.simulate(o,l.target,c.event.fix(l))};c.event.special[o]={setup:function(){var l=this.ownerDocument||this.document||this,m=Z.access(l,o);m||l.addEventListener(s,u,!0),Z.access(l,o,(m||0)+1)},teardown:function(){var l=this.ownerDocument||this.document||this,m=Z.access(l,o)-1;m?Z.access(l,o,m):(l.removeEventListener(s,u,!0),Z.remove(l,o))}}});var Ss=e.location,$o={guid:Date.now()},_r=/\?/;c.parseXML=function(s){var o,u;if(!s||typeof s!="string")return null;try{o=new e.DOMParser().parseFromString(s,"text/xml")}catch{}return u=o&&o.getElementsByTagName("parsererror")[0],(!o||u)&&c.error("Invalid XML: "+(u?c.map(u.childNodes,function(l){return l.textContent}).join(`
`):s)),o};var mu=/\[\]$/,zo=/\r?\n/g,gu=/^(?:submit|button|image|reset|file)$/i,vu=/^(?:input|select|textarea|keygen)/i;function yr(s,o,u,l){var m;if(Array.isArray(o))c.each(o,function(g,_){u||mu.test(s)?l(s,_):yr(s+"["+(typeof _=="object"&&_!=null?g:"")+"]",_,u,l)});else if(!u&&A(o)==="object")for(m in o)yr(s+"["+m+"]",o[m],u,l);else l(s,o)}c.param=function(s,o){var u,l=[],m=function(g,_){var O=k(_)?_():_;l[l.length]=encodeURIComponent(g)+"="+encodeURIComponent(O==null?"":O)};if(s==null)return"";if(Array.isArray(s)||s.jquery&&!c.isPlainObject(s))c.each(s,function(){m(this.name,this.value)});else for(u in s)yr(u,s[u],o,m);return l.join("&")},c.fn.extend({serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var s=c.prop(this,"elements");return s?c.makeArray(s):this}).filter(function(){var s=this.type;return this.name&&!c(this).is(":disabled")&&vu.test(this.nodeName)&&!gu.test(s)&&(this.checked||!Ts.test(s))}).map(function(s,o){var u=c(this).val();return u==null?null:Array.isArray(u)?c.map(u,function(l){return{name:o.name,value:l.replace(zo,`\r
`)}}):{name:o.name,value:u.replace(zo,`\r
`)}}).get()}});var _u=/%20/g,yu=/#.*$/,bu=/([?&])_=[^&]*/,wu=/^(.*?):[ \t]*([^\r\n]*)$/mg,Tu=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Cu=/^(?:GET|HEAD)$/,xu=/^\/\//,Go={},br={},Xo="*/".concat("*"),wr=v.createElement("a");wr.href=Ss.href;function Zo(s){return function(o,u){typeof o!="string"&&(u=o,o="*");var l,m=0,g=o.toLowerCase().match(ce)||[];if(k(u))for(;l=g[m++];)l[0]==="+"?(l=l.slice(1)||"*",(s[l]=s[l]||[]).unshift(u)):(s[l]=s[l]||[]).push(u)}}function Yo(s,o,u,l){var m={},g=s===br;function _(O){var E;return m[O]=!0,c.each(s[O]||[],function(V,j){var G=j(o,u,l);if(typeof G=="string"&&!g&&!m[G])return o.dataTypes.unshift(G),_(G),!1;if(g)return!(E=G)}),E}return _(o.dataTypes[0])||!m["*"]&&_("*")}function Tr(s,o){var u,l,m=c.ajaxSettings.flatOptions||{};for(u in o)o[u]!==void 0&&((m[u]?s:l||(l={}))[u]=o[u]);return l&&c.extend(!0,s,l),s}function Su(s,o,u){for(var l,m,g,_,O=s.contents,E=s.dataTypes;E[0]==="*";)E.shift(),l===void 0&&(l=s.mimeType||o.getResponseHeader("Content-Type"));if(l){for(m in O)if(O[m]&&O[m].test(l)){E.unshift(m);break}}if(E[0]in u)g=E[0];else{for(m in u){if(!E[0]||s.converters[m+" "+E[0]]){g=m;break}_||(_=m)}g=g||_}if(g)return g!==E[0]&&E.unshift(g),u[g]}function Au(s,o,u,l){var m,g,_,O,E,V={},j=s.dataTypes.slice();if(j[1])for(_ in s.converters)V[_.toLowerCase()]=s.converters[_];for(g=j.shift();g;)if(s.responseFields[g]&&(u[s.responseFields[g]]=o),!E&&l&&s.dataFilter&&(o=s.dataFilter(o,s.dataType)),E=g,g=j.shift(),g){if(g==="*")g=E;else if(E!=="*"&&E!==g){if(_=V[E+" "+g]||V["* "+g],!_){for(m in V)if(O=m.split(" "),O[1]===g&&(_=V[E+" "+O[0]]||V["* "+O[0]],_)){_===!0?_=V[m]:V[m]!==!0&&(g=O[0],j.unshift(O[1]));break}}if(_!==!0)if(_&&s.throws)o=_(o);else try{o=_(o)}catch(G){return{state:"parsererror",error:_?G:"No conversion from "+E+" to "+g}}}}return{state:"success",data:o}}c.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ss.href,type:"GET",isLocal:Tu.test(Ss.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xo,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":c.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(s,o){return o?Tr(Tr(s,c.ajaxSettings),o):Tr(c.ajaxSettings,s)},ajaxPrefilter:Zo(Go),ajaxTransport:Zo(br),ajax:function(s,o){typeof s=="object"&&(o=s,s=void 0),o=o||{};var u,l,m,g,_,O,E,V,j,G,L=c.ajaxSetup({},o),B=L.context||L,oe=L.context&&(B.nodeType||B.jquery)?c(B):c.event,ge=c.Deferred(),ae=c.Callbacks("once memory"),nt=L.statusCode||{},Je={},Nt={},Me="canceled",me={readyState:0,getResponseHeader:function(Ae){var $e;if(E){if(!g)for(g={};$e=wu.exec(m);)g[$e[1].toLowerCase()+" "]=(g[$e[1].toLowerCase()+" "]||[]).concat($e[2]);$e=g[Ae.toLowerCase()+" "]}return $e==null?null:$e.join(", ")},getAllResponseHeaders:function(){return E?m:null},setRequestHeader:function(Ae,$e){return E==null&&(Ae=Nt[Ae.toLowerCase()]=Nt[Ae.toLowerCase()]||Ae,Je[Ae]=$e),this},overrideMimeType:function(Ae){return E==null&&(L.mimeType=Ae),this},statusCode:function(Ae){var $e;if(Ae)if(E)me.always(Ae[me.status]);else for($e in Ae)nt[$e]=[nt[$e],Ae[$e]];return this},abort:function(Ae){var $e=Ae||Me;return u&&u.abort($e),yt(0,$e),this}};if(ge.promise(me),L.url=((s||L.url||Ss.href)+"").replace(xu,Ss.protocol+"//"),L.type=o.method||o.type||L.method||L.type,L.dataTypes=(L.dataType||"*").toLowerCase().match(ce)||[""],L.crossDomain==null){O=v.createElement("a");try{O.href=L.url,O.href=O.href,L.crossDomain=wr.protocol+"//"+wr.host!=O.protocol+"//"+O.host}catch{L.crossDomain=!0}}if(L.data&&L.processData&&typeof L.data!="string"&&(L.data=c.param(L.data,L.traditional)),Yo(Go,L,o,me),E)return me;V=c.event&&L.global,V&&c.active++===0&&c.event.trigger("ajaxStart"),L.type=L.type.toUpperCase(),L.hasContent=!Cu.test(L.type),l=L.url.replace(yu,""),L.hasContent?L.data&&L.processData&&(L.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(L.data=L.data.replace(_u,"+")):(G=L.url.slice(l.length),L.data&&(L.processData||typeof L.data=="string")&&(l+=(_r.test(l)?"&":"?")+L.data,delete L.data),L.cache===!1&&(l=l.replace(bu,"$1"),G=(_r.test(l)?"&":"?")+"_="+$o.guid+++G),L.url=l+G),L.ifModified&&(c.lastModified[l]&&me.setRequestHeader("If-Modified-Since",c.lastModified[l]),c.etag[l]&&me.setRequestHeader("If-None-Match",c.etag[l])),(L.data&&L.hasContent&&L.contentType!==!1||o.contentType)&&me.setRequestHeader("Content-Type",L.contentType),me.setRequestHeader("Accept",L.dataTypes[0]&&L.accepts[L.dataTypes[0]]?L.accepts[L.dataTypes[0]]+(L.dataTypes[0]!=="*"?", "+Xo+"; q=0.01":""):L.accepts["*"]);for(j in L.headers)me.setRequestHeader(j,L.headers[j]);if(L.beforeSend&&(L.beforeSend.call(B,me,L)===!1||E))return me.abort();if(Me="abort",ae.add(L.complete),me.done(L.success),me.fail(L.error),u=Yo(br,L,o,me),!u)yt(-1,"No Transport");else{if(me.readyState=1,V&&oe.trigger("ajaxSend",[me,L]),E)return me;L.async&&L.timeout>0&&(_=e.setTimeout(function(){me.abort("timeout")},L.timeout));try{E=!1,u.send(Je,yt)}catch(Ae){if(E)throw Ae;yt(-1,Ae)}}function yt(Ae,$e,ks,di){var Et,Fn,Vn,bt,Cn,Ft=$e;E||(E=!0,_&&e.clearTimeout(_),u=void 0,m=di||"",me.readyState=Ae>0?4:0,Et=Ae>=200&&Ae<300||Ae===304,ks&&(bt=Su(L,me,ks)),!Et&&c.inArray("script",L.dataTypes)>-1&&c.inArray("json",L.dataTypes)<0&&(L.converters["text script"]=function(){}),bt=Au(L,bt,me,Et),Et?(L.ifModified&&(Cn=me.getResponseHeader("Last-Modified"),Cn&&(c.lastModified[l]=Cn),Cn=me.getResponseHeader("etag"),Cn&&(c.etag[l]=Cn)),Ae===204||L.type==="HEAD"?Ft="nocontent":Ae===304?Ft="notmodified":(Ft=bt.state,Fn=bt.data,Vn=bt.error,Et=!Vn)):(Vn=Ft,(Ae||!Ft)&&(Ft="error",Ae<0&&(Ae=0))),me.status=Ae,me.statusText=($e||Ft)+"",Et?ge.resolveWith(B,[Fn,Ft,me]):ge.rejectWith(B,[me,Ft,Vn]),me.statusCode(nt),nt=void 0,V&&oe.trigger(Et?"ajaxSuccess":"ajaxError",[me,L,Et?Fn:Vn]),ae.fireWith(B,[me,Ft]),V&&(oe.trigger("ajaxComplete",[me,L]),--c.active||c.event.trigger("ajaxStop")))}return me},getJSON:function(s,o,u){return c.get(s,o,u,"json")},getScript:function(s,o){return c.get(s,void 0,o,"script")}}),c.each(["get","post"],function(s,o){c[o]=function(u,l,m,g){return k(l)&&(g=g||m,m=l,l=void 0),c.ajax(c.extend({url:u,type:o,dataType:g,data:l,success:m},c.isPlainObject(u)&&u))}}),c.ajaxPrefilter(function(s){var o;for(o in s.headers)o.toLowerCase()==="content-type"&&(s.contentType=s.headers[o]||"")}),c._evalUrl=function(s,o,u){return c.ajax({url:s,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(l){c.globalEval(l,o,u)}})},c.fn.extend({wrapAll:function(s){var o;return this[0]&&(k(s)&&(s=s.call(this[0])),o=c(s,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&o.insertBefore(this[0]),o.map(function(){for(var u=this;u.firstElementChild;)u=u.firstElementChild;return u}).append(this)),this},wrapInner:function(s){return k(s)?this.each(function(o){c(this).wrapInner(s.call(this,o))}):this.each(function(){var o=c(this),u=o.contents();u.length?u.wrapAll(s):o.append(s)})},wrap:function(s){var o=k(s);return this.each(function(u){c(this).wrapAll(o?s.call(this,u):s)})},unwrap:function(s){return this.parent(s).not("body").each(function(){c(this).replaceWith(this.childNodes)}),this}}),c.expr.pseudos.hidden=function(s){return!c.expr.pseudos.visible(s)},c.expr.pseudos.visible=function(s){return!!(s.offsetWidth||s.offsetHeight||s.getClientRects().length)},c.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var ku={0:200,1223:204},As=c.ajaxSettings.xhr();x.cors=!!As&&"withCredentials"in As,x.ajax=As=!!As,c.ajaxTransport(function(s){var o,u;if(x.cors||As&&!s.crossDomain)return{send:function(l,m){var g,_=s.xhr();if(_.open(s.type,s.url,s.async,s.username,s.password),s.xhrFields)for(g in s.xhrFields)_[g]=s.xhrFields[g];s.mimeType&&_.overrideMimeType&&_.overrideMimeType(s.mimeType),!s.crossDomain&&!l["X-Requested-With"]&&(l["X-Requested-With"]="XMLHttpRequest");for(g in l)_.setRequestHeader(g,l[g]);o=function(O){return function(){o&&(o=u=_.onload=_.onerror=_.onabort=_.ontimeout=_.onreadystatechange=null,O==="abort"?_.abort():O==="error"?typeof _.status!="number"?m(0,"error"):m(_.status,_.statusText):m(ku[_.status]||_.status,_.statusText,(_.responseType||"text")!=="text"||typeof _.responseText!="string"?{binary:_.response}:{text:_.responseText},_.getAllResponseHeaders()))}},_.onload=o(),u=_.onerror=_.ontimeout=o("error"),_.onabort!==void 0?_.onabort=u:_.onreadystatechange=function(){_.readyState===4&&e.setTimeout(function(){o&&u()})},o=o("abort");try{_.send(s.hasContent&&s.data||null)}catch(O){if(o)throw O}},abort:function(){o&&o()}}}),c.ajaxPrefilter(function(s){s.crossDomain&&(s.contents.script=!1)}),c.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(s){return c.globalEval(s),s}}}),c.ajaxPrefilter("script",function(s){s.cache===void 0&&(s.cache=!1),s.crossDomain&&(s.type="GET")}),c.ajaxTransport("script",function(s){if(s.crossDomain||s.scriptAttrs){var o,u;return{send:function(l,m){o=c("<script>").attr(s.scriptAttrs||{}).prop({charset:s.scriptCharset,src:s.url}).on("load error",u=function(g){o.remove(),u=null,g&&m(g.type==="error"?404:200,g.type)}),v.head.appendChild(o[0])},abort:function(){u&&u()}}}});var Qo=[],Cr=/(=)\?(?=&|$)|\?\?/;c.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var s=Qo.pop()||c.expando+"_"+$o.guid++;return this[s]=!0,s}}),c.ajaxPrefilter("json jsonp",function(s,o,u){var l,m,g,_=s.jsonp!==!1&&(Cr.test(s.url)?"url":typeof s.data=="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Cr.test(s.data)&&"data");if(_||s.dataTypes[0]==="jsonp")return l=s.jsonpCallback=k(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,_?s[_]=s[_].replace(Cr,"$1"+l):s.jsonp!==!1&&(s.url+=(_r.test(s.url)?"&":"?")+s.jsonp+"="+l),s.converters["script json"]=function(){return g||c.error(l+" was not called"),g[0]},s.dataTypes[0]="json",m=e[l],e[l]=function(){g=arguments},u.always(function(){m===void 0?c(e).removeProp(l):e[l]=m,s[l]&&(s.jsonpCallback=o.jsonpCallback,Qo.push(l)),g&&k(m)&&m(g[0]),g=m=void 0}),"script"}),x.createHTMLDocument=function(){var s=v.implementation.createHTMLDocument("").body;return s.innerHTML="<form></form><form></form>",s.childNodes.length===2}(),c.parseHTML=function(s,o,u){if(typeof s!="string")return[];typeof o=="boolean"&&(u=o,o=!1);var l,m,g;return o||(x.createHTMLDocument?(o=v.implementation.createHTMLDocument(""),l=o.createElement("base"),l.href=v.location.href,o.head.appendChild(l)):o=v),m=se.exec(s),g=!u&&[],m?[o.createElement(m[1])]:(m=ko([s],o,g),g&&g.length&&c(g).remove(),c.merge([],m.childNodes))},c.fn.load=function(s,o,u){var l,m,g,_=this,O=s.indexOf(" ");return O>-1&&(l=Pn(s.slice(O)),s=s.slice(0,O)),k(o)?(u=o,o=void 0):o&&typeof o=="object"&&(m="POST"),_.length>0&&c.ajax({url:s,type:m||"GET",dataType:"html",data:o}).done(function(E){g=arguments,_.html(l?c("<div>").append(c.parseHTML(E)).find(l):E)}).always(u&&function(E,V){_.each(function(){u.apply(this,g||[E.responseText,V,E])})}),this},c.expr.pseudos.animated=function(s){return c.grep(c.timers,function(o){return s===o.elem}).length},c.offset={setOffset:function(s,o,u){var l,m,g,_,O,E,V,j=c.css(s,"position"),G=c(s),L={};j==="static"&&(s.style.position="relative"),O=G.offset(),g=c.css(s,"top"),E=c.css(s,"left"),V=(j==="absolute"||j==="fixed")&&(g+E).indexOf("auto")>-1,V?(l=G.position(),_=l.top,m=l.left):(_=parseFloat(g)||0,m=parseFloat(E)||0),k(o)&&(o=o.call(s,u,c.extend({},O))),o.top!=null&&(L.top=o.top-O.top+_),o.left!=null&&(L.left=o.left-O.left+m),"using"in o?o.using.call(s,L):G.css(L)}},c.fn.extend({offset:function(s){if(arguments.length)return s===void 0?this:this.each(function(m){c.offset.setOffset(this,s,m)});var o,u,l=this[0];if(!!l)return l.getClientRects().length?(o=l.getBoundingClientRect(),u=l.ownerDocument.defaultView,{top:o.top+u.pageYOffset,left:o.left+u.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var s,o,u,l=this[0],m={top:0,left:0};if(c.css(l,"position")==="fixed")o=l.getBoundingClientRect();else{for(o=this.offset(),u=l.ownerDocument,s=l.offsetParent||u.documentElement;s&&(s===u.body||s===u.documentElement)&&c.css(s,"position")==="static";)s=s.parentNode;s&&s!==l&&s.nodeType===1&&(m=c(s).offset(),m.top+=c.css(s,"borderTopWidth",!0),m.left+=c.css(s,"borderLeftWidth",!0))}return{top:o.top-m.top-c.css(l,"marginTop",!0),left:o.left-m.left-c.css(l,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var s=this.offsetParent;s&&c.css(s,"position")==="static";)s=s.offsetParent;return s||cn})}}),c.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(s,o){var u=o==="pageYOffset";c.fn[s]=function(l){return ut(this,function(m,g,_){var O;if(I(m)?O=m:m.nodeType===9&&(O=m.defaultView),_===void 0)return O?O[o]:m[g];O?O.scrollTo(u?O.pageXOffset:_,u?_:O.pageYOffset):m[g]=_},s,l,arguments.length)}}),c.each(["top","left"],function(s,o){c.cssHooks[o]=Ro(x.pixelPosition,function(u,l){if(l)return l=Cs(u,o),fr.test(l)?c(u).position()[o]+"px":l})}),c.each({Height:"height",Width:"width"},function(s,o){c.each({padding:"inner"+s,content:o,"":"outer"+s},function(u,l){c.fn[l]=function(m,g){var _=arguments.length&&(u||typeof m!="boolean"),O=u||(m===!0||g===!0?"margin":"border");return ut(this,function(E,V,j){var G;return I(E)?l.indexOf("outer")===0?E["inner"+s]:E.document.documentElement["client"+s]:E.nodeType===9?(G=E.documentElement,Math.max(E.body["scroll"+s],G["scroll"+s],E.body["offset"+s],G["offset"+s],G["client"+s])):j===void 0?c.css(E,V,O):c.style(E,V,j,O)},o,_?m:void 0,_)}})}),c.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(s,o){c.fn[o]=function(u){return this.on(o,u)}}),c.fn.extend({bind:function(s,o,u){return this.on(s,null,o,u)},unbind:function(s,o){return this.off(s,null,o)},delegate:function(s,o,u,l){return this.on(o,s,u,l)},undelegate:function(s,o,u){return arguments.length===1?this.off(s,"**"):this.off(o,s||"**",u)},hover:function(s,o){return this.mouseenter(s).mouseleave(o||s)}}),c.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(s,o){c.fn[o]=function(u,l){return arguments.length>0?this.on(o,null,u,l):this.trigger(o)}});var Nu=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;c.proxy=function(s,o){var u,l,m;if(typeof o=="string"&&(u=s[o],o=s,s=u),!!k(s))return l=a.call(arguments,2),m=function(){return s.apply(o||this,l.concat(a.call(arguments)))},m.guid=s.guid=s.guid||c.guid++,m},c.holdReady=function(s){s?c.readyWait++:c.ready(!0)},c.isArray=Array.isArray,c.parseJSON=JSON.parse,c.nodeName=W,c.isFunction=k,c.isWindow=I,c.camelCase=Pt,c.type=A,c.now=Date.now,c.isNumeric=function(s){var o=c.type(s);return(o==="number"||o==="string")&&!isNaN(s-parseFloat(s))},c.trim=function(s){return s==null?"":(s+"").replace(Nu,"$1")};var Eu=e.jQuery,Mu=e.$;return c.noConflict=function(s){return e.$===c&&(e.$=Mu),s&&e.jQuery===c&&(e.jQuery=Eu),c},typeof t>"u"&&(e.jQuery=e.$=c),c})})(Ia);const ke=Ia.exports,Ra="14.7.77",ca=(i,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:i}),ua=(i,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:i}),qr=(i,e)=>({startTime:e,type:"setValue",value:i}),Pa=(i,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:i}),qa=(i,e,{startTime:t,target:n,timeConstant:r})=>n+(e-n)*Math.exp((t-i)/r),rs=i=>i.type==="exponentialRampToValue",Oi=i=>i.type==="linearRampToValue",An=i=>rs(i)||Oi(i),zr=i=>i.type==="setValue",hn=i=>i.type==="setValueCurve",Di=(i,e,t,n)=>{const r=i[e];return r===void 0?n:An(r)||zr(r)?r.value:hn(r)?r.values[r.values.length-1]:qa(t,Di(i,e-1,r.startTime,n),r)},la=(i,e,t,n,r)=>t===void 0?[n.insertTime,r]:An(t)?[t.endTime,t.value]:zr(t)?[t.startTime,t.value]:hn(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,Di(i,e-1,t.startTime,r)],Fr=i=>i.type==="cancelAndHold",Vr=i=>i.type==="cancelScheduledValues",Sn=i=>Fr(i)||Vr(i)?i.cancelTime:rs(i)||Oi(i)?i.endTime:i.startTime,ha=(i,e,t,{endTime:n,value:r})=>t===r?r:0<t&&0<r||t<0&&r<0?t*(r/t)**((i-e)/(n-e)):0,fa=(i,e,t,{endTime:n,value:r})=>t+(i-e)/(n-e)*(r-t),Hu=(i,e)=>{const t=Math.floor(e),n=Math.ceil(e);return t===n?i[t]:(1-(e-t))*i[t]+(1-(n-e))*i[n]},$u=(i,{duration:e,startTime:t,values:n})=>{const r=(i-t)/e*(n.length-1);return Hu(n,r)},bi=i=>i.type==="setTarget";class zu{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=Sn(e);if(Fr(e)||Vr(e)){const n=this._automationEvents.findIndex(a=>Vr(e)&&hn(a)?a.startTime+a.duration>=t:Sn(a)>=t),r=this._automationEvents[n];if(n!==-1&&(this._automationEvents=this._automationEvents.slice(0,n)),Fr(e)){const a=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&An(r)){if(bi(a))throw new Error("The internal list is malformed.");const h=hn(a)?a.startTime+a.duration:Sn(a),f=hn(a)?a.values[a.values.length-1]:a.value,d=rs(r)?ha(t,h,f,r):fa(t,h,f,r),p=rs(r)?ca(d,t,this._currenTime):ua(d,t,this._currenTime);this._automationEvents.push(p)}a!==void 0&&bi(a)&&this._automationEvents.push(qr(this.getValue(t),t)),a!==void 0&&hn(a)&&a.startTime+a.duration>t&&(this._automationEvents[this._automationEvents.length-1]=Pa(new Float32Array([6,7]),a.startTime,t-a.startTime))}}else{const n=this._automationEvents.findIndex(h=>Sn(h)>t),r=n===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[n-1];if(r!==void 0&&hn(r)&&Sn(r)+r.duration>t)return!1;const a=rs(e)?ca(e.value,e.endTime,this._currenTime):Oi(e)?ua(e.value,t,this._currenTime):e;if(n===-1)this._automationEvents.push(a);else{if(hn(e)&&t+e.duration>Sn(this._automationEvents[n]))return!1;this._automationEvents.splice(n,0,a)}}return!0}flush(e){const t=this._automationEvents.findIndex(n=>Sn(n)>e);if(t>1){const n=this._automationEvents.slice(t-1),r=n[0];bi(r)&&n.unshift(qr(Di(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=n}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(h=>Sn(h)>e),n=this._automationEvents[t],r=(t===-1?this._automationEvents.length:t)-1,a=this._automationEvents[r];if(a!==void 0&&bi(a)&&(n===void 0||!An(n)||n.insertTime>e))return qa(e,Di(this._automationEvents,r-1,a.startTime,this._defaultValue),a);if(a!==void 0&&zr(a)&&(n===void 0||!An(n)))return a.value;if(a!==void 0&&hn(a)&&(n===void 0||!An(n)||a.startTime+a.duration>e))return e<a.startTime+a.duration?$u(e,a):a.values[a.values.length-1];if(a!==void 0&&An(a)&&(n===void 0||!An(n)))return a.value;if(n!==void 0&&rs(n)){const[h,f]=la(this._automationEvents,r,a,n,this._defaultValue);return ha(e,h,f,n)}if(n!==void 0&&Oi(n)){const[h,f]=la(this._automationEvents,r,a,n,this._defaultValue);return fa(e,h,f,n)}return this._defaultValue}}const Gu=i=>({cancelTime:i,type:"cancelAndHold"}),Xu=i=>({cancelTime:i,type:"cancelScheduledValues"}),Zu=(i,e)=>({endTime:e,type:"exponentialRampToValue",value:i}),Yu=(i,e)=>({endTime:e,type:"linearRampToValue",value:i}),Qu=(i,e,t)=>({startTime:e,target:i,timeConstant:t,type:"setTarget"}),Ju=()=>new DOMException("","AbortError"),el=i=>(e,t,[n,r,a],h)=>{i(e[r],[t,n,a],f=>f[0]===t&&f[1]===n,h)},tl=i=>(e,t,n)=>{const r=[];for(let a=0;a<n.numberOfInputs;a+=1)r.push(new Set);i.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},nl=i=>(e,t)=>{i.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},us=new WeakSet,Fa=new WeakMap,Gr=new WeakMap,Va=new WeakMap,Xr=new WeakMap,Qi=new WeakMap,La=new WeakMap,Lr=new WeakMap,jr=new WeakMap,Wr=new WeakMap,ja={construct(){return ja}},sl=i=>{try{const e=new Proxy(i,ja);new e}catch{return!1}return!0},da=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,pa=(i,e)=>{const t=[];let n=i.replace(/^[\s]+/,""),r=n.match(da);for(;r!==null;){const a=r[1].slice(1,-1),h=r[0].replace(/([\s]+)?;?$/,"").replace(a,new URL(a,e).toString());t.push(h),n=n.slice(r[0].length).replace(/^[\s]+/,""),r=n.match(da)}return[t.join(";"),n]},ma=i=>{if(i!==void 0&&!Array.isArray(i))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},ga=i=>{if(!sl(i))throw new TypeError("The given value for processorCtor should be a constructor.");if(i.prototype===null||typeof i.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},il=(i,e,t,n,r,a,h,f,d,p,y,b,S)=>{let N=0;return(x,k,I={credentials:"omit"})=>{const v=y.get(x);if(v!==void 0&&v.has(k))return Promise.resolve();const D=p.get(x);if(D!==void 0){const w=D.get(k);if(w!==void 0)return w}const C=a(x),A=C.audioWorklet===void 0?r(k).then(([w,c])=>{const[R,q]=pa(w,c),H=`${R};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${q}
})})(window,'_AWGS')`;return t(H)}).then(()=>{const w=S._AWGS.pop();if(w===void 0)throw new SyntaxError;n(C.currentTime,C.sampleRate,()=>w(class{},void 0,(c,R)=>{if(c.trim()==="")throw e();const q=jr.get(C);if(q!==void 0){if(q.has(c))throw e();ga(R),ma(R.parameterDescriptors),q.set(c,R)}else ga(R),ma(R.parameterDescriptors),jr.set(C,new Map([[c,R]]))},C.sampleRate,void 0,void 0))}):Promise.all([r(k),Promise.resolve(i(b,b))]).then(([[w,c],R])=>{const q=N+1;N=q;const[H,U]=pa(w,c),Q=`${H};((AudioWorkletProcessor,registerProcessor)=>{${U}
})(${R?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${R?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${R?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${q}',class extends AudioWorkletProcessor{process(){return !1}})`,ue=new Blob([Q],{type:"application/javascript; charset=utf-8"}),ee=URL.createObjectURL(ue);return C.audioWorklet.addModule(ee,I).then(()=>{if(f(C))return C;const ie=h(C);return ie.audioWorklet.addModule(ee,I).then(()=>ie)}).then(ie=>{if(d===null)throw new SyntaxError;try{new d(ie,`__sac${q}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(ee))});return D===void 0?p.set(x,new Map([[k,A]])):D.set(k,A),A.then(()=>{const w=y.get(x);w===void 0?y.set(x,new Set([k])):w.add(k)}).finally(()=>{const w=p.get(x);w!==void 0&&w.delete(k)}),A}},Zt=(i,e)=>{const t=i.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},Ji=(i,e)=>{const t=Array.from(i).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[n]=t;return i.delete(n),n},Wa=(i,e,t,n)=>{const r=Zt(i,e),a=Ji(r,h=>h[0]===t&&h[1]===n);return r.size===0&&i.delete(e),a},Ys=i=>Zt(La,i),ls=i=>{if(us.has(i))throw new Error("The AudioNode is already stored.");us.add(i),Ys(i).forEach(e=>e(!0))},Ba=i=>"port"in i,Qs=i=>{if(!us.has(i))throw new Error("The AudioNode is not stored.");us.delete(i),Ys(i).forEach(e=>e(!1))},Br=(i,e)=>{!Ba(i)&&e.every(t=>t.size===0)&&Qs(i)},rl=(i,e,t,n,r,a,h,f,d,p,y,b,S)=>{const N=new WeakMap;return(x,k,I,v,D)=>{const{activeInputs:C,passiveInputs:A}=a(k),{outputs:w}=a(x),c=f(x),R=q=>{const H=d(k),U=d(x);if(q){const z=Wa(A,x,I,v);i(C,x,z,!1),!D&&!b(x)&&t(U,H,I,v),S(k)&&ls(k)}else{const z=n(C,x,I,v);e(A,v,z,!1),!D&&!b(x)&&r(U,H,I,v);const W=h(k);if(W===0)y(k)&&Br(k,C);else{const se=N.get(k);se!==void 0&&clearTimeout(se),N.set(k,setTimeout(()=>{y(k)&&Br(k,C)},W*1e3))}}};return p(w,[k,I,v],q=>q[0]===k&&q[1]===I&&q[2]===v,!0)?(c.add(R),y(x)?i(C,x,[I,v,R],!0):e(A,v,[x,I,R],!0),!0):!1}},ol=i=>(e,t,[n,r,a],h)=>{const f=e.get(n);f===void 0?e.set(n,new Set([[r,t,a]])):i(f,[r,t,a],d=>d[0]===r&&d[1]===t,h)},al=i=>(e,t)=>{const n=i(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(n).connect(e.destination);const r=()=>{t.removeEventListener("ended",r),t.disconnect(n),n.disconnect()};t.addEventListener("ended",r)},cl=i=>(e,t)=>{i(e).add(t)},ul={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},ll=(i,e,t,n,r,a)=>class extends i{constructor(f,d){const p=r(f),y={...ul,...d},b=n(p,y),S=a(p)?e():null;super(f,!1,b,S),this._nativeAnalyserNode=b}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(f){this._nativeAnalyserNode.fftSize=f}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(f){const d=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=f,!(f>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=d,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(f){const d=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=f,!(this._nativeAnalyserNode.maxDecibels>f))throw this._nativeAnalyserNode.minDecibels=d,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(f){this._nativeAnalyserNode.smoothingTimeConstant=f}getByteFrequencyData(f){this._nativeAnalyserNode.getByteFrequencyData(f)}getByteTimeDomainData(f){this._nativeAnalyserNode.getByteTimeDomainData(f)}getFloatFrequencyData(f){this._nativeAnalyserNode.getFloatFrequencyData(f)}getFloatTimeDomainData(f){this._nativeAnalyserNode.getFloatTimeDomainData(f)}},ft=(i,e)=>i.context===e,hl=(i,e,t)=>()=>{const n=new WeakMap,r=async(a,h)=>{let f=e(a);if(!ft(f,h)){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,fftSize:f.fftSize,maxDecibels:f.maxDecibels,minDecibels:f.minDecibels,smoothingTimeConstant:f.smoothingTimeConstant};f=i(h,p)}return n.set(h,f),await t(a,h,f),f};return{render(a,h){const f=n.get(h);return f!==void 0?Promise.resolve(f):r(a,h)}}},Ii=i=>{try{i.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},nn=()=>new DOMException("","IndexSizeError"),Zr=i=>{i.getChannelData=(e=>t=>{try{return e.call(i,t)}catch(n){throw n.code===12?nn():n}})(i.getChannelData)},fl={numberOfChannels:1},dl=(i,e,t,n,r,a,h,f)=>{let d=null;return class Ka{constructor(y){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:b,numberOfChannels:S,sampleRate:N}={...fl,...y};d===null&&(d=new r(1,1,44100));const x=n!==null&&e(a,a)?new n({length:b,numberOfChannels:S,sampleRate:N}):d.createBuffer(S,b,N);if(x.numberOfChannels===0)throw t();return typeof x.copyFromChannel!="function"?(h(x),Zr(x)):e(Ii,()=>Ii(x))||f(x),i.add(x),x}static[Symbol.hasInstance](y){return y!==null&&typeof y=="object"&&Object.getPrototypeOf(y)===Ka.prototype||i.has(y)}}},wt=-34028234663852886e22,pt=-wt,pn=i=>us.has(i),pl={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},ml=(i,e,t,n,r,a,h,f)=>class extends i{constructor(p,y){const b=a(p),S={...pl,...y},N=r(b,S),x=h(b),k=x?e():null;super(p,!1,N,k),this._audioBufferSourceNodeRenderer=k,this._isBufferNullified=!1,this._isBufferSet=S.buffer!==null,this._nativeAudioBufferSourceNode=N,this._onended=null,this._playbackRate=t(this,x,N.playbackRate,pt,wt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(p){if(this._nativeAudioBufferSourceNode.buffer=p,p!==null){if(this._isBufferSet)throw n();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(p){this._nativeAudioBufferSourceNode.loop=p}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(p){this._nativeAudioBufferSourceNode.loopEnd=p}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(p){this._nativeAudioBufferSourceNode.loopStart=p}get onended(){return this._onended}set onended(p){const y=typeof p=="function"?f(this,p):null;this._nativeAudioBufferSourceNode.onended=y;const b=this._nativeAudioBufferSourceNode.onended;this._onended=b!==null&&b===y?p:b}get playbackRate(){return this._playbackRate}start(p=0,y=0,b){if(this._nativeAudioBufferSourceNode.start(p,y,b),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=b===void 0?[p,y]:[p,y,b]),this.context.state!=="closed"){ls(this);const S=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",S),pn(this)&&Qs(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",S)}}stop(p=0){this._nativeAudioBufferSourceNode.stop(p),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=p)}},gl=(i,e,t,n,r)=>()=>{const a=new WeakMap;let h=null,f=null;const d=async(p,y)=>{let b=t(p);const S=ft(b,y);if(!S){const N={buffer:b.buffer,channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,loop:b.loop,loopEnd:b.loopEnd,loopStart:b.loopStart,playbackRate:b.playbackRate.value};b=e(y,N),h!==null&&b.start(...h),f!==null&&b.stop(f)}return a.set(y,b),S?await i(y,p.playbackRate,b.playbackRate):await n(y,p.playbackRate,b.playbackRate),await r(p,y,b),b};return{set start(p){h=p},set stop(p){f=p},render(p,y){const b=a.get(y);return b!==void 0?Promise.resolve(b):d(p,y)}}},vl=i=>"playbackRate"in i,_l=i=>"frequency"in i&&"gain"in i,yl=i=>"offset"in i,bl=i=>!("frequency"in i)&&"gain"in i,wl=i=>"detune"in i&&"frequency"in i,Tl=i=>"pan"in i,mt=i=>Zt(Fa,i),Js=i=>Zt(Va,i),Kr=(i,e)=>{const{activeInputs:t}=mt(i);t.forEach(r=>r.forEach(([a])=>{e.includes(i)||Kr(a,[...e,i])}));const n=vl(i)?[i.playbackRate]:Ba(i)?Array.from(i.parameters.values()):_l(i)?[i.Q,i.detune,i.frequency,i.gain]:yl(i)?[i.offset]:bl(i)?[i.gain]:wl(i)?[i.detune,i.frequency]:Tl(i)?[i.pan]:[];for(const r of n){const a=Js(r);a!==void 0&&a.activeInputs.forEach(([h])=>Kr(h,e))}pn(i)&&Qs(i)},Ua=i=>{Kr(i.destination,[])},Cl=i=>i===void 0||typeof i=="number"||typeof i=="string"&&(i==="balanced"||i==="interactive"||i==="playback"),xl=(i,e,t,n,r,a,h,f,d)=>class extends i{constructor(y={}){if(d===null)throw new Error("Missing the native AudioContext constructor.");let b;try{b=new d(y)}catch(x){throw x.code===12&&x.message==="sampleRate is not in range"?t():x}if(b===null)throw n();if(!Cl(y.latencyHint))throw new TypeError(`The provided value '${y.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(y.sampleRate!==void 0&&b.sampleRate!==y.sampleRate)throw t();super(b,2);const{latencyHint:S}=y,{sampleRate:N}=b;if(this._baseLatency=typeof b.baseLatency=="number"?b.baseLatency:S==="balanced"?512/N:S==="interactive"||S===void 0?256/N:S==="playback"?1024/N:Math.max(2,Math.min(128,Math.round(S*N/128)))*128/N,this._nativeAudioContext=b,d.name==="webkitAudioContext"?(this._nativeGainNode=b.createGain(),this._nativeOscillatorNode=b.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(b.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,b.state==="running"){this._state="suspended";const x=()=>{this._state==="suspended"&&(this._state=null),b.removeEventListener("statechange",x)};b.addEventListener("statechange",x)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Ua(this)}))}createMediaElementSource(y){return new r(this,{mediaElement:y})}createMediaStreamDestination(){return new a(this)}createMediaStreamSource(y){return new h(this,{mediaStream:y})}createMediaStreamTrackSource(y){return new f(this,{mediaStreamTrack:y})}resume(){return this._state==="suspended"?new Promise((y,b)=>{const S=()=>{this._nativeAudioContext.removeEventListener("statechange",S),this._nativeAudioContext.state==="running"?y():this.resume().then(y,b)};this._nativeAudioContext.addEventListener("statechange",S)}):this._nativeAudioContext.resume().catch(y=>{throw y===void 0||y.code===15?e():y})}suspend(){return this._nativeAudioContext.suspend().catch(y=>{throw y===void 0?e():y})}},Sl=(i,e,t,n,r,a,h,f)=>class extends i{constructor(p,y){const b=a(p),S=h(b),N=r(b,y,S),x=S?e(f):null;super(p,!1,N,x),this._isNodeOfNativeOfflineAudioContext=S,this._nativeAudioDestinationNode=N}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(p){if(this._isNodeOfNativeOfflineAudioContext)throw n();if(p>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=p}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(p){if(this._isNodeOfNativeOfflineAudioContext)throw n();this._nativeAudioDestinationNode.channelCountMode=p}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},Al=i=>{const e=new WeakMap,t=async(n,r)=>{const a=r.destination;return e.set(r,a),await i(n,r,a),a};return{render(n,r){const a=e.get(r);return a!==void 0?Promise.resolve(a):t(n,r)}}},kl=(i,e,t,n,r,a,h,f)=>(d,p)=>{const y=p.listener,b=()=>{const w=new Float32Array(1),c=e(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),R=h(p);let q=!1,H=[0,0,-1,0,1,0],U=[0,0,0];const z=()=>{if(q)return;q=!0;const ue=n(p,256,9,0);ue.onaudioprocess=({inputBuffer:ee})=>{const ie=[a(ee,w,0),a(ee,w,1),a(ee,w,2),a(ee,w,3),a(ee,w,4),a(ee,w,5)];ie.some((le,be)=>le!==H[be])&&(y.setOrientation(...ie),H=ie);const _e=[a(ee,w,6),a(ee,w,7),a(ee,w,8)];_e.some((le,be)=>le!==U[be])&&(y.setPosition(..._e),U=_e)},c.connect(ue)},W=ue=>ee=>{ee!==H[ue]&&(H[ue]=ee,y.setOrientation(...H))},se=ue=>ee=>{ee!==U[ue]&&(U[ue]=ee,y.setPosition(...U))},Q=(ue,ee,ie)=>{const _e=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ee});_e.connect(c,0,ue),_e.start(),Object.defineProperty(_e.offset,"defaultValue",{get(){return ee}});const le=i({context:d},R,_e.offset,pt,wt);return f(le,"value",be=>()=>be.call(le),be=>ce=>{try{be.call(le,ce)}catch(Ne){if(Ne.code!==9)throw Ne}z(),R&&ie(ce)}),le.cancelAndHoldAtTime=(be=>R?()=>{throw r()}:(...ce)=>{const Ne=be.apply(le,ce);return z(),Ne})(le.cancelAndHoldAtTime),le.cancelScheduledValues=(be=>R?()=>{throw r()}:(...ce)=>{const Ne=be.apply(le,ce);return z(),Ne})(le.cancelScheduledValues),le.exponentialRampToValueAtTime=(be=>R?()=>{throw r()}:(...ce)=>{const Ne=be.apply(le,ce);return z(),Ne})(le.exponentialRampToValueAtTime),le.linearRampToValueAtTime=(be=>R?()=>{throw r()}:(...ce)=>{const Ne=be.apply(le,ce);return z(),Ne})(le.linearRampToValueAtTime),le.setTargetAtTime=(be=>R?()=>{throw r()}:(...ce)=>{const Ne=be.apply(le,ce);return z(),Ne})(le.setTargetAtTime),le.setValueAtTime=(be=>R?()=>{throw r()}:(...ce)=>{const Ne=be.apply(le,ce);return z(),Ne})(le.setValueAtTime),le.setValueCurveAtTime=(be=>R?()=>{throw r()}:(...ce)=>{const Ne=be.apply(le,ce);return z(),Ne})(le.setValueCurveAtTime),le};return{forwardX:Q(0,0,W(0)),forwardY:Q(1,0,W(1)),forwardZ:Q(2,-1,W(2)),positionX:Q(6,0,se(0)),positionY:Q(7,0,se(1)),positionZ:Q(8,0,se(2)),upX:Q(3,0,W(3)),upY:Q(4,1,W(4)),upZ:Q(5,0,W(5))}},{forwardX:S,forwardY:N,forwardZ:x,positionX:k,positionY:I,positionZ:v,upX:D,upY:C,upZ:A}=y.forwardX===void 0?b():y;return{get forwardX(){return S},get forwardY(){return N},get forwardZ(){return x},get positionX(){return k},get positionY(){return I},get positionZ(){return v},get upX(){return D},get upY(){return C},get upZ(){return A}}},Ri=i=>"context"in i,ei=i=>Ri(i[0]),Zn=(i,e,t,n)=>{for(const r of i)if(t(r)){if(n)return!1;throw Error("The set contains at least one similar element.")}return i.add(e),!0},va=(i,e,[t,n],r)=>{Zn(i,[e,t,n],a=>a[0]===e&&a[1]===t,r)},_a=(i,[e,t,n],r)=>{const a=i.get(e);a===void 0?i.set(e,new Set([[t,n]])):Zn(a,[t,n],h=>h[0]===t,r)},ms=i=>"inputs"in i,Pi=(i,e,t,n)=>{if(ms(e)){const r=e.inputs[n];return i.connect(r,t,0),[r,t,0]}return i.connect(e,t,n),[e,t,n]},Ha=(i,e,t)=>{for(const n of i)if(n[0]===e&&n[1]===t)return i.delete(n),n;return null},Nl=(i,e,t)=>Ji(i,n=>n[0]===e&&n[1]===t),$a=(i,e)=>{if(!Ys(i).delete(e))throw new Error("Missing the expected event listener.")},za=(i,e,t)=>{const n=Zt(i,e),r=Ji(n,a=>a[0]===t);return n.size===0&&i.delete(e),r},qi=(i,e,t,n)=>{ms(e)?i.disconnect(e.inputs[n],t,0):i.disconnect(e,t,n)},We=i=>Zt(Gr,i),Is=i=>Zt(Xr,i),Hn=i=>Lr.has(i),Ni=i=>!us.has(i),ya=(i,e)=>new Promise(t=>{if(e!==null)t(!0);else{const n=i.createScriptProcessor(256,1,1),r=i.createGain(),a=i.createBuffer(1,2,44100),h=a.getChannelData(0);h[0]=1,h[1]=1;const f=i.createBufferSource();f.buffer=a,f.loop=!0,f.connect(n).connect(i.destination),f.connect(r),f.disconnect(r),n.onaudioprocess=d=>{const p=d.inputBuffer.getChannelData(0);Array.prototype.some.call(p,y=>y===1)?t(!0):t(!1),f.stop(),n.onaudioprocess=null,f.disconnect(n),n.disconnect(i.destination)},f.start()}}),Dr=(i,e)=>{const t=new Map;for(const n of i)for(const r of n){const a=t.get(r);t.set(r,a===void 0?1:a+1)}t.forEach((n,r)=>e(r,n))},Fi=i=>"context"in i,El=i=>{const e=new Map;i.connect=(t=>(n,r=0,a=0)=>{const h=Fi(n)?t(n,r,a):t(n,r),f=e.get(n);return f===void 0?e.set(n,[{input:a,output:r}]):f.every(d=>d.input!==a||d.output!==r)&&f.push({input:a,output:r}),h})(i.connect.bind(i)),i.disconnect=(t=>(n,r,a)=>{if(t.apply(i),n===void 0)e.clear();else if(typeof n=="number")for(const[h,f]of e){const d=f.filter(p=>p.output!==n);d.length===0?e.delete(h):e.set(h,d)}else if(e.has(n))if(r===void 0)e.delete(n);else{const h=e.get(n);if(h!==void 0){const f=h.filter(d=>d.output!==r&&(d.input!==a||a===void 0));f.length===0?e.delete(n):e.set(n,f)}}for(const[h,f]of e)f.forEach(d=>{Fi(h)?i.connect(h,d.output,d.input):i.connect(h,d.output)})})(i.disconnect)},Ml=(i,e,t,n)=>{const{activeInputs:r,passiveInputs:a}=Js(e),{outputs:h}=mt(i),f=Ys(i),d=p=>{const y=We(i),b=Is(e);if(p){const S=za(a,i,t);va(r,i,S,!1),!n&&!Hn(i)&&y.connect(b,t)}else{const S=Nl(r,i,t);_a(a,S,!1),!n&&!Hn(i)&&y.disconnect(b,t)}};return Zn(h,[e,t],p=>p[0]===e&&p[1]===t,!0)?(f.add(d),pn(i)?va(r,i,[t,d],!0):_a(a,[i,t,d],!0),!0):!1},Ol=(i,e,t,n)=>{const{activeInputs:r,passiveInputs:a}=mt(e),h=Ha(r[n],i,t);return h===null?[Wa(a,i,t,n)[2],!1]:[h[2],!0]},Dl=(i,e,t)=>{const{activeInputs:n,passiveInputs:r}=Js(e),a=Ha(n,i,t);return a===null?[za(r,i,t)[1],!1]:[a[2],!0]},Yr=(i,e,t,n,r)=>{const[a,h]=Ol(i,t,n,r);if(a!==null&&($a(i,a),h&&!e&&!Hn(i)&&qi(We(i),We(t),n,r)),pn(t)){const{activeInputs:f}=mt(t);Br(t,f)}},Qr=(i,e,t,n)=>{const[r,a]=Dl(i,t,n);r!==null&&($a(i,r),a&&!e&&!Hn(i)&&We(i).disconnect(Is(t),n))},Il=(i,e)=>{const t=mt(i),n=[];for(const r of t.outputs)ei(r)?Yr(i,e,...r):Qr(i,e,...r),n.push(r[0]);return t.outputs.clear(),n},Rl=(i,e,t)=>{const n=mt(i),r=[];for(const a of n.outputs)a[1]===t&&(ei(a)?Yr(i,e,...a):Qr(i,e,...a),r.push(a[0]),n.outputs.delete(a));return r},Pl=(i,e,t,n,r)=>{const a=mt(i);return Array.from(a.outputs).filter(h=>h[0]===t&&(n===void 0||h[1]===n)&&(r===void 0||h[2]===r)).map(h=>(ei(h)?Yr(i,e,...h):Qr(i,e,...h),a.outputs.delete(h),h[0]))},ql=(i,e,t,n,r,a,h,f,d,p,y,b,S,N,x,k)=>class extends p{constructor(v,D,C,A){super(C),this._context=v,this._nativeAudioNode=C;const w=y(v);b(w)&&t(ya,()=>ya(w,k))!==!0&&El(C),Gr.set(this,C),La.set(this,new Set),v.state!=="closed"&&D&&ls(this),i(this,A,C)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(v){this._nativeAudioNode.channelCount=v}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(v){this._nativeAudioNode.channelCountMode=v}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(v){this._nativeAudioNode.channelInterpretation=v}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(v,D=0,C=0){if(D<0||D>=this._nativeAudioNode.numberOfOutputs)throw r();const A=y(this._context),w=x(A);if(S(v)||N(v))throw a();if(Ri(v)){const q=We(v);try{const U=Pi(this._nativeAudioNode,q,D,C),z=Ni(this);(w||z)&&this._nativeAudioNode.disconnect(...U),this.context.state!=="closed"&&!z&&Ni(v)&&ls(v)}catch(U){throw U.code===12?a():U}if(e(this,v,D,C,w)){const U=d([this],v);Dr(U,n(w))}return v}const c=Is(v);if(c.name==="playbackRate"&&c.maxValue===1024)throw h();try{this._nativeAudioNode.connect(c,D),(w||Ni(this))&&this._nativeAudioNode.disconnect(c,D)}catch(q){throw q.code===12?a():q}if(Ml(this,v,D,w)){const q=d([this],v);Dr(q,n(w))}}disconnect(v,D,C){let A;const w=y(this._context),c=x(w);if(v===void 0)A=Il(this,c);else if(typeof v=="number"){if(v<0||v>=this.numberOfOutputs)throw r();A=Rl(this,c,v)}else{if(D!==void 0&&(D<0||D>=this.numberOfOutputs)||Ri(v)&&C!==void 0&&(C<0||C>=v.numberOfInputs))throw r();if(A=Pl(this,c,v,D,C),A.length===0)throw a()}for(const R of A){const q=d([this],R);Dr(q,f)}}},Fl=(i,e,t,n,r,a,h,f,d,p,y,b,S)=>(N,x,k,I=null,v=null)=>{const D=new zu(k.defaultValue),C=x?n(D):null,A={get defaultValue(){return k.defaultValue},get maxValue(){return I===null?k.maxValue:I},get minValue(){return v===null?k.minValue:v},get value(){return k.value},set value(w){k.value=w,A.setValueAtTime(w,N.context.currentTime)},cancelAndHoldAtTime(w){if(typeof k.cancelAndHoldAtTime=="function")C===null&&D.flush(N.context.currentTime),D.add(r(w)),k.cancelAndHoldAtTime(w);else{const c=Array.from(D).pop();C===null&&D.flush(N.context.currentTime),D.add(r(w));const R=Array.from(D).pop();k.cancelScheduledValues(w),c!==R&&R!==void 0&&(R.type==="exponentialRampToValue"?k.exponentialRampToValueAtTime(R.value,R.endTime):R.type==="linearRampToValue"?k.linearRampToValueAtTime(R.value,R.endTime):R.type==="setValue"?k.setValueAtTime(R.value,R.startTime):R.type==="setValueCurve"&&k.setValueCurveAtTime(R.values,R.startTime,R.duration))}return A},cancelScheduledValues(w){return C===null&&D.flush(N.context.currentTime),D.add(a(w)),k.cancelScheduledValues(w),A},exponentialRampToValueAtTime(w,c){if(w===0)throw new RangeError;if(!Number.isFinite(c)||c<0)throw new RangeError;return C===null&&D.flush(N.context.currentTime),D.add(h(w,c)),k.exponentialRampToValueAtTime(w,c),A},linearRampToValueAtTime(w,c){return C===null&&D.flush(N.context.currentTime),D.add(f(w,c)),k.linearRampToValueAtTime(w,c),A},setTargetAtTime(w,c,R){return C===null&&D.flush(N.context.currentTime),D.add(d(w,c,R)),k.setTargetAtTime(w,c,R),A},setValueAtTime(w,c){return C===null&&D.flush(N.context.currentTime),D.add(p(w,c)),k.setValueAtTime(w,c),A},setValueCurveAtTime(w,c,R){const q=w instanceof Float32Array?w:new Float32Array(w);if(b!==null&&b.name==="webkitAudioContext"){const H=c+R,U=N.context.sampleRate,z=Math.ceil(c*U),W=Math.floor(H*U),se=W-z,Q=new Float32Array(se);for(let ee=0;ee<se;ee+=1){const ie=(q.length-1)/R*((z+ee)/U-c),_e=Math.floor(ie),le=Math.ceil(ie);Q[ee]=_e===le?q[_e]:(1-(ie-_e))*q[_e]+(1-(le-ie))*q[le]}C===null&&D.flush(N.context.currentTime),D.add(y(Q,c,R)),k.setValueCurveAtTime(Q,c,R);const ue=W/U;ue<H&&S(A,Q[Q.length-1],ue),S(A,q[q.length-1],H)}else C===null&&D.flush(N.context.currentTime),D.add(y(q,c,R)),k.setValueCurveAtTime(q,c,R);return A}};return t.set(A,k),e.set(A,N),i(A,C),A},Vl=i=>({replay(e){for(const t of i)if(t.type==="exponentialRampToValue"){const{endTime:n,value:r}=t;e.exponentialRampToValueAtTime(r,n)}else if(t.type==="linearRampToValue"){const{endTime:n,value:r}=t;e.linearRampToValueAtTime(r,n)}else if(t.type==="setTarget"){const{startTime:n,target:r,timeConstant:a}=t;e.setTargetAtTime(r,n,a)}else if(t.type==="setValue"){const{startTime:n,value:r}=t;e.setValueAtTime(r,n)}else if(t.type==="setValueCurve"){const{duration:n,startTime:r,values:a}=t;e.setValueCurveAtTime(a,r,n)}else throw new Error("Can't apply an unknown automation.")}});class Ga{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((n,r)=>e.call(t,n,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const Ll={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},jl=(i,e,t,n,r,a,h,f,d,p,y,b,S,N)=>class extends e{constructor(k,I,v){var D;const C=f(k),A=d(C),w=y({...Ll,...v});S(w);const c=jr.get(C),R=c==null?void 0:c.get(I),q=A||C.state!=="closed"?C:(D=h(C))!==null&&D!==void 0?D:C,H=r(q,A?null:k.baseLatency,p,I,R,w),U=A?n(I,w,R):null;super(k,!0,H,U);const z=[];H.parameters.forEach((se,Q)=>{const ue=t(this,A,se);z.push([Q,ue])}),this._nativeAudioWorkletNode=H,this._onprocessorerror=null,this._parameters=new Ga(z),A&&i(C,this);const{activeInputs:W}=a(this);b(H,W)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(k){const I=typeof k=="function"?N(this,k):null;this._nativeAudioWorkletNode.onprocessorerror=I;const v=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=v!==null&&v===I?k:v}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Vi(i,e,t,n,r){if(typeof i.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),i.copyFromChannel(e[t],n,r);else{const a=i.getChannelData(n);if(e[t].byteLength===0)e[t]=a.slice(r,r+128);else{const h=new Float32Array(a.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(h)}}}const Xa=(i,e,t,n,r)=>{typeof i.copyToChannel=="function"?e[t].byteLength!==0&&i.copyToChannel(e[t],n,r):e[t].byteLength!==0&&i.getChannelData(n).set(e[t],r)},Li=(i,e)=>{const t=[];for(let n=0;n<i;n+=1){const r=[],a=typeof e=="number"?e:e[n];for(let h=0;h<a;h+=1)r.push(new Float32Array(128));t.push(r)}return t},Wl=(i,e)=>{const t=Zt(Wr,i),n=We(e);return Zt(t,n)},Bl=async(i,e,t,n,r,a,h)=>{const f=e===null?Math.ceil(i.context.length/128)*128:e.length,d=n.channelCount*n.numberOfInputs,p=r.reduce((I,v)=>I+v,0),y=p===0?null:t.createBuffer(p,f,t.sampleRate);if(a===void 0)throw new Error("Missing the processor constructor.");const b=mt(i),S=await Wl(t,i),N=Li(n.numberOfInputs,n.channelCount),x=Li(n.numberOfOutputs,r),k=Array.from(i.parameters.keys()).reduce((I,v)=>({...I,[v]:new Float32Array(128)}),{});for(let I=0;I<f;I+=128){if(n.numberOfInputs>0&&e!==null)for(let v=0;v<n.numberOfInputs;v+=1)for(let D=0;D<n.channelCount;D+=1)Vi(e,N[v],D,D,I);a.parameterDescriptors!==void 0&&e!==null&&a.parameterDescriptors.forEach(({name:v},D)=>{Vi(e,k,v,d+D,I)});for(let v=0;v<n.numberOfInputs;v+=1)for(let D=0;D<r[v];D+=1)x[v][D].byteLength===0&&(x[v][D]=new Float32Array(128));try{const v=N.map((C,A)=>b.activeInputs[A].size===0?[]:C),D=h(I/t.sampleRate,t.sampleRate,()=>S.process(v,x,k));if(y!==null)for(let C=0,A=0;C<n.numberOfOutputs;C+=1){for(let w=0;w<r[C];w+=1)Xa(y,x[C],w,A+w,I);A+=r[C]}if(!D)break}catch(v){i.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return y},Kl=(i,e,t,n,r,a,h,f,d,p,y,b,S,N,x,k)=>(I,v,D)=>{const C=new WeakMap;let A=null;const w=async(c,R)=>{let q=y(c),H=null;const U=ft(q,R),z=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(b===null){const W=z.reduce((ee,ie)=>ee+ie,0),se=r(R,{channelCount:Math.max(1,W),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,W)}),Q=[];for(let ee=0;ee<c.numberOfOutputs;ee+=1)Q.push(n(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:z[ee]}));const ue=h(R,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});ue.connect=e.bind(null,Q),ue.disconnect=d.bind(null,Q),H=[se,Q,ue]}else U||(q=new b(R,I));if(C.set(R,H===null?q:H[2]),H!==null){if(A===null){if(D===void 0)throw new Error("Missing the processor constructor.");if(S===null)throw new Error("Missing the native OfflineAudioContext constructor.");const ie=c.channelCount*c.numberOfInputs,_e=D.parameterDescriptors===void 0?0:D.parameterDescriptors.length,le=ie+_e;A=Bl(c,le===0?null:await(async()=>{const ce=new S(le,Math.ceil(c.context.length/128)*128,R.sampleRate),Ne=[],Qe=[];for(let qe=0;qe<v.numberOfInputs;qe+=1)Ne.push(h(ce,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),Qe.push(r(ce,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const rt=await Promise.all(Array.from(c.parameters.values()).map(async qe=>{const tt=a(ce,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:qe.value});return await N(ce,qe,tt.offset),tt})),we=n(ce,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,ie+_e)});for(let qe=0;qe<v.numberOfInputs;qe+=1){Ne[qe].connect(Qe[qe]);for(let tt=0;tt<v.channelCount;tt+=1)Qe[qe].connect(we,tt,qe*v.channelCount+tt)}for(const[qe,tt]of rt.entries())tt.connect(we,0,ie+qe),tt.start(0);return we.connect(ce.destination),await Promise.all(Ne.map(qe=>x(c,ce,qe))),k(ce)})(),R,v,z,D,p)}const W=await A,se=t(R,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[Q,ue,ee]=H;W!==null&&(se.buffer=W,se.start(0)),se.connect(Q);for(let ie=0,_e=0;ie<c.numberOfOutputs;ie+=1){const le=ue[ie];for(let be=0;be<z[ie];be+=1)Q.connect(le,_e+be,be);_e+=z[ie]}return ee}if(U)for(const[W,se]of c.parameters.entries())await i(R,se,q.parameters.get(W));else for(const[W,se]of c.parameters.entries())await N(R,se,q.parameters.get(W));return await x(c,R,q),q};return{render(c,R){f(R,c);const q=C.get(R);return q!==void 0?Promise.resolve(q):w(c,R)}}},Ul=(i,e,t,n,r,a,h,f,d,p,y,b,S,N,x,k,I,v,D,C)=>class extends x{constructor(w,c){super(w,c),this._nativeContext=w,this._audioWorklet=i===void 0?void 0:{addModule:(R,q)=>i(this,R,q)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(w,c,R){return new t({length:c,numberOfChannels:w,sampleRate:R})}createBufferSource(){return new n(this)}createChannelMerger(w=6){return new a(this,{numberOfInputs:w})}createChannelSplitter(w=6){return new h(this,{numberOfOutputs:w})}createConstantSource(){return new f(this)}createConvolver(){return new d(this)}createDelay(w=1){return new y(this,{maxDelayTime:w})}createDynamicsCompressor(){return new b(this)}createGain(){return new S(this)}createIIRFilter(w,c){return new N(this,{feedback:c,feedforward:w})}createOscillator(){return new k(this)}createPanner(){return new I(this)}createPeriodicWave(w,c,R={disableNormalization:!1}){return new v(this,{...R,imag:c,real:w})}createStereoPanner(){return new D(this)}createWaveShaper(){return new C(this)}decodeAudioData(w,c,R){return p(this._nativeContext,w).then(q=>(typeof c=="function"&&c(q),q),q=>{throw typeof R=="function"&&R(q),q})}},Hl={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},$l=(i,e,t,n,r,a,h,f)=>class extends i{constructor(p,y){const b=a(p),S={...Hl,...y},N=r(b,S),x=h(b),k=x?t():null;super(p,!1,N,k),this._Q=e(this,x,N.Q,pt,wt),this._detune=e(this,x,N.detune,1200*Math.log2(pt),-1200*Math.log2(pt)),this._frequency=e(this,x,N.frequency,p.sampleRate/2,0),this._gain=e(this,x,N.gain,40*Math.log10(pt),wt),this._nativeBiquadFilterNode=N,f(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(p){this._nativeBiquadFilterNode.type=p}getFrequencyResponse(p,y,b){try{this._nativeBiquadFilterNode.getFrequencyResponse(p,y,b)}catch(S){throw S.code===11?n():S}if(p.length!==y.length||y.length!==b.length)throw n()}},zl=(i,e,t,n,r)=>()=>{const a=new WeakMap,h=async(f,d)=>{let p=t(f);const y=ft(p,d);if(!y){const b={Q:p.Q.value,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,detune:p.detune.value,frequency:p.frequency.value,gain:p.gain.value,type:p.type};p=e(d,b)}return a.set(d,p),y?(await i(d,f.Q,p.Q),await i(d,f.detune,p.detune),await i(d,f.frequency,p.frequency),await i(d,f.gain,p.gain)):(await n(d,f.Q,p.Q),await n(d,f.detune,p.detune),await n(d,f.frequency,p.frequency),await n(d,f.gain,p.gain)),await r(f,d,p),p};return{render(f,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):h(f,d)}}},Gl=(i,e)=>(t,n)=>{const r=e.get(t);if(r!==void 0)return r;const a=i.get(t);if(a!==void 0)return a;try{const h=n();return h instanceof Promise?(i.set(t,h),h.catch(()=>!1).then(f=>(i.delete(t),e.set(t,f),f))):(e.set(t,h),h)}catch{return e.set(t,!1),!1}},Xl={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Zl=(i,e,t,n,r)=>class extends i{constructor(h,f){const d=n(h),p={...Xl,...f},y=t(d,p),b=r(d)?e():null;super(h,!1,y,b)}},Yl=(i,e,t)=>()=>{const n=new WeakMap,r=async(a,h)=>{let f=e(a);if(!ft(f,h)){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,numberOfInputs:f.numberOfInputs};f=i(h,p)}return n.set(h,f),await t(a,h,f),f};return{render(a,h){const f=n.get(h);return f!==void 0?Promise.resolve(f):r(a,h)}}},Ql={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Jl=(i,e,t,n,r,a)=>class extends i{constructor(f,d){const p=n(f),y=a({...Ql,...d}),b=t(p,y),S=r(p)?e():null;super(f,!1,b,S)}},eh=(i,e,t)=>()=>{const n=new WeakMap,r=async(a,h)=>{let f=e(a);if(!ft(f,h)){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,numberOfOutputs:f.numberOfOutputs};f=i(h,p)}return n.set(h,f),await t(a,h,f),f};return{render(a,h){const f=n.get(h);return f!==void 0?Promise.resolve(f):r(a,h)}}},th=i=>(e,t,n)=>i(t,e,n),nh=i=>(e,t,n=0,r=0)=>{const a=e[n];if(a===void 0)throw i();return Fi(t)?a.connect(t,0,r):a.connect(t,0)},sh=i=>(e,t)=>{const n=i(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return n.buffer=r,n.loop=!0,n.connect(t),n.start(),()=>{n.stop(),n.disconnect(t)}},ih={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},rh=(i,e,t,n,r,a,h)=>class extends i{constructor(d,p){const y=r(d),b={...ih,...p},S=n(y,b),N=a(y),x=N?t():null;super(d,!1,S,x),this._constantSourceNodeRenderer=x,this._nativeConstantSourceNode=S,this._offset=e(this,N,S.offset,pt,wt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(d){const p=typeof d=="function"?h(this,d):null;this._nativeConstantSourceNode.onended=p;const y=this._nativeConstantSourceNode.onended;this._onended=y!==null&&y===p?d:y}start(d=0){if(this._nativeConstantSourceNode.start(d),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=d),this.context.state!=="closed"){ls(this);const p=()=>{this._nativeConstantSourceNode.removeEventListener("ended",p),pn(this)&&Qs(this)};this._nativeConstantSourceNode.addEventListener("ended",p)}}stop(d=0){this._nativeConstantSourceNode.stop(d),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=d)}},oh=(i,e,t,n,r)=>()=>{const a=new WeakMap;let h=null,f=null;const d=async(p,y)=>{let b=t(p);const S=ft(b,y);if(!S){const N={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,offset:b.offset.value};b=e(y,N),h!==null&&b.start(h),f!==null&&b.stop(f)}return a.set(y,b),S?await i(y,p.offset,b.offset):await n(y,p.offset,b.offset),await r(p,y,b),b};return{set start(p){h=p},set stop(p){f=p},render(p,y){const b=a.get(y);return b!==void 0?Promise.resolve(b):d(p,y)}}},ah=i=>e=>(i[0]=e,i[0]),ch={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},uh=(i,e,t,n,r,a)=>class extends i{constructor(f,d){const p=n(f),y={...ch,...d},b=t(p,y),N=r(p)?e():null;super(f,!1,b,N),this._isBufferNullified=!1,this._nativeConvolverNode=b,y.buffer!==null&&a(this,y.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(f){if(this._nativeConvolverNode.buffer=f,f===null&&this._nativeConvolverNode.buffer!==null){const d=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=d.createBuffer(1,1,d.sampleRate),this._isBufferNullified=!0,a(this,0)}else this._isBufferNullified=!1,a(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(f){this._nativeConvolverNode.normalize=f}},lh=(i,e,t)=>()=>{const n=new WeakMap,r=async(a,h)=>{let f=e(a);if(!ft(f,h)){const p={buffer:f.buffer,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,disableNormalization:!f.normalize};f=i(h,p)}return n.set(h,f),ms(f)?await t(a,h,f.inputs[0]):await t(a,h,f),f};return{render(a,h){const f=n.get(h);return f!==void 0?Promise.resolve(f):r(a,h)}}},hh=(i,e)=>(t,n,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,n,r)}catch(a){throw a.name==="SyntaxError"?i():a}},fh=()=>new DOMException("","DataCloneError"),ba=i=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(n=>{const r=()=>{t.onmessage=null,e.close(),t.close(),n()};t.onmessage=()=>r();try{e.postMessage(i,[i])}finally{r()}})},dh=(i,e,t,n,r,a,h,f,d,p,y)=>(b,S)=>{const N=h(b)?b:a(b);if(r.has(S)){const x=t();return Promise.reject(x)}try{r.add(S)}catch{}return e(d,()=>d(N))?N.decodeAudioData(S).then(x=>(ba(S).catch(()=>{}),e(f,()=>f(x))||y(x),i.add(x),x)):new Promise((x,k)=>{const I=async()=>{try{await ba(S)}catch{}},v=D=>{k(D),I()};try{N.decodeAudioData(S,D=>{typeof D.copyFromChannel!="function"&&(p(D),Zr(D)),i.add(D),I().then(()=>x(D))},D=>{v(D===null?n():D)})}catch(D){v(D)}})},ph=(i,e,t,n,r,a,h,f)=>(d,p)=>{const y=e.get(d);if(y===void 0)throw new Error("Missing the expected cycle count.");const b=a(d.context),S=f(b);if(y===p){if(e.delete(d),!S&&h(d)){const N=n(d),{outputs:x}=t(d);for(const k of x)if(ei(k)){const I=n(k[0]);i(N,I,k[1],k[2])}else{const I=r(k[0]);N.connect(I,k[1])}}}else e.set(d,y-p)},mh={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},gh=(i,e,t,n,r,a,h)=>class extends i{constructor(d,p){const y=r(d),b={...mh,...p},S=n(y,b),N=a(y),x=N?t(b.maxDelayTime):null;super(d,!1,S,x),this._delayTime=e(this,N,S.delayTime),h(this,b.maxDelayTime)}get delayTime(){return this._delayTime}},vh=(i,e,t,n,r)=>a=>{const h=new WeakMap,f=async(d,p)=>{let y=t(d);const b=ft(y,p);if(!b){const S={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,delayTime:y.delayTime.value,maxDelayTime:a};y=e(p,S)}return h.set(p,y),b?await i(p,d.delayTime,y.delayTime):await n(p,d.delayTime,y.delayTime),await r(d,p,y),y};return{render(d,p){const y=h.get(p);return y!==void 0?Promise.resolve(y):f(d,p)}}},_h=i=>(e,t,n,r)=>i(e[r],a=>a[0]===t&&a[1]===n),yh=i=>(e,t)=>{i(e).delete(t)},bh=i=>"delayTime"in i,wh=(i,e,t)=>function n(r,a){const h=Ri(a)?a:t(i,a);if(bh(h))return[];if(r[0]===h)return[r];if(r.includes(h))return[];const{outputs:f}=e(h);return Array.from(f).map(d=>n([...r,h],d[0])).reduce((d,p)=>d.concat(p),[])},wi=(i,e,t)=>{const n=e[t];if(n===void 0)throw i();return n},Th=i=>(e,t=void 0,n=void 0,r=0)=>t===void 0?e.forEach(a=>a.disconnect()):typeof t=="number"?wi(i,e,t).disconnect():Fi(t)?n===void 0?e.forEach(a=>a.disconnect(t)):r===void 0?wi(i,e,n).disconnect(t,0):wi(i,e,n).disconnect(t,0,r):n===void 0?e.forEach(a=>a.disconnect(t)):wi(i,e,n).disconnect(t,0),Ch={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},xh=(i,e,t,n,r,a,h,f)=>class extends i{constructor(p,y){const b=a(p),S={...Ch,...y},N=n(b,S),x=h(b),k=x?t():null;super(p,!1,N,k),this._attack=e(this,x,N.attack),this._knee=e(this,x,N.knee),this._nativeDynamicsCompressorNode=N,this._ratio=e(this,x,N.ratio),this._release=e(this,x,N.release),this._threshold=e(this,x,N.threshold),f(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(p){const y=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=p,p>2)throw this._nativeDynamicsCompressorNode.channelCount=y,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(p){const y=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=p,p==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=y,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},Sh=(i,e,t,n,r)=>()=>{const a=new WeakMap,h=async(f,d)=>{let p=t(f);const y=ft(p,d);if(!y){const b={attack:p.attack.value,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,knee:p.knee.value,ratio:p.ratio.value,release:p.release.value,threshold:p.threshold.value};p=e(d,b)}return a.set(d,p),y?(await i(d,f.attack,p.attack),await i(d,f.knee,p.knee),await i(d,f.ratio,p.ratio),await i(d,f.release,p.release),await i(d,f.threshold,p.threshold)):(await n(d,f.attack,p.attack),await n(d,f.knee,p.knee),await n(d,f.ratio,p.ratio),await n(d,f.release,p.release),await n(d,f.threshold,p.threshold)),await r(f,d,p),p};return{render(f,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):h(f,d)}}},Ah=()=>new DOMException("","EncodingError"),kh=i=>e=>new Promise((t,n)=>{if(i===null){n(new SyntaxError);return}const r=i.document.head;if(r===null)n(new SyntaxError);else{const a=i.document.createElement("script"),h=new Blob([e],{type:"application/javascript"}),f=URL.createObjectURL(h),d=i.onerror,p=()=>{i.onerror=d,URL.revokeObjectURL(f)};i.onerror=(y,b,S,N,x)=>{if(b===f||b===i.location.href&&S===1&&N===1)return p(),n(x),!1;if(d!==null)return d(y,b,S,N,x)},a.onerror=()=>{p(),n(new SyntaxError)},a.onload=()=>{p(),t()},a.src=f,a.type="module",r.appendChild(a)}}),Nh=i=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,n,r){if(n!==null){let a=this._listeners.get(n);a===void 0&&(a=i(this,n),typeof n=="function"&&this._listeners.set(n,a)),this._nativeEventTarget.addEventListener(t,a,r)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,n,r){const a=n===null?void 0:this._listeners.get(n);this._nativeEventTarget.removeEventListener(t,a===void 0?null:a,r)}},Eh=i=>(e,t,n)=>{Object.defineProperties(i,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return n()}finally{i!==null&&(delete i.currentFrame,delete i.currentTime)}},Mh=i=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw i()},Oh={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Dh=(i,e,t,n,r,a)=>class extends i{constructor(f,d){const p=r(f),y={...Oh,...d},b=n(p,y),S=a(p),N=S?t():null;super(f,!1,b,N),this._gain=e(this,S,b.gain,pt,wt)}get gain(){return this._gain}},Ih=(i,e,t,n,r)=>()=>{const a=new WeakMap,h=async(f,d)=>{let p=t(f);const y=ft(p,d);if(!y){const b={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:p.gain.value};p=e(d,b)}return a.set(d,p),y?await i(d,f.gain,p.gain):await n(d,f.gain,p.gain),await r(f,d,p),p};return{render(f,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):h(f,d)}}},Rh=(i,e)=>t=>e(i,t),Ph=i=>e=>{const t=i(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},qh=i=>e=>{var t;return(t=i.get(e))!==null&&t!==void 0?t:0},Fh=i=>e=>{const t=i(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},Vh=i=>e=>i.get(e),at=()=>new DOMException("","InvalidStateError"),Lh=i=>e=>{const t=i.get(e);if(t===void 0)throw at();return t},jh=(i,e)=>t=>{let n=i.get(t);if(n!==void 0)return n;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return n=new e(1,1,44100),i.set(t,n),n},Wh=i=>e=>{const t=i.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},er=()=>new DOMException("","InvalidAccessError"),Bh=i=>{i.getFrequencyResponse=(e=>(t,n,r)=>{if(t.length!==n.length||n.length!==r.length)throw er();return e.call(i,t,n,r)})(i.getFrequencyResponse)},Kh={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Uh=(i,e,t,n,r,a)=>class extends i{constructor(f,d){const p=n(f),y=r(p),b={...Kh,...d},S=e(p,y?null:f.baseLatency,b),N=y?t(b.feedback,b.feedforward):null;super(f,!1,S,N),Bh(S),this._nativeIIRFilterNode=S,a(this,1)}getFrequencyResponse(f,d,p){return this._nativeIIRFilterNode.getFrequencyResponse(f,d,p)}},Za=(i,e,t,n,r,a,h,f,d,p,y)=>{const b=p.length;let S=f;for(let N=0;N<b;N+=1){let x=t[0]*p[N];for(let k=1;k<r;k+=1){const I=S-k&d-1;x+=t[k]*a[I],x-=i[k]*h[I]}for(let k=r;k<n;k+=1)x+=t[k]*a[S-k&d-1];for(let k=r;k<e;k+=1)x-=i[k]*h[S-k&d-1];a[S]=p[N],h[S]=x,S=S+1&d-1,y[N]=x}return S},Hh=(i,e,t,n)=>{const r=t instanceof Float64Array?t:new Float64Array(t),a=n instanceof Float64Array?n:new Float64Array(n),h=r.length,f=a.length,d=Math.min(h,f);if(r[0]!==1){for(let x=0;x<h;x+=1)a[x]/=r[0];for(let x=1;x<f;x+=1)r[x]/=r[0]}const p=32,y=new Float32Array(p),b=new Float32Array(p),S=e.createBuffer(i.numberOfChannels,i.length,i.sampleRate),N=i.numberOfChannels;for(let x=0;x<N;x+=1){const k=i.getChannelData(x),I=S.getChannelData(x);y.fill(0),b.fill(0),Za(r,h,a,f,d,y,b,0,p,k,I)}return S},$h=(i,e,t,n,r)=>(a,h)=>{const f=new WeakMap;let d=null;const p=async(y,b)=>{let S=null,N=e(y);const x=ft(N,b);if(b.createIIRFilter===void 0?S=i(b,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):x||(N=b.createIIRFilter(h,a)),f.set(b,S===null?N:S),S!==null){if(d===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const I=new t(y.context.destination.channelCount,y.context.length,b.sampleRate);d=(async()=>{await n(y,I,I.destination);const v=await r(I);return Hh(v,b,a,h)})()}const k=await d;return S.buffer=k,S.start(0),S}return await n(y,b,N),N};return{render(y,b){const S=f.get(b);return S!==void 0?Promise.resolve(S):p(y,b)}}},zh=(i,e,t,n,r,a)=>h=>(f,d)=>{const p=i.get(f);if(p===void 0){if(!h&&a(f)){const y=n(f),{outputs:b}=t(f);for(const S of b)if(ei(S)){const N=n(S[0]);e(y,N,S[1],S[2])}else{const N=r(S[0]);y.disconnect(N,S[1])}}i.set(f,d)}else i.set(f,p+d)},Gh=(i,e)=>t=>{const n=i.get(t);return e(n)||e(t)},Xh=(i,e)=>t=>i.has(t)||e(t),Zh=(i,e)=>t=>i.has(t)||e(t),Yh=(i,e)=>t=>{const n=i.get(t);return e(n)||e(t)},Qh=i=>e=>i!==null&&e instanceof i,Jh=i=>e=>i!==null&&typeof i.AudioNode=="function"&&e instanceof i.AudioNode,ef=i=>e=>i!==null&&typeof i.AudioParam=="function"&&e instanceof i.AudioParam,tf=(i,e)=>t=>i(t)||e(t),nf=i=>e=>i!==null&&e instanceof i,sf=i=>i!==null&&i.isSecureContext,rf=(i,e,t,n)=>class extends i{constructor(a,h){const f=t(a),d=e(f,h);if(n(f))throw TypeError();super(a,!0,d,null),this._nativeMediaElementAudioSourceNode=d}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},of={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},af=(i,e,t,n)=>class extends i{constructor(a,h){const f=t(a);if(n(f))throw new TypeError;const d={...of,...h},p=e(f,d);super(a,!1,p,null),this._nativeMediaStreamAudioDestinationNode=p}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},cf=(i,e,t,n)=>class extends i{constructor(a,h){const f=t(a),d=e(f,h);if(n(f))throw new TypeError;super(a,!0,d,null),this._nativeMediaStreamAudioSourceNode=d}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},uf=(i,e,t)=>class extends i{constructor(r,a){const h=t(r),f=e(h,a);super(r,!0,f,null)}},lf=(i,e,t,n,r,a)=>class extends t{constructor(f,d){super(f),this._nativeContext=f,Qi.set(this,f),n(f)&&r.set(f,new Set),this._destination=new i(this,d),this._listener=e(this,f),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(f){const d=typeof f=="function"?a(this,f):null;this._nativeContext.onstatechange=d;const p=this._nativeContext.onstatechange;this._onstatechange=p!==null&&p===d?f:p}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Rs=i=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=i.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},hf=(i,e)=>(t,n,r)=>{const a=new Set;return t.connect=(h=>(f,d=0,p=0)=>{const y=a.size===0;if(e(f))return h.call(t,f,d,p),i(a,[f,d,p],b=>b[0]===f&&b[1]===d&&b[2]===p,!0),y&&n(),f;h.call(t,f,d),i(a,[f,d],b=>b[0]===f&&b[1]===d,!0),y&&n()})(t.connect),t.disconnect=(h=>(f,d,p)=>{const y=a.size>0;if(f===void 0)h.apply(t),a.clear();else if(typeof f=="number"){h.call(t,f);for(const S of a)S[1]===f&&a.delete(S)}else{e(f)?h.call(t,f,d,p):h.call(t,f,d);for(const S of a)S[0]===f&&(d===void 0||S[1]===d)&&(p===void 0||S[2]===p)&&a.delete(S)}const b=a.size===0;y&&b&&r()})(t.disconnect),t},Ue=(i,e,t)=>{const n=e[t];n!==void 0&&n!==i[t]&&(i[t]=n)},it=(i,e)=>{Ue(i,e,"channelCount"),Ue(i,e,"channelCountMode"),Ue(i,e,"channelInterpretation")},wa=i=>typeof i.getFloatTimeDomainData=="function",ff=i=>{i.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);i.getByteTimeDomainData(t);const n=Math.max(t.length,i.fftSize);for(let r=0;r<n;r+=1)e[r]=(t[r]-128)*.0078125;return e}},df=(i,e)=>(t,n)=>{const r=t.createAnalyser();if(it(r,n),!(n.maxDecibels>n.minDecibels))throw e();return Ue(r,n,"fftSize"),Ue(r,n,"maxDecibels"),Ue(r,n,"minDecibels"),Ue(r,n,"smoothingTimeConstant"),i(wa,()=>wa(r))||ff(r),r},pf=i=>i===null?null:i.hasOwnProperty("AudioBuffer")?i.AudioBuffer:null,ze=(i,e,t)=>{const n=e[t];n!==void 0&&n!==i[t].value&&(i[t].value=n)},mf=i=>{i.start=(e=>{let t=!1;return(n=0,r=0,a)=>{if(t)throw at();e.call(i,n,r,a),t=!0}})(i.start)},Jr=i=>{i.start=(e=>(t=0,n=0,r)=>{if(typeof r=="number"&&r<0||n<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(i,t,n,r)})(i.start)},eo=i=>{i.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(i,t)})(i.stop)},gf=(i,e,t,n,r,a,h,f,d,p,y)=>(b,S)=>{const N=b.createBufferSource();return it(N,S),ze(N,S,"playbackRate"),Ue(N,S,"buffer"),Ue(N,S,"loop"),Ue(N,S,"loopEnd"),Ue(N,S,"loopStart"),e(t,()=>t(b))||mf(N),e(n,()=>n(b))||d(N),e(r,()=>r(b))||p(N,b),e(a,()=>a(b))||Jr(N),e(h,()=>h(b))||y(N,b),e(f,()=>f(b))||eo(N),i(b,N),N},vf=i=>i===null?null:i.hasOwnProperty("AudioContext")?i.AudioContext:i.hasOwnProperty("webkitAudioContext")?i.webkitAudioContext:null,_f=(i,e)=>(t,n,r)=>{const a=t.destination;if(a.channelCount!==n)try{a.channelCount=n}catch{}r&&a.channelCountMode!=="explicit"&&(a.channelCountMode="explicit"),a.maxChannelCount===0&&Object.defineProperty(a,"maxChannelCount",{value:n});const h=i(t,{channelCount:n,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1});return e(h,"channelCount",f=>()=>f.call(h),f=>d=>{f.call(h,d);try{a.channelCount=d}catch(p){if(d>a.maxChannelCount)throw p}}),e(h,"channelCountMode",f=>()=>f.call(h),f=>d=>{f.call(h,d),a.channelCountMode=d}),e(h,"channelInterpretation",f=>()=>f.call(h),f=>d=>{f.call(h,d),a.channelInterpretation=d}),Object.defineProperty(h,"maxChannelCount",{get:()=>a.maxChannelCount}),h.connect(a),h},yf=i=>i===null?null:i.hasOwnProperty("AudioWorkletNode")?i.AudioWorkletNode:null,bf=i=>{const{port1:e}=new MessageChannel;try{e.postMessage(i)}finally{e.close()}},wf=(i,e,t,n,r)=>(a,h,f,d,p,y)=>{if(f!==null)try{const b=new f(a,d,y),S=new Map;let N=null;if(Object.defineProperties(b,{channelCount:{get:()=>y.channelCount,set:()=>{throw i()}},channelCountMode:{get:()=>"explicit",set:()=>{throw i()}},onprocessorerror:{get:()=>N,set:x=>{typeof N=="function"&&b.removeEventListener("processorerror",N),N=typeof x=="function"?x:null,typeof N=="function"&&b.addEventListener("processorerror",N)}}}),b.addEventListener=(x=>(...k)=>{if(k[0]==="processorerror"){const I=typeof k[1]=="function"?k[1]:typeof k[1]=="object"&&k[1]!==null&&typeof k[1].handleEvent=="function"?k[1].handleEvent:null;if(I!==null){const v=S.get(k[1]);v!==void 0?k[1]=v:(k[1]=D=>{D.type==="error"?(Object.defineProperties(D,{type:{value:"processorerror"}}),I(D)):I(new ErrorEvent(k[0],{...D}))},S.set(I,k[1]))}}return x.call(b,"error",k[1],k[2]),x.call(b,...k)})(b.addEventListener),b.removeEventListener=(x=>(...k)=>{if(k[0]==="processorerror"){const I=S.get(k[1]);I!==void 0&&(S.delete(k[1]),k[1]=I)}return x.call(b,"error",k[1],k[2]),x.call(b,k[0],k[1],k[2])})(b.removeEventListener),y.numberOfOutputs!==0){const x=t(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return b.connect(x).connect(a.destination),r(b,()=>x.disconnect(),()=>x.connect(a.destination))}return b}catch(b){throw b.code===11?n():b}if(p===void 0)throw n();return bf(y),e(a,h,p,y)},Ya=(i,e)=>i===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(i*e))))),Tf=i=>new Promise((e,t)=>{const{port1:n,port2:r}=new MessageChannel;n.onmessage=({data:a})=>{n.close(),r.close(),e(a)},n.onmessageerror=({data:a})=>{n.close(),r.close(),t(a)},r.postMessage(i)}),Cf=async(i,e)=>{const t=await Tf(e);return new i(t)},xf=(i,e,t,n)=>{let r=Wr.get(i);r===void 0&&(r=new WeakMap,Wr.set(i,r));const a=Cf(t,n);return r.set(e,a),a},Sf=(i,e,t,n,r,a,h,f,d,p,y,b,S)=>(N,x,k,I)=>{if(I.numberOfInputs===0&&I.numberOfOutputs===0)throw d();const v=Array.isArray(I.outputChannelCount)?I.outputChannelCount:Array.from(I.outputChannelCount);if(v.some(te=>te<1))throw d();if(v.length!==I.numberOfOutputs)throw e();if(I.channelCountMode!=="explicit")throw d();const D=I.channelCount*I.numberOfInputs,C=v.reduce((te,Z)=>te+Z,0),A=k.parameterDescriptors===void 0?0:k.parameterDescriptors.length;if(D+A>6||C>6)throw d();const w=new MessageChannel,c=[],R=[];for(let te=0;te<I.numberOfInputs;te+=1)c.push(h(N,{channelCount:I.channelCount,channelCountMode:I.channelCountMode,channelInterpretation:I.channelInterpretation,gain:1})),R.push(r(N,{channelCount:I.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:I.channelCount}));const q=[];if(k.parameterDescriptors!==void 0)for(const{defaultValue:te,maxValue:Z,minValue:xe,name:Le}of k.parameterDescriptors){const Se=a(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:I.parameterData[Le]!==void 0?I.parameterData[Le]:te===void 0?0:te});Object.defineProperties(Se.offset,{defaultValue:{get:()=>te===void 0?0:te},maxValue:{get:()=>Z===void 0?pt:Z},minValue:{get:()=>xe===void 0?wt:xe}}),q.push(Se)}const H=n(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,D+A)}),U=Ya(x,N.sampleRate),z=f(N,U,D+A,Math.max(1,C)),W=r(N,{channelCount:Math.max(1,C),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,C)}),se=[];for(let te=0;te<I.numberOfOutputs;te+=1)se.push(n(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[te]}));for(let te=0;te<I.numberOfInputs;te+=1){c[te].connect(R[te]);for(let Z=0;Z<I.channelCount;Z+=1)R[te].connect(H,Z,te*I.channelCount+Z)}const Q=new Ga(k.parameterDescriptors===void 0?[]:k.parameterDescriptors.map(({name:te},Z)=>{const xe=q[Z];return xe.connect(H,0,D+Z),xe.start(0),[te,xe.offset]}));H.connect(z);let ue=I.channelInterpretation,ee=null;const ie=I.numberOfOutputs===0?[z]:se,_e={get bufferSize(){return U},get channelCount(){return I.channelCount},set channelCount(te){throw t()},get channelCountMode(){return I.channelCountMode},set channelCountMode(te){throw t()},get channelInterpretation(){return ue},set channelInterpretation(te){for(const Z of c)Z.channelInterpretation=te;ue=te},get context(){return z.context},get inputs(){return c},get numberOfInputs(){return I.numberOfInputs},get numberOfOutputs(){return I.numberOfOutputs},get onprocessorerror(){return ee},set onprocessorerror(te){typeof ee=="function"&&_e.removeEventListener("processorerror",ee),ee=typeof te=="function"?te:null,typeof ee=="function"&&_e.addEventListener("processorerror",ee)},get parameters(){return Q},get port(){return w.port2},addEventListener(...te){return z.addEventListener(te[0],te[1],te[2])},connect:i.bind(null,ie),disconnect:p.bind(null,ie),dispatchEvent(...te){return z.dispatchEvent(te[0])},removeEventListener(...te){return z.removeEventListener(te[0],te[1],te[2])}},le=new Map;w.port1.addEventListener=(te=>(...Z)=>{if(Z[0]==="message"){const xe=typeof Z[1]=="function"?Z[1]:typeof Z[1]=="object"&&Z[1]!==null&&typeof Z[1].handleEvent=="function"?Z[1].handleEvent:null;if(xe!==null){const Le=le.get(Z[1]);Le!==void 0?Z[1]=Le:(Z[1]=Se=>{y(N.currentTime,N.sampleRate,()=>xe(Se))},le.set(xe,Z[1]))}}return te.call(w.port1,Z[0],Z[1],Z[2])})(w.port1.addEventListener),w.port1.removeEventListener=(te=>(...Z)=>{if(Z[0]==="message"){const xe=le.get(Z[1]);xe!==void 0&&(le.delete(Z[1]),Z[1]=xe)}return te.call(w.port1,Z[0],Z[1],Z[2])})(w.port1.removeEventListener);let be=null;Object.defineProperty(w.port1,"onmessage",{get:()=>be,set:te=>{typeof be=="function"&&w.port1.removeEventListener("message",be),be=typeof te=="function"?te:null,typeof be=="function"&&(w.port1.addEventListener("message",be),w.port1.start())}}),k.prototype.port=w.port1;let ce=null;xf(N,_e,k,I).then(te=>ce=te);const Qe=Li(I.numberOfInputs,I.channelCount),rt=Li(I.numberOfOutputs,v),we=k.parameterDescriptors===void 0?[]:k.parameterDescriptors.reduce((te,{name:Z})=>({...te,[Z]:new Float32Array(128)}),{});let qe=!0;const tt=()=>{I.numberOfOutputs>0&&z.disconnect(W);for(let te=0,Z=0;te<I.numberOfOutputs;te+=1){const xe=se[te];for(let Le=0;Le<v[te];Le+=1)W.disconnect(xe,Z+Le,Le);Z+=v[te]}},re=new Map;z.onaudioprocess=({inputBuffer:te,outputBuffer:Z})=>{if(ce!==null){const xe=b(_e);for(let Le=0;Le<U;Le+=128){for(let Se=0;Se<I.numberOfInputs;Se+=1)for(let Be=0;Be<I.channelCount;Be+=1)Vi(te,Qe[Se],Be,Be,Le);k.parameterDescriptors!==void 0&&k.parameterDescriptors.forEach(({name:Se},Be)=>{Vi(te,we,Se,D+Be,Le)});for(let Se=0;Se<I.numberOfInputs;Se+=1)for(let Be=0;Be<v[Se];Be+=1)rt[Se][Be].byteLength===0&&(rt[Se][Be]=new Float32Array(128));try{const Se=Qe.map((dt,Wt)=>{if(xe[Wt].size>0)return re.set(Wt,U/128),dt;const kt=re.get(Wt);return kt===void 0?[]:(dt.every(cn=>cn.every(Tn=>Tn===0))&&(kt===1?re.delete(Wt):re.set(Wt,kt-1)),dt)});qe=y(N.currentTime+Le/N.sampleRate,N.sampleRate,()=>ce.process(Se,rt,we));for(let dt=0,Wt=0;dt<I.numberOfOutputs;dt+=1){for(let Bt=0;Bt<v[dt];Bt+=1)Xa(Z,rt[dt],Bt,Wt+Bt,Le);Wt+=v[dt]}}catch(Se){qe=!1,_e.dispatchEvent(new ErrorEvent("processorerror",{colno:Se.colno,filename:Se.filename,lineno:Se.lineno,message:Se.message}))}if(!qe){for(let Se=0;Se<I.numberOfInputs;Se+=1){c[Se].disconnect(R[Se]);for(let Be=0;Be<I.channelCount;Be+=1)R[Le].disconnect(H,Be,Se*I.channelCount+Be)}if(k.parameterDescriptors!==void 0){const Se=k.parameterDescriptors.length;for(let Be=0;Be<Se;Be+=1){const dt=q[Be];dt.disconnect(H,0,D+Be),dt.stop()}}H.disconnect(z),z.onaudioprocess=null,ut?tt():wn();break}}}};let ut=!1;const an=h(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),bn=()=>z.connect(an).connect(N.destination),wn=()=>{z.disconnect(an),an.disconnect()},Pt=()=>{if(qe){wn(),I.numberOfOutputs>0&&z.connect(W);for(let te=0,Z=0;te<I.numberOfOutputs;te+=1){const xe=se[te];for(let Le=0;Le<v[te];Le+=1)W.connect(xe,Z+Le,Le);Z+=v[te]}}ut=!0},Rn=()=>{qe&&(bn(),tt()),ut=!1};return bn(),S(_e,Pt,Rn)},Qa=(i,e)=>{const t=i.createBiquadFilter();return it(t,e),ze(t,e,"Q"),ze(t,e,"detune"),ze(t,e,"frequency"),ze(t,e,"gain"),Ue(t,e,"type"),t},Af=(i,e)=>(t,n)=>{const r=t.createChannelMerger(n.numberOfInputs);return i!==null&&i.name==="webkitAudioContext"&&e(t,r),it(r,n),r},kf=i=>{const e=i.numberOfOutputs;Object.defineProperty(i,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw at()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw at()}}),Object.defineProperty(i,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw at()}})},ti=(i,e)=>{const t=i.createChannelSplitter(e.numberOfOutputs);return it(t,e),kf(t),t},Nf=(i,e,t,n,r)=>(a,h)=>{if(a.createConstantSource===void 0)return t(a,h);const f=a.createConstantSource();return it(f,h),ze(f,h,"offset"),e(n,()=>n(a))||Jr(f),e(r,()=>r(a))||eo(f),i(a,f),f},gs=(i,e)=>(i.connect=e.connect.bind(e),i.disconnect=e.disconnect.bind(e),i),Ef=(i,e,t,n)=>(r,{offset:a,...h})=>{const f=r.createBuffer(1,2,44100),d=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),p=t(r,{...h,gain:a}),y=f.getChannelData(0);y[0]=1,y[1]=1,d.buffer=f,d.loop=!0;const b={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(x){p.channelCount=x},get channelCountMode(){return p.channelCountMode},set channelCountMode(x){p.channelCountMode=x},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(x){p.channelInterpretation=x},get context(){return p.context},get inputs(){return[]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get offset(){return p.gain},get onended(){return d.onended},set onended(x){d.onended=x},addEventListener(...x){return d.addEventListener(x[0],x[1],x[2])},dispatchEvent(...x){return d.dispatchEvent(x[0])},removeEventListener(...x){return d.removeEventListener(x[0],x[1],x[2])},start(x=0){d.start.call(d,x)},stop(x=0){d.stop.call(d,x)}},S=()=>d.connect(p),N=()=>d.disconnect(p);return i(r,d),n(gs(b,p),S,N)},Mf=(i,e)=>(t,n)=>{const r=t.createConvolver();if(it(r,n),n.disableNormalization===r.normalize&&(r.normalize=!n.disableNormalization),Ue(r,n,"buffer"),n.channelCount>2||(e(r,"channelCount",a=>()=>a.call(r),a=>h=>{if(h>2)throw i();return a.call(r,h)}),n.channelCountMode==="max"))throw i();return e(r,"channelCountMode",a=>()=>a.call(r),a=>h=>{if(h==="max")throw i();return a.call(r,h)}),r},Ja=(i,e)=>{const t=i.createDelay(e.maxDelayTime);return it(t,e),ze(t,e,"delayTime"),t},Of=i=>(e,t)=>{const n=e.createDynamicsCompressor();if(it(n,t),t.channelCount>2||t.channelCountMode==="max")throw i();return ze(n,t,"attack"),ze(n,t,"knee"),ze(n,t,"ratio"),ze(n,t,"release"),ze(n,t,"threshold"),n},St=(i,e)=>{const t=i.createGain();return it(t,e),ze(t,e,"gain"),t},Df=i=>(e,t,n)=>{if(e.createIIRFilter===void 0)return i(e,t,n);const r=e.createIIRFilter(n.feedforward,n.feedback);return it(r,n),r};function If(i,e){const t=e[0]*e[0]+e[1]*e[1];return[(i[0]*e[0]+i[1]*e[1])/t,(i[1]*e[0]-i[0]*e[1])/t]}function Rf(i,e){return[i[0]*e[0]-i[1]*e[1],i[0]*e[1]+i[1]*e[0]]}function Ta(i,e){let t=[0,0];for(let n=i.length-1;n>=0;n-=1)t=Rf(t,e),t[0]+=i[n];return t}const Pf=(i,e,t,n)=>(r,a,{channelCount:h,channelCountMode:f,channelInterpretation:d,feedback:p,feedforward:y})=>{const b=Ya(a,r.sampleRate),S=p instanceof Float64Array?p:new Float64Array(p),N=y instanceof Float64Array?y:new Float64Array(y),x=S.length,k=N.length,I=Math.min(x,k);if(x===0||x>20)throw n();if(S[0]===0)throw e();if(k===0||k>20)throw n();if(N[0]===0)throw e();if(S[0]!==1){for(let q=0;q<k;q+=1)N[q]/=S[0];for(let q=1;q<x;q+=1)S[q]/=S[0]}const v=t(r,b,h,h);v.channelCount=h,v.channelCountMode=f,v.channelInterpretation=d;const D=32,C=[],A=[],w=[];for(let q=0;q<h;q+=1){C.push(0);const H=new Float32Array(D),U=new Float32Array(D);H.fill(0),U.fill(0),A.push(H),w.push(U)}v.onaudioprocess=q=>{const H=q.inputBuffer,U=q.outputBuffer,z=H.numberOfChannels;for(let W=0;W<z;W+=1){const se=H.getChannelData(W),Q=U.getChannelData(W);C[W]=Za(S,x,N,k,I,A[W],w[W],C[W],D,se,Q)}};const c=r.sampleRate/2;return gs({get bufferSize(){return b},get channelCount(){return v.channelCount},set channelCount(q){v.channelCount=q},get channelCountMode(){return v.channelCountMode},set channelCountMode(q){v.channelCountMode=q},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(q){v.channelInterpretation=q},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener(...q){return v.addEventListener(q[0],q[1],q[2])},dispatchEvent(...q){return v.dispatchEvent(q[0])},getFrequencyResponse(q,H,U){if(q.length!==H.length||H.length!==U.length)throw i();const z=q.length;for(let W=0;W<z;W+=1){const se=-Math.PI*(q[W]/c),Q=[Math.cos(se),Math.sin(se)],ue=Ta(N,Q),ee=Ta(S,Q),ie=If(ue,ee);H[W]=Math.sqrt(ie[0]*ie[0]+ie[1]*ie[1]),U[W]=Math.atan2(ie[1],ie[0])}},removeEventListener(...q){return v.removeEventListener(q[0],q[1],q[2])}},v)},qf=(i,e)=>i.createMediaElementSource(e.mediaElement),Ff=(i,e)=>{const t=i.createMediaStreamDestination();return it(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},Vf=(i,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((a,h)=>a.id<h.id?-1:a.id>h.id?1:0);const n=t.slice(0,1),r=i.createMediaStreamSource(new MediaStream(n));return Object.defineProperty(r,"mediaStream",{value:e}),r},Lf=(i,e)=>(t,{mediaStreamTrack:n})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(n);const r=new MediaStream([n]),a=t.createMediaStreamSource(r);if(n.kind!=="audio")throw i();if(e(t))throw new TypeError;return a},jf=i=>i===null?null:i.hasOwnProperty("OfflineAudioContext")?i.OfflineAudioContext:i.hasOwnProperty("webkitOfflineAudioContext")?i.webkitOfflineAudioContext:null,Wf=(i,e,t,n,r,a)=>(h,f)=>{const d=h.createOscillator();return it(d,f),ze(d,f,"detune"),ze(d,f,"frequency"),f.periodicWave!==void 0?d.setPeriodicWave(f.periodicWave):Ue(d,f,"type"),e(t,()=>t(h))||Jr(d),e(n,()=>n(h))||a(d,h),e(r,()=>r(h))||eo(d),i(h,d),d},Bf=i=>(e,t)=>{const n=e.createPanner();return n.orientationX===void 0?i(e,t):(it(n,t),ze(n,t,"orientationX"),ze(n,t,"orientationY"),ze(n,t,"orientationZ"),ze(n,t,"positionX"),ze(n,t,"positionY"),ze(n,t,"positionZ"),Ue(n,t,"coneInnerAngle"),Ue(n,t,"coneOuterAngle"),Ue(n,t,"coneOuterGain"),Ue(n,t,"distanceModel"),Ue(n,t,"maxDistance"),Ue(n,t,"panningModel"),Ue(n,t,"refDistance"),Ue(n,t,"rolloffFactor"),n)},Kf=(i,e,t,n,r,a,h,f,d,p)=>(y,{coneInnerAngle:b,coneOuterAngle:S,coneOuterGain:N,distanceModel:x,maxDistance:k,orientationX:I,orientationY:v,orientationZ:D,panningModel:C,positionX:A,positionY:w,positionZ:c,refDistance:R,rolloffFactor:q,...H})=>{const U=y.createPanner();if(H.channelCount>2||H.channelCountMode==="max")throw h();it(U,H);const z={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},W=t(y,{...z,channelInterpretation:"speakers",numberOfInputs:6}),se=n(y,{...H,gain:1}),Q=n(y,{...z,gain:1}),ue=n(y,{...z,gain:0}),ee=n(y,{...z,gain:0}),ie=n(y,{...z,gain:0}),_e=n(y,{...z,gain:0}),le=n(y,{...z,gain:0}),be=r(y,256,6,1),ce=a(y,{...z,curve:new Float32Array([1,1]),oversample:"none"});let Ne=[I,v,D],Qe=[A,w,c];const rt=new Float32Array(1);be.onaudioprocess=({inputBuffer:re})=>{const ut=[d(re,rt,0),d(re,rt,1),d(re,rt,2)];ut.some((bn,wn)=>bn!==Ne[wn])&&(U.setOrientation(...ut),Ne=ut);const an=[d(re,rt,3),d(re,rt,4),d(re,rt,5)];an.some((bn,wn)=>bn!==Qe[wn])&&(U.setPosition(...an),Qe=an)},Object.defineProperty(ue.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ee.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ie.gain,"defaultValue",{get:()=>0}),Object.defineProperty(_e.gain,"defaultValue",{get:()=>0}),Object.defineProperty(le.gain,"defaultValue",{get:()=>0});const we={get bufferSize(){},get channelCount(){return U.channelCount},set channelCount(re){if(re>2)throw h();se.channelCount=re,U.channelCount=re},get channelCountMode(){return U.channelCountMode},set channelCountMode(re){if(re==="max")throw h();se.channelCountMode=re,U.channelCountMode=re},get channelInterpretation(){return U.channelInterpretation},set channelInterpretation(re){se.channelInterpretation=re,U.channelInterpretation=re},get coneInnerAngle(){return U.coneInnerAngle},set coneInnerAngle(re){U.coneInnerAngle=re},get coneOuterAngle(){return U.coneOuterAngle},set coneOuterAngle(re){U.coneOuterAngle=re},get coneOuterGain(){return U.coneOuterGain},set coneOuterGain(re){if(re<0||re>1)throw e();U.coneOuterGain=re},get context(){return U.context},get distanceModel(){return U.distanceModel},set distanceModel(re){U.distanceModel=re},get inputs(){return[se]},get maxDistance(){return U.maxDistance},set maxDistance(re){if(re<0)throw new RangeError;U.maxDistance=re},get numberOfInputs(){return U.numberOfInputs},get numberOfOutputs(){return U.numberOfOutputs},get orientationX(){return Q.gain},get orientationY(){return ue.gain},get orientationZ(){return ee.gain},get panningModel(){return U.panningModel},set panningModel(re){U.panningModel=re},get positionX(){return ie.gain},get positionY(){return _e.gain},get positionZ(){return le.gain},get refDistance(){return U.refDistance},set refDistance(re){if(re<0)throw new RangeError;U.refDistance=re},get rolloffFactor(){return U.rolloffFactor},set rolloffFactor(re){if(re<0)throw new RangeError;U.rolloffFactor=re},addEventListener(...re){return se.addEventListener(re[0],re[1],re[2])},dispatchEvent(...re){return se.dispatchEvent(re[0])},removeEventListener(...re){return se.removeEventListener(re[0],re[1],re[2])}};b!==we.coneInnerAngle&&(we.coneInnerAngle=b),S!==we.coneOuterAngle&&(we.coneOuterAngle=S),N!==we.coneOuterGain&&(we.coneOuterGain=N),x!==we.distanceModel&&(we.distanceModel=x),k!==we.maxDistance&&(we.maxDistance=k),I!==we.orientationX.value&&(we.orientationX.value=I),v!==we.orientationY.value&&(we.orientationY.value=v),D!==we.orientationZ.value&&(we.orientationZ.value=D),C!==we.panningModel&&(we.panningModel=C),A!==we.positionX.value&&(we.positionX.value=A),w!==we.positionY.value&&(we.positionY.value=w),c!==we.positionZ.value&&(we.positionZ.value=c),R!==we.refDistance&&(we.refDistance=R),q!==we.rolloffFactor&&(we.rolloffFactor=q),(Ne[0]!==1||Ne[1]!==0||Ne[2]!==0)&&U.setOrientation(...Ne),(Qe[0]!==0||Qe[1]!==0||Qe[2]!==0)&&U.setPosition(...Qe);const qe=()=>{se.connect(U),i(se,ce,0,0),ce.connect(Q).connect(W,0,0),ce.connect(ue).connect(W,0,1),ce.connect(ee).connect(W,0,2),ce.connect(ie).connect(W,0,3),ce.connect(_e).connect(W,0,4),ce.connect(le).connect(W,0,5),W.connect(be).connect(y.destination)},tt=()=>{se.disconnect(U),f(se,ce,0,0),ce.disconnect(Q),Q.disconnect(W),ce.disconnect(ue),ue.disconnect(W),ce.disconnect(ee),ee.disconnect(W),ce.disconnect(ie),ie.disconnect(W),ce.disconnect(_e),_e.disconnect(W),ce.disconnect(le),le.disconnect(W),W.disconnect(be),be.disconnect(y.destination)};return p(gs(we,U),qe,tt)},Uf=i=>(e,{disableNormalization:t,imag:n,real:r})=>{const a=n instanceof Float32Array?n:new Float32Array(n),h=r instanceof Float32Array?r:new Float32Array(r),f=e.createPeriodicWave(h,a,{disableNormalization:t});if(Array.from(n).length<2)throw i();return f},ni=(i,e,t,n)=>i.createScriptProcessor(e,t,n),Hf=(i,e)=>(t,n)=>{const r=n.channelCountMode;if(r==="clamped-max")throw e();if(t.createStereoPanner===void 0)return i(t,n);const a=t.createStereoPanner();return it(a,n),ze(a,n,"pan"),Object.defineProperty(a,"channelCountMode",{get:()=>r,set:h=>{if(h!==r)throw e()}}),a},$f=(i,e,t,n,r,a)=>{const f=new Float32Array([1,1]),d=Math.PI/2,p={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},y={...p,oversample:"none"},b=(x,k,I,v)=>{const D=new Float32Array(16385),C=new Float32Array(16385);for(let H=0;H<16385;H+=1){const U=H/16384*d;D[H]=Math.cos(U),C[H]=Math.sin(U)}const A=t(x,{...p,gain:0}),w=n(x,{...y,curve:D}),c=n(x,{...y,curve:f}),R=t(x,{...p,gain:0}),q=n(x,{...y,curve:C});return{connectGraph(){k.connect(A),k.connect(c.inputs===void 0?c:c.inputs[0]),k.connect(R),c.connect(I),I.connect(w.inputs===void 0?w:w.inputs[0]),I.connect(q.inputs===void 0?q:q.inputs[0]),w.connect(A.gain),q.connect(R.gain),A.connect(v,0,0),R.connect(v,0,1)},disconnectGraph(){k.disconnect(A),k.disconnect(c.inputs===void 0?c:c.inputs[0]),k.disconnect(R),c.disconnect(I),I.disconnect(w.inputs===void 0?w:w.inputs[0]),I.disconnect(q.inputs===void 0?q:q.inputs[0]),w.disconnect(A.gain),q.disconnect(R.gain),A.disconnect(v,0,0),R.disconnect(v,0,1)}}},S=(x,k,I,v)=>{const D=new Float32Array(16385),C=new Float32Array(16385),A=new Float32Array(16385),w=new Float32Array(16385),c=Math.floor(16385/2);for(let ie=0;ie<16385;ie+=1)if(ie>c){const _e=(ie-c)/(16384-c)*d;D[ie]=Math.cos(_e),C[ie]=Math.sin(_e),A[ie]=0,w[ie]=1}else{const _e=ie/(16384-c)*d;D[ie]=1,C[ie]=0,A[ie]=Math.cos(_e),w[ie]=Math.sin(_e)}const R=e(x,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),q=t(x,{...p,gain:0}),H=n(x,{...y,curve:D}),U=t(x,{...p,gain:0}),z=n(x,{...y,curve:C}),W=n(x,{...y,curve:f}),se=t(x,{...p,gain:0}),Q=n(x,{...y,curve:A}),ue=t(x,{...p,gain:0}),ee=n(x,{...y,curve:w});return{connectGraph(){k.connect(R),k.connect(W.inputs===void 0?W:W.inputs[0]),R.connect(q,0),R.connect(U,0),R.connect(se,1),R.connect(ue,1),W.connect(I),I.connect(H.inputs===void 0?H:H.inputs[0]),I.connect(z.inputs===void 0?z:z.inputs[0]),I.connect(Q.inputs===void 0?Q:Q.inputs[0]),I.connect(ee.inputs===void 0?ee:ee.inputs[0]),H.connect(q.gain),z.connect(U.gain),Q.connect(se.gain),ee.connect(ue.gain),q.connect(v,0,0),se.connect(v,0,0),U.connect(v,0,1),ue.connect(v,0,1)},disconnectGraph(){k.disconnect(R),k.disconnect(W.inputs===void 0?W:W.inputs[0]),R.disconnect(q,0),R.disconnect(U,0),R.disconnect(se,1),R.disconnect(ue,1),W.disconnect(I),I.disconnect(H.inputs===void 0?H:H.inputs[0]),I.disconnect(z.inputs===void 0?z:z.inputs[0]),I.disconnect(Q.inputs===void 0?Q:Q.inputs[0]),I.disconnect(ee.inputs===void 0?ee:ee.inputs[0]),H.disconnect(q.gain),z.disconnect(U.gain),Q.disconnect(se.gain),ee.disconnect(ue.gain),q.disconnect(v,0,0),se.disconnect(v,0,0),U.disconnect(v,0,1),ue.disconnect(v,0,1)}}},N=(x,k,I,v,D)=>{if(k===1)return b(x,I,v,D);if(k===2)return S(x,I,v,D);throw r()};return(x,{channelCount:k,channelCountMode:I,pan:v,...D})=>{if(I==="max")throw r();const C=i(x,{...D,channelCount:1,channelCountMode:I,numberOfInputs:2}),A=t(x,{...D,channelCount:k,channelCountMode:I,gain:1}),w=t(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:v});let{connectGraph:c,disconnectGraph:R}=N(x,k,A,w,C);Object.defineProperty(w.gain,"defaultValue",{get:()=>0}),Object.defineProperty(w.gain,"maxValue",{get:()=>1}),Object.defineProperty(w.gain,"minValue",{get:()=>-1});const q={get bufferSize(){},get channelCount(){return A.channelCount},set channelCount(W){A.channelCount!==W&&(H&&R(),{connectGraph:c,disconnectGraph:R}=N(x,W,A,w,C),H&&c()),A.channelCount=W},get channelCountMode(){return A.channelCountMode},set channelCountMode(W){if(W==="clamped-max"||W==="max")throw r();A.channelCountMode=W},get channelInterpretation(){return A.channelInterpretation},set channelInterpretation(W){A.channelInterpretation=W},get context(){return A.context},get inputs(){return[A]},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},get pan(){return w.gain},addEventListener(...W){return A.addEventListener(W[0],W[1],W[2])},dispatchEvent(...W){return A.dispatchEvent(W[0])},removeEventListener(...W){return A.removeEventListener(W[0],W[1],W[2])}};let H=!1;const U=()=>{c(),H=!0},z=()=>{R(),H=!1};return a(gs(q,C),U,z)}},zf=(i,e,t,n,r,a,h)=>(f,d)=>{const p=f.createWaveShaper();if(a!==null&&a.name==="webkitAudioContext"&&f.createGain().gain.automationRate===void 0)return t(f,d);it(p,d);const y=d.curve===null||d.curve instanceof Float32Array?d.curve:new Float32Array(d.curve);if(y!==null&&y.length<2)throw e();Ue(p,{curve:y},"curve"),Ue(p,d,"oversample");let b=null,S=!1;return h(p,"curve",k=>()=>k.call(p),k=>I=>(k.call(p,I),S&&(n(I)&&b===null?b=i(f,p):!n(I)&&b!==null&&(b(),b=null)),I)),r(p,()=>{S=!0,n(p.curve)&&(b=i(f,p))},()=>{S=!1,b!==null&&(b(),b=null)})},Gf=(i,e,t,n,r)=>(a,{curve:h,oversample:f,...d})=>{const p=a.createWaveShaper(),y=a.createWaveShaper();it(p,d),it(y,d);const b=t(a,{...d,gain:1}),S=t(a,{...d,gain:-1}),N=t(a,{...d,gain:1}),x=t(a,{...d,gain:-1});let k=null,I=!1,v=null;const D={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(w){b.channelCount=w,S.channelCount=w,p.channelCount=w,N.channelCount=w,y.channelCount=w,x.channelCount=w},get channelCountMode(){return p.channelCountMode},set channelCountMode(w){b.channelCountMode=w,S.channelCountMode=w,p.channelCountMode=w,N.channelCountMode=w,y.channelCountMode=w,x.channelCountMode=w},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(w){b.channelInterpretation=w,S.channelInterpretation=w,p.channelInterpretation=w,N.channelInterpretation=w,y.channelInterpretation=w,x.channelInterpretation=w},get context(){return p.context},get curve(){return v},set curve(w){if(w!==null&&w.length<2)throw e();if(w===null)p.curve=w,y.curve=w;else{const c=w.length,R=new Float32Array(c+2-c%2),q=new Float32Array(c+2-c%2);R[0]=w[0],q[0]=-w[c-1];const H=Math.ceil((c+1)/2),U=(c+1)/2-1;for(let z=1;z<H;z+=1){const W=z/H*U,se=Math.floor(W),Q=Math.ceil(W);R[z]=se===Q?w[se]:(1-(W-se))*w[se]+(1-(Q-W))*w[Q],q[z]=se===Q?-w[c-1-se]:-((1-(W-se))*w[c-1-se])-(1-(Q-W))*w[c-1-Q]}R[H]=c%2===1?w[H-1]:(w[H-2]+w[H-1])/2,p.curve=R,y.curve=q}v=w,I&&(n(v)&&k===null?k=i(a,b):k!==null&&(k(),k=null))},get inputs(){return[b]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get oversample(){return p.oversample},set oversample(w){p.oversample=w,y.oversample=w},addEventListener(...w){return b.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return b.dispatchEvent(w[0])},removeEventListener(...w){return b.removeEventListener(w[0],w[1],w[2])}};h!==null&&(D.curve=h instanceof Float32Array?h:new Float32Array(h)),f!==D.oversample&&(D.oversample=f);const C=()=>{b.connect(p).connect(N),b.connect(S).connect(y).connect(x).connect(N),I=!0,n(v)&&(k=i(a,b))},A=()=>{b.disconnect(p),p.disconnect(N),b.disconnect(S),S.disconnect(y),y.disconnect(x),x.disconnect(N),I=!1,k!==null&&(k(),k=null)};return r(gs(D,N),C,A)},gt=()=>new DOMException("","NotSupportedError"),Xf={numberOfChannels:1},Zf=(i,e,t,n,r)=>class extends i{constructor(h,f,d){let p;if(typeof h=="number"&&f!==void 0&&d!==void 0)p={length:f,numberOfChannels:h,sampleRate:d};else if(typeof h=="object")p=h;else throw new Error("The given parameters are not valid.");const{length:y,numberOfChannels:b,sampleRate:S}={...Xf,...p},N=n(b,y,S);e(Rs,()=>Rs(N))||N.addEventListener("statechange",(()=>{let x=0;const k=I=>{this._state==="running"&&(x>0?(N.removeEventListener("statechange",k),I.stopImmediatePropagation(),this._waitForThePromiseToSettle(I)):x+=1)};return k})()),super(N,b),this._length=y,this._nativeOfflineAudioContext=N,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Ua(this)}))}_waitForThePromiseToSettle(h){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(h):setTimeout(()=>this._waitForThePromiseToSettle(h))}},Yf={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Qf=(i,e,t,n,r,a,h)=>class extends i{constructor(d,p){const y=r(d),b={...Yf,...p},S=t(y,b),N=a(y),x=N?n():null,k=d.sampleRate/2;super(d,!1,S,x),this._detune=e(this,N,S.detune,153600,-153600),this._frequency=e(this,N,S.frequency,k,-k),this._nativeOscillatorNode=S,this._onended=null,this._oscillatorNodeRenderer=x,this._oscillatorNodeRenderer!==null&&b.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=b.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(d){const p=typeof d=="function"?h(this,d):null;this._nativeOscillatorNode.onended=p;const y=this._nativeOscillatorNode.onended;this._onended=y!==null&&y===p?d:y}get type(){return this._nativeOscillatorNode.type}set type(d){this._nativeOscillatorNode.type=d,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(d){this._nativeOscillatorNode.setPeriodicWave(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=d)}start(d=0){if(this._nativeOscillatorNode.start(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=d),this.context.state!=="closed"){ls(this);const p=()=>{this._nativeOscillatorNode.removeEventListener("ended",p),pn(this)&&Qs(this)};this._nativeOscillatorNode.addEventListener("ended",p)}}stop(d=0){this._nativeOscillatorNode.stop(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=d)}},Jf=(i,e,t,n,r)=>()=>{const a=new WeakMap;let h=null,f=null,d=null;const p=async(y,b)=>{let S=t(y);const N=ft(S,b);if(!N){const x={channelCount:S.channelCount,channelCountMode:S.channelCountMode,channelInterpretation:S.channelInterpretation,detune:S.detune.value,frequency:S.frequency.value,periodicWave:h===null?void 0:h,type:S.type};S=e(b,x),f!==null&&S.start(f),d!==null&&S.stop(d)}return a.set(b,S),N?(await i(b,y.detune,S.detune),await i(b,y.frequency,S.frequency)):(await n(b,y.detune,S.detune),await n(b,y.frequency,S.frequency)),await r(y,b,S),S};return{set periodicWave(y){h=y},set start(y){f=y},set stop(y){d=y},render(y,b){const S=a.get(b);return S!==void 0?Promise.resolve(S):p(y,b)}}},ed={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},td=(i,e,t,n,r,a,h)=>class extends i{constructor(d,p){const y=r(d),b={...ed,...p},S=t(y,b),N=a(y),x=N?n():null;super(d,!1,S,x),this._nativePannerNode=S,this._orientationX=e(this,N,S.orientationX,pt,wt),this._orientationY=e(this,N,S.orientationY,pt,wt),this._orientationZ=e(this,N,S.orientationZ,pt,wt),this._positionX=e(this,N,S.positionX,pt,wt),this._positionY=e(this,N,S.positionY,pt,wt),this._positionZ=e(this,N,S.positionZ,pt,wt),h(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(d){this._nativePannerNode.coneInnerAngle=d}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(d){this._nativePannerNode.coneOuterAngle=d}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(d){this._nativePannerNode.coneOuterGain=d}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(d){this._nativePannerNode.distanceModel=d}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(d){this._nativePannerNode.maxDistance=d}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(d){this._nativePannerNode.panningModel=d}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(d){this._nativePannerNode.refDistance=d}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(d){this._nativePannerNode.rolloffFactor=d}},nd=(i,e,t,n,r,a,h,f,d,p)=>()=>{const y=new WeakMap;let b=null;const S=async(N,x)=>{let k=null,I=a(N);const v={channelCount:I.channelCount,channelCountMode:I.channelCountMode,channelInterpretation:I.channelInterpretation},D={...v,coneInnerAngle:I.coneInnerAngle,coneOuterAngle:I.coneOuterAngle,coneOuterGain:I.coneOuterGain,distanceModel:I.distanceModel,maxDistance:I.maxDistance,panningModel:I.panningModel,refDistance:I.refDistance,rolloffFactor:I.rolloffFactor},C=ft(I,x);if("bufferSize"in I)k=n(x,{...v,gain:1});else if(!C){const A={...D,orientationX:I.orientationX.value,orientationY:I.orientationY.value,orientationZ:I.orientationZ.value,positionX:I.positionX.value,positionY:I.positionY.value,positionZ:I.positionZ.value};I=r(x,A)}if(y.set(x,k===null?I:k),k!==null){if(b===null){if(h===null)throw new Error("Missing the native OfflineAudioContext constructor.");const z=new h(6,N.context.length,x.sampleRate),W=e(z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});W.connect(z.destination),b=(async()=>{const se=await Promise.all([N.orientationX,N.orientationY,N.orientationZ,N.positionX,N.positionY,N.positionZ].map(async(Q,ue)=>{const ee=t(z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ue===0?1:0});return await f(z,Q,ee.offset),ee}));for(let Q=0;Q<6;Q+=1)se[Q].connect(W,0,Q),se[Q].start(0);return p(z)})()}const A=await b,w=n(x,{...v,gain:1});await d(N,x,w);const c=[];for(let z=0;z<A.numberOfChannels;z+=1)c.push(A.getChannelData(z));let R=[c[0][0],c[1][0],c[2][0]],q=[c[3][0],c[4][0],c[5][0]],H=n(x,{...v,gain:1}),U=r(x,{...D,orientationX:R[0],orientationY:R[1],orientationZ:R[2],positionX:q[0],positionY:q[1],positionZ:q[2]});w.connect(H).connect(U.inputs[0]),U.connect(k);for(let z=128;z<A.length;z+=128){const W=[c[0][z],c[1][z],c[2][z]],se=[c[3][z],c[4][z],c[5][z]];if(W.some((Q,ue)=>Q!==R[ue])||se.some((Q,ue)=>Q!==q[ue])){R=W,q=se;const Q=z/x.sampleRate;H.gain.setValueAtTime(0,Q),H=n(x,{...v,gain:0}),U=r(x,{...D,orientationX:R[0],orientationY:R[1],orientationZ:R[2],positionX:q[0],positionY:q[1],positionZ:q[2]}),H.gain.setValueAtTime(1,Q),w.connect(H).connect(U.inputs[0]),U.connect(k)}}return k}return C?(await i(x,N.orientationX,I.orientationX),await i(x,N.orientationY,I.orientationY),await i(x,N.orientationZ,I.orientationZ),await i(x,N.positionX,I.positionX),await i(x,N.positionY,I.positionY),await i(x,N.positionZ,I.positionZ)):(await f(x,N.orientationX,I.orientationX),await f(x,N.orientationY,I.orientationY),await f(x,N.orientationZ,I.orientationZ),await f(x,N.positionX,I.positionX),await f(x,N.positionY,I.positionY),await f(x,N.positionZ,I.positionZ)),ms(I)?await d(N,x,I.inputs[0]):await d(N,x,I),I};return{render(N,x){const k=y.get(x);return k!==void 0?Promise.resolve(k):S(N,x)}}},sd={disableNormalization:!1},id=(i,e,t,n)=>class ec{constructor(a,h){const f=e(a),d=n({...sd,...h}),p=i(f,d);return t.add(p),p}static[Symbol.hasInstance](a){return a!==null&&typeof a=="object"&&Object.getPrototypeOf(a)===ec.prototype||t.has(a)}},rd=(i,e)=>(t,n,r)=>(i(n).replay(r),e(n,t,r)),od=(i,e,t)=>async(n,r,a)=>{const h=i(n);await Promise.all(h.activeInputs.map((f,d)=>Array.from(f).map(async([p,y])=>{const S=await e(p).render(p,r),N=n.context.destination;!t(p)&&(n!==N||!t(n))&&S.connect(a,y,d)})).reduce((f,d)=>[...f,...d],[]))},ad=(i,e,t)=>async(n,r,a)=>{const h=e(n);await Promise.all(Array.from(h.activeInputs).map(async([f,d])=>{const y=await i(f).render(f,r);t(f)||y.connect(a,d)}))},cd=(i,e,t,n)=>r=>i(Rs,()=>Rs(r))?Promise.resolve(i(n,n)).then(a=>{if(!a){const h=t(r,512,0,1);r.oncomplete=()=>{h.onaudioprocess=null,h.disconnect()},h.onaudioprocess=()=>r.currentTime,h.connect(r.destination)}return r.startRendering()}):new Promise(a=>{const h=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=f=>{h.disconnect(),a(f.renderedBuffer)},h.connect(r.destination),r.startRendering()}),ud=i=>(e,t)=>{i.set(e,t)},ld=i=>(e,t)=>i.set(e,t),hd=(i,e,t,n,r,a,h,f)=>(d,p)=>t(d).render(d,p).then(()=>Promise.all(Array.from(n(p)).map(y=>t(y).render(y,p)))).then(()=>r(p)).then(y=>(typeof y.copyFromChannel!="function"?(h(y),Zr(y)):e(a,()=>a(y))||f(y),i.add(y),y)),fd={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},dd=(i,e,t,n,r,a)=>class extends i{constructor(f,d){const p=r(f),y={...fd,...d},b=t(p,y),S=a(p),N=S?n():null;super(f,!1,b,N),this._pan=e(this,S,b.pan)}get pan(){return this._pan}},pd=(i,e,t,n,r)=>()=>{const a=new WeakMap,h=async(f,d)=>{let p=t(f);const y=ft(p,d);if(!y){const b={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,pan:p.pan.value};p=e(d,b)}return a.set(d,p),y?await i(d,f.pan,p.pan):await n(d,f.pan,p.pan),ms(p)?await r(f,d,p.inputs[0]):await r(f,d,p),p};return{render(f,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):h(f,d)}}},md=i=>()=>{if(i===null)return!1;try{new i({length:1,sampleRate:44100})}catch{return!1}return!0},gd=(i,e)=>async()=>{if(i===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),n=new e(1,128,44100),r=URL.createObjectURL(t);let a=!1,h=!1;try{await n.audioWorklet.addModule(r);const f=new i(n,"a",{numberOfOutputs:0}),d=n.createOscillator();f.port.onmessage=()=>a=!0,f.onprocessorerror=()=>h=!0,d.connect(f),d.start(0),await n.startRendering()}catch{}finally{URL.revokeObjectURL(r)}return a&&!h},vd=(i,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),n=i(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{t.oncomplete=()=>{n.disconnect(),r(t.currentTime!==0)},t.startRendering()})},_d=()=>new DOMException("","UnknownError"),yd={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},bd=(i,e,t,n,r,a,h)=>class extends i{constructor(d,p){const y=r(d),b={...yd,...p},S=t(y,b),x=a(y)?n():null;super(d,!0,S,x),this._isCurveNullified=!1,this._nativeWaveShaperNode=S,h(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(d){if(d===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(d.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=d}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(d){this._nativeWaveShaperNode.oversample=d}},wd=(i,e,t)=>()=>{const n=new WeakMap,r=async(a,h)=>{let f=e(a);if(!ft(f,h)){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,curve:f.curve,oversample:f.oversample};f=i(h,p)}return n.set(h,f),ms(f)?await t(a,h,f.inputs[0]):await t(a,h,f),f};return{render(a,h){const f=n.get(h);return f!==void 0?Promise.resolve(f):r(a,h)}}},Td=()=>typeof window>"u"?null:window,Cd=(i,e)=>t=>{t.copyFromChannel=(n,r,a=0)=>{const h=i(a),f=i(r);if(f>=t.numberOfChannels)throw e();const d=t.length,p=t.getChannelData(f),y=n.length;for(let b=h<0?-h:0;b+h<d&&b<y;b+=1)n[b]=p[b+h]},t.copyToChannel=(n,r,a=0)=>{const h=i(a),f=i(r);if(f>=t.numberOfChannels)throw e();const d=t.length,p=t.getChannelData(f),y=n.length;for(let b=h<0?-h:0;b+h<d&&b<y;b+=1)p[b+h]=n[b]}},xd=i=>e=>{e.copyFromChannel=(t=>(n,r,a=0)=>{const h=i(a),f=i(r);if(h<e.length)return t.call(e,n,f,h)})(e.copyFromChannel),e.copyToChannel=(t=>(n,r,a=0)=>{const h=i(a),f=i(r);if(h<e.length)return t.call(e,n,f,h)})(e.copyToChannel)},Sd=i=>(e,t)=>{const n=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=n),i(e,"buffer",r=>()=>{const a=r.call(e);return a===n?null:a},r=>a=>r.call(e,a===null?n:a))},Ad=(i,e)=>(t,n)=>{n.channelCount=1,n.channelCountMode="explicit",Object.defineProperty(n,"channelCount",{get:()=>1,set:()=>{throw i()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:()=>{throw i()}});const r=t.createBufferSource();e(n,()=>{const f=n.numberOfInputs;for(let d=0;d<f;d+=1)r.connect(n,0,d)},()=>r.disconnect(n))},tc=(i,e,t)=>i.copyFromChannel===void 0?i.getChannelData(t)[0]:(i.copyFromChannel(e,t),e[0]),nc=i=>{if(i===null)return!1;const e=i.length;return e%2!==0?i[Math.floor(e/2)]!==0:i[e/2-1]+i[e/2]!==0},si=(i,e,t,n)=>{let r=i;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:a,set:h}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(i,e,{get:t(a),set:n(h)})},kd=i=>({...i,outputChannelCount:i.outputChannelCount!==void 0?i.outputChannelCount:i.numberOfInputs===1&&i.numberOfOutputs===1?[i.channelCount]:Array.from({length:i.numberOfOutputs},()=>1)}),Nd=i=>({...i,channelCount:i.numberOfOutputs}),Ed=i=>{const{imag:e,real:t}=i;return e===void 0?t===void 0?{...i,imag:[0,0],real:[0,0]}:{...i,imag:Array.from(t,()=>0),real:t}:t===void 0?{...i,imag:e,real:Array.from(e,()=>0)}:{...i,imag:e,real:t}},sc=(i,e,t)=>{try{i.setValueAtTime(e,t)}catch(n){if(n.code!==9)throw n;sc(i,e,t+1e-7)}},Md=i=>{const e=i.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},Od=i=>{const e=i.createBufferSource(),t=i.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},Dd=i=>{const e=i.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},to=i=>{const e=i.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},ic=i=>{const e=i.createBuffer(1,1,44100),t=i.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},no=i=>{const e=i.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},Id=i=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(i)}finally{e.close(),t.close()}},Rd=i=>{i.start=(e=>(t=0,n=0,r)=>{const a=i.buffer,h=a===null?n:Math.min(a.duration,n);a!==null&&h>a.duration-.5/i.context.sampleRate?e.call(i,t,0,0):e.call(i,t,h,r)})(i.start)},rc=(i,e)=>{const t=e.createGain();i.connect(t);const n=(r=>()=>{r.call(i,t),i.removeEventListener("ended",n)})(i.disconnect);i.addEventListener("ended",n),gs(i,t),i.stop=(r=>{let a=!1;return(h=0)=>{if(a)try{r.call(i,h)}catch{t.gain.setValueAtTime(0,h)}else r.call(i,h),a=!0}})(i.stop)},vs=(i,e)=>t=>{const n={value:i};return Object.defineProperties(t,{currentTarget:n,target:n}),typeof e=="function"?e.call(i,t):e.handleEvent.call(i,t)},Pd=el(Zn),qd=ol(Zn),Fd=_h(Ji),oc=new WeakMap,Vd=qh(oc),Yt=Gl(new Map,new WeakMap),en=Td(),ac=df(Yt,nn),so=Ph(mt),lt=od(mt,so,Hn),Ld=hl(ac,We,lt),Ve=Lh(Qi),vn=jf(en),De=nf(vn),cc=new WeakMap,uc=Nh(vs),ii=vf(en),io=Qh(ii),ro=Jh(en),lc=ef(en),Ps=yf(en),Ye=ql(tl(Fa),rl(Pd,qd,Pi,Fd,qi,mt,Vd,Ys,We,Zn,pn,Hn,Ni),Yt,zh(Lr,qi,mt,We,Is,pn),nn,er,gt,ph(Pi,Lr,mt,We,Is,Ve,pn,De),wh(cc,mt,Zt),uc,Ve,io,ro,lc,De,Ps),jd=ll(Ye,Ld,nn,ac,Ve,De),oo=new WeakSet,Ca=pf(en),hc=ah(new Uint32Array(1)),ao=Cd(hc,nn),co=xd(hc),Wd=dl(oo,Yt,gt,Ca,vn,md(Ca),ao,co),tr=al(St),fc=ad(so,Js,Hn),sn=th(fc),_s=gf(tr,Yt,Md,Od,Dd,to,ic,no,Rd,Sd(si),rc),rn=rd(Fh(Js),fc),Bd=gl(sn,_s,We,rn,lt),Qt=Fl(nl(Va),cc,Xr,Vl,Gu,Xu,Zu,Yu,Qu,qr,Pa,ii,sc),Kd=ml(Ye,Bd,Qt,at,_s,Ve,De,vs),Ud=Sl(Ye,Al,nn,at,_f(St,si),Ve,De,lt),Hd=zl(sn,Qa,We,rn,lt),Yn=ld(oc),$d=$l(Ye,Qt,Hd,er,Qa,Ve,De,Yn),Dn=hf(Zn,ro),zd=Ad(at,Dn),In=Af(ii,zd),Gd=Yl(In,We,lt),Xd=Zl(Ye,Gd,In,Ve,De),Zd=eh(ti,We,lt),Yd=Jl(Ye,Zd,ti,Ve,De,Nd),Qd=Ef(tr,_s,St,Dn),ys=Nf(tr,Yt,Qd,to,no),Jd=oh(sn,ys,We,rn,lt),ep=rh(Ye,Qt,Jd,ys,Ve,De,vs),dc=Mf(gt,si),tp=lh(dc,We,lt),np=uh(Ye,tp,dc,Ve,De,Yn),sp=vh(sn,Ja,We,rn,lt),ip=gh(Ye,Qt,sp,Ja,Ve,De,Yn),pc=Of(gt),rp=Sh(sn,pc,We,rn,lt),op=xh(Ye,Qt,rp,pc,gt,Ve,De,Yn),ap=Ih(sn,St,We,rn,lt),cp=Dh(Ye,Qt,ap,St,Ve,De),up=Pf(er,at,ni,gt),nr=cd(Yt,St,ni,vd(St,vn)),lp=$h(_s,We,vn,lt,nr),hp=Df(up),fp=Uh(Ye,hp,lp,Ve,De,Yn),dp=kl(Qt,In,ys,ni,gt,tc,De,si),mc=new WeakMap,pp=lf(Ud,dp,uc,De,mc,vs),gc=Wf(tr,Yt,to,ic,no,rc),mp=Jf(sn,gc,We,rn,lt),gp=Qf(Ye,Qt,gc,mp,Ve,De,vs),vc=sh(_s),vp=Gf(vc,at,St,nc,Dn),sr=zf(vc,at,vp,nc,Dn,ii,si),_p=Kf(Pi,at,In,St,ni,sr,gt,qi,tc,Dn),_c=Bf(_p),yp=nd(sn,In,ys,St,_c,We,vn,rn,lt,nr),bp=td(Ye,Qt,_c,yp,Ve,De,Yn),wp=Uf(nn),Tp=id(wp,Ve,new WeakSet,Ed),Cp=$f(In,ti,St,sr,gt,Dn),yc=Hf(Cp,gt),xp=pd(sn,yc,We,rn,lt),Sp=dd(Ye,Qt,yc,xp,Ve,De),Ap=wd(sr,We,lt),kp=bd(Ye,at,sr,Ap,Ve,De,Yn),bc=sf(en),uo=Eh(en),wc=new WeakMap,Np=jh(wc,vn),Ep=bc?il(Yt,gt,kh(en),uo,Mh(Ju),Ve,Np,De,Ps,new WeakMap,new WeakMap,gd(Ps,vn),en):void 0,Mp=tf(io,De),Op=dh(oo,Yt,fh,Ah,new WeakSet,Ve,Mp,Ii,Rs,ao,co),Tc=Ul(Ep,jd,Wd,Kd,$d,Xd,Yd,ep,np,Op,ip,op,cp,fp,pp,gp,bp,Tp,Sp,kp),Dp=rf(Ye,qf,Ve,De),Ip=af(Ye,Ff,Ve,De),Rp=cf(Ye,Vf,Ve,De),Pp=Lf(at,De),qp=uf(Ye,Pp,Ve),Fp=xl(Tc,at,gt,_d,Dp,Ip,Rp,qp,ii),lo=Wh(mc),Vp=cl(lo),Cc=nh(nn),Lp=yh(lo),xc=Th(nn),Sc=new WeakMap,jp=Rh(Sc,Zt),Wp=Sf(Cc,nn,at,In,ti,ys,St,ni,gt,xc,uo,jp,Dn),Bp=wf(at,Wp,St,gt,Dn),Kp=Kl(sn,Cc,_s,In,ti,ys,St,Lp,xc,uo,We,Ps,vn,rn,lt,nr),Up=Vh(wc),Hp=ud(Sc),xa=bc?jl(Vp,Ye,Qt,Kp,Bp,mt,Up,Ve,De,Ps,kd,Hp,Id,vs):void 0,$p=hh(gt,vn),zp=hd(oo,Yt,so,lo,nr,Ii,ao,co),Gp=Zf(Tc,Yt,at,$p,zp),Xp=Gh(Qi,io),Zp=Xh(Gr,ro),Yp=Zh(Xr,lc),Qp=Yh(Qi,De);function ye(i,e){if(!i)throw new Error(e)}function mn(i,e,t=1/0){if(!(e<=i&&i<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${i}`)}function Ac(i){!i.isOffline&&i.state!=="running"&&Nc('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let kc=console;function Jp(...i){kc.log(...i)}function Nc(...i){kc.warn(...i)}function Lt(i){return typeof i>"u"}function Ce(i){return!Lt(i)}function em(i){return typeof i=="function"}function Nn(i){return typeof i=="number"}function Kn(i){return Object.prototype.toString.call(i)==="[object Object]"&&i.constructor===Object}function tm(i){return typeof i=="boolean"}function Xt(i){return Array.isArray(i)}function tn(i){return typeof i=="string"}function Ti(i){return tn(i)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(i)}function nm(i){return new Fp(i)}function sm(i,e,t){return new Gp(i,e,t)}const Un=typeof self=="object"?self:null,im=Un&&(Un.hasOwnProperty("AudioContext")||Un.hasOwnProperty("webkitAudioContext"));function rm(i,e,t){return ye(Ce(xa),"This node only works in a secure context (https or localhost)"),new xa(i,e,t)}function Jt(i,e,t,n){var r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(a=(r<3?h(a):r>3?h(e,t,a):h(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a}function et(i,e,t,n){function r(a){return a instanceof t?a:new t(function(h){h(a)})}return new(t||(t=Promise))(function(a,h){function f(y){try{p(n.next(y))}catch(b){h(b)}}function d(y){try{p(n.throw(y))}catch(b){h(b)}}function p(y){y.done?a(y.value):r(y.value).then(f,d)}p((n=n.apply(i,e||[])).next())})}class om{constructor(e,t,n){this._callback=e,this._type=t,this._updateInterval=n,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),n=new Worker(t);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){this._updateInterval=Math.max(e,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(e*1e3,1))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function $n(i){return Yp(i)}function kn(i){return Zp(i)}function Ei(i){return Qp(i)}function is(i){return Xp(i)}function Ec(i){return i instanceof AudioBuffer}function am(i,e){return i==="value"||$n(e)||kn(e)||Ec(e)}function as(i,...e){if(!e.length)return i;const t=e.shift();if(Kn(i)&&Kn(t))for(const n in t)am(n,t[n])?i[n]=t[n]:Kn(t[n])?(i[n]||Object.assign(i,{[n]:{}}),as(i[n],t[n])):Object.assign(i,{[n]:t[n]});return as(i,...e)}function cm(i,e){return i.length===e.length&&i.every((t,n)=>e[n]===t)}function Y(i,e,t=[],n){const r={},a=Array.from(e);if(Kn(a[0])&&n&&!Reflect.has(a[0],n)&&(Object.keys(a[0]).some(f=>Reflect.has(i,f))||(as(r,{[n]:a[0]}),t.splice(t.indexOf(n),1),a.shift())),a.length===1&&Kn(a[0]))as(r,a[0]);else for(let h=0;h<t.length;h++)Ce(a[h])&&(r[t[h]]=a[h]);return as(i,r)}function um(i){return i.constructor.getDefaults()}function cs(i,e){return Lt(i)?e:i}function os(i,e){return e.forEach(t=>{Reflect.has(i,t)&&delete i[t]}),i}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class _n{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Un&&this.toString()===Un.TONE_DEBUG_CLASS)&&Jp(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}_n.version=Ra;const ho=1e-6;function ji(i,e){return i>e+ho}function Ur(i,e){return ji(i,e)||$t(i,e)}function Mc(i,e){return i+ho<e}function $t(i,e){return Math.abs(i-e)<ho}function lm(i,e,t){return Math.max(Math.min(i,t),e)}class on extends _n{constructor(){super(),this.name="Timeline",this._timeline=[];const e=Y(on.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(ye(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];ye(Ur(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const n=this._search(e,t);return n!==-1?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const n=this._search(e,t);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const n=this._search(e);return n-1>=0?this._timeline[n-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if($t(this._timeline[t].time,e)){for(let n=t;n>=0&&$t(this._timeline[n].time,e);n--)t=n;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&Ur(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let n=0;const r=this._timeline.length;let a=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;n<a;){let h=Math.floor(n+(a-n)/2);const f=this._timeline[h],d=this._timeline[h+1];if($t(f[t],e)){for(let p=h;p<this._timeline.length;p++){const y=this._timeline[p];if($t(y[t],e))h=p;else break}return h}else{if(Mc(f[t],e)&&ji(d[t],e))return h;ji(f[t],e)?a=h:n=h+1}}return-1}_iterate(e,t=0,n=this._timeline.length-1){this._timeline.slice(t,n+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const n=this._search(e);return n!==-1&&this._iterate(t,0,n),this}forEachAfter(e,t){const n=this._search(e);return this._iterate(t,n+1),this}forEachBetween(e,t,n){let r=this._search(e),a=this._search(t);return r!==-1&&a!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[a].time===t&&(a-=1),this._iterate(n,r,a)):r===-1&&this._iterate(n,0,a),this}forEachFrom(e,t){let n=this._search(e);for(;n>=0&&this._timeline[n].time>=e;)n--;return this._iterate(t,n+1),this}forEachAtTime(e,t){const n=this._search(e);if(n!==-1&&$t(this._timeline[n].time,e)){let r=n;for(let a=n;a>=0&&$t(this._timeline[a].time,e);a--)r=a;this._iterate(a=>{t(a)},r,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Oc=[];function ir(i){Oc.push(i)}function hm(i){Oc.forEach(e=>e(i))}const Dc=[];function rr(i){Dc.push(i)}function fm(i){Dc.forEach(e=>e(i))}class ri extends _n{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(r=>{Lt(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(t)}),this}once(e,t){const n=(...r)=>{t(...r),this.off(e,n)};return this.on(e,n),this}off(e,t){return e.split(/\W+/).forEach(r=>{if(Lt(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if(Lt(t))this._events[e]=[];else{const a=this._events[e];for(let h=a.length-1;h>=0;h--)a[h]===t&&a.splice(h,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const n=this._events[e].slice(0);for(let r=0,a=n.length;r<a;r++)n[r].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const n=Object.getOwnPropertyDescriptor(ri.prototype,t);Object.defineProperty(e.prototype,t,n)})}dispose(){return super.dispose(),this._events=void 0,this}}class Ic extends ri{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class oi extends Ic{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new on,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const e=Y(oi.getDefaults(),arguments,["context"]);e.context?this._context=e.context:this._context=nm({latencyHint:e.latencyHint}),this._ticker=new om(this.emit.bind(this,"tick"),e.clockSource,e.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(e.latencyHint),this.lookAhead=e.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(hm(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,n){return this._context.createBuffer(e,t,n)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,n){return this._context.createPeriodicWave(e,t,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return ye(is(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return ye(is(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return ye(is(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){ye(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){ye(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){ye(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){ye(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return rm(this.rawContext,e,t)}addAudioWorkletModule(e,t){return et(this,void 0,void 0,function*(){ye(Ce(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(t)||this._workletModules.set(t,this.rawContext.audioWorklet.addModule(e)),yield this._workletModules.get(t)})}workletsAreReady(){return et(this,void 0,void 0,function*(){const e=[];this._workletModules.forEach(t=>e.push(t)),yield Promise.all(e)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get latencyHint(){return this._latencyHint}_setLatencyHint(e){let t=0;if(this._latencyHint=e,tn(e))switch(e){case"interactive":t=.1;break;case"playback":t=.5;break;case"balanced":t=.25;break}this.lookAhead=t,this.updateInterval=t/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return is(this._context)?this._context.resume():Promise.resolve()}close(){return et(this,void 0,void 0,function*(){is(this._context)&&(yield this._context.close()),this._initialized&&fm(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),n=t.getChannelData(0);for(let a=0;a<n.length;a++)n[a]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=t,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this}_timeoutLoop(){const e=this.now();let t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:n+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const n=++this._timeoutIds,r=()=>{const a=this.now();this._timeouts.add({callback:()=>{e(),r()},id:n,time:a+t})};return r(),n}}class dm extends Ic{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,n){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e,t){return et(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function He(i,e){Xt(e)?e.forEach(t=>He(i,t)):Object.defineProperty(i,e,{enumerable:!0,writable:!1})}function fo(i,e){Xt(e)?e.forEach(t=>fo(i,t)):Object.defineProperty(i,e,{writable:!0})}const Pe=()=>{};class Fe extends _n{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Pe;const e=Y(Fe.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,e.url&&Ec(e.url)||e.url instanceof Fe?this.set(e.url):tn(e.url)&&this.load(e.url).catch(e.onerror)}static getDefaults(){return{onerror:Pe,onload:Pe,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:zt().sampleRate}set(e){return e instanceof Fe?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return et(this,void 0,void 0,function*(){const t=Fe.load(e).then(n=>{this.set(n),this.onload(this)});Fe.downloads.push(t);try{yield t}finally{const n=Fe.downloads.indexOf(t);Fe.downloads.splice(n,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=Xt(e)&&e[0].length>0,n=t?e.length:1,r=t?e[0].length:e.length,a=zt(),h=a.createBuffer(n,r,a.sampleRate),f=!t&&n===1?[e]:e;for(let d=0;d<n;d++)h.copyToChannel(f[d],d);return this._buffer=h,this}toMono(e){if(Nn(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const n=this.numberOfChannels;for(let r=0;r<n;r++){const a=this.toArray(r);for(let h=0;h<a.length;h++)t[h]+=a[h]}t=t.map(r=>r/n),this.fromArray(t)}return this}toArray(e){if(Nn(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let n=0;n<this.numberOfChannels;n++)t[n]=this.getChannelData(n);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){const n=Math.floor(e*this.sampleRate),r=Math.floor(t*this.sampleRate);ye(n<r,"The start time must be less than the end time");const a=r-n,h=zt().createBuffer(this.numberOfChannels,a,this.sampleRate);for(let f=0;f<this.numberOfChannels;f++)h.copyToChannel(this.getChannelData(f).subarray(n,r),f);return new Fe(h)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Fe().fromArray(e)}static fromUrl(e){return et(this,void 0,void 0,function*(){return yield new Fe().load(e)})}static load(e){return et(this,void 0,void 0,function*(){const t=e.match(/\[([^\]\[]+\|.+)\]$/);if(t){const f=t[1].split("|");let d=f[0];for(const p of f)if(Fe.supportsType(p)){d=p;break}e=e.replace(t[0],d)}const n=Fe.baseUrl===""||Fe.baseUrl.endsWith("/")?Fe.baseUrl:Fe.baseUrl+"/",r=yield fetch(n+e);if(!r.ok)throw new Error(`could not load url: ${e}`);const a=yield r.arrayBuffer();return yield zt().decodeAudioData(a)})}static supportsType(e){const t=e.split("."),n=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+n)!==""}static loaded(){return et(this,void 0,void 0,function*(){for(yield Promise.resolve();Fe.downloads.length;)yield Fe.downloads[0]})}}Fe.baseUrl="";Fe.downloads=[];class po extends oi{constructor(){super({clockSource:"offline",context:Ei(arguments[0])?arguments[0]:sm(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Ei(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Ei(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return et(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const n=Math.floor(this.sampleRate/128);e&&t%n===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(e=!0){return et(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new Fe(t)})}close(){return Promise.resolve()}}const Rc=new dm;let Os=Rc;function zt(){return Os===Rc&&im&&pm(new oi),Os}function pm(i){is(i)?Os=new oi(i):Ei(i)?Os=new po(i):Os=i}if(Un&&!Un.TONE_SILENCE_LOGGING){const e=` * Tone.js v${Ra} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function mm(i){return Math.pow(10,i/20)}function gm(i){return 20*(Math.log(i)/Math.LN10)}function Pc(i){return Math.pow(2,i/12)}let or=440;function vm(){return or}function _m(i){or=i}function Hr(i){return Math.round(qc(i))}function qc(i){return 69+12*Math.log2(i/or)}function ym(i){return or*Math.pow(2,(i-69)/12)}class mo extends _n{constructor(e,t,n){super(),this.defaultUnits="s",this._val=t,this._units=n,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const n=parseInt(e,10),r=t==="."?1.5:1;return n===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/n)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,n)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r+=this._beatsToUnits(parseFloat(t))),n&&n!=="0"&&(r+=this._beatsToUnits(parseFloat(n)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof mo&&this.fromType(this._val),Lt(this._val))return this._noArg();if(tn(this._val)&&Lt(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Kn(this._val)){let e=0;for(const t in this._val)if(Ce(this._val[t])){const n=this._val[t],r=new this.constructor(this.context,t).valueOf()*n;e+=r}return e}if(Ce(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return tn(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Gt extends mo{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new Gt(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const n=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),f=Math.round(r/n)*n-r;return r+f*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let a=1;a<9;a++){const h=Math.pow(2,a);t.push(h+"n."),t.push(h+"n"),t.push(h+"t")}t.push("0");let n=t[0],r=new Gt(this.context,t[0]).toSeconds();return t.forEach(a=>{const h=new Gt(this.context,a).toSeconds();Math.abs(h-e)<Math.abs(r-e)&&(n=a,r=h)}),n}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const n=Math.floor(t/this._getTimeSignature());let r=t%1*4;t=Math.floor(t)%this._getTimeSignature();const a=r.toString();return a.length>3&&(r=parseFloat(parseFloat(a).toFixed(3))),[n,t,r].join(":")}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.round(t*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Hr(this.toFrequency())}_now(){return this.context.now()}}class Vt extends Gt{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return vm()}static set A4(e){_m(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:Vt.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(e,t){const r=bm[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?r:Vt.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,n){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r*=this._beatsToUnits(parseFloat(t))),n&&n!=="0"&&(r*=this._beatsToUnits(parseFloat(n)/4)),r}}})}transpose(e){return new Vt(this.context,this.valueOf()*Pc(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return Hr(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/Vt.A4);let n=Math.round(12*t)+57;const r=Math.floor(n/12);return r<0&&(n+=-12*r),wm[n%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return ym(e)}static ftom(e){return Hr(e)}}const bm={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},wm=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Ds extends Gt{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Ct extends _n{constructor(){super();const e=Y(Ct.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:zt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return new Gt(this.context,e).toSeconds()}toFrequency(e){return new Vt(this.context,e).toFrequency()}toTicks(e){return new Ds(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(n=>{Lt(e[n])&&delete t[n]}),t}get(){const e=um(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const n=this[t];Ce(n)&&Ce(n.value)&&Ce(n.setValueAtTime)?e[t]=n.value:n instanceof Ct?e[t]=n._getPartialProperties(e[t]):Xt(n)||Nn(n)||tn(n)||tm(n)?e[t]=n:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Ce(this[t])&&(this[t]&&Ce(this[t].value)&&Ce(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof Ct?this[t].set(e[t]):this[t]=e[t])}),this}}class go extends on{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,n){return mn(t,0),this.add(Object.assign({},n,{state:e,time:t})),this}getLastState(e,t){const n=this._search(t);for(let r=n;r>=0;r--){const a=this._timeline[r];if(a.state===e)return a}}getNextState(e,t){const n=this._search(t);if(n!==-1)for(let r=n;r<this._timeline.length;r++){const a=this._timeline[r];if(a.state===e)return a}}}class Oe extends Ct{constructor(){super(Y(Oe.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=Y(Oe.getDefaults(),arguments,["param","units","convert"]);for(ye(Ce(e.param)&&($n(e.param)||e.param instanceof Oe),"param must be an AudioParam");!$n(e.param);)e.param=e.param._param;this._swappable=Ce(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new on(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Ce(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ct.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Ce(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Ce(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Ce(this.maxValue)&&Ce(this.minValue)&&mn(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?mm(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?gm(e):e}setValueAtTime(e,t){const n=this.toSeconds(t),r=this._fromType(e);return ye(isFinite(r)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,n),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),n=this._events.getAfter(t),r=this._events.get(t);let a=this._initialValue;if(r===null)a=this._initialValue;else if(r.type==="setTargetAtTime"&&(n===null||n.type==="setValueAtTime")){const h=this._events.getBefore(r.time);let f;h===null?f=this._initialValue:f=h.value,r.type==="setTargetAtTime"&&(a=this._exponentialApproach(r.time,f,r.value,r.constant,t))}else if(n===null)a=r.value;else if(n.type==="linearRampToValueAtTime"||n.type==="exponentialRampToValueAtTime"){let h=r.value;if(r.type==="setTargetAtTime"){const f=this._events.getBefore(r.time);f===null?h=this._initialValue:h=f.value}n.type==="linearRampToValueAtTime"?a=this._linearInterpolate(r.time,h,n.time,n.value,t):a=this._exponentialInterpolate(r.time,h,n.time,n.value,t)}else a=r.value;return this._toType(a)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const n=this._fromType(e),r=this.toSeconds(t);return ye(isFinite(n)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(n),this._events.add({time:r,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(n,r),this}exponentialRampToValueAtTime(e,t){let n=this._fromType(e);n=$t(n,0)?this._minOutput:n,this._assertRange(n);const r=this.toSeconds(t);return ye(isFinite(n)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(n,r),this}exponentialRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(e,n+this.toSeconds(t)),this}linearRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(e,n+this.toSeconds(t)),this}targetRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(e,n,t),this}exponentialApproachValueAtTime(e,t,n){t=this.toSeconds(t),n=this.toSeconds(n);const r=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(e,t,r),this.cancelAndHoldAtTime(t+n*.9),this.linearRampToValueAtTime(e,t+n),this}setTargetAtTime(e,t,n){const r=this._fromType(e);ye(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const a=this.toSeconds(t);return this._assertRange(r),ye(isFinite(r)&&isFinite(a),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:n,time:a,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,a,n),this._param.setTargetAtTime(r,a,n),this}setValueCurveAtTime(e,t,n,r=1){n=this.toSeconds(n),t=this.toSeconds(t);const a=this._fromType(e[0])*r;this.setValueAtTime(this._toType(a),t);const h=n/(e.length-1);for(let f=1;f<e.length;f++){const d=this._fromType(e[f])*r;this.linearRampToValueAtTime(this._toType(d),t+f*h)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return ye(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),n=this._fromType(this.getValueAtTime(t));ye(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+n);const r=this._events.get(t),a=this._events.getAfter(t);return r&&$t(r.time,t)?a?(this._param.cancelScheduledValues(a.time),this._events.cancel(a.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):a&&(this._param.cancelScheduledValues(a.time),this._events.cancel(a.time),a.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(n),t):a.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(n),t)),this._events.add({time:t,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,t),this}rampTo(e,t=.1,n){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,n):this.linearRampTo(e,t,n),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const n=this._events.get(t);if(n&&n.type==="setTargetAtTime"){const r=this._events.getAfter(n.time),a=r?r.time:t+2,h=(a-t)/10;for(let f=t;f<a;f+=h)e.linearRampToValueAtTime(this.getValueAtTime(f),f)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){ye(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,n,r,a){return n+(t-n)*Math.exp(-(a-e)/r)}_linearInterpolate(e,t,n,r,a){return t+(r-t)*((a-e)/(n-e))}_exponentialInterpolate(e,t,n,r,a){return t*Math.pow(r/t,(a-e)/(n-e))}}class ve extends Ct{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return Ce(this.input)?$n(this.input)||this.input instanceof Oe?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Ce(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Ce(e)&&(e instanceof ve||kn(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(n=>{n.channelCount=e.channelCount,n.channelCountMode=e.channelCountMode,n.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();ye(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,n=0){return bs(this,e,t,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Nc("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,n=0){return Tm(this,e,t,n),this}chain(...e){return qs(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),Ce(this.input)&&(this.input instanceof ve?this.input.dispose():kn(this.input)&&this.input.disconnect()),Ce(this.output)&&(this.output instanceof ve?this.output.dispose():kn(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function qs(...i){const e=i.shift();i.reduce((t,n)=>(t instanceof ve?t.connect(n):kn(t)&&bs(t,n),n),e)}function bs(i,e,t=0,n=0){for(ye(Ce(i),"Cannot connect from undefined node"),ye(Ce(e),"Cannot connect to undefined node"),(e instanceof ve||kn(e))&&ye(e.numberOfInputs>0,"Cannot connect to node with no inputs"),ye(i.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof ve||e instanceof Oe;)Ce(e.input)&&(e=e.input);for(;i instanceof ve;)Ce(i.output)&&(i=i.output);$n(e)?i.connect(e,t):i.connect(e,t,n)}function Tm(i,e,t=0,n=0){if(Ce(e))for(;e instanceof ve;)e=e.input;for(;!kn(i);)Ce(i.output)&&(i=i.output);$n(e)?i.disconnect(e,t):kn(e)?i.disconnect(e,t,n):i.disconnect()}class ct extends ve{constructor(){super(Y(ct.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=Y(ct.getDefaults(),arguments,["gain","units"]);this.gain=new Oe({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),He(this,"gain")}static getDefaults(){return Object.assign(ve.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class hs extends ve{constructor(e){super(e),this.onended=Pe,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ct({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const n=this.toSeconds(t);return this._startTime!==-1&&n>=this._startTime&&(this._stopTime===-1||n<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(ve.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Pe})}_startGain(e,t=1){ye(this._startTime===-1,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=e+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+n):this._gainNode.gain.exponentialApproachValueAtTime(t,e,n)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){ye(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.context.currentTime),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const n=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+n),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Pe&&(this.onended(this),this.onended=Pe,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),ye(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class Wi extends hs{constructor(){super(Y(Wi.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=Y(Wi.getDefaults(),arguments,["offset"]);bs(this._source,this._gainNode),this.offset=new Oe({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(hs.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class je extends ve{constructor(){super(Y(je.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=Y(je.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Wi({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ve.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,n=0){return vo(this,e,t,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,n){return this._param.exponentialRampTo(e,t,n),this}linearRampTo(e,t,n){return this._param.linearRampTo(e,t,n),this}targetRampTo(e,t,n){return this._param.targetRampTo(e,t,n),this}exponentialApproachValueAtTime(e,t,n){return this._param.exponentialApproachValueAtTime(e,t,n),this}setTargetAtTime(e,t,n){return this._param.setTargetAtTime(e,t,n),this}setValueCurveAtTime(e,t,n,r){return this._param.setValueCurveAtTime(e,t,n,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,n){return this._param.rampTo(e,t,n),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function vo(i,e,t,n){(e instanceof Oe||$n(e)||e instanceof je&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof je&&(e.overridden=!0)),bs(i,e,t,n)}class Bi extends Oe{constructor(){super(Y(Bi.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new on(1/0),this._multiplier=1;const e=Y(Bi.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Oe.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,n){t=this.toSeconds(t),this.setRampPoint(t);const r=this._fromType(e),a=this._events.get(t),h=Math.round(Math.max(1/n,1));for(let f=0;f<=h;f++){const d=n*f+t,p=this._exponentialApproach(a.time,a.value,r,n,d);this.linearRampToValueAtTime(this._toType(p),d)}return this}setValueAtTime(e,t){const n=this.toSeconds(t);super.setValueAtTime(e,t);const r=this._events.get(n),a=this._events.previousEvent(r),h=this._getTicksUntilEvent(a,n);return r.ticks=Math.max(h,0),this}linearRampToValueAtTime(e,t){const n=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const r=this._events.get(n),a=this._events.previousEvent(r),h=this._getTicksUntilEvent(a,n);return r.ticks=Math.max(h,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const n=this._fromType(e),r=this._events.get(t),a=Math.round(Math.max((t-r.time)*10,1)),h=(t-r.time)/a;for(let f=0;f<=a;f++){const d=h*f+r.time,p=this._exponentialInterpolate(r.time,r.value,t,n,d);this.linearRampToValueAtTime(this._toType(p),d)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Lt(e.ticks)){const h=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(h,e.time)}const n=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(t));const a=this._events.get(t);return a&&a.time===t&&a.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(n+r)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),n=this._events.get(t);return Math.max(this._getTicksUntilEvent(n,t),0)}getDurationOfTicks(e,t){const n=this.toSeconds(t),r=this.getTicksAtTime(t);return this.getTimeOfTick(r+e)-n}getTimeOfTick(e){const t=this._events.get(e,"ticks"),n=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&n&&n.type==="linearRampToValueAtTime"&&t.value!==n.value){const r=this._fromType(this.getValueAtTime(t.time)),h=(this._fromType(this.getValueAtTime(n.time))-r)/(n.time-t.time),f=Math.sqrt(Math.pow(r,2)-2*h*(t.ticks-e)),d=(-r+f)/h,p=(-r-f)/h;return(d>0?d:p)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const n=this.toSeconds(t),r=this.toSeconds(e),a=this.getTicksAtTime(n);return this.getTicksAtTime(n+r)-a}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class Ki extends je{constructor(){super(Y(Ki.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=Y(Ki.getDefaults(),arguments,["value"]);this.input=this._param=new Bi({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(je.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Ui extends Ct{constructor(){super(Y(Ui.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new go,this._tickOffset=new on;const e=Y(Ui.getDefaults(),arguments,["frequency"]);this.frequency=new Ki({context:this.context,units:e.units,value:e.frequency}),He(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Ct.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const n=this.toSeconds(e);return this._state.getValueAtTime(n)!=="started"&&(this._state.setStateAtTime("started",n),Ce(t)&&this.setTicksAtTime(t,n)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const n=this._state.get(t);n&&n.time>0&&(this._tickOffset.cancel(n.time),this._state.cancel(n.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&this._state.setStateAtTime("paused",t),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),n=this._state.getLastState("stopped",t),r={state:"paused",time:t};this._state.add(r);let a=n,h=0;return this._state.forEachBetween(n.time,t+this.sampleTime,f=>{let d=a.time;const p=this._tickOffset.get(f.time);p&&p.time>=a.time&&(h=p.ticks,d=p.time),a.state==="started"&&f.state!=="started"&&(h+=this.frequency.getTicksAtTime(f.time)-this.frequency.getTicksAtTime(d)),a=f}),this._state.remove(r),h}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),n=this.frequency.timeToTicks(e,t);this.setTicksAtTime(n,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),n={state:"paused",time:e};this._state.add(n);let r=t,a=0;return this._state.forEachBetween(t.time,e+this.sampleTime,h=>{let f=r.time;const d=this._tickOffset.get(h.time);d&&d.time>=r.time&&(a=d.seconds,f=d.time),r.state==="started"&&h.state!=="started"&&(a+=h.time-f),r=h}),this._state.remove(n),a}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const n=this._tickOffset.get(t),r=this._state.get(t),a=Math.max(n.time,r.time),h=this.frequency.getTicksAtTime(a)+e-n.ticks;return this.frequency.getTimeOfTick(h)}forEachTickBetween(e,t,n){let r=this._state.get(e);this._state.forEachBetween(e,t,h=>{r&&r.state==="started"&&h.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),h.time-this.sampleTime,n),r=h});let a=null;if(r&&r.state==="started"){const h=Math.max(r.time,e),f=this.frequency.getTicksAtTime(h),d=this.frequency.getTicksAtTime(r.time),p=f-d;let y=Math.ceil(p)-p;y=$t(y,1)?0:y;let b=this.frequency.getTimeOfTick(f+y);for(;b<t;){try{n(b,Math.round(this.getTicksAtTime(b)))}catch(S){a=S;break}b+=this.frequency.getDurationOfTicks(1,b)}}if(a)throw a;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class Fs extends Ct{constructor(){super(Y(Fs.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Pe,this._lastUpdate=0,this._state=new go("stopped"),this._boundLoop=this._loop.bind(this);const e=Y(Fs.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new Ui({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,He(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Ct.getDefaults(),{callback:Pe,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){Ac(this.context);const n=this.toSeconds(e);return this.log("start",n),this._state.getValueAtTime(n)!=="started"&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,t),n<this._lastUpdate&&this.emit("start",n,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const n=this.toSeconds(t),r=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(r+e,n)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,n=>{switch(n.state){case"started":const r=this._tickSource.getTicksAtTime(n.time);this.emit("start",n.time,r);break;case"stopped":n.time!==0&&this.emit("stop",n.time);break;case"paused":this.emit("pause",n.time);break}}),this._tickSource.forEachTickBetween(e,t,(n,r)=>{this.callback(n,r)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}ri.mixin(Fs);class _o extends _n{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=Y(_o.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const n=e.urls[t];this.add(t,n,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Pe,onload:Pe,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return ye(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,n=Pe,r=Pe){return tn(t)?this._buffers.set(e.toString(),new Fe(this.baseUrl+t,n,r)):this._buffers.set(e.toString(),new Fe(t,n,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class dn extends Ds{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class Cm extends Ct{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new on,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}ir(i=>{i.draw=new Cm({context:i})});rr(i=>{i.draw.dispose()});class xm extends _n{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){ye(Ce(e.time),"Events must have a time property"),ye(Ce(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new Sm(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const n of t)if(n.event===e){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let n,r=null;if(t>0)if(e.left.right===null)n=e.left,n.right=e.right,r=n;else{for(n=e.left.right;n.right!==null;)n=n.right;n.parent&&(n.parent.right=n.left,r=n.parent,n.left=e.left,n.right=e.right)}else if(e.right.left===null)n=e.right,n.left=e.left,r=n;else{for(n=e.right.left;n.left!==null;)n=n.left;n.parent&&(n.parent.left=n.right,r=n.parent,n.left=e.left,n.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=n:e.parent.right=n:this._setRoot(n),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const t=e.parent,n=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),t!==null?n?t.left=r:t.right=r:this._setRoot(r)}_rotateRight(e){const t=e.parent,n=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),t!==null?n?t.left=r:t.right=r:this._setRoot(r)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let n=t[0];for(let r=1;r<t.length;r++)t[r].low>n.low&&(n=t[r]);return n.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(n=>t.push(n)),t.forEach(n=>{n.event&&e(n.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const n=[];this._root.search(e,n),n.forEach(r=>{r.event&&t(r.event)})}return this}forEachFrom(e,t){if(this._root!==null){const n=[];this._root.searchAfter(e,n),n.forEach(r=>{r.event&&t(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class Sm{constructor(e,t,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class zn extends ve{constructor(){super(Y(zn.getDefaults(),arguments,["volume"])),this.name="Volume";const e=Y(zn.getDefaults(),arguments,["volume"]);this.input=this.output=new ct({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,He(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(ve.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Hi extends ve{constructor(){super(Y(Hi.getDefaults(),arguments)),this.name="Destination",this.input=new zn({context:this.context}),this.output=new ct({context:this.context}),this.volume=this.input.volume;const e=Y(Hi.getDefaults(),arguments);qs(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ve.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),qs(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}ir(i=>{i.destination=new Hi({context:i})});rr(i=>{i.destination.dispose()});class Am extends _n{constructor(e){super(),this.name="TimelineValue",this._timeline=new on({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class En{constructor(e,t){this.id=En._eventId++;const n=Object.assign(En.getDefaults(),t);this.transport=e,this.callback=n.callback,this._once=n.once,this.time=n.time}static getDefaults(){return{callback:Pe,once:!1,time:0}}invoke(e){this.callback&&(this.callback(e),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}En._eventId=0;class yo extends En{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(yo.getDefaults(),t);this.duration=new dn(e.context,n.duration).valueOf(),this._interval=new dn(e.context,n.interval).valueOf(),this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},En.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvents(e){const t=this.transport.getTicksAtTime(e);t>=this.time&&t>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new dn(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const t=this.transport.getTicksAtTime(e);t>this.time&&(this._nextTick=this.time+Math.ceil((t-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new dn(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new dn(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class Vs extends Ct{constructor(){super(Y(Vs.getDefaults(),arguments)),this.name="Transport",this._loop=new Am(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new on,this._repeatedEvents=new xm,this._syncedSignals=[],this._swingAmount=0;const e=Y(Vs.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new Fs({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),He(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Ct.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const n=t%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(n*Math.PI)*this._swingAmount;e+=new dn(this.context,this._swingTicks*2/3).toSeconds()*r}this._timeline.forEachAtTime(t,n=>n.invoke(e))}schedule(e,t){const n=new En(this,{callback:e,time:new Ds(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(e,t,n,r=1/0){const a=new yo(this,{callback:e,duration:new Gt(this.context,r).toTicks(),interval:new Gt(this.context,t).toTicks(),time:new Ds(this.context,n).toTicks()});return this._addEvent(a,this._repeatedEvents)}scheduleOnce(e,t){const n=new En(this,{callback:e,once:!0,time:new Ds(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,n=>this.clear(n.id)),this._repeatedEvents.forEachFrom(t,n=>this.clear(n.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new dn(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){let n;return Ce(t)&&(n=this.toTicks(t)),this._clock.start(e,n),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Xt(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Gt(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Gt(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new dn(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new dn(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),n=this._clock.frequency.timeToTicks(e,t);this.ticks=n}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const n=this._clock.getTicksAtTime(t),r=this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,t),a=t+r;this.emit("stop",a),this._clock.setTicksAtTime(e,a),this.emit("start",a,this._clock.getSecondsAtTime(a))}else this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return Math.round(this._clock.getTicksAtTime(e))}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),n=this.getTicksAtTime(t),r=e-n%e;return this._clock.nextTickTime(r,t)}}syncSignal(e,t){if(!t){const r=this.now();if(e.getValueAtTime(r)!==0){const h=1/(60/this.bpm.getValueAtTime(r)/this.PPQ);t=e.getValueAtTime(r)/h}else t=0}const n=new ct(t);return this.bpm.connect(n),n.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:n,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const n=this._syncedSignals[t];n.signal===e&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),fo(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}ri.mixin(Vs);ir(i=>{i.transport=new Vs({context:i})});rr(i=>{i.transport.dispose()});class At extends ve{constructor(e){super(e),this.input=void 0,this._state=new go("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Pe,this._syncedStop=Pe,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new zn({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,He(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(ve.getDefaults(),{mute:!1,onstop:Pe,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,n){let r=Lt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")ye(ji(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,t,n);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const a=this._state.get(r);a&&(a.offset=this.toSeconds(cs(t,0)),a.duration=n?this.toSeconds(n):void 0);const h=this.context.transport.schedule(f=>{this._start(f,t,n)},r);this._scheduled.push(h),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else Ac(this.context),this._start(r,t,n);return this}stop(e){let t=Lt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||Ce(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const n=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(n)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,n){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(t>0){const n=this._state.get(t);if(n&&n.state==="started"&&n.time!==t){const r=t-this.toSeconds(n.time);let a;n.duration&&(a=this.toSeconds(n.duration)-r),this._start(e,this.toSeconds(n.offset)+r,a)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Pe,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Ls extends hs{constructor(){super(Y(Ls.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=Y(Ls.getDefaults(),arguments,["url","onload"]);bs(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Oe({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Fe(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(hs.getDefaults(),{url:new Fe,loop:!1,loopEnd:0,loopStart:0,onload:Pe,onerror:Pe,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,n,r=1){ye(this.buffer.loaded,"buffer is either not set or not loaded");const a=this.toSeconds(e);this._startGain(a,r),this.loop?t=cs(t,this.loopStart):t=cs(t,0);let h=Math.max(this.toSeconds(t),0);if(this.loop){const f=this.toSeconds(this.loopEnd)||this.buffer.duration,d=this.toSeconds(this.loopStart),p=f-d;Ur(h,f)&&(h=(h-d)%p+d),$t(h,this.buffer.duration)&&(h=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Mc(h,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(a,h)),Ce(n)){let f=this.toSeconds(n);f=Math.max(f,0),this.stop(a+f)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Qn(i,e){return et(this,void 0,void 0,function*(){const t=e/i.context.sampleRate,n=new po(1,t,i.context.sampleRate);return new i.constructor(Object.assign(i.get(),{frequency:2/t,detune:0,context:n})).toDestination().start(0),(yield n.render()).getChannelData(0)})}class $i extends hs{constructor(){super(Y($i.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=Y($i.getDefaults(),arguments,["frequency","type"]);bs(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Oe({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Oe({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),He(this,["frequency","detune"])}static getDefaults(){return Object.assign(hs.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Ze extends At{constructor(){super(Y(Ze.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=Y(Ze.getDefaults(),arguments,["frequency","type"]);this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),He(this,"frequency"),this.detune=new je({context:this.context,units:"cents",value:e.detune}),He(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(At.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),n=new $i({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Ze._periodicWaveCache.find(t=>t.phase===this._phase&&cm(t.partials,this._partials));{const e=Ze._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const n=this._getCachedPeriodicWave();if(Ce(n)){const{partials:r,wave:a}=n;this._wave=a,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,a]=this._getRealImaginary(e,this._phase),h=this.context.createPeriodicWave(r,a);this._wave=h,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Ze._periodicWaveCache.push({imag:a,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),Ze._periodicWaveCache.length>100&&Ze._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){mn(e,0);let t=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(t=n[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const r=new Float32Array(e);this._partials.forEach((a,h)=>r[h]=a),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,t){let r=2048;const a=new Float32Array(r),h=new Float32Array(r);let f=1;if(e==="custom"){if(f=this._partials.length+1,this._partialCount=this._partials.length,r=f,this._partials.length===0)return[a,h]}else{const d=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);d?(f=parseInt(d[2],10)+1,this._partialCount=parseInt(d[2],10),e=d[1],f=Math.max(f,2),r=f):this._partialCount=0,this._partials=[]}for(let d=1;d<r;++d){const p=2/(d*Math.PI);let y;switch(e){case"sine":y=d<=f?1:0,this._partials[d-1]=y;break;case"square":y=d&1?2*p:0,this._partials[d-1]=y;break;case"sawtooth":y=p*(d&1?1:-1),this._partials[d-1]=y;break;case"triangle":d&1?y=2*(p*p)*(d-1>>1&1?-1:1):y=0,this._partials[d-1]=y;break;case"custom":y=this._partials[d-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}y!==0?(a[d]=-y*Math.sin(t*d),h[d]=y*Math.cos(t*d)):(a[d]=0,h[d]=0)}return[a,h]}_inverseFFT(e,t,n){let r=0;const a=e.length;for(let h=0;h<a;h++)r+=e[h]*Math.cos(h*n)+t[h]*Math.sin(h*n);return r}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let n=0;const r=Math.PI*2,a=32;for(let h=0;h<a;h++)n=Math.max(this._inverseFFT(e,t,h/a*r),n);return lm(-this._inverseFFT(e,t,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return et(this,void 0,void 0,function*(){return Qn(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Ze._periodicWaveCache=[];class Mn extends ve{constructor(){super(Object.assign(Y(Mn.getDefaults(),arguments,["context"])))}connect(e,t=0,n=0){return vo(this,e,t,n),this}}class fs extends Mn{constructor(){super(Object.assign(Y(fs.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=Y(fs.getDefaults(),arguments,["mapping","length"]);Xt(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):em(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(je.getDefaults(),{length:1024})}setMap(e,t=1024){const n=new Float32Array(t);for(let r=0,a=t;r<a;r++){const h=r/(a-1)*2-1;n[r]=e(h,r)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(n=>n.includes(e));ye(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class km extends Mn{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new fs({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class On extends je{constructor(){super(Object.assign(Y(On.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=Y(On.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new ct({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(je.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class js extends At{constructor(){super(Y(js.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new km({context:this.context}),this._modulationNode=new ct({context:this.context});const e=Y(js.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ze({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Ze({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new On({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),He(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ze.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return et(this,void 0,void 0,function*(){return Qn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Ws extends At{constructor(){super(Y(Ws.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new ct({context:this.context,gain:0});const e=Y(Ws.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ze({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Ze({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new On({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new On({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),He(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ze.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return et(this,void 0,void 0,function*(){return Qn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class ds extends At{constructor(){super(Y(ds.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new ct({context:this.context,gain:0}),this._thresh=new fs({context:this.context,mapping:t=>t<=0?-1:1});const e=Y(ds.getDefaults(),arguments,["frequency","width"]);this.width=new je({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Ze({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),He(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(At.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return et(this,void 0,void 0,function*(){return Qn(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Bs extends At{constructor(){super(Y(Bs.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=Y(Bs.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),this.detune=new je({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,He(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ze.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,n=e/(this._oscillators.length-1);this._forEach((r,a)=>r.detune.value=t+n*a)}}get count(){return this._oscillators.length}set count(e){if(mn(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const n=new Ze({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):Pe});this.type==="custom"&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[t]=n}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,n)=>t.phase=this._phase+n/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return et(this,void 0,void 0,function*(){return Qn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Ks extends At{constructor(){super(Y(Ks.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new On({context:this.context,value:2});const e=Y(Ks.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new ds({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Ze({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),He(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(At.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return et(this,void 0,void 0,function*(){return Qn(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Sa={am:js,fat:Bs,fm:Ws,oscillator:Ze,pulse:ds,pwm:Ks};class Gn extends At{constructor(){super(Y(Gn.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=Y(Gn.getDefaults(),arguments,["frequency","type"]);this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),this.detune=new je({context:this.context,units:"cents",value:e.detune}),He(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Ze.getDefaults(),Ws.getDefaults(),js.getDefaults(),Bs.getDefaults(),ds.getDefaults(),Ks.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=Sa[e],n=this.now();if(this._oscillator){const r=this._oscillator;r.stop(n),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof Sa[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Nn(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Nn(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&tn(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return et(this,void 0,void 0,function*(){return Qn(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class bo extends je{constructor(){super(Object.assign(Y(bo.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new ct({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,qs(this._constantSource,this._sum)}static getDefaults(){return Object.assign(je.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class zi extends Mn{constructor(){super(Object.assign(Y(zi.getDefaults(),arguments,["min","max"]))),this.name="Scale";const e=Y(zi.getDefaults(),arguments,["min","max"]);this._mult=this.input=new On({context:this.context,value:e.max-e.min}),this._add=this.output=new bo({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Mn.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}function Fc(i,e=1/0){const t=new WeakMap;return function(n,r){Reflect.defineProperty(n,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(a){mn(a,i,e),t.set(this,a)}})}}function yn(i,e=1/0){const t=new WeakMap;return function(n,r){Reflect.defineProperty(n,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(a){mn(this.toSeconds(a),i,e),t.set(this,a)}})}}class Us extends At{constructor(){super(Y(Us.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=Y(Us.getDefaults(),arguments,["url","onload"]);this._buffer=new Fe({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(At.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Pe,onerror:Pe,playbackRate:1,reverse:!1})}load(e){return et(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=Pe){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,n){return super.start(e,t,n),this}_start(e,t,n){this._loop?t=cs(t,this._loopStart):t=cs(t,0);const r=this.toSeconds(t),a=n;n=cs(n,Math.max(this._buffer.duration-r,0));let h=this.toSeconds(n);h=h/this._playbackRate,e=this.toSeconds(e);const f=new Ls({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+h),this._state.setStateAtTime("stopped",e+h,{implicitEnd:!0})),this._activeSources.add(f),this._loop&&Lt(a)?f.start(e,r):f.start(e,r,h-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(n=>n.stop(t))}restart(e,t,n){return super.restart(e,t,n),this}_restart(e,t,n){this._stop(e),this._start(e,t,n)}seek(e,t){const n=this.toSeconds(t);if(this._state.getValueAtTime(n)==="started"){const r=this.toSeconds(e);this._stop(n),this._start(n,r)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&mn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&mn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),n=this._state.getNextState("stopped",t);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Jt([yn(0)],Us.prototype,"fadeIn",void 0);Jt([yn(0)],Us.prototype,"fadeOut",void 0);class Gi extends Mn{constructor(){super(Object.assign(Y(Gi.getDefaults(),arguments,["value"]))),this.name="Pow";const e=Y(Gi.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new fs({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Mn.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class jt extends ve{constructor(){super(Y(jt.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new je({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=Y(jt.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(ve.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(tn(e))return e;{let n;for(n in Ci)if(Ci[n][t]===e)return n;return e}}_setCurve(e,t,n){if(tn(n)&&Reflect.has(Ci,n)){const r=Ci[n];Kn(r)?e!=="_decayCurve"&&(this[e]=r[t]):this[e]=r}else if(Xt(n)&&e!=="_decayCurve")this[e]=n;else throw new Error("Envelope: invalid curve: "+n)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){ye(["linear","exponential"].some(t=>t===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const a=this.toSeconds(this.decay),h=this.getValueAtTime(e);if(h>0){const f=1/r;r=(1-h)/f}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,r,e);else{this._sig.cancelAndHoldAtTime(e);let f=this._attackCurve;for(let d=1;d<f.length;d++)if(f[d-1]<=h&&h<=f[d]){f=this._attackCurve.slice(d),f[0]=h;break}this._sig.setValueCurveAtTime(f,e,r,t)}if(a&&this.sustain<1){const f=t*this.sustain,d=e+r;this.log("decay",d),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(f,a+d):this._sig.exponentialApproachValueAtTime(f,d,a)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,n,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,n,e):(ye(Xt(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,n,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,n=1){return t=this.toSeconds(t),this.triggerAttack(t,n),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,n=0){return vo(this,e,t,n),this}asArray(e=1024){return et(this,void 0,void 0,function*(){const t=e/this.context.sampleRate,n=new po(1,t,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),a=r+this.toSeconds(this.release),h=a*.1,f=a+h,d=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/f,decay:t*this.toSeconds(this.decay)/f,release:t*this.toSeconds(this.release)/f,context:n}));return d._sig.toDestination(),d.triggerAttackRelease(t*(r+h)/f,0),(yield n.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Jt([yn(0)],jt.prototype,"attack",void 0);Jt([yn(0)],jt.prototype,"decay",void 0);Jt([Fc(0,1)],jt.prototype,"sustain",void 0);Jt([yn(0)],jt.prototype,"release",void 0);const Ci=(()=>{let e,t;const n=[];for(e=0;e<128;e++)n[e]=Math.sin(e/(128-1)*(Math.PI/2));const r=[],a=6.4;for(e=0;e<128-1;e++){t=e/(128-1);const S=Math.sin(t*(Math.PI*2)*a-Math.PI/2)+1;r[e]=S/10+t*.83}r[128-1]=1;const h=[],f=5;for(e=0;e<128;e++)h[e]=Math.ceil(e/(128-1)*f)/f;const d=[];for(e=0;e<128;e++)t=e/(128-1),d[e]=.5*(1-Math.cos(Math.PI*t));const p=[];for(e=0;e<128;e++){t=e/(128-1);const S=Math.pow(t,3)*4+.2,N=Math.cos(S*Math.PI*2*t);p[e]=Math.abs(N*(1-t))}function y(S){const N=new Array(S.length);for(let x=0;x<S.length;x++)N[x]=1-S[x];return N}function b(S){return S.slice(0).reverse()}return{bounce:{In:y(p),Out:p},cosine:{In:n,Out:b(n)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:y(r)},sine:{In:d,Out:y(d)},step:{In:h,Out:y(h)}}})();class Xn extends ve{constructor(){super(Y(Xn.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const e=Y(Xn.getDefaults(),arguments);this._volume=this.output=new zn({context:this.context,volume:e.volume}),this.volume=this._volume.volume,He(this,"volume")}static getDefaults(){return Object.assign(ve.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const n=this["_original_"+e]=this[e];this[e]=(...r)=>{const a=r[t],h=this.context.transport.schedule(f=>{r[t]=f,n.apply(this,r)},a);this._scheduledEvents.push(h)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(e,t,n,r){const a=this.toSeconds(n),h=this.toSeconds(t);return this.triggerAttack(e,a,r),this.triggerRelease(a+h),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class gn extends Xn{constructor(){super(Y(gn.getDefaults(),arguments));const e=Y(gn.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Xn.getDefaults(),{detune:0,onsilence:Pe,portamento:0})}triggerAttack(e,t,n=1){this.log("triggerAttack",e,t,n);const r=this.toSeconds(t);return this._triggerEnvelopeAttack(r,n),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const n=this.toSeconds(t),r=e instanceof Vt?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const a=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,a,n)}else this.frequency.setValueAtTime(r,n);return this}}Jt([yn(0)],gn.prototype,"portamento",void 0);class ar extends jt{constructor(){super(Y(ar.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ct({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Hs extends gn{constructor(){super(Y(Hs.getDefaults(),arguments)),this.name="Synth";const e=Y(Hs.getDefaults(),arguments);this.oscillator=new Gn(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new ar(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),He(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(gn.getDefaults(),{envelope:Object.assign(os(jt.getDefaults(),Object.keys(ve.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(os(Gn.getDefaults(),[...Object.keys(At.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const n=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+n+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class $s extends ve{constructor(){super(Y($s.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const e=Y($s.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Oe({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new Oe({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new Oe({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new Oe({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(ve.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){ye(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let h=0;h<e;h++){const d=Math.pow(h/e,2)*(2e4-20)+20;t[h]=d}const n=new Float32Array(e),r=new Float32Array(e),a=this.context.createBiquadFilter();return a.type=this.type,a.Q.value=this.Q.value,a.frequency.value=this.frequency.value,a.gain.value=this.gain.value,a.getFrequencyResponse(t,n,r),n}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class zs extends ve{constructor(){super(Y(zs.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new ct({context:this.context}),this.output=new ct({context:this.context}),this._filters=[];const e=Y(zs.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new je({context:this.context,units:"positive",value:e.Q}),this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),this.detune=new je({context:this.context,units:"cents",value:e.detune}),this.gain=new je({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,He(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(ve.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){ye(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(n=>n.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=Nn(e)?e:parseInt(e,10),n=[-12,-24,-48,-96];let r=n.indexOf(t);ye(r!==-1,`rolloff can only be ${n.join(", ")}`),r+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(a=>a.disconnect()),this._filters=new Array(r);for(let a=0;a<r;a++){const h=new $s({context:this.context});h.type=this._type,this.frequency.connect(h.frequency),this.detune.connect(h.detune),this.Q.connect(h.Q),this.gain.connect(h.gain),this._filters[a]=h}this._internalChannels=this._filters,qs(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new $s({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),n=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((a,h)=>n[h]*=a)}),t.dispose(),n}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),fo(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class Gs extends jt{constructor(){super(Y(Gs.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const e=Y(Gs.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new Gi({context:this.context,value:e.exponent}),this._scale=this.output=new zi({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(jt.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);mn(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class Xi extends gn{constructor(){super(Y(Xi.getDefaults(),arguments)),this.name="MonoSynth";const e=Y(Xi.getDefaults(),arguments);this.oscillator=new Gn(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new zs(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new Gs(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new ar(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),He(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(gn.getDefaults(),{envelope:Object.assign(os(jt.getDefaults(),Object.keys(ve.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(os(zs.getDefaults(),Object.keys(ve.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(os(Gs.getDefaults(),Object.keys(ve.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(os(Gn.getDefaults(),Object.keys(At.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,t=1){if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){const n=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+n+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Xs extends Hs{constructor(){super(Y(Xs.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=Y(Xs.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,He(this,["oscillator","envelope"])}static getDefaults(){return as(gn.getDefaults(),Hs.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const n=this.toSeconds(t),r=this.toFrequency(e instanceof Vt?e.toFrequency():e),a=r*this.octaves;return this.oscillator.frequency.setValueAtTime(a,n),this.oscillator.frequency.exponentialRampToValueAtTime(r,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Jt([Fc(0)],Xs.prototype,"octaves",void 0);Jt([yn(0)],Xs.prototype,"pitchDecay",void 0);const Vc=new Set;function wo(i){Vc.add(i)}function Lc(i,e){const t=`registerProcessor("${i}", ${e})`;Vc.add(t)}const Nm=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;wo(Nm);const Em=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;wo(Em);const Mm=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;wo(Mm);const Om="feedback-comb-filter",Dm=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;Lc(Om,Dm);class Zs extends Xn{constructor(){super(Y(Zs.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=Y(Zs.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),t={};Object.keys(e.urls).forEach(n=>{const r=parseInt(n,10);if(ye(Ti(n)||Nn(r)&&isFinite(r),`url key is neither a note or midi pitch: ${n}`),Ti(n)){const a=new Vt(this.context,n).toMidi();t[a]=e.urls[n]}else Nn(r)&&isFinite(r)&&(t[r]=e.urls[r])}),this._buffers=new _o({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Xn.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Pe,onerror:Pe,release:.1,urls:{}})}_findClosest(e){let n=0;for(;n<96;){if(this._buffers.has(e+n))return-n;if(this._buffers.has(e-n))return n;n++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,n=1){return this.log("triggerAttack",e,t,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{const a=qc(new Vt(this.context,r).toFrequency()),h=Math.round(a),f=a-h,d=this._findClosest(h),p=h-d,y=this._buffers.get(p),b=Pc(d+f),S=new Ls({url:y,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:b}).connect(this.output);S.start(t,0,y.duration/b,n),Xt(this._activeSources.get(h))||this._activeSources.set(h,[]),this._activeSources.get(h).push(S),S.onended=()=>{if(this._activeSources&&this._activeSources.has(h)){const N=this._activeSources.get(h),x=N.indexOf(S);x!==-1&&N.splice(x,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(n=>{const r=new Vt(this.context,n).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const a=this._activeSources.get(r);t=this.toSeconds(t),a.forEach(h=>{h.stop(t)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(n=>{for(;n.length;)n.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,n,r=1){const a=this.toSeconds(n);return this.triggerAttack(e,a,r),Xt(t)?(ye(Xt(e),"notes must be an array when duration is array"),e.forEach((h,f)=>{const d=t[Math.min(f,t.length-1)];this.triggerRelease(h,a+this.toSeconds(d))})):this.triggerRelease(e,a+this.toSeconds(t)),this}add(e,t,n){if(ye(Ti(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Ti(e)){const r=new Vt(this.context,e).toMidi();this._buffers.add(r,t,n)}else this._buffers.add(e,t,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}Jt([yn(0)],Zs.prototype,"attack",void 0);Jt([yn(0)],Zs.prototype,"release",void 0);class Zi extends ve{constructor(){super(Object.assign(Y(Zi.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=Y(Zi.getDefaults(),arguments,["pan"]);this.pan=new Oe({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",He(this,"pan")}static getDefaults(){return Object.assign(ve.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const Im="bit-crusher",Rm=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;Lc(Im,Rm);class Xe extends ve{constructor(){super(Y(Xe.getDefaults(),arguments,["solo"])),this.name="Solo";const e=Y(Xe.getDefaults(),arguments,["solo"]);this.input=this.output=new ct({context:this.context}),Xe._allSolos.has(this.context)||Xe._allSolos.set(this.context,new Set),Xe._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(ve.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Xe._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Xe._soloed.has(this.context)||Xe._soloed.set(this.context,new Set),Xe._soloed.get(this.context).add(this)}_removeSolo(){Xe._soloed.has(this.context)&&Xe._soloed.get(this.context).delete(this)}_isSoloed(){return Xe._soloed.has(this.context)&&Xe._soloed.get(this.context).has(this)}_noSolos(){return!Xe._soloed.has(this.context)||Xe._soloed.has(this.context)&&Xe._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Xe._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Xe._allSolos=new Map;Xe._soloed=new Map;class Yi extends ve{constructor(){super(Y(Yi.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=Y(Yi.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Zi({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new zn({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,He(this,["pan","volume"])}static getDefaults(){return Object.assign(ve.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Bn extends ve{constructor(){super(Y(Bn.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=Y(Bn.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Xe({solo:e.solo,context:this.context}),this._panVol=this.output=new Yi({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),He(this,["pan","volume"])}static getDefaults(){return Object.assign(ve.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Bn.buses.has(e)||Bn.buses.set(e,new ct({context:this.context})),Bn.buses.get(e)}send(e,t=0){const n=this._getBus(e),r=new ct({context:this.context,units:"decibels",gain:t});return this.connect(r),r.connect(n),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Bn.buses=new Map;class Pm extends ve{constructor(){super(...arguments),this.name="Listener",this.positionX=new Oe({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Oe({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Oe({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Oe({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Oe({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Oe({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Oe({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Oe({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Oe({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ve.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}ir(i=>{i.listener=new Pm({context:i})});rr(i=>{i.listener.dispose()});zt().transport;const xi=zt().destination;zt().destination;zt().listener;zt().draw;zt();var jc={exports:{}},ws={exports:{}},Mi={c:[0,0],d:[-1,2],e:[-2,4],f:[1,-1],g:[0,1],a:[-1,3],b:[-2,5],h:[-2,5]};ws.exports=function(i){return i in Mi?[Mi[i][0],Mi[i][1]]:null};ws.exports.notes=Mi;ws.exports.A4=[3,3];ws.exports.sharp=[-4,7];var cr={exports:{}},Wc={bb:-2,b:-1,"":0,"#":1,x:2};cr.exports=function(e){return Wc[e]};cr.exports.interval=function(e){var t=Wc[e];return[-4*t,7*t]};var Ir=ws.exports,qm=cr.exports,Fm=function(e){var t=/^([a-h])(x|#|bb|b?)(-?\d*)/i,n=e.match(t);if(!!(n&&e===n[0]&&n[3].length)){var r=n[1],a=+n[3],h=n[2].length?n[2].toLowerCase():"",f=qm.interval(h),d=Ir(r.toLowerCase());return d[0]+=a,d[0]+=f[0]-Ir.A4[0],d[1]+=f[1]-Ir.A4[1],d}},Rr=ws.exports,Vm=cr.exports,Lm=function(t){var t=t.replace(/\u2032/g,"'").replace(/\u0375/g,","),n=t.match(/^(,*)([a-h])(x|#|bb|b?)([,\']*)$/i);if(!n||t!==n[0])throw new Error("Invalid formatting");var r=n[2],a=n[1],h=n[4],f=r===r.toLowerCase(),d;if(a){if(f)throw new Error("Invalid formatting - found commas before lowercase note");d=2-a.length}else if(h)if(h.match(/^'+$/)&&f)d=3+h.length;else if(h.match(/^,+$/)&&!f)d=2-h.length;else throw new Error("Invalid formatting - mismatch between octave indicator and letter case");else d=f?3:2;var p=Vm.interval(n[3].toLowerCase()),y=Rr(r.toLowerCase());return y[0]+=d,y[0]+=p[0]-Rr.A4[0],y[1]+=p[1]-Rr.A4[1],y},jm=function(i,e){return typeof i=="number"?(e=i,function(t){return e*Math.pow(2,(t[0]*12+t[1]*7)/12)}):(e=e||440,e*Math.pow(2,(i[0]*12+i[1]*7)/12))},ai={notes:{c:[0,0],d:[-1,2],e:[-2,4],f:[1,-1],g:[0,1],a:[-1,3],b:[-2,5],h:[-2,5]},intervals:{unison:[0,0],second:[3,-5],third:[2,-3],fourth:[1,-1],fifth:[0,1],sixth:[3,-4],seventh:[2,-2],octave:[1,0]},intervalFromFifth:["second","sixth","third","seventh","fourth","unison","fifth"],intervalsIndex:["unison","second","third","fourth","fifth","sixth","seventh","octave","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth"],fifths:["f","c","g","d","a","e","b"],accidentals:["bb","b","","#","x"],sharp:[-4,7],A4:[3,3],durations:{"0.25":"longa","0.5":"breve",1:"whole",2:"half",4:"quarter",8:"eighth",16:"sixteenth",32:"thirty-second",64:"sixty-fourth",128:"hundred-twenty-eighth"},qualityLong:{P:"perfect",M:"major",m:"minor",A:"augmented",AA:"doubly augmented",d:"diminished",dd:"doubly diminished"},alterations:{perfect:["dd","d","P","A","AA"],minor:["dd","d","m","M","A","AA"]},symbols:{min:["m3","P5"],m:["m3","P5"],"-":["m3","P5"],M:["M3","P5"],"":["M3","P5"],"+":["M3","A5"],aug:["M3","A5"],dim:["m3","d5"],o:["m3","d5"],maj:["M3","P5","M7"],dom:["M3","P5","m7"],\u00F8:["m3","d5","m7"],5:["P5"]},chordShort:{major:"M",minor:"m",augmented:"aug",diminished:"dim","half-diminished":"7b5",power:"5",dominant:"7"},stepNumber:{unison:1,first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,octave:8,ninth:9,eleventh:11,thirteenth:13},intervalSolfege:{dd1:"daw",d1:"de",P1:"do",A1:"di",AA1:"dai",d2:"raw",m2:"ra",M2:"re",A2:"ri",AA2:"rai",d3:"maw",m3:"me",M3:"mi",A3:"mai",dd4:"faw",d4:"fe",P4:"fa",A4:"fi",AA4:"fai",dd5:"saw",d5:"se",P5:"so",A5:"si",AA5:"sai",d6:"law",m6:"le",M6:"la",A6:"li",AA6:"lai",d7:"taw",m7:"te",M7:"ti",A7:"tai",dd8:"daw",d8:"de",P8:"do",A8:"di",AA8:"dai"}},Bc={add:function(i,e){return[i[0]+e[0],i[1]+e[1]]},sub:function(i,e){return[i[0]-e[0],i[1]-e[1]]},mul:function(i,e){return typeof e=="number"?[i[0]*e,i[1]*e]:[i[0]*e[0],i[1]*e[1]]},sum:function(i){return i[0]+i[1]}},To={exports:{}},Wm=/^(AA|A|P|M|m|d|dd)(-?\d+)$/,Aa=[-4,7],Bm=["dd","d","P","A","AA"],Km=["dd","d","m","M","A","AA"],Kc=[[0,0],[3,-5],[2,-3],[1,-1],[0,1],[3,-4],[2,-2],[1,0]];To.exports=function(i){var e=i.match(Wm);if(!e)return null;var t=e[1],n=+e[2],r=n<0?-1:1;n=r<0?-n:n;var a=n>8?n%7||7:n,h=(n-a)/7,f=Kc[a-1],d=f[0]<=1?Bm:Km,p=d.indexOf(t)-2;return p===-3?null:[r*(f[0]+h+Aa[0]*p),r*(f[1]+Aa[1]*p)]};To.exports.coords=Kc.slice(0);var Ge=ai,ot=Bc,Um=To.exports;function Tt(i){if(!(this instanceof Tt))return new Tt(i);this.coord=i}Tt.prototype={name:function(){return Ge.intervalsIndex[this.number()-1]},semitones:function(){return ot.sum(ot.mul(this.coord,[12,7]))},number:function(){return Math.abs(this.value())},value:function(){var i=Math.floor((this.coord[1]-2)/7)+1,e=ot.mul(Ge.sharp,i),t=ot.sub(this.coord,e),n=Ge.intervalFromFifth[t[1]+5],r=t[0]-Ge.intervals[n][0],a=Ge.stepNumber[n]+r*7;return a>0?a:a-2},type:function(){return Ge.intervals[this.base()][0]<=1?"perfect":"minor"},base:function(){var i=ot.mul(Ge.sharp,this.qualityValue()),e=ot.sub(this.coord,i)[1];e=this.value()>0?e+5:-(e-5)%7,e=e<0?Ge.intervalFromFifth.length+e:e;var t=Ge.intervalFromFifth[e];return t==="unison"&&this.number()>=8&&(t="octave"),t},direction:function(i){if(i){var e=this.value()>=1?"up":"down";return e!==i&&(this.coord=ot.mul(this.coord,-1)),this}else return this.value()>=1?"up":"down"},simple:function(i){var e=Ge.intervals[this.base()],t=ot.mul(Ge.sharp,this.qualityValue());return e=ot.add(e,t),i||(e=this.direction()==="down"?ot.mul(e,-1):e),new Tt(e)},isCompound:function(){return this.number()>8},octaves:function(){var i,e,t;return this.direction()==="up"?(i=ot.mul(Ge.sharp,this.qualityValue()),e=ot.sub(this.coord,i),t=e[0]-Ge.intervals[this.base()][0]):(i=ot.mul(Ge.sharp,-this.qualityValue()),e=ot.sub(this.coord,i),t=-(e[0]+Ge.intervals[this.base()][0])),t},invert:function(){var i=this.base(),e=this.qualityValue(),t=this.type()==="minor"?-(e-1):-e,n=9-Ge.stepNumber[i]-1,r=Ge.intervals[Ge.intervalsIndex[n]];return r=ot.add(r,ot.mul(Ge.sharp,t)),new Tt(r)},quality:function(i){var e=Ge.alterations[this.type()][this.qualityValue()+2];return i?Ge.qualityLong[e]:e},qualityValue:function(){return this.direction()==="down"?Math.floor((-this.coord[1]-2)/7)+1:Math.floor((this.coord[1]-2)/7)+1},equal:function(i){return this.coord[0]===i.coord[0]&&this.coord[1]===i.coord[1]},greater:function(i){var e=this.semitones(),t=i.semitones();return e===t?this.number()>i.number():e>t},smaller:function(i){return!this.equal(i)&&!this.greater(i)},add:function(i){return new Tt(ot.add(this.coord,i.coord))},toString:function(i){var e=i?this.number():this.value();return this.quality()+e}};Tt.toCoord=function(i){var e=Um(i);if(!e)throw new Error("Invalid simple format interval");return new Tt(e)};Tt.from=function(i,e){return i.interval(e)};Tt.between=function(i,e){return new Tt(ot.sub(e.coord,i.coord))};Tt.invert=function(i){return Tt.toCoord(i).invert().toString()};var ur=Tt,Hm=Fm,$m=Lm,zm=jm,Dt=ai,It=Bc,Si=ur;function ka(i,e,t){for(;t>0;t--)i+=e;return i}function xt(i,e){if(!(this instanceof xt))return new xt(i,e);e=e||{},this.duration={value:e.value||4,dots:e.dots||0},this.coord=i}xt.prototype={octave:function(){return this.coord[0]+Dt.A4[0]-Dt.notes[this.name()][0]+this.accidentalValue()*4},name:function(){var i=this.accidentalValue(),e=this.coord[1]+Dt.A4[1]-i*7+1;return Dt.fifths[e]},accidentalValue:function(){return Math.round((this.coord[1]+Dt.A4[1]-2)/7)},accidental:function(){return Dt.accidentals[this.accidentalValue()+2]},key:function(i){return i?this.coord[0]*7+this.coord[1]*4+29:this.coord[0]*12+this.coord[1]*7+49},midi:function(){return this.key()+20},fq:function(i){return zm(this.coord,i)},chroma:function(){var i=(It.sum(It.mul(this.coord,[12,7]))-3)%12;return i<0?i+12:i},interval:function(i){if(typeof i=="string"&&(i=Si.toCoord(i)),i instanceof Si)return new xt(It.add(this.coord,i.coord),this.duration);if(i instanceof xt)return new Si(It.sub(i.coord,this.coord))},transpose:function(i){return this.coord=It.add(this.coord,i.coord),this},helmholtz:function(){var i=this.octave(),e=this.name();e=i<3?e.toUpperCase():e.toLowerCase();var t=i<3?",":"'",n=i<2?2-i:i-3;return ka(e+this.accidental(),t,n)},scientific:function(){return this.name().toUpperCase()+this.accidental()+this.octave()},enharmonics:function(i){var e=this.key(),t=i?2:3;return["m3","m2","m-2","m-3"].map(this.interval.bind(this)).filter(function(n){var r=n.accidentalValue(),a=e-(n.key()-r);if(a<t&&a>-t){var h=It.mul(Dt.sharp,a-r);return n.coord=It.add(n.coord,h),!0}})},solfege:function(i,e){var t=i.tonic.interval(this),n,r,a;return t.direction()==="down"&&(t=t.invert()),e&&(a=(this.key(!0)-i.tonic.key(!0))/7,a=a>=0?Math.floor(a):-Math.ceil(-a),r=a>=0?"'":","),n=Dt.intervalSolfege[t.simple(!0).toString()],e?ka(n,r,Math.abs(a)):n},scaleDegree:function(i){var e=i.tonic.interval(this);return(e.direction()==="down"||e.coord[1]===0&&e.coord[0]!==0)&&(e=e.invert()),e=e.simple(!0).coord,i.scale.reduce(function(t,n,r){var a=Si.toCoord(n).coord;return a[0]===e[0]&&a[1]===e[1]?r+1:t},0)},durationName:function(){return Dt.durations[this.duration.value]},durationInSeconds:function(i,e){var t=60/i/(this.duration.value/4)/(e/4);return t*2-t/Math.pow(2,this.duration.dots)},toString:function(i){return this.name()+this.accidental()+(i?"":this.octave())}};xt.fromString=function(i,e){var t=Hm(i);return t||(t=$m(i)),new xt(t,e)};xt.fromKey=function(i){var e=Math.floor((i-4)/12),t=i-e*12-4,n=Dt.fifths[(2*Math.round(t/2)+1)%7],r=It.sub(Dt.notes[n],Dt.A4),a=It.add(r,[e+1,0]),h=i-49-It.sum(It.mul(a,[12,7])),f=h?It.add(a,It.mul(Dt.sharp,h)):a;return new xt(f)};xt.fromFrequency=function(i,e){var t,n,r;return e=e||440,t=49+12*((Math.log(i)-Math.log(e))/Math.log(2)),t=Math.round(t),r=e*Math.pow(2,(t-49)/12),n=1200*(Math.log(i/r)/Math.log(2)),{note:xt.fromKey(t),cents:n}};xt.fromMIDI=function(i){return xt.fromKey(i-20)};var Uc=xt,Ai={m:["m3","P5"],mi:["m3","P5"],min:["m3","P5"],"-":["m3","P5"],M:["M3","P5"],ma:["M3","P5"],"":["M3","P5"],"+":["M3","A5"],aug:["M3","A5"],dim:["m3","d5"],o:["m3","d5"],maj:["M3","P5","M7"],dom:["M3","P5","m7"],\u00F8:["m3","d5","m7"],5:["P5"],"6/9":["M3","P5","M6","M9"]},Gm=function(i){var e,t="quality",n=[],r,a=2,h=["P1","M3","P5","m7","M9","P11","M13"],f=!1;function d(v){for(var D=Ai[v],C=0,A=D.length;C<A;C++)h[C+1]=D[C];a=D.length}i=i.replace(/[,\s\(\)]/g,"");for(var p=0,y=i.length;p<y;p++){if(!(e=i[p]))return;if(t==="quality"){var b=p+2<y?i.substr(p,3).toLowerCase():null,S=p+1<y?i.substr(p,2).toLowerCase():null;b in Ai?r=b:S in Ai?r=S:e in Ai?r=e:r="",r&&d(r),(r==="M"||r==="ma"||r==="maj")&&(f=!0),p+=r.length-1,t="extension"}else if(t==="extension"){if(e=e==="1"&&i[p+1]?+i.substr(p,2):+e,!isNaN(e)&&e!==6){if(a=(e-1)/2,a!==Math.round(a))return new Error("Invalid interval extension: "+e.toString(10));r==="o"||r==="dim"?h[3]="d7":f&&(h[3]="M7"),p+=e>=10?1:0}else e===6?(h[3]="M6",a=Math.max(3,a)):p-=1;t="alterations"}else if(t==="alterations"){var N=i.substr(p).split(/(#|b|add|maj|sus|M)/i),x=!1,k=!1;if(N.length===1)return new Error("Invalid alteration");if(N[0].length!==0)return new Error("Invalid token: '"+N[0]+"'");var I=!1;N.forEach(function(v,D,C){if(I||!v.length)return I=!1;var A=C[D+1],w=v.toLowerCase();if(v==="M"||w==="maj")A==="7"&&(I=!0),a=Math.max(3,a),h[3]="M7";else if(w==="sus"){var c="P4";(A==="2"||A==="4")&&(I=!0,A==="2"&&(c="M2")),h[1]=c}else if(w==="add")A==="9"?n.push("M9"):A==="11"?n.push("P11"):A==="13"&&n.push("M13"),I=!0;else if(w==="b")x=!0;else if(w==="#")k=!0;else{var R=+v,q,H;if(isNaN(R)||String(R).length!==v.length)return new Error("Invalid token: '"+v+"'");if(R===6){k?h[3]="A6":x?h[3]="m6":h[3]="M6",a=Math.max(3,a);return}if(H=(R-1)/2,a<H&&(a=H),R<5||R===7||H!==Math.round(H))return new Error("Invalid interval alteration: "+R);q=h[H][0],k?q==="d"?q="m":q==="m"?q="M":(q==="M"||q==="P")&&(q="A"):x&&(q==="A"?q="M":q==="M"?q="m":(q==="m"||q==="P")&&(q="d")),k=x=!1,h[H]=q+R}}),t="ended"}else if(t==="ended")break}return h.slice(0,a+1).concat(n)},Xm=Gm,Na=ai,Zm=Uc,$r=ur;function fn(i,e){if(!(this instanceof fn))return new fn(i,e);e=e||"",this.name=i.name().toUpperCase()+i.accidental()+e,this.symbol=e,this.root=i,this.intervals=[],this._voicing=[];var t=e.split("/");if(t.length===2&&t[1].trim()!=="9"?(e=t[0],t=t[1].trim()):t=null,this.intervals=Xm(e).map($r.toCoord),this._voicing=this.intervals.slice(),t){var n=this.intervals,r,a;a=Zm.fromString(t+(i.octave()+1)),r=$r.between(i,a),t=r.simple(),r=r.invert().direction("down"),this._voicing=[r];for(var h=0,f=n.length;h<f;h++)n[h].simple().equal(t)||this._voicing.push(n[h])}}fn.prototype={notes:function(){var i=this.root;return this.voicing().map(function(e){return i.interval(e)})},simple:function(){return this.notes().map(function(i){return i.toString(!0)})},bass:function(){return this.root.interval(this._voicing[0])},voicing:function(i){if(!i)return this._voicing;this._voicing=[];for(var e=0,t=i.length;e<t;e++)this._voicing[e]=$r.toCoord(i[e]);return this},resetVoicing:function(){this._voicing=this.intervals},dominant:function(i){return i=i||"",new fn(this.root.interval("P5"),i)},subdominant:function(i){return i=i||"",new fn(this.root.interval("P4"),i)},parallel:function(i){var e=this.quality();if(this.chordType()!=="triad"||e==="diminished"||e==="augmented")throw new Error("Only major/minor triads have parallel chords");return e==="major"?new fn(this.root.interval("m3","down"),"m"):new fn(this.root.interval("m3","up"))},quality:function(){for(var i,e,t,n=this.intervals,r=0,a=n.length;r<a;r++)n[r].number()===3?i=n[r]:n[r].number()===5?e=n[r]:n[r].number()===7&&(t=n[r]);if(!!i){if(i=i.direction()==="down"?i.invert():i,i=i.simple().toString(),e&&(e=e.direction==="down"?e.invert():e,e=e.simple().toString()),t&&(t=t.direction==="down"?t.invert():t,t=t.simple().toString()),i==="M3")return e==="A5"?"augmented":e==="P5"&&t==="m7"?"dominant":"major";if(i==="m3")return e==="P5"?"minor":e==="d5"?t==="m7"?"half-diminished":"diminished":"minor"}},chordType:function(){var i=this.intervals.length,e,t,n,r,a;if(i===2)return"dyad";if(i===3){for(t={unison:!1,third:!1,fifth:!1},r=0;r<i;r++)e=this.intervals[r],n=e.invert(),e.base()in t?t[e.base()]=!0:n.base()in t&&(t[n.base()]=!0);a=t.unison&&t.third&&t.fifth?"triad":"trichord"}else if(i===4){for(t={unison:!1,third:!1,fifth:!1,seventh:!1},r=0;r<i;r++)e=this.intervals[r],n=e.invert(),e.base()in t?t[e.base()]=!0:n.base()in t&&(t[n.base()]=!0);t.unison&&t.third&&t.fifth&&t.seventh&&(a="tetrad")}return a||"unknown"},get:function(i){if(typeof i=="string"&&i in Na.stepNumber){var e=this.intervals,t,n;for(i=Na.stepNumber[i],t=0,n=e.length;t<n;t++)if(e[t].number()===i)return this.root.interval(e[t]);return null}else throw new Error("Invalid interval name")},interval:function(i){return new fn(this.root.interval(i),this.symbol)},transpose:function(i){return this.root.transpose(i),this.name=this.root.name().toUpperCase()+this.root.accidental()+this.symbol,this},toString:function(){return this.name}};var Ym=fn,Ea=ai,Ma=ur,Rt={aeolian:["P1","M2","m3","P4","P5","m6","m7"],blues:["P1","m3","P4","d5","P5","m7"],chromatic:["P1","m2","M2","m3","M3","P4","A4","P5","m6","M6","m7","M7"],dorian:["P1","M2","m3","P4","P5","M6","m7"],doubleharmonic:["P1","m2","M3","P4","P5","m6","M7"],harmonicminor:["P1","M2","m3","P4","P5","m6","M7"],ionian:["P1","M2","M3","P4","P5","M6","M7"],locrian:["P1","m2","m3","P4","d5","m6","m7"],lydian:["P1","M2","M3","A4","P5","M6","M7"],majorpentatonic:["P1","M2","M3","P5","M6"],melodicminor:["P1","M2","m3","P4","P5","M6","M7"],minorpentatonic:["P1","m3","P4","P5","m7"],mixolydian:["P1","M2","M3","P4","P5","M6","m7"],phrygian:["P1","m2","m3","P4","P5","m6","m7"],wholetone:["P1","M2","M3","A4","A5","A6"]};Rt.harmonicchromatic=Rt.chromatic;Rt.minor=Rt.aeolian;Rt.major=Rt.ionian;Rt.flamenco=Rt.doubleharmonic;function ps(i,e){if(!(this instanceof ps))return new ps(i,e);var t,n;if(!("coord"in i))throw new Error("Invalid Tonic");if(typeof e=="string"){if(t=e,e=Rt[e],!e)throw new Error("Invalid Scale")}else for(n in Rt)if(Rt.hasOwnProperty(n)&&Rt[n].toString()===e.toString()){t=n;break}this.name=t,this.tonic=i,this.scale=e}ps.prototype={notes:function(){for(var i=[],e=0,t=this.scale.length;e<t;e++)i.push(this.tonic.interval(this.scale[e]));return i},simple:function(){return this.notes().map(function(i){return i.toString(!0)})},type:function(){var i=this.scale.length-2;if(i<8)return["di","tri","tetra","penta","hexa","hepta","octa"][i]+"tonic"},get:function(i){var e=typeof i=="string"&&i in Ea.stepNumber;i=e?Ea.stepNumber[i]:i;var t=this.scale.length,n,r;return i<0?(n=this.scale[i%t+t-1],r=Math.floor((i-1)/t)):i%t===0?(n=this.scale[t-1],r=i/t-1):(n=this.scale[i%t-1],r=Math.floor(i/t)),this.tonic.interval(n).interval(new Ma([r,0]))},solfege:function(i,e){return i?this.get(i).solfege(this,e):this.notes().map(function(t){return t.solfege(this,e)})},interval:function(i){return i=typeof i=="string"?Ma.toCoord(i):i,new ps(this.tonic.interval(i),this.scale)},transpose:function(i){var e=this.interval(i);return this.scale=e.scale,this.tonic=e.tonic,this}};ps.KNOWN_SCALES=Object.keys(Rt);var Qm=ps,Pr,Oa;function Jm(){if(Oa)return Pr;Oa=1;var i=ai;return Pr=function(e){var t=e.Note,n=e.Chord,r=e.Scale;t.prototype.chord=function(a){var h=a in i.chordShort;return a=h?i.chordShort[a]:a,new n(this,a)},t.prototype.scale=function(a){return new r(this,a)}},Pr}(function(i,e){var t=Uc,n=ur,r=Ym,a=Qm,h;function f(b,S){if(typeof b=="string")return n.toCoord(b);if(typeof S=="string"&&b instanceof t)return n.from(b,n.toCoord(S));if(S instanceof n&&b instanceof t)return n.from(b,S);if(S instanceof t&&b instanceof t)return n.between(b,S);throw new Error("Invalid parameters")}f.toCoord=n.toCoord,f.from=n.from,f.between=n.between,f.invert=n.invert;function d(b,S){return typeof b=="string"?t.fromString(b,S):new t(b,S)}d.fromString=t.fromString,d.fromKey=t.fromKey,d.fromFrequency=t.fromFrequency,d.fromMIDI=t.fromMIDI;function p(b,S){if(typeof b=="string"){var N,x;if(N=b.match(/^([a-h])(x|#|bb|b?)/i),N&&N[0])return x=typeof S=="number"?S.toString(10):"4",new r(t.fromString(N[0].toLowerCase()+x),b.substr(N[0].length))}else if(b instanceof t)return new r(b,S);throw new Error("Invalid Chord. Couldn't find note name")}function y(b,S){return b=b instanceof t?b:h.note(b),new a(b,S)}h={note:d,chord:p,interval:f,scale:y,Note:t,Chord:r,Scale:a,Interval:n},Jm()(h),i.exports=h})(jc);const Da=jc.exports;var Hc={exports:{}};(function(i,e){(function(t,n){i.exports=n()})(ki,function(){function t(v){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(D){return typeof D}:t=function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},t(v)}function n(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")}function r(v,D){for(var C=0;C<D.length;C++){var A=D[C];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(v,A.key,A)}}function a(v,D,C){return D&&r(v.prototype,D),C&&r(v,C),v}function h(v){return f(v)||d(v)||p(v)||b()}function f(v){if(Array.isArray(v))return y(v)}function d(v){if(typeof Symbol<"u"&&Symbol.iterator in Object(v))return Array.from(v)}function p(v,D){if(!!v){if(typeof v=="string")return y(v,D);var C=Object.prototype.toString.call(v).slice(8,-1);if(C==="Object"&&v.constructor&&(C=v.constructor.name),C==="Map"||C==="Set")return Array.from(v);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return y(v,D)}}function y(v,D){(D==null||D>v.length)&&(D=v.length);for(var C=0,A=new Array(D);C<D;C++)A[C]=v[C];return A}function b(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S=function(){function v(D){n(this,v),this.sourceStr=D,this.subCombos=v.parseComboStr(D),this.keyNames=this.subCombos.reduce(function(C,A){return C.concat(A)},[])}return a(v,[{key:"check",value:function(C){for(var A=0,w=0;w<this.subCombos.length;w+=1)if(A=this._checkSubCombo(this.subCombos[w],A,C),A===-1)return!1;return!0}},{key:"isEqual",value:function(C){if(!C||typeof C!="string"&&t(C)!=="object"||(typeof C=="string"&&(C=new v(C)),this.subCombos.length!==C.subCombos.length))return!1;for(var A=0;A<this.subCombos.length;A+=1)if(this.subCombos[A].length!==C.subCombos[A].length)return!1;for(var w=0;w<this.subCombos.length;w+=1){for(var c=this.subCombos[w],R=C.subCombos[w].slice(0),q=0;q<c.length;q+=1){var H=c[q],U=R.indexOf(H);U>-1&&R.splice(U,1)}if(R.length!==0)return!1}return!0}},{key:"_checkSubCombo",value:function(C,A,w){C=C.slice(0),w=w.slice(A);for(var c=A,R=0;R<C.length;R+=1){var q=C[R];if(q[0]==="\\"){var H=q.slice(1);(H===v.comboDeliminator||H===v.keyDeliminator)&&(q=H)}var U=w.indexOf(q);if(U>-1&&(C.splice(R,1),R-=1,U>c&&(c=U),C.length===0))return c}return-1}}]),v}();S.comboDeliminator=">",S.keyDeliminator="+",S.parseComboStr=function(v){for(var D=S._splitStr(v,S.comboDeliminator),C=[],A=0;A<D.length;A+=1)C.push(S._splitStr(D[A],S.keyDeliminator));return C},S._splitStr=function(v,D){for(var C=v,A=D,w="",c=[],R=0;R<C.length;R+=1)R>0&&C[R]===A&&C[R-1]!=="\\"&&(c.push(w.trim()),w="",R+=1),w+=C[R];return w&&c.push(w.trim()),c};var N=function(){function v(D){n(this,v),this.localeName=D,this.activeTargetKeys=[],this.pressedKeys=[],this._appliedMacros=[],this._keyMap={},this._killKeyCodes=[],this._macros=[]}return a(v,[{key:"bindKeyCode",value:function(C,A){typeof A=="string"&&(A=[A]),this._keyMap[C]=A}},{key:"bindMacro",value:function(C,A){typeof A=="string"&&(A=[A]);var w=null;typeof A=="function"&&(w=A,A=null);var c={keyCombo:new S(C),keyNames:A,handler:w};this._macros.push(c)}},{key:"getKeyCodes",value:function(C){var A=[];for(var w in this._keyMap){var c=this._keyMap[w].indexOf(C);c>-1&&A.push(w|0)}return A}},{key:"getKeyNames",value:function(C){return this._keyMap[C]||[]}},{key:"setKillKey",value:function(C){if(typeof C=="string"){for(var A=this.getKeyCodes(C),w=0;w<A.length;w+=1)this.setKillKey(A[w]);return}this._killKeyCodes.push(C)}},{key:"pressKey",value:function(C){if(typeof C=="string"){for(var A=this.getKeyCodes(C),w=0;w<A.length;w+=1)this.pressKey(A[w]);return}this.activeTargetKeys.length=0;for(var c=this.getKeyNames(C),R=0;R<c.length;R+=1)this.activeTargetKeys.push(c[R]),this.pressedKeys.indexOf(c[R])===-1&&this.pressedKeys.push(c[R]);this._applyMacros()}},{key:"releaseKey",value:function(C){if(typeof C=="string")for(var A=this.getKeyCodes(C),w=0;w<A.length;w+=1)this.releaseKey(A[w]);else{var c=this.getKeyNames(C),R=this._killKeyCodes.indexOf(C);if(R!==-1)this.pressedKeys.length=0;else for(var q=0;q<c.length;q+=1){var H=this.pressedKeys.indexOf(c[q]);H>-1&&this.pressedKeys.splice(H,1)}this.activeTargetKeys.length=0,this._clearMacros()}}},{key:"_applyMacros",value:function(){for(var C=this._macros.slice(0),A=0;A<C.length;A+=1){var w=C[A];if(w.keyCombo.check(this.pressedKeys)){w.handler&&(w.keyNames=w.handler(this.pressedKeys));for(var c=0;c<w.keyNames.length;c+=1)this.pressedKeys.indexOf(w.keyNames[c])===-1&&this.pressedKeys.push(w.keyNames[c]);this._appliedMacros.push(w)}}}},{key:"_clearMacros",value:function(){for(var C=0;C<this._appliedMacros.length;C+=1){var A=this._appliedMacros[C];if(!A.keyCombo.check(this.pressedKeys)){for(var w=0;w<A.keyNames.length;w+=1){var c=this.pressedKeys.indexOf(A.keyNames[w]);c>-1&&this.pressedKeys.splice(c,1)}A.handler&&(A.keyNames=null),this._appliedMacros.splice(C,1),C-=1}}}}]),v}(),x=function(){function v(D,C,A,w){n(this,v),this._locale=null,this._currentContext="",this._contexts={},this._listeners=[],this._appliedListeners=[],this._locales={},this._targetElement=null,this._targetWindow=null,this._targetPlatform="",this._targetUserAgent="",this._isModernBrowser=!1,this._targetKeyDownBinding=null,this._targetKeyUpBinding=null,this._targetResetBinding=null,this._paused=!1,this._contexts.global={listeners:this._listeners,targetWindow:D,targetElement:C,targetPlatform:A,targetUserAgent:w},this.setContext("global")}return a(v,[{key:"setLocale",value:function(C,A){var w=null;return typeof C=="string"?A?(w=new N(C),A(w,this._targetPlatform,this._targetUserAgent)):w=this._locales[C]||null:(w=C,C=w._localeName),this._locale=w,this._locales[C]=w,w&&(this._locale.pressedKeys=w.pressedKeys),this}},{key:"getLocale",value:function(C){return C||(C=this._locale.localeName),this._locales[C]||null}},{key:"bind",value:function(C,A,w,c){if((C===null||typeof C=="function")&&(c=w,w=A,A=C,C=null),C&&t(C)==="object"&&typeof C.length=="number"){for(var R=0;R<C.length;R+=1)this.bind(C[R],A,w);return this}return this._listeners.push({keyCombo:C?new S(C):null,pressHandler:A||null,releaseHandler:w||null,preventRepeat:!1,preventRepeatByDefault:c||!1,executingHandler:!1}),this}},{key:"addListener",value:function(C,A,w,c){return this.bind(C,A,w,c)}},{key:"on",value:function(C,A,w,c){return this.bind(C,A,w,c)}},{key:"bindPress",value:function(C,A,w){return this.bind(C,A,null,w)}},{key:"bindRelease",value:function(C,A){return this.bind(C,null,A,preventRepeatByDefault)}},{key:"unbind",value:function(C,A,w){if((C===null||typeof C=="function")&&(w=A,A=C,C=null),C&&t(C)==="object"&&typeof C.length=="number"){for(var c=0;c<C.length;c+=1)this.unbind(C[c],A,w);return this}for(var R=0;R<this._listeners.length;R+=1){var q=this._listeners[R],H=!C&&!q.keyCombo||q.keyCombo&&q.keyCombo.isEqual(C),U=!A&&!w||!A&&!q.pressHandler||A===q.pressHandler,z=!A&&!w||!w&&!q.releaseHandler||w===q.releaseHandler;H&&U&&z&&(this._listeners.splice(R,1),R-=1)}return this}},{key:"removeListener",value:function(C,A,w){return this.unbind(C,A,w)}},{key:"off",value:function(C,A,w){return this.unbind(C,A,w)}},{key:"setContext",value:function(C){if(this._locale&&this.releaseAllKeys(),!this._contexts[C]){var A=this._contexts.global;this._contexts[C]={listeners:[],targetWindow:A.targetWindow,targetElement:A.targetElement,targetPlatform:A.targetPlatform,targetUserAgent:A.targetUserAgent}}var w=this._contexts[C];return this._currentContext=C,this._listeners=w.listeners,this.stop(),this.watch(w.targetWindow,w.targetElement,w.targetPlatform,w.targetUserAgent),this}},{key:"getContext",value:function(){return this._currentContext}},{key:"withContext",value:function(C,A){var w=this.getContext();return this.setContext(C),A(),this.setContext(w),this}},{key:"watch",value:function(C,A,w,c){var R=this;this.stop();var q=typeof globalThis<"u"?globalThis:typeof ki<"u"?ki:typeof window<"u"?window:{};if(!C){if(!q.addEventListener&&!q.attachEvent){if(this._currentContext==="global")return;throw new Error("Cannot find window functions addEventListener or attachEvent.")}C=q}if(typeof C.nodeType=="number"&&(c=w,w=A,A=C,C=q),!C.addEventListener&&!C.attachEvent)throw new Error("Cannot find addEventListener or attachEvent methods on targetWindow.");this._isModernBrowser=!!C.addEventListener;var H=C.navigator&&C.navigator.userAgent||"",U=C.navigator&&C.navigator.platform||"";A&&A!==null||(A=C.document),w&&w!==null||(w=U),c&&c!==null||(c=H),this._targetKeyDownBinding=function(W){R.pressKey(W.keyCode,W),R._handleCommandBug(W,U)},this._targetKeyUpBinding=function(W){R.releaseKey(W.keyCode,W)},this._targetResetBinding=function(W){R.releaseAllKeys(W)},this._bindEvent(A,"keydown",this._targetKeyDownBinding),this._bindEvent(A,"keyup",this._targetKeyUpBinding),this._bindEvent(C,"focus",this._targetResetBinding),this._bindEvent(C,"blur",this._targetResetBinding),this._targetElement=A,this._targetWindow=C,this._targetPlatform=w,this._targetUserAgent=c;var z=this._contexts[this._currentContext];return z.targetWindow=this._targetWindow,z.targetElement=this._targetElement,z.targetPlatform=this._targetPlatform,z.targetUserAgent=this._targetUserAgent,this}},{key:"stop",value:function(){if(!(!this._targetElement||!this._targetWindow))return this._unbindEvent(this._targetElement,"keydown",this._targetKeyDownBinding),this._unbindEvent(this._targetElement,"keyup",this._targetKeyUpBinding),this._unbindEvent(this._targetWindow,"focus",this._targetResetBinding),this._unbindEvent(this._targetWindow,"blur",this._targetResetBinding),this._targetWindow=null,this._targetElement=null,this}},{key:"pressKey",value:function(C,A){if(this._paused)return this;if(!this._locale)throw new Error("Locale not set");return this._locale.pressKey(C),this._applyBindings(A),this}},{key:"releaseKey",value:function(C,A){if(this._paused)return this;if(!this._locale)throw new Error("Locale not set");return this._locale.releaseKey(C),this._clearBindings(A),this}},{key:"releaseAllKeys",value:function(C){if(this._paused)return this;if(!this._locale)throw new Error("Locale not set");return this._locale.pressedKeys.length=0,this._clearBindings(C),this}},{key:"pause",value:function(){return this._paused?this:(this._locale&&this.releaseAllKeys(),this._paused=!0,this)}},{key:"resume",value:function(){return this._paused=!1,this}},{key:"reset",value:function(){return this.releaseAllKeys(),this._listeners.length=0,this}},{key:"_bindEvent",value:function(C,A,w){return this._isModernBrowser?C.addEventListener(A,w,!1):C.attachEvent("on"+A,w)}},{key:"_unbindEvent",value:function(C,A,w){return this._isModernBrowser?C.removeEventListener(A,w,!1):C.detachEvent("on"+A,w)}},{key:"_getGroupedListeners",value:function(){var C=[],A=[],w=this._listeners;return this._currentContext!=="global"&&(w=[].concat(h(w),h(this._contexts.global.listeners))),w.sort(function(c,R){return(R.keyCombo?R.keyCombo.keyNames.length:0)-(c.keyCombo?c.keyCombo.keyNames.length:0)}).forEach(function(c){for(var R=-1,q=0;q<A.length;q+=1)(A[q]===null&&c.keyCombo===null||A[q]!==null&&A[q].isEqual(c.keyCombo))&&(R=q);R===-1&&(R=A.length,A.push(c.keyCombo)),C[R]||(C[R]=[]),C[R].push(c)}),C}},{key:"_applyBindings",value:function(C){var A=this,w=!1;C||(C={}),C.preventRepeat=function(){w=!0},C.pressedKeys=this._locale.pressedKeys.slice(0);for(var c=this._locale.activeTargetKeys,R=this._locale.pressedKeys.slice(0),q=this._getGroupedListeners(),H=function(W){var se=q[W],Q=se[0].keyCombo;if(Q===null||Q.check(R)&&c.some(function(le){return Q.keyNames.includes(le)})){for(var ue=0;ue<se.length;ue+=1){var ee=se[ue];!ee.executingHandler&&ee.pressHandler&&!ee.preventRepeat&&(ee.executingHandler=!0,ee.pressHandler.call(A,C),ee.executingHandler=!1,(w||ee.preventRepeatByDefault)&&(ee.preventRepeat=!0,w=!1)),A._appliedListeners.indexOf(ee)===-1&&A._appliedListeners.push(ee)}if(Q)for(var ie=0;ie<Q.keyNames.length;ie+=1){var _e=R.indexOf(Q.keyNames[ie]);_e!==-1&&(R.splice(_e,1),ie-=1)}}},U=0;U<q.length;U+=1)H(U)}},{key:"_clearBindings",value:function(C){C||(C={}),C.pressedKeys=this._locale.pressedKeys.slice(0);for(var A=0;A<this._appliedListeners.length;A+=1){var w=this._appliedListeners[A],c=w.keyCombo;(c===null||!c.check(this._locale.pressedKeys))&&(w.preventRepeat=!1,(c!==null||C.pressedKeys.length===0)&&(this._appliedListeners.splice(A,1),A-=1),!w.executingHandler&&w.releaseHandler&&(w.executingHandler=!0,w.releaseHandler.call(this,C),w.executingHandler=!1))}}},{key:"_handleCommandBug",value:function(C,A){var w=["shift","ctrl","alt","capslock","tab","command"];A.match("Mac")&&this._locale.pressedKeys.includes("command")&&!w.includes(this._locale.getKeyNames(C.keyCode)[0])&&this._targetKeyUpBinding(C)}}]),v}();function k(v,D,C){v.bindKeyCode(3,["cancel"]),v.bindKeyCode(8,["backspace"]),v.bindKeyCode(9,["tab"]),v.bindKeyCode(12,["clear"]),v.bindKeyCode(13,["enter"]),v.bindKeyCode(16,["shift"]),v.bindKeyCode(17,["ctrl"]),v.bindKeyCode(18,["alt","menu"]),v.bindKeyCode(19,["pause","break"]),v.bindKeyCode(20,["capslock"]),v.bindKeyCode(27,["escape","esc"]),v.bindKeyCode(32,["space","spacebar"]),v.bindKeyCode(33,["pageup"]),v.bindKeyCode(34,["pagedown"]),v.bindKeyCode(35,["end"]),v.bindKeyCode(36,["home"]),v.bindKeyCode(37,["left"]),v.bindKeyCode(38,["up"]),v.bindKeyCode(39,["right"]),v.bindKeyCode(40,["down"]),v.bindKeyCode(41,["select"]),v.bindKeyCode(42,["printscreen"]),v.bindKeyCode(43,["execute"]),v.bindKeyCode(44,["snapshot"]),v.bindKeyCode(45,["insert","ins"]),v.bindKeyCode(46,["delete","del"]),v.bindKeyCode(47,["help"]),v.bindKeyCode(145,["scrolllock","scroll"]),v.bindKeyCode(188,["comma",","]),v.bindKeyCode(190,["period","."]),v.bindKeyCode(191,["slash","forwardslash","/"]),v.bindKeyCode(192,["graveaccent","`"]),v.bindKeyCode(219,["openbracket","["]),v.bindKeyCode(220,["backslash","\\"]),v.bindKeyCode(221,["closebracket","]"]),v.bindKeyCode(222,["apostrophe","'"]),v.bindKeyCode(48,["zero","0"]),v.bindKeyCode(49,["one","1"]),v.bindKeyCode(50,["two","2"]),v.bindKeyCode(51,["three","3"]),v.bindKeyCode(52,["four","4"]),v.bindKeyCode(53,["five","5"]),v.bindKeyCode(54,["six","6"]),v.bindKeyCode(55,["seven","7"]),v.bindKeyCode(56,["eight","8"]),v.bindKeyCode(57,["nine","9"]),v.bindKeyCode(96,["numzero","num0"]),v.bindKeyCode(97,["numone","num1"]),v.bindKeyCode(98,["numtwo","num2"]),v.bindKeyCode(99,["numthree","num3"]),v.bindKeyCode(100,["numfour","num4"]),v.bindKeyCode(101,["numfive","num5"]),v.bindKeyCode(102,["numsix","num6"]),v.bindKeyCode(103,["numseven","num7"]),v.bindKeyCode(104,["numeight","num8"]),v.bindKeyCode(105,["numnine","num9"]),v.bindKeyCode(106,["nummultiply","num*"]),v.bindKeyCode(107,["numadd","num+"]),v.bindKeyCode(108,["numenter"]),v.bindKeyCode(109,["numsubtract","num-"]),v.bindKeyCode(110,["numdecimal","num."]),v.bindKeyCode(111,["numdivide","num/"]),v.bindKeyCode(144,["numlock","num"]),v.bindKeyCode(112,["f1"]),v.bindKeyCode(113,["f2"]),v.bindKeyCode(114,["f3"]),v.bindKeyCode(115,["f4"]),v.bindKeyCode(116,["f5"]),v.bindKeyCode(117,["f6"]),v.bindKeyCode(118,["f7"]),v.bindKeyCode(119,["f8"]),v.bindKeyCode(120,["f9"]),v.bindKeyCode(121,["f10"]),v.bindKeyCode(122,["f11"]),v.bindKeyCode(123,["f12"]),v.bindKeyCode(124,["f13"]),v.bindKeyCode(125,["f14"]),v.bindKeyCode(126,["f15"]),v.bindKeyCode(127,["f16"]),v.bindKeyCode(128,["f17"]),v.bindKeyCode(129,["f18"]),v.bindKeyCode(130,["f19"]),v.bindKeyCode(131,["f20"]),v.bindKeyCode(132,["f21"]),v.bindKeyCode(133,["f22"]),v.bindKeyCode(134,["f23"]),v.bindKeyCode(135,["f24"]),v.bindMacro("shift + `",["tilde","~"]),v.bindMacro("shift + 1",["exclamation","exclamationpoint","!"]),v.bindMacro("shift + 2",["at","@"]),v.bindMacro("shift + 3",["number","#"]),v.bindMacro("shift + 4",["dollar","dollars","dollarsign","$"]),v.bindMacro("shift + 5",["percent","%"]),v.bindMacro("shift + 6",["caret","^"]),v.bindMacro("shift + 7",["ampersand","and","&"]),v.bindMacro("shift + 8",["asterisk","*"]),v.bindMacro("shift + 9",["openparen","("]),v.bindMacro("shift + 0",["closeparen",")"]),v.bindMacro("shift + -",["underscore","_"]),v.bindMacro("shift + =",["plus","+"]),v.bindMacro("shift + [",["opencurlybrace","opencurlybracket","{"]),v.bindMacro("shift + ]",["closecurlybrace","closecurlybracket","}"]),v.bindMacro("shift + \\",["verticalbar","|"]),v.bindMacro("shift + ;",["colon",":"]),v.bindMacro("shift + '",["quotationmark","'"]),v.bindMacro("shift + !,",["openanglebracket","<"]),v.bindMacro("shift + .",["closeanglebracket",">"]),v.bindMacro("shift + /",["questionmark","?"]),D.match("Mac")?v.bindMacro("command",["mod","modifier"]):v.bindMacro("ctrl",["mod","modifier"]);for(var A=65;A<=90;A+=1){var w=String.fromCharCode(A+32),c=String.fromCharCode(A);v.bindKeyCode(A,w),v.bindMacro("shift + "+w,c),v.bindMacro("capslock + "+w,c)}var R=C.match("Firefox")?59:186,q=C.match("Firefox")?173:189,H=C.match("Firefox")?61:187,U,z;D.match("Mac")&&(C.match("Safari")||C.match("Chrome"))?(U=91,z=93):D.match("Mac")&&C.match("Opera")?(U=17,z=17):D.match("Mac")&&C.match("Firefox")&&(U=224,z=224),v.bindKeyCode(R,["semicolon",";"]),v.bindKeyCode(q,["dash","-"]),v.bindKeyCode(H,["equal","equalsign","="]),v.bindKeyCode(U,["command","windows","win","super","leftcommand","leftwindows","leftwin","leftsuper"]),v.bindKeyCode(z,["command","windows","win","super","rightcommand","rightwindows","rightwin","rightsuper"]),v.setKillKey("command")}var I=new x;return I.setLocale("us",k),I.Keyboard=x,I.Locale=N,I.KeyCombo=S,I})})(Hc);const eg=Hc.exports;ke(function(){const i={HOME_ROW:["a","s","d","f","j","k","l","semicolon"],DEFAULT_SCALE:["C4","D4","E4","F4","G4","A4","B4","C5"],MODES:["ionian","dorian","phrygian","lydian","mixolydian","aeolian","locrian"],NOTE_RANGE:[{MIN:"a0"},{MAX:"c8"}]},e={synthObj:{},currentScale:[],bindEvents:function(t){var n=document.querySelectorAll(".keyboard button");i.HOME_ROW.forEach(function(r,a){eg.bind(r,function(h){h.preventRepeat(),t.triggerAttack(e.currentScale[a]),ke(n).removeClass("active"),ke(n[a]).addClass("active")},function(){ke(n[a]).removeClass("active"),t.triggerRelease()})}),document.querySelectorAll(".keyboard label").forEach(function(r,a){r.addEventListener("mousedown",function(){t.triggerAttack(e.currentScale[a])}),r.addEventListener("mouseup",function(){t.triggerRelease()})}),ke(".mute").on("change",function(){ke(this).is(":checked")?xi.mute=!0:xi.mute=!1}),ke(".volume").on("change",function(){xi.volume.value=ke(this).val()}),ke(".waveforms input").on("change",function(){var r=ke(this).val();t.oscillator.type=r}),ke(".detune").on("change",function(){t.detune.value=ke(this).val()}),ke(".portamento").on("change",function(){t.portamento=ke(this).val()}),ke(".envelope input").on("change",function(){var r=this.name,a=ke(this).val(),h=t.envelope;h[r]=a}),ke(".filter .q").on("change",function(){t.filter.Q.value=ke(this).val()}),ke(".filter-envelope input").on("change",function(){var r=this.name,a=ke(this).val(),h=t.filterEnvelope;h[r]=a})},generateScale:function(t,n){var r=Da.note(t),a=r.scale(n),h=a.notes(),f=[];return h.forEach(function(d,p){f.push(d.scientific())}),f.push(Da.interval(r,"P8").scientific()),f},initControls:function(t){var n='input[value="'+t.oscillator.type+'"]';ke(n).attr("checked","checked"),ke(".envelope .attack").val(t.envelope.attack),ke(".envelope .sustain").val(t.envelope.sustain),ke(".envelope .decay").val(t.envelope.decay),ke(".envelope .release").val(t.envelope.release),ke(".portamento").val(t.portamento),ke(".detune").val(t.detune.value),ke(".filter .q").val(t.filter.Q.value),ke(".filter-envelope .attack").val(t.filterEnvelope.attack),ke(".filter-envelope .sustain").val(t.filterEnvelope.sustain),ke(".filter-envelope .decay").val(t.filterEnvelope.decay),ke(".filter-envelope .release").val(t.filterEnvelope.release)},view:()=>{const n=String.raw`
        <div class="device">
          <div class="keyboard">
            <div class="left hand">
              <label><span>Do </span><button>A</button></label>
              <label><span>re </span><button>S</button></label>
              <label><span>mi </span><button>D</button></label>
              <label><span>fa </span><button>F</button></label>
            </div>
            <div class="right hand">
              <label><span>sol</span><button>J</button></label>
              <label><span>la </span><button>K</button></label>
              <label><span>ti </span><button>L</button></label>
              <label><span>do </span><button>;</button></label>
            </div>
          </div>
          <div class="controls">
            <div class="master-vol">
              <label>
                <span>Mute</span>
                <input
                  type="checkbox"
                  class="mute"
                  name="mute">
              </label>
              <label>
                <span>Volume</span>
                <input type="range"
                  class="volume"
                  name="volume"
                  min="-60"
                  max="0"
                  step="-3">
              </label>
            </div>
            <div class="waveforms">
              <label>
                <span>sine</span>
                <input type="radio"
                  name="wave"
                  value="sine">
              </label>
              <label>
                <span>square</span>
                <input type="radio"
                  name="wave"
                  value="square">
              </label>
              <label>
                <span>triangle</span>
                <input
                  type="radio"
                  name="wave"
                  value="triangle">
              </label>
              <label>
                <span>sawtooth</span>
                <input
                  type="radio"
                  name="wave"
                  value="sawtooth">
              </label>
            </div>
            <div>
              <label>
                <span>Detune</span>
                <input type="range"
                  class="detune"
                  name="detune"
                  value=""
                  min="0"
                  max="50">
              </label>
              <label>
                <span>Portamento</span>
                <input
                  type="range"
                  class="portamento"
                  name="portamento"
                  min="0"
                  max="1"
                  value=""
                  step="0.1">
              </label>
            </div>
            <div class="envelope">
              <h2>Amplifier</h2>
              <label>
                Attack
                <input
                  type="range"
                  class="attack"
                  name="attack"
                  min="0"
                  max="5"
                  step="0.1">
              </label>
              <label>
                Decay
                <input
                  type="range"
                  class="decay"
                  name="decay"
                  min="0"
                  max="10"
                  step="0.5">
              </label>
              <label>
                Sustain
                <input
                  type="range"
                  class="sustain"
                  name="sustain"
                  min="0"
                  max="1"
                  step="0.1">
              </label>
              <label>
                Release
                <input
                  type="range"
                  class="release"
                  name="release"
                  min="0.5"
                  max="10"
                  step="0.5">
              </label>
            </div>
            <div class="filter">
              <h2>Filter</h2>
              <div class="filter-envelope">
                <label>
                  <span>Attack</span>
                  <input
                    type="range"
                    class="attack"
                    name="attack"
                    min="0"
                    max="5"
                    step="0.1">
                </label>
                <label>
                  <span>Decay</span>
                  <input
                    type="range"
                    class="decay"
                    name="decay"
                    min="0"
                    max="10"
                    step="0.5">
                </label>
                <label>
                  <span>Sustain</span>
                  <input
                    type="range"
                    class="sustain"
                    name="sustain"
                    min="0"
                    max="1"
                    step="0.1">
                </label>
                <label>
                  <span>Release</span>
                  <input
                    type="range"
                    class="release"
                    name="release"
                    min="0.5"
                    max="10"
                    step="0.5">
                </label>
              </div>
              <label>
                <span>Q</span>
                <input
                  type="range"
                  class="q"
                  name="q"
                  min="0"
                  max="10"
                  step="1">
              </label>
            </div>
          </div>
        </div>`;ke(".app").html(()=>n)},init:function(){e.view(),e.synthObj=new Xi,e.synthObj.toDestination(),e.currentScale=e.generateScale("c2",i.MODES[0]),xi.volume.value=-6,e.initControls(e.synthObj),e.bindEvents(e.synthObj)}};e.init()});
