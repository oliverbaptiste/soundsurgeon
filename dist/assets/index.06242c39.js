(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();var xi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xa={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */(function(i){(function(e,t){i.exports=e.document?t(e,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}})(typeof window<"u"?window:xi,function(e,t){var n=[],r=Object.getPrototypeOf,a=n.slice,h=n.flat?function(s){return n.flat.call(s)}:function(s){return n.concat.apply([],s)},f=n.push,d=n.indexOf,p={},y=p.toString,b=p.hasOwnProperty,S=b.toString,N=S.call(Object),C={},k=function(o){return typeof o=="function"&&typeof o.nodeType!="number"&&typeof o.item!="function"},I=function(o){return o!=null&&o===o.window},v=e.document,P={type:!0,src:!0,nonce:!0,noModule:!0};function T(s,o,u){u=u||v;var l,m,g=u.createElement("script");if(g.text=s,o)for(l in P)m=o[l]||o.getAttribute&&o.getAttribute(l),m&&g.setAttribute(l,m);u.head.appendChild(g).parentNode.removeChild(g)}function A(s){return s==null?s+"":typeof s=="object"||typeof s=="function"?p[y.call(s)]||"object":typeof s}var w="3.7.1",D=/HTML$/i,c=function(s,o){return new c.fn.init(s,o)};c.fn=c.prototype={jquery:w,constructor:c,length:0,toArray:function(){return a.call(this)},get:function(s){return s==null?a.call(this):s<0?this[s+this.length]:this[s]},pushStack:function(s){var o=c.merge(this.constructor(),s);return o.prevObject=this,o},each:function(s){return c.each(this,s)},map:function(s){return this.pushStack(c.map(this,function(o,u){return s.call(o,u,o)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(c.grep(this,function(s,o){return(o+1)%2}))},odd:function(){return this.pushStack(c.grep(this,function(s,o){return o%2}))},eq:function(s){var o=this.length,u=+s+(s<0?o:0);return this.pushStack(u>=0&&u<o?[this[u]]:[])},end:function(){return this.prevObject||this.constructor()},push:f,sort:n.sort,splice:n.splice},c.extend=c.fn.extend=function(){var s,o,u,l,m,g,_=arguments[0]||{},E=1,M=arguments.length,F=!1;for(typeof _=="boolean"&&(F=_,_=arguments[E]||{},E++),typeof _!="object"&&!k(_)&&(_={}),E===M&&(_=this,E--);E<M;E++)if((s=arguments[E])!=null)for(o in s)l=s[o],!(o==="__proto__"||_===l)&&(F&&l&&(c.isPlainObject(l)||(m=Array.isArray(l)))?(u=_[o],m&&!Array.isArray(u)?g=[]:!m&&!c.isPlainObject(u)?g={}:g=u,m=!1,_[o]=c.extend(F,g,l)):l!==void 0&&(_[o]=l));return _},c.extend({expando:"jQuery"+(w+Math.random()).replace(/\D/g,""),isReady:!0,error:function(s){throw new Error(s)},noop:function(){},isPlainObject:function(s){var o,u;return!s||y.call(s)!=="[object Object]"?!1:(o=r(s),o?(u=b.call(o,"constructor")&&o.constructor,typeof u=="function"&&S.call(u)===N):!0)},isEmptyObject:function(s){var o;for(o in s)return!1;return!0},globalEval:function(s,o,u){T(s,{nonce:o&&o.nonce},u)},each:function(s,o){var u,l=0;if(O(s))for(u=s.length;l<u&&o.call(s[l],l,s[l])!==!1;l++);else for(l in s)if(o.call(s[l],l,s[l])===!1)break;return s},text:function(s){var o,u="",l=0,m=s.nodeType;if(!m)for(;o=s[l++];)u+=c.text(o);return m===1||m===11?s.textContent:m===9?s.documentElement.textContent:m===3||m===4?s.nodeValue:u},makeArray:function(s,o){var u=o||[];return s!=null&&(O(Object(s))?c.merge(u,typeof s=="string"?[s]:s):f.call(u,s)),u},inArray:function(s,o,u){return o==null?-1:d.call(o,s,u)},isXMLDoc:function(s){var o=s&&s.namespaceURI,u=s&&(s.ownerDocument||s).documentElement;return!D.test(o||u&&u.nodeName||"HTML")},merge:function(s,o){for(var u=+o.length,l=0,m=s.length;l<u;l++)s[m++]=o[l];return s.length=m,s},grep:function(s,o,u){for(var l,m=[],g=0,_=s.length,E=!u;g<_;g++)l=!o(s[g],g),l!==E&&m.push(s[g]);return m},map:function(s,o,u){var l,m,g=0,_=[];if(O(s))for(l=s.length;g<l;g++)m=o(s[g],g,u),m!=null&&_.push(m);else for(g in s)m=o(s[g],g,u),m!=null&&_.push(m);return h(_)},guid:1,support:C}),typeof Symbol=="function"&&(c.fn[Symbol.iterator]=n[Symbol.iterator]),c.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(s,o){p["[object "+o+"]"]=o.toLowerCase()});function O(s){var o=!!s&&"length"in s&&s.length,u=A(s);return k(s)||I(s)?!1:u==="array"||o===0||typeof o=="number"&&o>0&&o-1 in s}function j(s,o){return s.nodeName&&s.nodeName.toLowerCase()===o.toLowerCase()}var U=n.pop,$=n.sort,H=n.splice,z="[\\x20\\t\\r\\n\\f]",Y=new RegExp("^"+z+"+|((?:^|[^\\\\])(?:\\\\.)*)"+z+"+$","g");c.contains=function(s,o){var u=o&&o.parentNode;return s===u||!!(u&&u.nodeType===1&&(s.contains?s.contains(u):s.compareDocumentPosition&&s.compareDocumentPosition(u)&16))};var oe=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Q(s,o){return o?s==="\0"?"\uFFFD":s.slice(0,-1)+"\\"+s.charCodeAt(s.length-1).toString(16)+" ":"\\"+s}c.escapeSelector=function(s){return(s+"").replace(oe,Q)};var J=v,pe=f;(function(){var s,o,u,l,m,g=pe,_,E,M,F,W,K=c.expando,V=0,G=0,de=di(),xe=di(),_e=di(),ot=di(),Qe=function(x,R){return x===R&&(m=!0),0},Gt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Xt="(?:\\\\[\\da-fA-F]{1,6}"+z+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Te="\\["+z+"*("+Xt+")(?:"+z+"*([*^$|!~]?=)"+z+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Xt+"))|)"+z+"*\\]",Pn=":("+Xt+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Te+")*)|.*)\\)|)",ke=new RegExp(z+"+","g"),Ue=new RegExp("^"+z+"*,"+z+"*"),ks=new RegExp("^"+z+"*([>+~]|"+z+")"+z+"*"),wr=new RegExp(z+"|>"),Zt=new RegExp(Pn),Ns=new RegExp("^"+Xt+"$"),Yt={ID:new RegExp("^#("+Xt+")"),CLASS:new RegExp("^\\.("+Xt+")"),TAG:new RegExp("^("+Xt+"|[*])"),ATTR:new RegExp("^"+Te),PSEUDO:new RegExp("^"+Pn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+z+"*(even|odd|(([+-]|)(\\d*)n|)"+z+"*(?:([+-]|)"+z+"*(\\d+)|))"+z+"*\\)|)","i"),bool:new RegExp("^(?:"+Gt+")$","i"),needsContext:new RegExp("^"+z+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+z+"*((?:-\\d)?\\d*)"+z+"*\\)|)(?=[^-]|$)","i")},bn=/^(?:input|select|textarea|button)$/i,wn=/^h\d$/i,Ot=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Tr=/[+~]/,cn=new RegExp("\\\\[\\da-fA-F]{1,6}"+z+"?|\\\\([^\\r\\n\\f])","g"),un=function(x,R){var q="0x"+x.slice(1)-65536;return R||(q<0?String.fromCharCode(q+65536):String.fromCharCode(q>>10|55296,q&1023|56320))},Tu=function(){Tn()},Cu=mi(function(x){return x.disabled===!0&&j(x,"fieldset")},{dir:"parentNode",next:"legend"});function xu(){try{return _.activeElement}catch{}}try{g.apply(n=a.call(J.childNodes),J.childNodes),n[J.childNodes.length].nodeType}catch{g={apply:function(R,q){pe.apply(R,a.call(q))},call:function(R){pe.apply(R,a.call(arguments,1))}}}function Ee(x,R,q,L){var B,Z,ee,se,te,be,le,me=R&&R.ownerDocument,we=R?R.nodeType:9;if(q=q||[],typeof x!="string"||!x||we!==1&&we!==9&&we!==11)return q;if(!L&&(Tn(R),R=R||_,M)){if(we!==11&&(te=Ot.exec(x)))if(B=te[1]){if(we===9)if(ee=R.getElementById(B)){if(ee.id===B)return g.call(q,ee),q}else return q;else if(me&&(ee=me.getElementById(B))&&Ee.contains(R,ee)&&ee.id===B)return g.call(q,ee),q}else{if(te[2])return g.apply(q,R.getElementsByTagName(x)),q;if((B=te[3])&&R.getElementsByClassName)return g.apply(q,R.getElementsByClassName(B)),q}if(!ot[x+" "]&&(!F||!F.test(x))){if(le=x,me=R,we===1&&(wr.test(x)||ks.test(x))){for(me=Tr.test(x)&&Cr(R.parentNode)||R,(me!=R||!C.scope)&&((se=R.getAttribute("id"))?se=c.escapeSelector(se):R.setAttribute("id",se=K)),be=Ms(x),Z=be.length;Z--;)be[Z]=(se?"#"+se:":scope")+" "+pi(be[Z]);le=be.join(",")}try{return g.apply(q,me.querySelectorAll(le)),q}catch{ot(x,!0)}finally{se===K&&R.removeAttribute("id")}}}return Qo(x.replace(Y,"$1"),R,q,L)}function di(){var x=[];function R(q,L){return x.push(q+" ")>o.cacheLength&&delete R[x.shift()],R[q+" "]=L}return R}function Vt(x){return x[K]=!0,x}function ts(x){var R=_.createElement("fieldset");try{return!!x(R)}catch{return!1}finally{R.parentNode&&R.parentNode.removeChild(R),R=null}}function Su(x){return function(R){return j(R,"input")&&R.type===x}}function Au(x){return function(R){return(j(R,"input")||j(R,"button"))&&R.type===x}}function Zo(x){return function(R){return"form"in R?R.parentNode&&R.disabled===!1?"label"in R?"label"in R.parentNode?R.parentNode.disabled===x:R.disabled===x:R.isDisabled===x||R.isDisabled!==!x&&Cu(R)===x:R.disabled===x:"label"in R?R.disabled===x:!1}}function Fn(x){return Vt(function(R){return R=+R,Vt(function(q,L){for(var B,Z=x([],q.length,R),ee=Z.length;ee--;)q[B=Z[ee]]&&(q[B]=!(L[B]=q[B]))})})}function Cr(x){return x&&typeof x.getElementsByTagName<"u"&&x}function Tn(x){var R,q=x?x.ownerDocument||x:J;return q==_||q.nodeType!==9||!q.documentElement||(_=q,E=_.documentElement,M=!c.isXMLDoc(_),W=E.matches||E.webkitMatchesSelector||E.msMatchesSelector,E.msMatchesSelector&&J!=_&&(R=_.defaultView)&&R.top!==R&&R.addEventListener("unload",Tu),C.getById=ts(function(L){return E.appendChild(L).id=c.expando,!_.getElementsByName||!_.getElementsByName(c.expando).length}),C.disconnectedMatch=ts(function(L){return W.call(L,"*")}),C.scope=ts(function(){return _.querySelectorAll(":scope")}),C.cssHas=ts(function(){try{return _.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),C.getById?(o.filter.ID=function(L){var B=L.replace(cn,un);return function(Z){return Z.getAttribute("id")===B}},o.find.ID=function(L,B){if(typeof B.getElementById<"u"&&M){var Z=B.getElementById(L);return Z?[Z]:[]}}):(o.filter.ID=function(L){var B=L.replace(cn,un);return function(Z){var ee=typeof Z.getAttributeNode<"u"&&Z.getAttributeNode("id");return ee&&ee.value===B}},o.find.ID=function(L,B){if(typeof B.getElementById<"u"&&M){var Z,ee,se,te=B.getElementById(L);if(te){if(Z=te.getAttributeNode("id"),Z&&Z.value===L)return[te];for(se=B.getElementsByName(L),ee=0;te=se[ee++];)if(Z=te.getAttributeNode("id"),Z&&Z.value===L)return[te]}return[]}}),o.find.TAG=function(L,B){return typeof B.getElementsByTagName<"u"?B.getElementsByTagName(L):B.querySelectorAll(L)},o.find.CLASS=function(L,B){if(typeof B.getElementsByClassName<"u"&&M)return B.getElementsByClassName(L)},F=[],ts(function(L){var B;E.appendChild(L).innerHTML="<a id='"+K+"' href='' disabled='disabled'></a><select id='"+K+"-\r\\' disabled='disabled'><option selected=''></option></select>",L.querySelectorAll("[selected]").length||F.push("\\["+z+"*(?:value|"+Gt+")"),L.querySelectorAll("[id~="+K+"-]").length||F.push("~="),L.querySelectorAll("a#"+K+"+*").length||F.push(".#.+[+~]"),L.querySelectorAll(":checked").length||F.push(":checked"),B=_.createElement("input"),B.setAttribute("type","hidden"),L.appendChild(B).setAttribute("name","D"),E.appendChild(L).disabled=!0,L.querySelectorAll(":disabled").length!==2&&F.push(":enabled",":disabled"),B=_.createElement("input"),B.setAttribute("name",""),L.appendChild(B),L.querySelectorAll("[name='']").length||F.push("\\["+z+"*name"+z+"*="+z+`*(?:''|"")`)}),C.cssHas||F.push(":has"),F=F.length&&new RegExp(F.join("|")),Qe=function(L,B){if(L===B)return m=!0,0;var Z=!L.compareDocumentPosition-!B.compareDocumentPosition;return Z||(Z=(L.ownerDocument||L)==(B.ownerDocument||B)?L.compareDocumentPosition(B):1,Z&1||!C.sortDetached&&B.compareDocumentPosition(L)===Z?L===_||L.ownerDocument==J&&Ee.contains(J,L)?-1:B===_||B.ownerDocument==J&&Ee.contains(J,B)?1:l?d.call(l,L)-d.call(l,B):0:Z&4?-1:1)}),_}Ee.matches=function(x,R){return Ee(x,null,null,R)},Ee.matchesSelector=function(x,R){if(Tn(x),M&&!ot[R+" "]&&(!F||!F.test(R)))try{var q=W.call(x,R);if(q||C.disconnectedMatch||x.document&&x.document.nodeType!==11)return q}catch{ot(R,!0)}return Ee(R,_,null,[x]).length>0},Ee.contains=function(x,R){return(x.ownerDocument||x)!=_&&Tn(x),c.contains(x,R)},Ee.attr=function(x,R){(x.ownerDocument||x)!=_&&Tn(x);var q=o.attrHandle[R.toLowerCase()],L=q&&b.call(o.attrHandle,R.toLowerCase())?q(x,R,!M):void 0;return L!==void 0?L:x.getAttribute(R)},Ee.error=function(x){throw new Error("Syntax error, unrecognized expression: "+x)},c.uniqueSort=function(x){var R,q=[],L=0,B=0;if(m=!C.sortStable,l=!C.sortStable&&a.call(x,0),$.call(x,Qe),m){for(;R=x[B++];)R===x[B]&&(L=q.push(B));for(;L--;)H.call(x,q[L],1)}return l=null,x},c.fn.uniqueSort=function(){return this.pushStack(c.uniqueSort(a.apply(this)))},o=c.expr={cacheLength:50,createPseudo:Vt,match:Yt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(x){return x[1]=x[1].replace(cn,un),x[3]=(x[3]||x[4]||x[5]||"").replace(cn,un),x[2]==="~="&&(x[3]=" "+x[3]+" "),x.slice(0,4)},CHILD:function(x){return x[1]=x[1].toLowerCase(),x[1].slice(0,3)==="nth"?(x[3]||Ee.error(x[0]),x[4]=+(x[4]?x[5]+(x[6]||1):2*(x[3]==="even"||x[3]==="odd")),x[5]=+(x[7]+x[8]||x[3]==="odd")):x[3]&&Ee.error(x[0]),x},PSEUDO:function(x){var R,q=!x[6]&&x[2];return Yt.CHILD.test(x[0])?null:(x[3]?x[2]=x[4]||x[5]||"":q&&Zt.test(q)&&(R=Ms(q,!0))&&(R=q.indexOf(")",q.length-R)-q.length)&&(x[0]=x[0].slice(0,R),x[2]=q.slice(0,R)),x.slice(0,3))}},filter:{TAG:function(x){var R=x.replace(cn,un).toLowerCase();return x==="*"?function(){return!0}:function(q){return j(q,R)}},CLASS:function(x){var R=de[x+" "];return R||(R=new RegExp("(^|"+z+")"+x+"("+z+"|$)"))&&de(x,function(q){return R.test(typeof q.className=="string"&&q.className||typeof q.getAttribute<"u"&&q.getAttribute("class")||"")})},ATTR:function(x,R,q){return function(L){var B=Ee.attr(L,x);return B==null?R==="!=":R?(B+="",R==="="?B===q:R==="!="?B!==q:R==="^="?q&&B.indexOf(q)===0:R==="*="?q&&B.indexOf(q)>-1:R==="$="?q&&B.slice(-q.length)===q:R==="~="?(" "+B.replace(ke," ")+" ").indexOf(q)>-1:R==="|="?B===q||B.slice(0,q.length+1)===q+"-":!1):!0}},CHILD:function(x,R,q,L,B){var Z=x.slice(0,3)!=="nth",ee=x.slice(-4)!=="last",se=R==="of-type";return L===1&&B===0?function(te){return!!te.parentNode}:function(te,be,le){var me,we,ce,Pe,yt,lt=Z!==ee?"nextSibling":"previousSibling",Dt=te.parentNode,Qt=se&&te.nodeName.toLowerCase(),ns=!le&&!se,ft=!1;if(Dt){if(Z){for(;lt;){for(ce=te;ce=ce[lt];)if(se?j(ce,Qt):ce.nodeType===1)return!1;yt=lt=x==="only"&&!yt&&"nextSibling"}return!0}if(yt=[ee?Dt.firstChild:Dt.lastChild],ee&&ns){for(we=Dt[K]||(Dt[K]={}),me=we[x]||[],Pe=me[0]===V&&me[1],ft=Pe&&me[2],ce=Pe&&Dt.childNodes[Pe];ce=++Pe&&ce&&ce[lt]||(ft=Pe=0)||yt.pop();)if(ce.nodeType===1&&++ft&&ce===te){we[x]=[V,Pe,ft];break}}else if(ns&&(we=te[K]||(te[K]={}),me=we[x]||[],Pe=me[0]===V&&me[1],ft=Pe),ft===!1)for(;(ce=++Pe&&ce&&ce[lt]||(ft=Pe=0)||yt.pop())&&!((se?j(ce,Qt):ce.nodeType===1)&&++ft&&(ns&&(we=ce[K]||(ce[K]={}),we[x]=[V,ft]),ce===te)););return ft-=B,ft===L||ft%L===0&&ft/L>=0}}},PSEUDO:function(x,R){var q,L=o.pseudos[x]||o.setFilters[x.toLowerCase()]||Ee.error("unsupported pseudo: "+x);return L[K]?L(R):L.length>1?(q=[x,x,"",R],o.setFilters.hasOwnProperty(x.toLowerCase())?Vt(function(B,Z){for(var ee,se=L(B,R),te=se.length;te--;)ee=d.call(B,se[te]),B[ee]=!(Z[ee]=se[te])}):function(B){return L(B,0,q)}):L}},pseudos:{not:Vt(function(x){var R=[],q=[],L=kr(x.replace(Y,"$1"));return L[K]?Vt(function(B,Z,ee,se){for(var te,be=L(B,null,se,[]),le=B.length;le--;)(te=be[le])&&(B[le]=!(Z[le]=te))}):function(B,Z,ee){return R[0]=B,L(R,null,ee,q),R[0]=null,!q.pop()}}),has:Vt(function(x){return function(R){return Ee(x,R).length>0}}),contains:Vt(function(x){return x=x.replace(cn,un),function(R){return(R.textContent||c.text(R)).indexOf(x)>-1}}),lang:Vt(function(x){return Ns.test(x||"")||Ee.error("unsupported lang: "+x),x=x.replace(cn,un).toLowerCase(),function(R){var q;do if(q=M?R.lang:R.getAttribute("xml:lang")||R.getAttribute("lang"))return q=q.toLowerCase(),q===x||q.indexOf(x+"-")===0;while((R=R.parentNode)&&R.nodeType===1);return!1}}),target:function(x){var R=e.location&&e.location.hash;return R&&R.slice(1)===x.id},root:function(x){return x===E},focus:function(x){return x===xu()&&_.hasFocus()&&!!(x.type||x.href||~x.tabIndex)},enabled:Zo(!1),disabled:Zo(!0),checked:function(x){return j(x,"input")&&!!x.checked||j(x,"option")&&!!x.selected},selected:function(x){return x.parentNode&&x.parentNode.selectedIndex,x.selected===!0},empty:function(x){for(x=x.firstChild;x;x=x.nextSibling)if(x.nodeType<6)return!1;return!0},parent:function(x){return!o.pseudos.empty(x)},header:function(x){return wn.test(x.nodeName)},input:function(x){return bn.test(x.nodeName)},button:function(x){return j(x,"input")&&x.type==="button"||j(x,"button")},text:function(x){var R;return j(x,"input")&&x.type==="text"&&((R=x.getAttribute("type"))==null||R.toLowerCase()==="text")},first:Fn(function(){return[0]}),last:Fn(function(x,R){return[R-1]}),eq:Fn(function(x,R,q){return[q<0?q+R:q]}),even:Fn(function(x,R){for(var q=0;q<R;q+=2)x.push(q);return x}),odd:Fn(function(x,R){for(var q=1;q<R;q+=2)x.push(q);return x}),lt:Fn(function(x,R,q){var L;for(q<0?L=q+R:q>R?L=R:L=q;--L>=0;)x.push(L);return x}),gt:Fn(function(x,R,q){for(var L=q<0?q+R:q;++L<R;)x.push(L);return x})}},o.pseudos.nth=o.pseudos.eq;for(s in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})o.pseudos[s]=Su(s);for(s in{submit:!0,reset:!0})o.pseudos[s]=Au(s);function Yo(){}Yo.prototype=o.filters=o.pseudos,o.setFilters=new Yo;function Ms(x,R){var q,L,B,Z,ee,se,te,be=xe[x+" "];if(be)return R?0:be.slice(0);for(ee=x,se=[],te=o.preFilter;ee;){(!q||(L=Ue.exec(ee)))&&(L&&(ee=ee.slice(L[0].length)||ee),se.push(B=[])),q=!1,(L=ks.exec(ee))&&(q=L.shift(),B.push({value:q,type:L[0].replace(Y," ")}),ee=ee.slice(q.length));for(Z in o.filter)(L=Yt[Z].exec(ee))&&(!te[Z]||(L=te[Z](L)))&&(q=L.shift(),B.push({value:q,type:Z,matches:L}),ee=ee.slice(q.length));if(!q)break}return R?ee.length:ee?Ee.error(x):xe(x,se).slice(0)}function pi(x){for(var R=0,q=x.length,L="";R<q;R++)L+=x[R].value;return L}function mi(x,R,q){var L=R.dir,B=R.next,Z=B||L,ee=q&&Z==="parentNode",se=G++;return R.first?function(te,be,le){for(;te=te[L];)if(te.nodeType===1||ee)return x(te,be,le);return!1}:function(te,be,le){var me,we,ce=[V,se];if(le){for(;te=te[L];)if((te.nodeType===1||ee)&&x(te,be,le))return!0}else for(;te=te[L];)if(te.nodeType===1||ee)if(we=te[K]||(te[K]={}),B&&j(te,B))te=te[L]||te;else{if((me=we[Z])&&me[0]===V&&me[1]===se)return ce[2]=me[2];if(we[Z]=ce,ce[2]=x(te,be,le))return!0}return!1}}function xr(x){return x.length>1?function(R,q,L){for(var B=x.length;B--;)if(!x[B](R,q,L))return!1;return!0}:x[0]}function ku(x,R,q){for(var L=0,B=R.length;L<B;L++)Ee(x,R[L],q);return q}function gi(x,R,q,L,B){for(var Z,ee=[],se=0,te=x.length,be=R!=null;se<te;se++)(Z=x[se])&&(!q||q(Z,L,B))&&(ee.push(Z),be&&R.push(se));return ee}function Sr(x,R,q,L,B,Z){return L&&!L[K]&&(L=Sr(L)),B&&!B[K]&&(B=Sr(B,Z)),Vt(function(ee,se,te,be){var le,me,we,ce,Pe=[],yt=[],lt=se.length,Dt=ee||ku(R||"*",te.nodeType?[te]:te,[]),Qt=x&&(ee||!R)?gi(Dt,Pe,x,te,be):Dt;if(q?(ce=B||(ee?x:lt||L)?[]:se,q(Qt,ce,te,be)):ce=Qt,L)for(le=gi(ce,yt),L(le,[],te,be),me=le.length;me--;)(we=le[me])&&(ce[yt[me]]=!(Qt[yt[me]]=we));if(ee){if(B||x){if(B){for(le=[],me=ce.length;me--;)(we=ce[me])&&le.push(Qt[me]=we);B(null,ce=[],le,be)}for(me=ce.length;me--;)(we=ce[me])&&(le=B?d.call(ee,we):Pe[me])>-1&&(ee[le]=!(se[le]=we))}}else ce=gi(ce===se?ce.splice(lt,ce.length):ce),B?B(null,se,ce,be):g.apply(se,ce)})}function Ar(x){for(var R,q,L,B=x.length,Z=o.relative[x[0].type],ee=Z||o.relative[" "],se=Z?1:0,te=mi(function(me){return me===R},ee,!0),be=mi(function(me){return d.call(R,me)>-1},ee,!0),le=[function(me,we,ce){var Pe=!Z&&(ce||we!=u)||((R=we).nodeType?te(me,we,ce):be(me,we,ce));return R=null,Pe}];se<B;se++)if(q=o.relative[x[se].type])le=[mi(xr(le),q)];else{if(q=o.filter[x[se].type].apply(null,x[se].matches),q[K]){for(L=++se;L<B&&!o.relative[x[L].type];L++);return Sr(se>1&&xr(le),se>1&&pi(x.slice(0,se-1).concat({value:x[se-2].type===" "?"*":""})).replace(Y,"$1"),q,se<L&&Ar(x.slice(se,L)),L<B&&Ar(x=x.slice(L)),L<B&&pi(x))}le.push(q)}return xr(le)}function Nu(x,R){var q=R.length>0,L=x.length>0,B=function(Z,ee,se,te,be){var le,me,we,ce=0,Pe="0",yt=Z&&[],lt=[],Dt=u,Qt=Z||L&&o.find.TAG("*",be),ns=V+=Dt==null?1:Math.random()||.1,ft=Qt.length;for(be&&(u=ee==_||ee||be);Pe!==ft&&(le=Qt[Pe])!=null;Pe++){if(L&&le){for(me=0,!ee&&le.ownerDocument!=_&&(Tn(le),se=!M);we=x[me++];)if(we(le,ee||_,se)){g.call(te,le);break}be&&(V=ns)}q&&((le=!we&&le)&&ce--,Z&&yt.push(le))}if(ce+=Pe,q&&Pe!==ce){for(me=0;we=R[me++];)we(yt,lt,ee,se);if(Z){if(ce>0)for(;Pe--;)yt[Pe]||lt[Pe]||(lt[Pe]=U.call(te));lt=gi(lt)}g.apply(te,lt),be&&!Z&&lt.length>0&&ce+R.length>1&&c.uniqueSort(te)}return be&&(V=ns,u=Dt),yt};return q?Vt(B):B}function kr(x,R){var q,L=[],B=[],Z=_e[x+" "];if(!Z){for(R||(R=Ms(x)),q=R.length;q--;)Z=Ar(R[q]),Z[K]?L.push(Z):B.push(Z);Z=_e(x,Nu(B,L)),Z.selector=x}return Z}function Qo(x,R,q,L){var B,Z,ee,se,te,be=typeof x=="function"&&x,le=!L&&Ms(x=be.selector||x);if(q=q||[],le.length===1){if(Z=le[0]=le[0].slice(0),Z.length>2&&(ee=Z[0]).type==="ID"&&R.nodeType===9&&M&&o.relative[Z[1].type]){if(R=(o.find.ID(ee.matches[0].replace(cn,un),R)||[])[0],R)be&&(R=R.parentNode);else return q;x=x.slice(Z.shift().value.length)}for(B=Yt.needsContext.test(x)?0:Z.length;B--&&(ee=Z[B],!o.relative[se=ee.type]);)if((te=o.find[se])&&(L=te(ee.matches[0].replace(cn,un),Tr.test(Z[0].type)&&Cr(R.parentNode)||R))){if(Z.splice(B,1),x=L.length&&pi(Z),!x)return g.apply(q,L),q;break}}return(be||kr(x,le))(L,R,!M,q,!R||Tr.test(x)&&Cr(R.parentNode)||R),q}C.sortStable=K.split("").sort(Qe).join("")===K,Tn(),C.sortDetached=ts(function(x){return x.compareDocumentPosition(_.createElement("fieldset"))&1}),c.find=Ee,c.expr[":"]=c.expr.pseudos,c.unique=c.uniqueSort,Ee.compile=kr,Ee.select=Qo,Ee.setDocument=Tn,Ee.tokenize=Ms,Ee.escape=c.escapeSelector,Ee.getText=c.text,Ee.isXML=c.isXMLDoc,Ee.selectors=c.expr,Ee.support=c.support,Ee.uniqueSort=c.uniqueSort})();var ie=function(s,o,u){for(var l=[],m=u!==void 0;(s=s[o])&&s.nodeType!==9;)if(s.nodeType===1){if(m&&c(s).is(u))break;l.push(s)}return l},fe=function(s,o){for(var u=[];s;s=s.nextSibling)s.nodeType===1&&s!==o&&u.push(s);return u},he=c.expr.match.needsContext,Me=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function it(s,o,u){return k(o)?c.grep(s,function(l,m){return!!o.call(l,m,l)!==u}):o.nodeType?c.grep(s,function(l){return l===o!==u}):typeof o!="string"?c.grep(s,function(l){return d.call(o,l)>-1!==u}):c.filter(o,s,u)}c.filter=function(s,o,u){var l=o[0];return u&&(s=":not("+s+")"),o.length===1&&l.nodeType===1?c.find.matchesSelector(l,s)?[l]:[]:c.find.matches(s,c.grep(o,function(m){return m.nodeType===1}))},c.fn.extend({find:function(s){var o,u,l=this.length,m=this;if(typeof s!="string")return this.pushStack(c(s).filter(function(){for(o=0;o<l;o++)if(c.contains(m[o],this))return!0}));for(u=this.pushStack([]),o=0;o<l;o++)c.find(s,m[o],u);return l>1?c.uniqueSort(u):u},filter:function(s){return this.pushStack(it(this,s||[],!1))},not:function(s){return this.pushStack(it(this,s||[],!0))},is:function(s){return!!it(this,typeof s=="string"&&he.test(s)?c(s):s||[],!1).length}});var ct,ye=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Re=c.fn.init=function(s,o,u){var l,m;if(!s)return this;if(u=u||ct,typeof s=="string")if(s[0]==="<"&&s[s.length-1]===">"&&s.length>=3?l=[null,s,null]:l=ye.exec(s),l&&(l[1]||!o))if(l[1]){if(o=o instanceof c?o[0]:o,c.merge(this,c.parseHTML(l[1],o&&o.nodeType?o.ownerDocument||o:v,!0)),Me.test(l[1])&&c.isPlainObject(o))for(l in o)k(this[l])?this[l](o[l]):this.attr(l,o[l]);return this}else return m=v.getElementById(l[2]),m&&(this[0]=m,this.length=1),this;else return!o||o.jquery?(o||u).find(s):this.constructor(o).find(s);else{if(s.nodeType)return this[0]=s,this.length=1,this;if(k(s))return u.ready!==void 0?u.ready(s):s(c)}return c.makeArray(s,this)};Re.prototype=c.fn,ct=c(v);var rt=/^(?:parents|prev(?:Until|All))/,ae={children:!0,contents:!0,next:!0,prev:!0};c.fn.extend({has:function(s){var o=c(s,this),u=o.length;return this.filter(function(){for(var l=0;l<u;l++)if(c.contains(this,o[l]))return!0})},closest:function(s,o){var u,l=0,m=this.length,g=[],_=typeof s!="string"&&c(s);if(!he.test(s)){for(;l<m;l++)for(u=this[l];u&&u!==o;u=u.parentNode)if(u.nodeType<11&&(_?_.index(u)>-1:u.nodeType===1&&c.find.matchesSelector(u,s))){g.push(u);break}}return this.pushStack(g.length>1?c.uniqueSort(g):g)},index:function(s){return s?typeof s=="string"?d.call(c(s),this[0]):d.call(this,s.jquery?s[0]:s):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(s,o){return this.pushStack(c.uniqueSort(c.merge(this.get(),c(s,o))))},addBack:function(s){return this.add(s==null?this.prevObject:this.prevObject.filter(s))}});function zt(s,o){for(;(s=s[o])&&s.nodeType!==1;);return s}c.each({parent:function(s){var o=s.parentNode;return o&&o.nodeType!==11?o:null},parents:function(s){return ie(s,"parentNode")},parentsUntil:function(s,o,u){return ie(s,"parentNode",u)},next:function(s){return zt(s,"nextSibling")},prev:function(s){return zt(s,"previousSibling")},nextAll:function(s){return ie(s,"nextSibling")},prevAll:function(s){return ie(s,"previousSibling")},nextUntil:function(s,o,u){return ie(s,"nextSibling",u)},prevUntil:function(s,o,u){return ie(s,"previousSibling",u)},siblings:function(s){return fe((s.parentNode||{}).firstChild,s)},children:function(s){return fe(s.firstChild)},contents:function(s){return s.contentDocument!=null&&r(s.contentDocument)?s.contentDocument:(j(s,"template")&&(s=s.content||s),c.merge([],s.childNodes))}},function(s,o){c.fn[s]=function(u,l){var m=c.map(this,o,u);return s.slice(-5)!=="Until"&&(l=u),l&&typeof l=="string"&&(m=c.filter(l,m)),this.length>1&&(ae[s]||c.uniqueSort(m),rt.test(s)&&m.reverse()),this.pushStack(m)}});var et=/[^\x20\t\r\n\f]+/g;function yn(s){var o={};return c.each(s.match(et)||[],function(u,l){o[l]=!0}),o}c.Callbacks=function(s){s=typeof s=="string"?yn(s):c.extend({},s);var o,u,l,m,g=[],_=[],E=-1,M=function(){for(m=m||s.once,l=o=!0;_.length;E=-1)for(u=_.shift();++E<g.length;)g[E].apply(u[0],u[1])===!1&&s.stopOnFalse&&(E=g.length,u=!1);s.memory||(u=!1),o=!1,m&&(u?g=[]:g="")},F={add:function(){return g&&(u&&!o&&(E=g.length-1,_.push(u)),function W(K){c.each(K,function(V,G){k(G)?(!s.unique||!F.has(G))&&g.push(G):G&&G.length&&A(G)!=="string"&&W(G)})}(arguments),u&&!o&&M()),this},remove:function(){return c.each(arguments,function(W,K){for(var V;(V=c.inArray(K,g,V))>-1;)g.splice(V,1),V<=E&&E--}),this},has:function(W){return W?c.inArray(W,g)>-1:g.length>0},empty:function(){return g&&(g=[]),this},disable:function(){return m=_=[],g=u="",this},disabled:function(){return!g},lock:function(){return m=_=[],!u&&!o&&(g=u=""),this},locked:function(){return!!m},fireWith:function(W,K){return m||(K=K||[],K=[W,K.slice?K.slice():K],_.push(K),o||M()),this},fire:function(){return F.fireWith(this,arguments),this},fired:function(){return!!l}};return F};function At(s){return s}function Gn(s){throw s}function ai(s,o,u,l){var m;try{s&&k(m=s.promise)?m.call(s).done(o).fail(u):s&&k(m=s.then)?m.call(s,o,u):o.apply(void 0,[s].slice(l))}catch(g){u.apply(void 0,[g])}}c.extend({Deferred:function(s){var o=[["notify","progress",c.Callbacks("memory"),c.Callbacks("memory"),2],["resolve","done",c.Callbacks("once memory"),c.Callbacks("once memory"),0,"resolved"],["reject","fail",c.Callbacks("once memory"),c.Callbacks("once memory"),1,"rejected"]],u="pending",l={state:function(){return u},always:function(){return m.done(arguments).fail(arguments),this},catch:function(g){return l.then(null,g)},pipe:function(){var g=arguments;return c.Deferred(function(_){c.each(o,function(E,M){var F=k(g[M[4]])&&g[M[4]];m[M[1]](function(){var W=F&&F.apply(this,arguments);W&&k(W.promise)?W.promise().progress(_.notify).done(_.resolve).fail(_.reject):_[M[0]+"With"](this,F?[W]:arguments)})}),g=null}).promise()},then:function(g,_,E){var M=0;function F(W,K,V,G){return function(){var de=this,xe=arguments,_e=function(){var Qe,Gt;if(!(W<M)){if(Qe=V.apply(de,xe),Qe===K.promise())throw new TypeError("Thenable self-resolution");Gt=Qe&&(typeof Qe=="object"||typeof Qe=="function")&&Qe.then,k(Gt)?G?Gt.call(Qe,F(M,K,At,G),F(M,K,Gn,G)):(M++,Gt.call(Qe,F(M,K,At,G),F(M,K,Gn,G),F(M,K,At,K.notifyWith))):(V!==At&&(de=void 0,xe=[Qe]),(G||K.resolveWith)(de,xe))}},ot=G?_e:function(){try{_e()}catch(Qe){c.Deferred.exceptionHook&&c.Deferred.exceptionHook(Qe,ot.error),W+1>=M&&(V!==Gn&&(de=void 0,xe=[Qe]),K.rejectWith(de,xe))}};W?ot():(c.Deferred.getErrorHook?ot.error=c.Deferred.getErrorHook():c.Deferred.getStackHook&&(ot.error=c.Deferred.getStackHook()),e.setTimeout(ot))}}return c.Deferred(function(W){o[0][3].add(F(0,W,k(E)?E:At,W.notifyWith)),o[1][3].add(F(0,W,k(g)?g:At)),o[2][3].add(F(0,W,k(_)?_:Gn))}).promise()},promise:function(g){return g!=null?c.extend(g,l):l}},m={};return c.each(o,function(g,_){var E=_[2],M=_[5];l[_[1]]=E.add,M&&E.add(function(){u=M},o[3-g][2].disable,o[3-g][3].disable,o[0][2].lock,o[0][3].lock),E.add(_[3].fire),m[_[0]]=function(){return m[_[0]+"With"](this===m?void 0:this,arguments),this},m[_[0]+"With"]=E.fireWith}),l.promise(m),s&&s.call(m,m),m},when:function(s){var o=arguments.length,u=o,l=Array(u),m=a.call(arguments),g=c.Deferred(),_=function(E){return function(M){l[E]=this,m[E]=arguments.length>1?a.call(arguments):M,--o||g.resolveWith(l,m)}};if(o<=1&&(ai(s,g.done(_(u)).resolve,g.reject,!o),g.state()==="pending"||k(m[u]&&m[u].then)))return g.then();for(;u--;)ai(m[u],_(u),g.reject);return g.promise()}});var ne=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;c.Deferred.exceptionHook=function(s,o){e.console&&e.console.warn&&s&&ne.test(s.name)&&e.console.warn("jQuery.Deferred exception: "+s.message,s.stack,o)},c.readyException=function(s){e.setTimeout(function(){throw s})};var ue=c.Deferred();c.fn.ready=function(s){return ue.then(s).catch(function(o){c.readyException(o)}),this},c.extend({isReady:!1,readyWait:1,ready:function(s){(s===!0?--c.readyWait:c.isReady)||(c.isReady=!0,!(s!==!0&&--c.readyWait>0)&&ue.resolveWith(v,[c]))}}),c.ready.then=ue.then;function je(){v.removeEventListener("DOMContentLoaded",je),e.removeEventListener("load",je),c.ready()}v.readyState==="complete"||v.readyState!=="loading"&&!v.documentElement.doScroll?e.setTimeout(c.ready):(v.addEventListener("DOMContentLoaded",je),e.addEventListener("load",je));var Se=function(s,o,u,l,m,g,_){var E=0,M=s.length,F=u==null;if(A(u)==="object"){m=!0;for(E in u)Se(s,o,E,u[E],!0,g,_)}else if(l!==void 0&&(m=!0,k(l)||(_=!0),F&&(_?(o.call(s,l),o=null):(F=o,o=function(W,K,V){return F.call(c(W),V)})),o))for(;E<M;E++)o(s[E],u,_?l:l.call(s[E],E,o(s[E],u)));return m?s:F?o.call(s):M?o(s[0],u):g},Ae=/^-ms-/,We=/-([a-z])/g;function gt(s,o){return o.toUpperCase()}function Ye(s){return s.replace(Ae,"ms-").replace(We,gt)}var Ft=function(s){return s.nodeType===1||s.nodeType===9||!+s.nodeType};function on(){this.expando=c.expando+on.uid++}on.uid=1,on.prototype={cache:function(s){var o=s[this.expando];return o||(o={},Ft(s)&&(s.nodeType?s[this.expando]=o:Object.defineProperty(s,this.expando,{value:o,configurable:!0}))),o},set:function(s,o,u){var l,m=this.cache(s);if(typeof o=="string")m[Ye(o)]=u;else for(l in o)m[Ye(l)]=o[l];return m},get:function(s,o){return o===void 0?this.cache(s):s[this.expando]&&s[this.expando][Ye(o)]},access:function(s,o,u){return o===void 0||o&&typeof o=="string"&&u===void 0?this.get(s,o):(this.set(s,o,u),u!==void 0?u:o)},remove:function(s,o){var u,l=s[this.expando];if(l!==void 0){if(o!==void 0)for(Array.isArray(o)?o=o.map(Ye):(o=Ye(o),o=o in l?[o]:o.match(et)||[]),u=o.length;u--;)delete l[o[u]];(o===void 0||c.isEmptyObject(l))&&(s.nodeType?s[this.expando]=void 0:delete s[this.expando])}},hasData:function(s){var o=s[this.expando];return o!==void 0&&!c.isEmptyObject(o)}};var re=new on,ut=new on,qc=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Vc=/[A-Z]/g;function Lc(s){return s==="true"?!0:s==="false"?!1:s==="null"?null:s===+s+""?+s:qc.test(s)?JSON.parse(s):s}function yo(s,o,u){var l;if(u===void 0&&s.nodeType===1)if(l="data-"+o.replace(Vc,"-$&").toLowerCase(),u=s.getAttribute(l),typeof u=="string"){try{u=Lc(u)}catch{}ut.set(s,o,u)}else u=void 0;return u}c.extend({hasData:function(s){return ut.hasData(s)||re.hasData(s)},data:function(s,o,u){return ut.access(s,o,u)},removeData:function(s,o){ut.remove(s,o)},_data:function(s,o,u){return re.access(s,o,u)},_removeData:function(s,o){re.remove(s,o)}}),c.fn.extend({data:function(s,o){var u,l,m,g=this[0],_=g&&g.attributes;if(s===void 0){if(this.length&&(m=ut.get(g),g.nodeType===1&&!re.get(g,"hasDataAttrs"))){for(u=_.length;u--;)_[u]&&(l=_[u].name,l.indexOf("data-")===0&&(l=Ye(l.slice(5)),yo(g,l,m[l])));re.set(g,"hasDataAttrs",!0)}return m}return typeof s=="object"?this.each(function(){ut.set(this,s)}):Se(this,function(E){var M;if(g&&E===void 0)return M=ut.get(g,s),M!==void 0||(M=yo(g,s),M!==void 0)?M:void 0;this.each(function(){ut.set(this,s,E)})},null,o,arguments.length>1,null,!0)},removeData:function(s){return this.each(function(){ut.remove(this,s)})}}),c.extend({queue:function(s,o,u){var l;if(s)return o=(o||"fx")+"queue",l=re.get(s,o),u&&(!l||Array.isArray(u)?l=re.access(s,o,c.makeArray(u)):l.push(u)),l||[]},dequeue:function(s,o){o=o||"fx";var u=c.queue(s,o),l=u.length,m=u.shift(),g=c._queueHooks(s,o),_=function(){c.dequeue(s,o)};m==="inprogress"&&(m=u.shift(),l--),m&&(o==="fx"&&u.unshift("inprogress"),delete g.stop,m.call(s,_,g)),!l&&g&&g.empty.fire()},_queueHooks:function(s,o){var u=o+"queueHooks";return re.get(s,u)||re.access(s,u,{empty:c.Callbacks("once memory").add(function(){re.remove(s,[o+"queue",u])})})}}),c.fn.extend({queue:function(s,o){var u=2;return typeof s!="string"&&(o=s,s="fx",u--),arguments.length<u?c.queue(this[0],s):o===void 0?this:this.each(function(){var l=c.queue(this,s,o);c._queueHooks(this,s),s==="fx"&&l[0]!=="inprogress"&&c.dequeue(this,s)})},dequeue:function(s){return this.each(function(){c.dequeue(this,s)})},clearQueue:function(s){return this.queue(s||"fx",[])},promise:function(s,o){var u,l=1,m=c.Deferred(),g=this,_=this.length,E=function(){--l||m.resolveWith(g,[g])};for(typeof s!="string"&&(o=s,s=void 0),s=s||"fx";_--;)u=re.get(g[_],s+"queueHooks"),u&&u.empty&&(l++,u.empty.add(E));return E(),m.promise(o)}});var bo=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ws=new RegExp("^(?:([+-])=|)("+bo+")([a-z%]*)$","i"),an=["Top","Right","Bottom","Left"],Dn=v.documentElement,Xn=function(s){return c.contains(s.ownerDocument,s)},jc={composed:!0};Dn.getRootNode&&(Xn=function(s){return c.contains(s.ownerDocument,s)||s.getRootNode(jc)===s.ownerDocument});var ci=function(s,o){return s=o||s,s.style.display==="none"||s.style.display===""&&Xn(s)&&c.css(s,"display")==="none"};function wo(s,o,u,l){var m,g,_=20,E=l?function(){return l.cur()}:function(){return c.css(s,o,"")},M=E(),F=u&&u[3]||(c.cssNumber[o]?"":"px"),W=s.nodeType&&(c.cssNumber[o]||F!=="px"&&+M)&&ws.exec(c.css(s,o));if(W&&W[3]!==F){for(M=M/2,F=F||W[3],W=+M||1;_--;)c.style(s,o,W+F),(1-g)*(1-(g=E()/M||.5))<=0&&(_=0),W=W/g;W=W*2,c.style(s,o,W+F),u=u||[]}return u&&(W=+W||+M||0,m=u[1]?W+(u[1]+1)*u[2]:+u[2],l&&(l.unit=F,l.start=W,l.end=m)),m}var To={};function Wc(s){var o,u=s.ownerDocument,l=s.nodeName,m=To[l];return m||(o=u.body.appendChild(u.createElement(l)),m=c.css(o,"display"),o.parentNode.removeChild(o),m==="none"&&(m="block"),To[l]=m,m)}function Zn(s,o){for(var u,l,m=[],g=0,_=s.length;g<_;g++)l=s[g],l.style&&(u=l.style.display,o?(u==="none"&&(m[g]=re.get(l,"display")||null,m[g]||(l.style.display="")),l.style.display===""&&ci(l)&&(m[g]=Wc(l))):u!=="none"&&(m[g]="none",re.set(l,"display",u)));for(g=0;g<_;g++)m[g]!=null&&(s[g].style.display=m[g]);return s}c.fn.extend({show:function(){return Zn(this,!0)},hide:function(){return Zn(this)},toggle:function(s){return typeof s=="boolean"?s?this.show():this.hide():this.each(function(){ci(this)?c(this).show():c(this).hide()})}});var Ts=/^(?:checkbox|radio)$/i,Co=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,xo=/^$|^module$|\/(?:java|ecma)script/i;(function(){var s=v.createDocumentFragment(),o=s.appendChild(v.createElement("div")),u=v.createElement("input");u.setAttribute("type","radio"),u.setAttribute("checked","checked"),u.setAttribute("name","t"),o.appendChild(u),C.checkClone=o.cloneNode(!0).cloneNode(!0).lastChild.checked,o.innerHTML="<textarea>x</textarea>",C.noCloneChecked=!!o.cloneNode(!0).lastChild.defaultValue,o.innerHTML="<option></option>",C.option=!!o.lastChild})();var Et={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Et.tbody=Et.tfoot=Et.colgroup=Et.caption=Et.thead,Et.th=Et.td,C.option||(Et.optgroup=Et.option=[1,"<select multiple='multiple'>","</select>"]);function vt(s,o){var u;return typeof s.getElementsByTagName<"u"?u=s.getElementsByTagName(o||"*"):typeof s.querySelectorAll<"u"?u=s.querySelectorAll(o||"*"):u=[],o===void 0||o&&j(s,o)?c.merge([s],u):u}function ar(s,o){for(var u=0,l=s.length;u<l;u++)re.set(s[u],"globalEval",!o||re.get(o[u],"globalEval"))}var Bc=/<|&#?\w+;/;function So(s,o,u,l,m){for(var g,_,E,M,F,W,K=o.createDocumentFragment(),V=[],G=0,de=s.length;G<de;G++)if(g=s[G],g||g===0)if(A(g)==="object")c.merge(V,g.nodeType?[g]:g);else if(!Bc.test(g))V.push(o.createTextNode(g));else{for(_=_||K.appendChild(o.createElement("div")),E=(Co.exec(g)||["",""])[1].toLowerCase(),M=Et[E]||Et._default,_.innerHTML=M[1]+c.htmlPrefilter(g)+M[2],W=M[0];W--;)_=_.lastChild;c.merge(V,_.childNodes),_=K.firstChild,_.textContent=""}for(K.textContent="",G=0;g=V[G++];){if(l&&c.inArray(g,l)>-1){m&&m.push(g);continue}if(F=Xn(g),_=vt(K.appendChild(g),"script"),F&&ar(_),u)for(W=0;g=_[W++];)xo.test(g.type||"")&&u.push(g)}return K}var Ao=/^([^.]*)(?:\.(.+)|)/;function Yn(){return!0}function Qn(){return!1}function cr(s,o,u,l,m,g){var _,E;if(typeof o=="object"){typeof u!="string"&&(l=l||u,u=void 0);for(E in o)cr(s,E,u,l,o[E],g);return s}if(l==null&&m==null?(m=u,l=u=void 0):m==null&&(typeof u=="string"?(m=l,l=void 0):(m=l,l=u,u=void 0)),m===!1)m=Qn;else if(!m)return s;return g===1&&(_=m,m=function(M){return c().off(M),_.apply(this,arguments)},m.guid=_.guid||(_.guid=c.guid++)),s.each(function(){c.event.add(this,o,m,l,u)})}c.event={global:{},add:function(s,o,u,l,m){var g,_,E,M,F,W,K,V,G,de,xe,_e=re.get(s);if(!!Ft(s))for(u.handler&&(g=u,u=g.handler,m=g.selector),m&&c.find.matchesSelector(Dn,m),u.guid||(u.guid=c.guid++),(M=_e.events)||(M=_e.events=Object.create(null)),(_=_e.handle)||(_=_e.handle=function(ot){return typeof c<"u"&&c.event.triggered!==ot.type?c.event.dispatch.apply(s,arguments):void 0}),o=(o||"").match(et)||[""],F=o.length;F--;)E=Ao.exec(o[F])||[],G=xe=E[1],de=(E[2]||"").split(".").sort(),G&&(K=c.event.special[G]||{},G=(m?K.delegateType:K.bindType)||G,K=c.event.special[G]||{},W=c.extend({type:G,origType:xe,data:l,handler:u,guid:u.guid,selector:m,needsContext:m&&c.expr.match.needsContext.test(m),namespace:de.join(".")},g),(V=M[G])||(V=M[G]=[],V.delegateCount=0,(!K.setup||K.setup.call(s,l,de,_)===!1)&&s.addEventListener&&s.addEventListener(G,_)),K.add&&(K.add.call(s,W),W.handler.guid||(W.handler.guid=u.guid)),m?V.splice(V.delegateCount++,0,W):V.push(W),c.event.global[G]=!0)},remove:function(s,o,u,l,m){var g,_,E,M,F,W,K,V,G,de,xe,_e=re.hasData(s)&&re.get(s);if(!(!_e||!(M=_e.events))){for(o=(o||"").match(et)||[""],F=o.length;F--;){if(E=Ao.exec(o[F])||[],G=xe=E[1],de=(E[2]||"").split(".").sort(),!G){for(G in M)c.event.remove(s,G+o[F],u,l,!0);continue}for(K=c.event.special[G]||{},G=(l?K.delegateType:K.bindType)||G,V=M[G]||[],E=E[2]&&new RegExp("(^|\\.)"+de.join("\\.(?:.*\\.|)")+"(\\.|$)"),_=g=V.length;g--;)W=V[g],(m||xe===W.origType)&&(!u||u.guid===W.guid)&&(!E||E.test(W.namespace))&&(!l||l===W.selector||l==="**"&&W.selector)&&(V.splice(g,1),W.selector&&V.delegateCount--,K.remove&&K.remove.call(s,W));_&&!V.length&&((!K.teardown||K.teardown.call(s,de,_e.handle)===!1)&&c.removeEvent(s,G,_e.handle),delete M[G])}c.isEmptyObject(M)&&re.remove(s,"handle events")}},dispatch:function(s){var o,u,l,m,g,_,E=new Array(arguments.length),M=c.event.fix(s),F=(re.get(this,"events")||Object.create(null))[M.type]||[],W=c.event.special[M.type]||{};for(E[0]=M,o=1;o<arguments.length;o++)E[o]=arguments[o];if(M.delegateTarget=this,!(W.preDispatch&&W.preDispatch.call(this,M)===!1)){for(_=c.event.handlers.call(this,M,F),o=0;(m=_[o++])&&!M.isPropagationStopped();)for(M.currentTarget=m.elem,u=0;(g=m.handlers[u++])&&!M.isImmediatePropagationStopped();)(!M.rnamespace||g.namespace===!1||M.rnamespace.test(g.namespace))&&(M.handleObj=g,M.data=g.data,l=((c.event.special[g.origType]||{}).handle||g.handler).apply(m.elem,E),l!==void 0&&(M.result=l)===!1&&(M.preventDefault(),M.stopPropagation()));return W.postDispatch&&W.postDispatch.call(this,M),M.result}},handlers:function(s,o){var u,l,m,g,_,E=[],M=o.delegateCount,F=s.target;if(M&&F.nodeType&&!(s.type==="click"&&s.button>=1)){for(;F!==this;F=F.parentNode||this)if(F.nodeType===1&&!(s.type==="click"&&F.disabled===!0)){for(g=[],_={},u=0;u<M;u++)l=o[u],m=l.selector+" ",_[m]===void 0&&(_[m]=l.needsContext?c(m,this).index(F)>-1:c.find(m,this,null,[F]).length),_[m]&&g.push(l);g.length&&E.push({elem:F,handlers:g})}}return F=this,M<o.length&&E.push({elem:F,handlers:o.slice(M)}),E},addProp:function(s,o){Object.defineProperty(c.Event.prototype,s,{enumerable:!0,configurable:!0,get:k(o)?function(){if(this.originalEvent)return o(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[s]},set:function(u){Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:u})}})},fix:function(s){return s[c.expando]?s:new c.Event(s)},special:{load:{noBubble:!0},click:{setup:function(s){var o=this||s;return Ts.test(o.type)&&o.click&&j(o,"input")&&ui(o,"click",!0),!1},trigger:function(s){var o=this||s;return Ts.test(o.type)&&o.click&&j(o,"input")&&ui(o,"click"),!0},_default:function(s){var o=s.target;return Ts.test(o.type)&&o.click&&j(o,"input")&&re.get(o,"click")||j(o,"a")}},beforeunload:{postDispatch:function(s){s.result!==void 0&&s.originalEvent&&(s.originalEvent.returnValue=s.result)}}}};function ui(s,o,u){if(!u){re.get(s,o)===void 0&&c.event.add(s,o,Yn);return}re.set(s,o,!1),c.event.add(s,o,{namespace:!1,handler:function(l){var m,g=re.get(this,o);if(l.isTrigger&1&&this[o]){if(g)(c.event.special[o]||{}).delegateType&&l.stopPropagation();else if(g=a.call(arguments),re.set(this,o,g),this[o](),m=re.get(this,o),re.set(this,o,!1),g!==m)return l.stopImmediatePropagation(),l.preventDefault(),m}else g&&(re.set(this,o,c.event.trigger(g[0],g.slice(1),this)),l.stopPropagation(),l.isImmediatePropagationStopped=Yn)}})}c.removeEvent=function(s,o,u){s.removeEventListener&&s.removeEventListener(o,u)},c.Event=function(s,o){if(!(this instanceof c.Event))return new c.Event(s,o);s&&s.type?(this.originalEvent=s,this.type=s.type,this.isDefaultPrevented=s.defaultPrevented||s.defaultPrevented===void 0&&s.returnValue===!1?Yn:Qn,this.target=s.target&&s.target.nodeType===3?s.target.parentNode:s.target,this.currentTarget=s.currentTarget,this.relatedTarget=s.relatedTarget):this.type=s,o&&c.extend(this,o),this.timeStamp=s&&s.timeStamp||Date.now(),this[c.expando]=!0},c.Event.prototype={constructor:c.Event,isDefaultPrevented:Qn,isPropagationStopped:Qn,isImmediatePropagationStopped:Qn,isSimulated:!1,preventDefault:function(){var s=this.originalEvent;this.isDefaultPrevented=Yn,s&&!this.isSimulated&&s.preventDefault()},stopPropagation:function(){var s=this.originalEvent;this.isPropagationStopped=Yn,s&&!this.isSimulated&&s.stopPropagation()},stopImmediatePropagation:function(){var s=this.originalEvent;this.isImmediatePropagationStopped=Yn,s&&!this.isSimulated&&s.stopImmediatePropagation(),this.stopPropagation()}},c.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},c.event.addProp),c.each({focus:"focusin",blur:"focusout"},function(s,o){function u(l){if(v.documentMode){var m=re.get(this,"handle"),g=c.event.fix(l);g.type=l.type==="focusin"?"focus":"blur",g.isSimulated=!0,m(l),g.target===g.currentTarget&&m(g)}else c.event.simulate(o,l.target,c.event.fix(l))}c.event.special[s]={setup:function(){var l;if(ui(this,s,!0),v.documentMode)l=re.get(this,o),l||this.addEventListener(o,u),re.set(this,o,(l||0)+1);else return!1},trigger:function(){return ui(this,s),!0},teardown:function(){var l;if(v.documentMode)l=re.get(this,o)-1,l?re.set(this,o,l):(this.removeEventListener(o,u),re.remove(this,o));else return!1},_default:function(l){return re.get(l.target,s)},delegateType:o},c.event.special[o]={setup:function(){var l=this.ownerDocument||this.document||this,m=v.documentMode?this:l,g=re.get(m,o);g||(v.documentMode?this.addEventListener(o,u):l.addEventListener(s,u,!0)),re.set(m,o,(g||0)+1)},teardown:function(){var l=this.ownerDocument||this.document||this,m=v.documentMode?this:l,g=re.get(m,o)-1;g?re.set(m,o,g):(v.documentMode?this.removeEventListener(o,u):l.removeEventListener(s,u,!0),re.remove(m,o))}}}),c.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(s,o){c.event.special[s]={delegateType:o,bindType:o,handle:function(u){var l,m=this,g=u.relatedTarget,_=u.handleObj;return(!g||g!==m&&!c.contains(m,g))&&(u.type=_.origType,l=_.handler.apply(this,arguments),u.type=o),l}}}),c.fn.extend({on:function(s,o,u,l){return cr(this,s,o,u,l)},one:function(s,o,u,l){return cr(this,s,o,u,l,1)},off:function(s,o,u){var l,m;if(s&&s.preventDefault&&s.handleObj)return l=s.handleObj,c(s.delegateTarget).off(l.namespace?l.origType+"."+l.namespace:l.origType,l.selector,l.handler),this;if(typeof s=="object"){for(m in s)this.off(m,o,s[m]);return this}return(o===!1||typeof o=="function")&&(u=o,o=void 0),u===!1&&(u=Qn),this.each(function(){c.event.remove(this,s,u,o)})}});var Kc=/<script|<style|<link/i,Uc=/checked\s*(?:[^=]|=\s*.checked.)/i,Hc=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function ko(s,o){return j(s,"table")&&j(o.nodeType!==11?o:o.firstChild,"tr")&&c(s).children("tbody")[0]||s}function $c(s){return s.type=(s.getAttribute("type")!==null)+"/"+s.type,s}function zc(s){return(s.type||"").slice(0,5)==="true/"?s.type=s.type.slice(5):s.removeAttribute("type"),s}function No(s,o){var u,l,m,g,_,E,M;if(o.nodeType===1){if(re.hasData(s)&&(g=re.get(s),M=g.events,M)){re.remove(o,"handle events");for(m in M)for(u=0,l=M[m].length;u<l;u++)c.event.add(o,m,M[m][u])}ut.hasData(s)&&(_=ut.access(s),E=c.extend({},_),ut.set(o,E))}}function Gc(s,o){var u=o.nodeName.toLowerCase();u==="input"&&Ts.test(s.type)?o.checked=s.checked:(u==="input"||u==="textarea")&&(o.defaultValue=s.defaultValue)}function Jn(s,o,u,l){o=h(o);var m,g,_,E,M,F,W=0,K=s.length,V=K-1,G=o[0],de=k(G);if(de||K>1&&typeof G=="string"&&!C.checkClone&&Uc.test(G))return s.each(function(xe){var _e=s.eq(xe);de&&(o[0]=G.call(this,xe,_e.html())),Jn(_e,o,u,l)});if(K&&(m=So(o,s[0].ownerDocument,!1,s,l),g=m.firstChild,m.childNodes.length===1&&(m=g),g||l)){for(_=c.map(vt(m,"script"),$c),E=_.length;W<K;W++)M=m,W!==V&&(M=c.clone(M,!0,!0),E&&c.merge(_,vt(M,"script"))),u.call(s[W],M,W);if(E)for(F=_[_.length-1].ownerDocument,c.map(_,zc),W=0;W<E;W++)M=_[W],xo.test(M.type||"")&&!re.access(M,"globalEval")&&c.contains(F,M)&&(M.src&&(M.type||"").toLowerCase()!=="module"?c._evalUrl&&!M.noModule&&c._evalUrl(M.src,{nonce:M.nonce||M.getAttribute("nonce")},F):T(M.textContent.replace(Hc,""),M,F))}return s}function Mo(s,o,u){for(var l,m=o?c.filter(o,s):s,g=0;(l=m[g])!=null;g++)!u&&l.nodeType===1&&c.cleanData(vt(l)),l.parentNode&&(u&&Xn(l)&&ar(vt(l,"script")),l.parentNode.removeChild(l));return s}c.extend({htmlPrefilter:function(s){return s},clone:function(s,o,u){var l,m,g,_,E=s.cloneNode(!0),M=Xn(s);if(!C.noCloneChecked&&(s.nodeType===1||s.nodeType===11)&&!c.isXMLDoc(s))for(_=vt(E),g=vt(s),l=0,m=g.length;l<m;l++)Gc(g[l],_[l]);if(o)if(u)for(g=g||vt(s),_=_||vt(E),l=0,m=g.length;l<m;l++)No(g[l],_[l]);else No(s,E);return _=vt(E,"script"),_.length>0&&ar(_,!M&&vt(s,"script")),E},cleanData:function(s){for(var o,u,l,m=c.event.special,g=0;(u=s[g])!==void 0;g++)if(Ft(u)){if(o=u[re.expando]){if(o.events)for(l in o.events)m[l]?c.event.remove(u,l):c.removeEvent(u,l,o.handle);u[re.expando]=void 0}u[ut.expando]&&(u[ut.expando]=void 0)}}}),c.fn.extend({detach:function(s){return Mo(this,s,!0)},remove:function(s){return Mo(this,s)},text:function(s){return Se(this,function(o){return o===void 0?c.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=o)})},null,s,arguments.length)},append:function(){return Jn(this,arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var o=ko(this,s);o.appendChild(s)}})},prepend:function(){return Jn(this,arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var o=ko(this,s);o.insertBefore(s,o.firstChild)}})},before:function(){return Jn(this,arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this)})},after:function(){return Jn(this,arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this.nextSibling)})},empty:function(){for(var s,o=0;(s=this[o])!=null;o++)s.nodeType===1&&(c.cleanData(vt(s,!1)),s.textContent="");return this},clone:function(s,o){return s=s==null?!1:s,o=o==null?s:o,this.map(function(){return c.clone(this,s,o)})},html:function(s){return Se(this,function(o){var u=this[0]||{},l=0,m=this.length;if(o===void 0&&u.nodeType===1)return u.innerHTML;if(typeof o=="string"&&!Kc.test(o)&&!Et[(Co.exec(o)||["",""])[1].toLowerCase()]){o=c.htmlPrefilter(o);try{for(;l<m;l++)u=this[l]||{},u.nodeType===1&&(c.cleanData(vt(u,!1)),u.innerHTML=o);u=0}catch{}}u&&this.empty().append(o)},null,s,arguments.length)},replaceWith:function(){var s=[];return Jn(this,arguments,function(o){var u=this.parentNode;c.inArray(this,s)<0&&(c.cleanData(vt(this)),u&&u.replaceChild(o,this))},s)}}),c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(s,o){c.fn[s]=function(u){for(var l,m=[],g=c(u),_=g.length-1,E=0;E<=_;E++)l=E===_?this:this.clone(!0),c(g[E])[o](l),f.apply(m,l.get());return this.pushStack(m)}});var ur=new RegExp("^("+bo+")(?!px)[a-z%]+$","i"),lr=/^--/,li=function(s){var o=s.ownerDocument.defaultView;return(!o||!o.opener)&&(o=e),o.getComputedStyle(s)},Eo=function(s,o,u){var l,m,g={};for(m in o)g[m]=s.style[m],s.style[m]=o[m];l=u.call(s);for(m in o)s.style[m]=g[m];return l},Xc=new RegExp(an.join("|"),"i");(function(){function s(){if(!!F){M.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",F.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Dn.appendChild(M).appendChild(F);var W=e.getComputedStyle(F);u=W.top!=="1%",E=o(W.marginLeft)===12,F.style.right="60%",g=o(W.right)===36,l=o(W.width)===36,F.style.position="absolute",m=o(F.offsetWidth/3)===12,Dn.removeChild(M),F=null}}function o(W){return Math.round(parseFloat(W))}var u,l,m,g,_,E,M=v.createElement("div"),F=v.createElement("div");!F.style||(F.style.backgroundClip="content-box",F.cloneNode(!0).style.backgroundClip="",C.clearCloneStyle=F.style.backgroundClip==="content-box",c.extend(C,{boxSizingReliable:function(){return s(),l},pixelBoxStyles:function(){return s(),g},pixelPosition:function(){return s(),u},reliableMarginLeft:function(){return s(),E},scrollboxSize:function(){return s(),m},reliableTrDimensions:function(){var W,K,V,G;return _==null&&(W=v.createElement("table"),K=v.createElement("tr"),V=v.createElement("div"),W.style.cssText="position:absolute;left:-11111px;border-collapse:separate",K.style.cssText="box-sizing:content-box;border:1px solid",K.style.height="1px",V.style.height="9px",V.style.display="block",Dn.appendChild(W).appendChild(K).appendChild(V),G=e.getComputedStyle(K),_=parseInt(G.height,10)+parseInt(G.borderTopWidth,10)+parseInt(G.borderBottomWidth,10)===K.offsetHeight,Dn.removeChild(W)),_}}))})();function Cs(s,o,u){var l,m,g,_,E=lr.test(o),M=s.style;return u=u||li(s),u&&(_=u.getPropertyValue(o)||u[o],E&&_&&(_=_.replace(Y,"$1")||void 0),_===""&&!Xn(s)&&(_=c.style(s,o)),!C.pixelBoxStyles()&&ur.test(_)&&Xc.test(o)&&(l=M.width,m=M.minWidth,g=M.maxWidth,M.minWidth=M.maxWidth=M.width=_,_=u.width,M.width=l,M.minWidth=m,M.maxWidth=g)),_!==void 0?_+"":_}function Oo(s,o){return{get:function(){if(s()){delete this.get;return}return(this.get=o).apply(this,arguments)}}}var Do=["Webkit","Moz","ms"],Io=v.createElement("div").style,Ro={};function Zc(s){for(var o=s[0].toUpperCase()+s.slice(1),u=Do.length;u--;)if(s=Do[u]+o,s in Io)return s}function hr(s){var o=c.cssProps[s]||Ro[s];return o||(s in Io?s:Ro[s]=Zc(s)||s)}var Yc=/^(none|table(?!-c[ea]).+)/,Qc={position:"absolute",visibility:"hidden",display:"block"},Po={letterSpacing:"0",fontWeight:"400"};function Fo(s,o,u){var l=ws.exec(o);return l?Math.max(0,l[2]-(u||0))+(l[3]||"px"):o}function fr(s,o,u,l,m,g){var _=o==="width"?1:0,E=0,M=0,F=0;if(u===(l?"border":"content"))return 0;for(;_<4;_+=2)u==="margin"&&(F+=c.css(s,u+an[_],!0,m)),l?(u==="content"&&(M-=c.css(s,"padding"+an[_],!0,m)),u!=="margin"&&(M-=c.css(s,"border"+an[_]+"Width",!0,m))):(M+=c.css(s,"padding"+an[_],!0,m),u!=="padding"?M+=c.css(s,"border"+an[_]+"Width",!0,m):E+=c.css(s,"border"+an[_]+"Width",!0,m));return!l&&g>=0&&(M+=Math.max(0,Math.ceil(s["offset"+o[0].toUpperCase()+o.slice(1)]-g-M-E-.5))||0),M+F}function qo(s,o,u){var l=li(s),m=!C.boxSizingReliable()||u,g=m&&c.css(s,"boxSizing",!1,l)==="border-box",_=g,E=Cs(s,o,l),M="offset"+o[0].toUpperCase()+o.slice(1);if(ur.test(E)){if(!u)return E;E="auto"}return(!C.boxSizingReliable()&&g||!C.reliableTrDimensions()&&j(s,"tr")||E==="auto"||!parseFloat(E)&&c.css(s,"display",!1,l)==="inline")&&s.getClientRects().length&&(g=c.css(s,"boxSizing",!1,l)==="border-box",_=M in s,_&&(E=s[M])),E=parseFloat(E)||0,E+fr(s,o,u||(g?"border":"content"),_,l,E)+"px"}c.extend({cssHooks:{opacity:{get:function(s,o){if(o){var u=Cs(s,"opacity");return u===""?"1":u}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(s,o,u,l){if(!(!s||s.nodeType===3||s.nodeType===8||!s.style)){var m,g,_,E=Ye(o),M=lr.test(o),F=s.style;if(M||(o=hr(E)),_=c.cssHooks[o]||c.cssHooks[E],u!==void 0){if(g=typeof u,g==="string"&&(m=ws.exec(u))&&m[1]&&(u=wo(s,o,m),g="number"),u==null||u!==u)return;g==="number"&&!M&&(u+=m&&m[3]||(c.cssNumber[E]?"":"px")),!C.clearCloneStyle&&u===""&&o.indexOf("background")===0&&(F[o]="inherit"),(!_||!("set"in _)||(u=_.set(s,u,l))!==void 0)&&(M?F.setProperty(o,u):F[o]=u)}else return _&&"get"in _&&(m=_.get(s,!1,l))!==void 0?m:F[o]}},css:function(s,o,u,l){var m,g,_,E=Ye(o),M=lr.test(o);return M||(o=hr(E)),_=c.cssHooks[o]||c.cssHooks[E],_&&"get"in _&&(m=_.get(s,!0,u)),m===void 0&&(m=Cs(s,o,l)),m==="normal"&&o in Po&&(m=Po[o]),u===""||u?(g=parseFloat(m),u===!0||isFinite(g)?g||0:m):m}}),c.each(["height","width"],function(s,o){c.cssHooks[o]={get:function(u,l,m){if(l)return Yc.test(c.css(u,"display"))&&(!u.getClientRects().length||!u.getBoundingClientRect().width)?Eo(u,Qc,function(){return qo(u,o,m)}):qo(u,o,m)},set:function(u,l,m){var g,_=li(u),E=!C.scrollboxSize()&&_.position==="absolute",M=E||m,F=M&&c.css(u,"boxSizing",!1,_)==="border-box",W=m?fr(u,o,m,F,_):0;return F&&E&&(W-=Math.ceil(u["offset"+o[0].toUpperCase()+o.slice(1)]-parseFloat(_[o])-fr(u,o,"border",!1,_)-.5)),W&&(g=ws.exec(l))&&(g[3]||"px")!=="px"&&(u.style[o]=l,l=c.css(u,o)),Fo(u,l,W)}}}),c.cssHooks.marginLeft=Oo(C.reliableMarginLeft,function(s,o){if(o)return(parseFloat(Cs(s,"marginLeft"))||s.getBoundingClientRect().left-Eo(s,{marginLeft:0},function(){return s.getBoundingClientRect().left}))+"px"}),c.each({margin:"",padding:"",border:"Width"},function(s,o){c.cssHooks[s+o]={expand:function(u){for(var l=0,m={},g=typeof u=="string"?u.split(" "):[u];l<4;l++)m[s+an[l]+o]=g[l]||g[l-2]||g[0];return m}},s!=="margin"&&(c.cssHooks[s+o].set=Fo)}),c.fn.extend({css:function(s,o){return Se(this,function(u,l,m){var g,_,E={},M=0;if(Array.isArray(l)){for(g=li(u),_=l.length;M<_;M++)E[l[M]]=c.css(u,l[M],!1,g);return E}return m!==void 0?c.style(u,l,m):c.css(u,l)},s,o,arguments.length>1)}});function _t(s,o,u,l,m){return new _t.prototype.init(s,o,u,l,m)}c.Tween=_t,_t.prototype={constructor:_t,init:function(s,o,u,l,m,g){this.elem=s,this.prop=u,this.easing=m||c.easing._default,this.options=o,this.start=this.now=this.cur(),this.end=l,this.unit=g||(c.cssNumber[u]?"":"px")},cur:function(){var s=_t.propHooks[this.prop];return s&&s.get?s.get(this):_t.propHooks._default.get(this)},run:function(s){var o,u=_t.propHooks[this.prop];return this.options.duration?this.pos=o=c.easing[this.easing](s,this.options.duration*s,0,1,this.options.duration):this.pos=o=s,this.now=(this.end-this.start)*o+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),u&&u.set?u.set(this):_t.propHooks._default.set(this),this}},_t.prototype.init.prototype=_t.prototype,_t.propHooks={_default:{get:function(s){var o;return s.elem.nodeType!==1||s.elem[s.prop]!=null&&s.elem.style[s.prop]==null?s.elem[s.prop]:(o=c.css(s.elem,s.prop,""),!o||o==="auto"?0:o)},set:function(s){c.fx.step[s.prop]?c.fx.step[s.prop](s):s.elem.nodeType===1&&(c.cssHooks[s.prop]||s.elem.style[hr(s.prop)]!=null)?c.style(s.elem,s.prop,s.now+s.unit):s.elem[s.prop]=s.now}}},_t.propHooks.scrollTop=_t.propHooks.scrollLeft={set:function(s){s.elem.nodeType&&s.elem.parentNode&&(s.elem[s.prop]=s.now)}},c.easing={linear:function(s){return s},swing:function(s){return .5-Math.cos(s*Math.PI)/2},_default:"swing"},c.fx=_t.prototype.init,c.fx.step={};var es,hi,Jc=/^(?:toggle|show|hide)$/,eu=/queueHooks$/;function dr(){hi&&(v.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(dr):e.setTimeout(dr,c.fx.interval),c.fx.tick())}function Vo(){return e.setTimeout(function(){es=void 0}),es=Date.now()}function fi(s,o){var u,l=0,m={height:s};for(o=o?1:0;l<4;l+=2-o)u=an[l],m["margin"+u]=m["padding"+u]=s;return o&&(m.opacity=m.width=s),m}function Lo(s,o,u){for(var l,m=(qt.tweeners[o]||[]).concat(qt.tweeners["*"]),g=0,_=m.length;g<_;g++)if(l=m[g].call(u,o,s))return l}function tu(s,o,u){var l,m,g,_,E,M,F,W,K="width"in o||"height"in o,V=this,G={},de=s.style,xe=s.nodeType&&ci(s),_e=re.get(s,"fxshow");u.queue||(_=c._queueHooks(s,"fx"),_.unqueued==null&&(_.unqueued=0,E=_.empty.fire,_.empty.fire=function(){_.unqueued||E()}),_.unqueued++,V.always(function(){V.always(function(){_.unqueued--,c.queue(s,"fx").length||_.empty.fire()})}));for(l in o)if(m=o[l],Jc.test(m)){if(delete o[l],g=g||m==="toggle",m===(xe?"hide":"show"))if(m==="show"&&_e&&_e[l]!==void 0)xe=!0;else continue;G[l]=_e&&_e[l]||c.style(s,l)}if(M=!c.isEmptyObject(o),!(!M&&c.isEmptyObject(G))){K&&s.nodeType===1&&(u.overflow=[de.overflow,de.overflowX,de.overflowY],F=_e&&_e.display,F==null&&(F=re.get(s,"display")),W=c.css(s,"display"),W==="none"&&(F?W=F:(Zn([s],!0),F=s.style.display||F,W=c.css(s,"display"),Zn([s]))),(W==="inline"||W==="inline-block"&&F!=null)&&c.css(s,"float")==="none"&&(M||(V.done(function(){de.display=F}),F==null&&(W=de.display,F=W==="none"?"":W)),de.display="inline-block")),u.overflow&&(de.overflow="hidden",V.always(function(){de.overflow=u.overflow[0],de.overflowX=u.overflow[1],de.overflowY=u.overflow[2]})),M=!1;for(l in G)M||(_e?"hidden"in _e&&(xe=_e.hidden):_e=re.access(s,"fxshow",{display:F}),g&&(_e.hidden=!xe),xe&&Zn([s],!0),V.done(function(){xe||Zn([s]),re.remove(s,"fxshow");for(l in G)c.style(s,l,G[l])})),M=Lo(xe?_e[l]:0,l,V),l in _e||(_e[l]=M.start,xe&&(M.end=M.start,M.start=0))}}function nu(s,o){var u,l,m,g,_;for(u in s)if(l=Ye(u),m=o[l],g=s[u],Array.isArray(g)&&(m=g[1],g=s[u]=g[0]),u!==l&&(s[l]=g,delete s[u]),_=c.cssHooks[l],_&&"expand"in _){g=_.expand(g),delete s[l];for(u in g)u in s||(s[u]=g[u],o[u]=m)}else o[l]=m}function qt(s,o,u){var l,m,g=0,_=qt.prefilters.length,E=c.Deferred().always(function(){delete M.elem}),M=function(){if(m)return!1;for(var K=es||Vo(),V=Math.max(0,F.startTime+F.duration-K),G=V/F.duration||0,de=1-G,xe=0,_e=F.tweens.length;xe<_e;xe++)F.tweens[xe].run(de);return E.notifyWith(s,[F,de,V]),de<1&&_e?V:(_e||E.notifyWith(s,[F,1,0]),E.resolveWith(s,[F]),!1)},F=E.promise({elem:s,props:c.extend({},o),opts:c.extend(!0,{specialEasing:{},easing:c.easing._default},u),originalProperties:o,originalOptions:u,startTime:es||Vo(),duration:u.duration,tweens:[],createTween:function(K,V){var G=c.Tween(s,F.opts,K,V,F.opts.specialEasing[K]||F.opts.easing);return F.tweens.push(G),G},stop:function(K){var V=0,G=K?F.tweens.length:0;if(m)return this;for(m=!0;V<G;V++)F.tweens[V].run(1);return K?(E.notifyWith(s,[F,1,0]),E.resolveWith(s,[F,K])):E.rejectWith(s,[F,K]),this}}),W=F.props;for(nu(W,F.opts.specialEasing);g<_;g++)if(l=qt.prefilters[g].call(F,s,W,F.opts),l)return k(l.stop)&&(c._queueHooks(F.elem,F.opts.queue).stop=l.stop.bind(l)),l;return c.map(W,Lo,F),k(F.opts.start)&&F.opts.start.call(s,F),F.progress(F.opts.progress).done(F.opts.done,F.opts.complete).fail(F.opts.fail).always(F.opts.always),c.fx.timer(c.extend(M,{elem:s,anim:F,queue:F.opts.queue})),F}c.Animation=c.extend(qt,{tweeners:{"*":[function(s,o){var u=this.createTween(s,o);return wo(u.elem,s,ws.exec(o),u),u}]},tweener:function(s,o){k(s)?(o=s,s=["*"]):s=s.match(et);for(var u,l=0,m=s.length;l<m;l++)u=s[l],qt.tweeners[u]=qt.tweeners[u]||[],qt.tweeners[u].unshift(o)},prefilters:[tu],prefilter:function(s,o){o?qt.prefilters.unshift(s):qt.prefilters.push(s)}}),c.speed=function(s,o,u){var l=s&&typeof s=="object"?c.extend({},s):{complete:u||!u&&o||k(s)&&s,duration:s,easing:u&&o||o&&!k(o)&&o};return c.fx.off?l.duration=0:typeof l.duration!="number"&&(l.duration in c.fx.speeds?l.duration=c.fx.speeds[l.duration]:l.duration=c.fx.speeds._default),(l.queue==null||l.queue===!0)&&(l.queue="fx"),l.old=l.complete,l.complete=function(){k(l.old)&&l.old.call(this),l.queue&&c.dequeue(this,l.queue)},l},c.fn.extend({fadeTo:function(s,o,u,l){return this.filter(ci).css("opacity",0).show().end().animate({opacity:o},s,u,l)},animate:function(s,o,u,l){var m=c.isEmptyObject(s),g=c.speed(o,u,l),_=function(){var E=qt(this,c.extend({},s),g);(m||re.get(this,"finish"))&&E.stop(!0)};return _.finish=_,m||g.queue===!1?this.each(_):this.queue(g.queue,_)},stop:function(s,o,u){var l=function(m){var g=m.stop;delete m.stop,g(u)};return typeof s!="string"&&(u=o,o=s,s=void 0),o&&this.queue(s||"fx",[]),this.each(function(){var m=!0,g=s!=null&&s+"queueHooks",_=c.timers,E=re.get(this);if(g)E[g]&&E[g].stop&&l(E[g]);else for(g in E)E[g]&&E[g].stop&&eu.test(g)&&l(E[g]);for(g=_.length;g--;)_[g].elem===this&&(s==null||_[g].queue===s)&&(_[g].anim.stop(u),m=!1,_.splice(g,1));(m||!u)&&c.dequeue(this,s)})},finish:function(s){return s!==!1&&(s=s||"fx"),this.each(function(){var o,u=re.get(this),l=u[s+"queue"],m=u[s+"queueHooks"],g=c.timers,_=l?l.length:0;for(u.finish=!0,c.queue(this,s,[]),m&&m.stop&&m.stop.call(this,!0),o=g.length;o--;)g[o].elem===this&&g[o].queue===s&&(g[o].anim.stop(!0),g.splice(o,1));for(o=0;o<_;o++)l[o]&&l[o].finish&&l[o].finish.call(this);delete u.finish})}}),c.each(["toggle","show","hide"],function(s,o){var u=c.fn[o];c.fn[o]=function(l,m,g){return l==null||typeof l=="boolean"?u.apply(this,arguments):this.animate(fi(o,!0),l,m,g)}}),c.each({slideDown:fi("show"),slideUp:fi("hide"),slideToggle:fi("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(s,o){c.fn[s]=function(u,l,m){return this.animate(o,u,l,m)}}),c.timers=[],c.fx.tick=function(){var s,o=0,u=c.timers;for(es=Date.now();o<u.length;o++)s=u[o],!s()&&u[o]===s&&u.splice(o--,1);u.length||c.fx.stop(),es=void 0},c.fx.timer=function(s){c.timers.push(s),c.fx.start()},c.fx.interval=13,c.fx.start=function(){hi||(hi=!0,dr())},c.fx.stop=function(){hi=null},c.fx.speeds={slow:600,fast:200,_default:400},c.fn.delay=function(s,o){return s=c.fx&&c.fx.speeds[s]||s,o=o||"fx",this.queue(o,function(u,l){var m=e.setTimeout(u,s);l.stop=function(){e.clearTimeout(m)}})},function(){var s=v.createElement("input"),o=v.createElement("select"),u=o.appendChild(v.createElement("option"));s.type="checkbox",C.checkOn=s.value!=="",C.optSelected=u.selected,s=v.createElement("input"),s.value="t",s.type="radio",C.radioValue=s.value==="t"}();var jo,xs=c.expr.attrHandle;c.fn.extend({attr:function(s,o){return Se(this,c.attr,s,o,arguments.length>1)},removeAttr:function(s){return this.each(function(){c.removeAttr(this,s)})}}),c.extend({attr:function(s,o,u){var l,m,g=s.nodeType;if(!(g===3||g===8||g===2)){if(typeof s.getAttribute>"u")return c.prop(s,o,u);if((g!==1||!c.isXMLDoc(s))&&(m=c.attrHooks[o.toLowerCase()]||(c.expr.match.bool.test(o)?jo:void 0)),u!==void 0){if(u===null){c.removeAttr(s,o);return}return m&&"set"in m&&(l=m.set(s,u,o))!==void 0?l:(s.setAttribute(o,u+""),u)}return m&&"get"in m&&(l=m.get(s,o))!==null?l:(l=c.find.attr(s,o),l==null?void 0:l)}},attrHooks:{type:{set:function(s,o){if(!C.radioValue&&o==="radio"&&j(s,"input")){var u=s.value;return s.setAttribute("type",o),u&&(s.value=u),o}}}},removeAttr:function(s,o){var u,l=0,m=o&&o.match(et);if(m&&s.nodeType===1)for(;u=m[l++];)s.removeAttribute(u)}}),jo={set:function(s,o,u){return o===!1?c.removeAttr(s,u):s.setAttribute(u,u),u}},c.each(c.expr.match.bool.source.match(/\w+/g),function(s,o){var u=xs[o]||c.find.attr;xs[o]=function(l,m,g){var _,E,M=m.toLowerCase();return g||(E=xs[M],xs[M]=_,_=u(l,m,g)!=null?M:null,xs[M]=E),_}});var su=/^(?:input|select|textarea|button)$/i,iu=/^(?:a|area)$/i;c.fn.extend({prop:function(s,o){return Se(this,c.prop,s,o,arguments.length>1)},removeProp:function(s){return this.each(function(){delete this[c.propFix[s]||s]})}}),c.extend({prop:function(s,o,u){var l,m,g=s.nodeType;if(!(g===3||g===8||g===2))return(g!==1||!c.isXMLDoc(s))&&(o=c.propFix[o]||o,m=c.propHooks[o]),u!==void 0?m&&"set"in m&&(l=m.set(s,u,o))!==void 0?l:s[o]=u:m&&"get"in m&&(l=m.get(s,o))!==null?l:s[o]},propHooks:{tabIndex:{get:function(s){var o=c.find.attr(s,"tabindex");return o?parseInt(o,10):su.test(s.nodeName)||iu.test(s.nodeName)&&s.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),C.optSelected||(c.propHooks.selected={get:function(s){var o=s.parentNode;return o&&o.parentNode&&o.parentNode.selectedIndex,null},set:function(s){var o=s.parentNode;o&&(o.selectedIndex,o.parentNode&&o.parentNode.selectedIndex)}}),c.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){c.propFix[this.toLowerCase()]=this});function In(s){var o=s.match(et)||[];return o.join(" ")}function Rn(s){return s.getAttribute&&s.getAttribute("class")||""}function pr(s){return Array.isArray(s)?s:typeof s=="string"?s.match(et)||[]:[]}c.fn.extend({addClass:function(s){var o,u,l,m,g,_;return k(s)?this.each(function(E){c(this).addClass(s.call(this,E,Rn(this)))}):(o=pr(s),o.length?this.each(function(){if(l=Rn(this),u=this.nodeType===1&&" "+In(l)+" ",u){for(g=0;g<o.length;g++)m=o[g],u.indexOf(" "+m+" ")<0&&(u+=m+" ");_=In(u),l!==_&&this.setAttribute("class",_)}}):this)},removeClass:function(s){var o,u,l,m,g,_;return k(s)?this.each(function(E){c(this).removeClass(s.call(this,E,Rn(this)))}):arguments.length?(o=pr(s),o.length?this.each(function(){if(l=Rn(this),u=this.nodeType===1&&" "+In(l)+" ",u){for(g=0;g<o.length;g++)for(m=o[g];u.indexOf(" "+m+" ")>-1;)u=u.replace(" "+m+" "," ");_=In(u),l!==_&&this.setAttribute("class",_)}}):this):this.attr("class","")},toggleClass:function(s,o){var u,l,m,g,_=typeof s,E=_==="string"||Array.isArray(s);return k(s)?this.each(function(M){c(this).toggleClass(s.call(this,M,Rn(this),o),o)}):typeof o=="boolean"&&E?o?this.addClass(s):this.removeClass(s):(u=pr(s),this.each(function(){if(E)for(g=c(this),m=0;m<u.length;m++)l=u[m],g.hasClass(l)?g.removeClass(l):g.addClass(l);else(s===void 0||_==="boolean")&&(l=Rn(this),l&&re.set(this,"__className__",l),this.setAttribute&&this.setAttribute("class",l||s===!1?"":re.get(this,"__className__")||""))}))},hasClass:function(s){var o,u,l=0;for(o=" "+s+" ";u=this[l++];)if(u.nodeType===1&&(" "+In(Rn(u))+" ").indexOf(o)>-1)return!0;return!1}});var ru=/\r/g;c.fn.extend({val:function(s){var o,u,l,m=this[0];return arguments.length?(l=k(s),this.each(function(g){var _;this.nodeType===1&&(l?_=s.call(this,g,c(this).val()):_=s,_==null?_="":typeof _=="number"?_+="":Array.isArray(_)&&(_=c.map(_,function(E){return E==null?"":E+""})),o=c.valHooks[this.type]||c.valHooks[this.nodeName.toLowerCase()],(!o||!("set"in o)||o.set(this,_,"value")===void 0)&&(this.value=_))})):m?(o=c.valHooks[m.type]||c.valHooks[m.nodeName.toLowerCase()],o&&"get"in o&&(u=o.get(m,"value"))!==void 0?u:(u=m.value,typeof u=="string"?u.replace(ru,""):u==null?"":u)):void 0}}),c.extend({valHooks:{option:{get:function(s){var o=c.find.attr(s,"value");return o!=null?o:In(c.text(s))}},select:{get:function(s){var o,u,l,m=s.options,g=s.selectedIndex,_=s.type==="select-one",E=_?null:[],M=_?g+1:m.length;for(g<0?l=M:l=_?g:0;l<M;l++)if(u=m[l],(u.selected||l===g)&&!u.disabled&&(!u.parentNode.disabled||!j(u.parentNode,"optgroup"))){if(o=c(u).val(),_)return o;E.push(o)}return E},set:function(s,o){for(var u,l,m=s.options,g=c.makeArray(o),_=m.length;_--;)l=m[_],(l.selected=c.inArray(c.valHooks.option.get(l),g)>-1)&&(u=!0);return u||(s.selectedIndex=-1),g}}}}),c.each(["radio","checkbox"],function(){c.valHooks[this]={set:function(s,o){if(Array.isArray(o))return s.checked=c.inArray(c(s).val(),o)>-1}},C.checkOn||(c.valHooks[this].get=function(s){return s.getAttribute("value")===null?"on":s.value})});var Ss=e.location,Wo={guid:Date.now()},mr=/\?/;c.parseXML=function(s){var o,u;if(!s||typeof s!="string")return null;try{o=new e.DOMParser().parseFromString(s,"text/xml")}catch{}return u=o&&o.getElementsByTagName("parsererror")[0],(!o||u)&&c.error("Invalid XML: "+(u?c.map(u.childNodes,function(l){return l.textContent}).join(`
`):s)),o};var Bo=/^(?:focusinfocus|focusoutblur)$/,Ko=function(s){s.stopPropagation()};c.extend(c.event,{trigger:function(s,o,u,l){var m,g,_,E,M,F,W,K,V=[u||v],G=b.call(s,"type")?s.type:s,de=b.call(s,"namespace")?s.namespace.split("."):[];if(g=K=_=u=u||v,!(u.nodeType===3||u.nodeType===8)&&!Bo.test(G+c.event.triggered)&&(G.indexOf(".")>-1&&(de=G.split("."),G=de.shift(),de.sort()),M=G.indexOf(":")<0&&"on"+G,s=s[c.expando]?s:new c.Event(G,typeof s=="object"&&s),s.isTrigger=l?2:3,s.namespace=de.join("."),s.rnamespace=s.namespace?new RegExp("(^|\\.)"+de.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,s.result=void 0,s.target||(s.target=u),o=o==null?[s]:c.makeArray(o,[s]),W=c.event.special[G]||{},!(!l&&W.trigger&&W.trigger.apply(u,o)===!1))){if(!l&&!W.noBubble&&!I(u)){for(E=W.delegateType||G,Bo.test(E+G)||(g=g.parentNode);g;g=g.parentNode)V.push(g),_=g;_===(u.ownerDocument||v)&&V.push(_.defaultView||_.parentWindow||e)}for(m=0;(g=V[m++])&&!s.isPropagationStopped();)K=g,s.type=m>1?E:W.bindType||G,F=(re.get(g,"events")||Object.create(null))[s.type]&&re.get(g,"handle"),F&&F.apply(g,o),F=M&&g[M],F&&F.apply&&Ft(g)&&(s.result=F.apply(g,o),s.result===!1&&s.preventDefault());return s.type=G,!l&&!s.isDefaultPrevented()&&(!W._default||W._default.apply(V.pop(),o)===!1)&&Ft(u)&&M&&k(u[G])&&!I(u)&&(_=u[M],_&&(u[M]=null),c.event.triggered=G,s.isPropagationStopped()&&K.addEventListener(G,Ko),u[G](),s.isPropagationStopped()&&K.removeEventListener(G,Ko),c.event.triggered=void 0,_&&(u[M]=_)),s.result}},simulate:function(s,o,u){var l=c.extend(new c.Event,u,{type:s,isSimulated:!0});c.event.trigger(l,null,o)}}),c.fn.extend({trigger:function(s,o){return this.each(function(){c.event.trigger(s,o,this)})},triggerHandler:function(s,o){var u=this[0];if(u)return c.event.trigger(s,o,u,!0)}});var ou=/\[\]$/,Uo=/\r?\n/g,au=/^(?:submit|button|image|reset|file)$/i,cu=/^(?:input|select|textarea|keygen)/i;function gr(s,o,u,l){var m;if(Array.isArray(o))c.each(o,function(g,_){u||ou.test(s)?l(s,_):gr(s+"["+(typeof _=="object"&&_!=null?g:"")+"]",_,u,l)});else if(!u&&A(o)==="object")for(m in o)gr(s+"["+m+"]",o[m],u,l);else l(s,o)}c.param=function(s,o){var u,l=[],m=function(g,_){var E=k(_)?_():_;l[l.length]=encodeURIComponent(g)+"="+encodeURIComponent(E==null?"":E)};if(s==null)return"";if(Array.isArray(s)||s.jquery&&!c.isPlainObject(s))c.each(s,function(){m(this.name,this.value)});else for(u in s)gr(u,s[u],o,m);return l.join("&")},c.fn.extend({serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var s=c.prop(this,"elements");return s?c.makeArray(s):this}).filter(function(){var s=this.type;return this.name&&!c(this).is(":disabled")&&cu.test(this.nodeName)&&!au.test(s)&&(this.checked||!Ts.test(s))}).map(function(s,o){var u=c(this).val();return u==null?null:Array.isArray(u)?c.map(u,function(l){return{name:o.name,value:l.replace(Uo,`\r
`)}}):{name:o.name,value:u.replace(Uo,`\r
`)}}).get()}});var uu=/%20/g,lu=/#.*$/,hu=/([?&])_=[^&]*/,fu=/^(.*?):[ \t]*([^\r\n]*)$/mg,du=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,pu=/^(?:GET|HEAD)$/,mu=/^\/\//,Ho={},vr={},$o="*/".concat("*"),_r=v.createElement("a");_r.href=Ss.href;function zo(s){return function(o,u){typeof o!="string"&&(u=o,o="*");var l,m=0,g=o.toLowerCase().match(et)||[];if(k(u))for(;l=g[m++];)l[0]==="+"?(l=l.slice(1)||"*",(s[l]=s[l]||[]).unshift(u)):(s[l]=s[l]||[]).push(u)}}function Go(s,o,u,l){var m={},g=s===vr;function _(E){var M;return m[E]=!0,c.each(s[E]||[],function(F,W){var K=W(o,u,l);if(typeof K=="string"&&!g&&!m[K])return o.dataTypes.unshift(K),_(K),!1;if(g)return!(M=K)}),M}return _(o.dataTypes[0])||!m["*"]&&_("*")}function yr(s,o){var u,l,m=c.ajaxSettings.flatOptions||{};for(u in o)o[u]!==void 0&&((m[u]?s:l||(l={}))[u]=o[u]);return l&&c.extend(!0,s,l),s}function gu(s,o,u){for(var l,m,g,_,E=s.contents,M=s.dataTypes;M[0]==="*";)M.shift(),l===void 0&&(l=s.mimeType||o.getResponseHeader("Content-Type"));if(l){for(m in E)if(E[m]&&E[m].test(l)){M.unshift(m);break}}if(M[0]in u)g=M[0];else{for(m in u){if(!M[0]||s.converters[m+" "+M[0]]){g=m;break}_||(_=m)}g=g||_}if(g)return g!==M[0]&&M.unshift(g),u[g]}function vu(s,o,u,l){var m,g,_,E,M,F={},W=s.dataTypes.slice();if(W[1])for(_ in s.converters)F[_.toLowerCase()]=s.converters[_];for(g=W.shift();g;)if(s.responseFields[g]&&(u[s.responseFields[g]]=o),!M&&l&&s.dataFilter&&(o=s.dataFilter(o,s.dataType)),M=g,g=W.shift(),g){if(g==="*")g=M;else if(M!=="*"&&M!==g){if(_=F[M+" "+g]||F["* "+g],!_){for(m in F)if(E=m.split(" "),E[1]===g&&(_=F[M+" "+E[0]]||F["* "+E[0]],_)){_===!0?_=F[m]:F[m]!==!0&&(g=E[0],W.unshift(E[1]));break}}if(_!==!0)if(_&&s.throws)o=_(o);else try{o=_(o)}catch(K){return{state:"parsererror",error:_?K:"No conversion from "+M+" to "+g}}}}return{state:"success",data:o}}c.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ss.href,type:"GET",isLocal:du.test(Ss.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$o,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":c.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(s,o){return o?yr(yr(s,c.ajaxSettings),o):yr(c.ajaxSettings,s)},ajaxPrefilter:zo(Ho),ajaxTransport:zo(vr),ajax:function(s,o){typeof s=="object"&&(o=s,s=void 0),o=o||{};var u,l,m,g,_,E,M,F,W,K,V=c.ajaxSetup({},o),G=V.context||V,de=V.context&&(G.nodeType||G.jquery)?c(G):c.event,xe=c.Deferred(),_e=c.Callbacks("once memory"),ot=V.statusCode||{},Qe={},Gt={},Xt="canceled",Te={readyState:0,getResponseHeader:function(ke){var Ue;if(M){if(!g)for(g={};Ue=fu.exec(m);)g[Ue[1].toLowerCase()+" "]=(g[Ue[1].toLowerCase()+" "]||[]).concat(Ue[2]);Ue=g[ke.toLowerCase()+" "]}return Ue==null?null:Ue.join(", ")},getAllResponseHeaders:function(){return M?m:null},setRequestHeader:function(ke,Ue){return M==null&&(ke=Gt[ke.toLowerCase()]=Gt[ke.toLowerCase()]||ke,Qe[ke]=Ue),this},overrideMimeType:function(ke){return M==null&&(V.mimeType=ke),this},statusCode:function(ke){var Ue;if(ke)if(M)Te.always(ke[Te.status]);else for(Ue in ke)ot[Ue]=[ot[Ue],ke[Ue]];return this},abort:function(ke){var Ue=ke||Xt;return u&&u.abort(Ue),Pn(0,Ue),this}};if(xe.promise(Te),V.url=((s||V.url||Ss.href)+"").replace(mu,Ss.protocol+"//"),V.type=o.method||o.type||V.method||V.type,V.dataTypes=(V.dataType||"*").toLowerCase().match(et)||[""],V.crossDomain==null){E=v.createElement("a");try{E.href=V.url,E.href=E.href,V.crossDomain=_r.protocol+"//"+_r.host!=E.protocol+"//"+E.host}catch{V.crossDomain=!0}}if(V.data&&V.processData&&typeof V.data!="string"&&(V.data=c.param(V.data,V.traditional)),Go(Ho,V,o,Te),M)return Te;F=c.event&&V.global,F&&c.active++===0&&c.event.trigger("ajaxStart"),V.type=V.type.toUpperCase(),V.hasContent=!pu.test(V.type),l=V.url.replace(lu,""),V.hasContent?V.data&&V.processData&&(V.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(V.data=V.data.replace(uu,"+")):(K=V.url.slice(l.length),V.data&&(V.processData||typeof V.data=="string")&&(l+=(mr.test(l)?"&":"?")+V.data,delete V.data),V.cache===!1&&(l=l.replace(hu,"$1"),K=(mr.test(l)?"&":"?")+"_="+Wo.guid+++K),V.url=l+K),V.ifModified&&(c.lastModified[l]&&Te.setRequestHeader("If-Modified-Since",c.lastModified[l]),c.etag[l]&&Te.setRequestHeader("If-None-Match",c.etag[l])),(V.data&&V.hasContent&&V.contentType!==!1||o.contentType)&&Te.setRequestHeader("Content-Type",V.contentType),Te.setRequestHeader("Accept",V.dataTypes[0]&&V.accepts[V.dataTypes[0]]?V.accepts[V.dataTypes[0]]+(V.dataTypes[0]!=="*"?", "+$o+"; q=0.01":""):V.accepts["*"]);for(W in V.headers)Te.setRequestHeader(W,V.headers[W]);if(V.beforeSend&&(V.beforeSend.call(G,Te,V)===!1||M))return Te.abort();if(Xt="abort",_e.add(V.complete),Te.done(V.success),Te.fail(V.error),u=Go(vr,V,o,Te),!u)Pn(-1,"No Transport");else{if(Te.readyState=1,F&&de.trigger("ajaxSend",[Te,V]),M)return Te;V.async&&V.timeout>0&&(_=e.setTimeout(function(){Te.abort("timeout")},V.timeout));try{M=!1,u.send(Qe,Pn)}catch(ke){if(M)throw ke;Pn(-1,ke)}}function Pn(ke,Ue,ks,wr){var Zt,Ns,Yt,bn,wn,Ot=Ue;M||(M=!0,_&&e.clearTimeout(_),u=void 0,m=wr||"",Te.readyState=ke>0?4:0,Zt=ke>=200&&ke<300||ke===304,ks&&(bn=gu(V,Te,ks)),!Zt&&c.inArray("script",V.dataTypes)>-1&&c.inArray("json",V.dataTypes)<0&&(V.converters["text script"]=function(){}),bn=vu(V,bn,Te,Zt),Zt?(V.ifModified&&(wn=Te.getResponseHeader("Last-Modified"),wn&&(c.lastModified[l]=wn),wn=Te.getResponseHeader("etag"),wn&&(c.etag[l]=wn)),ke===204||V.type==="HEAD"?Ot="nocontent":ke===304?Ot="notmodified":(Ot=bn.state,Ns=bn.data,Yt=bn.error,Zt=!Yt)):(Yt=Ot,(ke||!Ot)&&(Ot="error",ke<0&&(ke=0))),Te.status=ke,Te.statusText=(Ue||Ot)+"",Zt?xe.resolveWith(G,[Ns,Ot,Te]):xe.rejectWith(G,[Te,Ot,Yt]),Te.statusCode(ot),ot=void 0,F&&de.trigger(Zt?"ajaxSuccess":"ajaxError",[Te,V,Zt?Ns:Yt]),_e.fireWith(G,[Te,Ot]),F&&(de.trigger("ajaxComplete",[Te,V]),--c.active||c.event.trigger("ajaxStop")))}return Te},getJSON:function(s,o,u){return c.get(s,o,u,"json")},getScript:function(s,o){return c.get(s,void 0,o,"script")}}),c.each(["get","post"],function(s,o){c[o]=function(u,l,m,g){return k(l)&&(g=g||m,m=l,l=void 0),c.ajax(c.extend({url:u,type:o,dataType:g,data:l,success:m},c.isPlainObject(u)&&u))}}),c.ajaxPrefilter(function(s){var o;for(o in s.headers)o.toLowerCase()==="content-type"&&(s.contentType=s.headers[o]||"")}),c._evalUrl=function(s,o,u){return c.ajax({url:s,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(l){c.globalEval(l,o,u)}})},c.fn.extend({wrapAll:function(s){var o;return this[0]&&(k(s)&&(s=s.call(this[0])),o=c(s,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&o.insertBefore(this[0]),o.map(function(){for(var u=this;u.firstElementChild;)u=u.firstElementChild;return u}).append(this)),this},wrapInner:function(s){return k(s)?this.each(function(o){c(this).wrapInner(s.call(this,o))}):this.each(function(){var o=c(this),u=o.contents();u.length?u.wrapAll(s):o.append(s)})},wrap:function(s){var o=k(s);return this.each(function(u){c(this).wrapAll(o?s.call(this,u):s)})},unwrap:function(s){return this.parent(s).not("body").each(function(){c(this).replaceWith(this.childNodes)}),this}}),c.expr.pseudos.hidden=function(s){return!c.expr.pseudos.visible(s)},c.expr.pseudos.visible=function(s){return!!(s.offsetWidth||s.offsetHeight||s.getClientRects().length)},c.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var _u={0:200,1223:204},As=c.ajaxSettings.xhr();C.cors=!!As&&"withCredentials"in As,C.ajax=As=!!As,c.ajaxTransport(function(s){var o,u;if(C.cors||As&&!s.crossDomain)return{send:function(l,m){var g,_=s.xhr();if(_.open(s.type,s.url,s.async,s.username,s.password),s.xhrFields)for(g in s.xhrFields)_[g]=s.xhrFields[g];s.mimeType&&_.overrideMimeType&&_.overrideMimeType(s.mimeType),!s.crossDomain&&!l["X-Requested-With"]&&(l["X-Requested-With"]="XMLHttpRequest");for(g in l)_.setRequestHeader(g,l[g]);o=function(E){return function(){o&&(o=u=_.onload=_.onerror=_.onabort=_.ontimeout=_.onreadystatechange=null,E==="abort"?_.abort():E==="error"?typeof _.status!="number"?m(0,"error"):m(_.status,_.statusText):m(_u[_.status]||_.status,_.statusText,(_.responseType||"text")!=="text"||typeof _.responseText!="string"?{binary:_.response}:{text:_.responseText},_.getAllResponseHeaders()))}},_.onload=o(),u=_.onerror=_.ontimeout=o("error"),_.onabort!==void 0?_.onabort=u:_.onreadystatechange=function(){_.readyState===4&&e.setTimeout(function(){o&&u()})},o=o("abort");try{_.send(s.hasContent&&s.data||null)}catch(E){if(o)throw E}},abort:function(){o&&o()}}}),c.ajaxPrefilter(function(s){s.crossDomain&&(s.contents.script=!1)}),c.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(s){return c.globalEval(s),s}}}),c.ajaxPrefilter("script",function(s){s.cache===void 0&&(s.cache=!1),s.crossDomain&&(s.type="GET")}),c.ajaxTransport("script",function(s){if(s.crossDomain||s.scriptAttrs){var o,u;return{send:function(l,m){o=c("<script>").attr(s.scriptAttrs||{}).prop({charset:s.scriptCharset,src:s.url}).on("load error",u=function(g){o.remove(),u=null,g&&m(g.type==="error"?404:200,g.type)}),v.head.appendChild(o[0])},abort:function(){u&&u()}}}});var Xo=[],br=/(=)\?(?=&|$)|\?\?/;c.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var s=Xo.pop()||c.expando+"_"+Wo.guid++;return this[s]=!0,s}}),c.ajaxPrefilter("json jsonp",function(s,o,u){var l,m,g,_=s.jsonp!==!1&&(br.test(s.url)?"url":typeof s.data=="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&br.test(s.data)&&"data");if(_||s.dataTypes[0]==="jsonp")return l=s.jsonpCallback=k(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,_?s[_]=s[_].replace(br,"$1"+l):s.jsonp!==!1&&(s.url+=(mr.test(s.url)?"&":"?")+s.jsonp+"="+l),s.converters["script json"]=function(){return g||c.error(l+" was not called"),g[0]},s.dataTypes[0]="json",m=e[l],e[l]=function(){g=arguments},u.always(function(){m===void 0?c(e).removeProp(l):e[l]=m,s[l]&&(s.jsonpCallback=o.jsonpCallback,Xo.push(l)),g&&k(m)&&m(g[0]),g=m=void 0}),"script"}),C.createHTMLDocument=function(){var s=v.implementation.createHTMLDocument("").body;return s.innerHTML="<form></form><form></form>",s.childNodes.length===2}(),c.parseHTML=function(s,o,u){if(typeof s!="string")return[];typeof o=="boolean"&&(u=o,o=!1);var l,m,g;return o||(C.createHTMLDocument?(o=v.implementation.createHTMLDocument(""),l=o.createElement("base"),l.href=v.location.href,o.head.appendChild(l)):o=v),m=Me.exec(s),g=!u&&[],m?[o.createElement(m[1])]:(m=So([s],o,g),g&&g.length&&c(g).remove(),c.merge([],m.childNodes))},c.fn.load=function(s,o,u){var l,m,g,_=this,E=s.indexOf(" ");return E>-1&&(l=In(s.slice(E)),s=s.slice(0,E)),k(o)?(u=o,o=void 0):o&&typeof o=="object"&&(m="POST"),_.length>0&&c.ajax({url:s,type:m||"GET",dataType:"html",data:o}).done(function(M){g=arguments,_.html(l?c("<div>").append(c.parseHTML(M)).find(l):M)}).always(u&&function(M,F){_.each(function(){u.apply(this,g||[M.responseText,F,M])})}),this},c.expr.pseudos.animated=function(s){return c.grep(c.timers,function(o){return s===o.elem}).length},c.offset={setOffset:function(s,o,u){var l,m,g,_,E,M,F,W=c.css(s,"position"),K=c(s),V={};W==="static"&&(s.style.position="relative"),E=K.offset(),g=c.css(s,"top"),M=c.css(s,"left"),F=(W==="absolute"||W==="fixed")&&(g+M).indexOf("auto")>-1,F?(l=K.position(),_=l.top,m=l.left):(_=parseFloat(g)||0,m=parseFloat(M)||0),k(o)&&(o=o.call(s,u,c.extend({},E))),o.top!=null&&(V.top=o.top-E.top+_),o.left!=null&&(V.left=o.left-E.left+m),"using"in o?o.using.call(s,V):K.css(V)}},c.fn.extend({offset:function(s){if(arguments.length)return s===void 0?this:this.each(function(m){c.offset.setOffset(this,s,m)});var o,u,l=this[0];if(!!l)return l.getClientRects().length?(o=l.getBoundingClientRect(),u=l.ownerDocument.defaultView,{top:o.top+u.pageYOffset,left:o.left+u.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var s,o,u,l=this[0],m={top:0,left:0};if(c.css(l,"position")==="fixed")o=l.getBoundingClientRect();else{for(o=this.offset(),u=l.ownerDocument,s=l.offsetParent||u.documentElement;s&&(s===u.body||s===u.documentElement)&&c.css(s,"position")==="static";)s=s.parentNode;s&&s!==l&&s.nodeType===1&&(m=c(s).offset(),m.top+=c.css(s,"borderTopWidth",!0),m.left+=c.css(s,"borderLeftWidth",!0))}return{top:o.top-m.top-c.css(l,"marginTop",!0),left:o.left-m.left-c.css(l,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var s=this.offsetParent;s&&c.css(s,"position")==="static";)s=s.offsetParent;return s||Dn})}}),c.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(s,o){var u=o==="pageYOffset";c.fn[s]=function(l){return Se(this,function(m,g,_){var E;if(I(m)?E=m:m.nodeType===9&&(E=m.defaultView),_===void 0)return E?E[o]:m[g];E?E.scrollTo(u?E.pageXOffset:_,u?_:E.pageYOffset):m[g]=_},s,l,arguments.length)}}),c.each(["top","left"],function(s,o){c.cssHooks[o]=Oo(C.pixelPosition,function(u,l){if(l)return l=Cs(u,o),ur.test(l)?c(u).position()[o]+"px":l})}),c.each({Height:"height",Width:"width"},function(s,o){c.each({padding:"inner"+s,content:o,"":"outer"+s},function(u,l){c.fn[l]=function(m,g){var _=arguments.length&&(u||typeof m!="boolean"),E=u||(m===!0||g===!0?"margin":"border");return Se(this,function(M,F,W){var K;return I(M)?l.indexOf("outer")===0?M["inner"+s]:M.document.documentElement["client"+s]:M.nodeType===9?(K=M.documentElement,Math.max(M.body["scroll"+s],K["scroll"+s],M.body["offset"+s],K["offset"+s],K["client"+s])):W===void 0?c.css(M,F,E):c.style(M,F,W,E)},o,_?m:void 0,_)}})}),c.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(s,o){c.fn[o]=function(u){return this.on(o,u)}}),c.fn.extend({bind:function(s,o,u){return this.on(s,null,o,u)},unbind:function(s,o){return this.off(s,null,o)},delegate:function(s,o,u,l){return this.on(o,s,u,l)},undelegate:function(s,o,u){return arguments.length===1?this.off(s,"**"):this.off(o,s||"**",u)},hover:function(s,o){return this.on("mouseenter",s).on("mouseleave",o||s)}}),c.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(s,o){c.fn[o]=function(u,l){return arguments.length>0?this.on(o,null,u,l):this.trigger(o)}});var yu=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;c.proxy=function(s,o){var u,l,m;if(typeof o=="string"&&(u=s[o],o=s,s=u),!!k(s))return l=a.call(arguments,2),m=function(){return s.apply(o||this,l.concat(a.call(arguments)))},m.guid=s.guid=s.guid||c.guid++,m},c.holdReady=function(s){s?c.readyWait++:c.ready(!0)},c.isArray=Array.isArray,c.parseJSON=JSON.parse,c.nodeName=j,c.isFunction=k,c.isWindow=I,c.camelCase=Ye,c.type=A,c.now=Date.now,c.isNumeric=function(s){var o=c.type(s);return(o==="number"||o==="string")&&!isNaN(s-parseFloat(s))},c.trim=function(s){return s==null?"":(s+"").replace(yu,"$1")};var bu=e.jQuery,wu=e.$;return c.noConflict=function(s){return e.$===c&&(e.$=wu),s&&e.jQuery===c&&(e.jQuery=bu),c},typeof t>"u"&&(e.jQuery=e.$=c),c})})(xa);const Ne=xa.exports,Sa="14.7.77",Jo=(i,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:i}),ea=(i,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:i}),Dr=(i,e)=>({startTime:e,type:"setValue",value:i}),Aa=(i,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:i}),ka=(i,e,{startTime:t,target:n,timeConstant:r})=>n+(e-n)*Math.exp((t-i)/r),is=i=>i.type==="exponentialRampToValue",Ni=i=>i.type==="linearRampToValue",xn=i=>is(i)||Ni(i),Kr=i=>i.type==="setValue",ln=i=>i.type==="setValueCurve",Mi=(i,e,t,n)=>{const r=i[e];return r===void 0?n:xn(r)||Kr(r)?r.value:ln(r)?r.values[r.values.length-1]:ka(t,Mi(i,e-1,r.startTime,n),r)},ta=(i,e,t,n,r)=>t===void 0?[n.insertTime,r]:xn(t)?[t.endTime,t.value]:Kr(t)?[t.startTime,t.value]:ln(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,Mi(i,e-1,t.startTime,r)],Ir=i=>i.type==="cancelAndHold",Rr=i=>i.type==="cancelScheduledValues",Cn=i=>Ir(i)||Rr(i)?i.cancelTime:is(i)||Ni(i)?i.endTime:i.startTime,na=(i,e,t,{endTime:n,value:r})=>t===r?r:0<t&&0<r||t<0&&r<0?t*(r/t)**((i-e)/(n-e)):0,sa=(i,e,t,{endTime:n,value:r})=>t+(i-e)/(n-e)*(r-t),Mu=(i,e)=>{const t=Math.floor(e),n=Math.ceil(e);return t===n?i[t]:(1-(e-t))*i[t]+(1-(n-e))*i[n]},Eu=(i,{duration:e,startTime:t,values:n})=>{const r=(i-t)/e*(n.length-1);return Mu(n,r)},vi=i=>i.type==="setTarget";class Ou{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=Cn(e);if(Ir(e)||Rr(e)){const n=this._automationEvents.findIndex(a=>Rr(e)&&ln(a)?a.startTime+a.duration>=t:Cn(a)>=t),r=this._automationEvents[n];if(n!==-1&&(this._automationEvents=this._automationEvents.slice(0,n)),Ir(e)){const a=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&xn(r)){if(a!==void 0&&vi(a))throw new Error("The internal list is malformed.");const h=a===void 0?r.insertTime:ln(a)?a.startTime+a.duration:Cn(a),f=a===void 0?this._defaultValue:ln(a)?a.values[a.values.length-1]:a.value,d=is(r)?na(t,h,f,r):sa(t,h,f,r),p=is(r)?Jo(d,t,this._currenTime):ea(d,t,this._currenTime);this._automationEvents.push(p)}if(a!==void 0&&vi(a)&&this._automationEvents.push(Dr(this.getValue(t),t)),a!==void 0&&ln(a)&&a.startTime+a.duration>t){const h=t-a.startTime,f=(a.values.length-1)/a.duration,d=Math.max(2,1+Math.ceil(h*f)),p=h/(d-1)*f,y=a.values.slice(0,d);if(p<1)for(let b=1;b<d;b+=1){const S=p*b%1;y[b]=a.values[b-1]*(1-S)+a.values[b]*S}this._automationEvents[this._automationEvents.length-1]=Aa(y,a.startTime,h)}}}else{const n=this._automationEvents.findIndex(h=>Cn(h)>t),r=n===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[n-1];if(r!==void 0&&ln(r)&&Cn(r)+r.duration>t)return!1;const a=is(e)?Jo(e.value,e.endTime,this._currenTime):Ni(e)?ea(e.value,t,this._currenTime):e;if(n===-1)this._automationEvents.push(a);else{if(ln(e)&&t+e.duration>Cn(this._automationEvents[n]))return!1;this._automationEvents.splice(n,0,a)}}return!0}flush(e){const t=this._automationEvents.findIndex(n=>Cn(n)>e);if(t>1){const n=this._automationEvents.slice(t-1),r=n[0];vi(r)&&n.unshift(Dr(Mi(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=n}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(h=>Cn(h)>e),n=this._automationEvents[t],r=(t===-1?this._automationEvents.length:t)-1,a=this._automationEvents[r];if(a!==void 0&&vi(a)&&(n===void 0||!xn(n)||n.insertTime>e))return ka(e,Mi(this._automationEvents,r-1,a.startTime,this._defaultValue),a);if(a!==void 0&&Kr(a)&&(n===void 0||!xn(n)))return a.value;if(a!==void 0&&ln(a)&&(n===void 0||!xn(n)||a.startTime+a.duration>e))return e<a.startTime+a.duration?Eu(e,a):a.values[a.values.length-1];if(a!==void 0&&xn(a)&&(n===void 0||!xn(n)))return a.value;if(n!==void 0&&is(n)){const[h,f]=ta(this._automationEvents,r,a,n,this._defaultValue);return na(e,h,f,n)}if(n!==void 0&&Ni(n)){const[h,f]=ta(this._automationEvents,r,a,n,this._defaultValue);return sa(e,h,f,n)}return this._defaultValue}}const Du=i=>({cancelTime:i,type:"cancelAndHold"}),Iu=i=>({cancelTime:i,type:"cancelScheduledValues"}),Ru=(i,e)=>({endTime:e,type:"exponentialRampToValue",value:i}),Pu=(i,e)=>({endTime:e,type:"linearRampToValue",value:i}),Fu=(i,e,t)=>({startTime:e,target:i,timeConstant:t,type:"setTarget"}),qu=()=>new DOMException("","AbortError"),Vu=i=>(e,t,[n,r,a],h)=>{i(e[r],[t,n,a],f=>f[0]===t&&f[1]===n,h)},Lu=i=>(e,t,n)=>{const r=[];for(let a=0;a<n.numberOfInputs;a+=1)r.push(new Set);i.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},ju=i=>(e,t)=>{i.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},cs=new WeakSet,Na=new WeakMap,Ur=new WeakMap,Ma=new WeakMap,Hr=new WeakMap,Xi=new WeakMap,Ea=new WeakMap,Pr=new WeakMap,Fr=new WeakMap,qr=new WeakMap,Oa={construct(){return Oa}},Wu=i=>{try{const e=new Proxy(i,Oa);new e}catch{return!1}return!0},ia=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,ra=(i,e)=>{const t=[];let n=i.replace(/^[\s]+/,""),r=n.match(ia);for(;r!==null;){const a=r[1].slice(1,-1),h=r[0].replace(/([\s]+)?;?$/,"").replace(a,new URL(a,e).toString());t.push(h),n=n.slice(r[0].length).replace(/^[\s]+/,""),r=n.match(ia)}return[t.join(";"),n]},oa=i=>{if(i!==void 0&&!Array.isArray(i))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},aa=i=>{if(!Wu(i))throw new TypeError("The given value for processorCtor should be a constructor.");if(i.prototype===null||typeof i.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},Bu=(i,e,t,n,r,a,h,f,d,p,y,b,S)=>{let N=0;return(C,k,I={credentials:"omit"})=>{const v=y.get(C);if(v!==void 0&&v.has(k))return Promise.resolve();const P=p.get(C);if(P!==void 0){const w=P.get(k);if(w!==void 0)return w}const T=a(C),A=T.audioWorklet===void 0?r(k).then(([w,D])=>{const[c,O]=ra(w,D),j=`${c};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${O}
})})(window,'_AWGS')`;return t(j)}).then(()=>{const w=S._AWGS.pop();if(w===void 0)throw new SyntaxError;n(T.currentTime,T.sampleRate,()=>w(class{},void 0,(D,c)=>{if(D.trim()==="")throw e();const O=Fr.get(T);if(O!==void 0){if(O.has(D))throw e();aa(c),oa(c.parameterDescriptors),O.set(D,c)}else aa(c),oa(c.parameterDescriptors),Fr.set(T,new Map([[D,c]]))},T.sampleRate,void 0,void 0))}):Promise.all([r(k),Promise.resolve(i(b,b))]).then(([[w,D],c])=>{const O=N+1;N=O;const[j,U]=ra(w,D),Y=`${j};((AudioWorkletProcessor,registerProcessor)=>{${U}
})(${c?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${c?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${c?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${O}',class extends AudioWorkletProcessor{process(){return !1}})`,oe=new Blob([Y],{type:"application/javascript; charset=utf-8"}),Q=URL.createObjectURL(oe);return T.audioWorklet.addModule(Q,I).then(()=>{if(f(T))return T;const J=h(T);return J.audioWorklet.addModule(Q,I).then(()=>J)}).then(J=>{if(d===null)throw new SyntaxError;try{new d(J,`__sac${O}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(Q))});return P===void 0?p.set(C,new Map([[k,A]])):P.set(k,A),A.then(()=>{const w=y.get(C);w===void 0?y.set(C,new Set([k])):w.add(k)}).finally(()=>{const w=p.get(C);w!==void 0&&w.delete(k)}),A}},Kt=(i,e)=>{const t=i.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},Zi=(i,e)=>{const t=Array.from(i).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[n]=t;return i.delete(n),n},Da=(i,e,t,n)=>{const r=Kt(i,e),a=Zi(r,h=>h[0]===t&&h[1]===n);return r.size===0&&i.delete(e),a},Zs=i=>Kt(Ea,i),us=i=>{if(cs.has(i))throw new Error("The AudioNode is already stored.");cs.add(i),Zs(i).forEach(e=>e(!0))},Ia=i=>"port"in i,Ys=i=>{if(!cs.has(i))throw new Error("The AudioNode is not stored.");cs.delete(i),Zs(i).forEach(e=>e(!1))},Vr=(i,e)=>{!Ia(i)&&e.every(t=>t.size===0)&&Ys(i)},Ku=(i,e,t,n,r,a,h,f,d,p,y,b,S)=>{const N=new WeakMap;return(C,k,I,v,P)=>{const{activeInputs:T,passiveInputs:A}=a(k),{outputs:w}=a(C),D=f(C),c=O=>{const j=d(k),U=d(C);if(O){const $=Da(A,C,I,v);i(T,C,$,!1),!P&&!b(C)&&t(U,j,I,v),S(k)&&us(k)}else{const $=n(T,C,I,v);e(A,v,$,!1),!P&&!b(C)&&r(U,j,I,v);const H=h(k);if(H===0)y(k)&&Vr(k,T);else{const z=N.get(k);z!==void 0&&clearTimeout(z),N.set(k,setTimeout(()=>{y(k)&&Vr(k,T)},H*1e3))}}};return p(w,[k,I,v],O=>O[0]===k&&O[1]===I&&O[2]===v,!0)?(D.add(c),y(C)?i(T,C,[I,v,c],!0):e(A,v,[C,I,c],!0),!0):!1}},Uu=i=>(e,t,[n,r,a],h)=>{const f=e.get(n);f===void 0?e.set(n,new Set([[r,t,a]])):i(f,[r,t,a],d=>d[0]===r&&d[1]===t,h)},Hu=i=>(e,t)=>{const n=i(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(n).connect(e.destination);const r=()=>{t.removeEventListener("ended",r),t.disconnect(n),n.disconnect()};t.addEventListener("ended",r)},$u=i=>(e,t)=>{i(e).add(t)},zu={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Gu=(i,e,t,n,r,a)=>class extends i{constructor(f,d){const p=r(f),y={...zu,...d},b=n(p,y),S=a(p)?e():null;super(f,!1,b,S),this._nativeAnalyserNode=b}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(f){this._nativeAnalyserNode.fftSize=f}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(f){const d=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=f,!(f>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=d,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(f){const d=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=f,!(this._nativeAnalyserNode.maxDecibels>f))throw this._nativeAnalyserNode.minDecibels=d,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(f){this._nativeAnalyserNode.smoothingTimeConstant=f}getByteFrequencyData(f){this._nativeAnalyserNode.getByteFrequencyData(f)}getByteTimeDomainData(f){this._nativeAnalyserNode.getByteTimeDomainData(f)}getFloatFrequencyData(f){this._nativeAnalyserNode.getFloatFrequencyData(f)}getFloatTimeDomainData(f){this._nativeAnalyserNode.getFloatTimeDomainData(f)}},ht=(i,e)=>i.context===e,Xu=(i,e,t)=>()=>{const n=new WeakMap,r=async(a,h)=>{let f=e(a);if(!ht(f,h)){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,fftSize:f.fftSize,maxDecibels:f.maxDecibels,minDecibels:f.minDecibels,smoothingTimeConstant:f.smoothingTimeConstant};f=i(h,p)}return n.set(h,f),await t(a,h,f),f};return{render(a,h){const f=n.get(h);return f!==void 0?Promise.resolve(f):r(a,h)}}},Ei=i=>{try{i.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},tn=()=>new DOMException("","IndexSizeError"),$r=i=>{i.getChannelData=(e=>t=>{try{return e.call(i,t)}catch(n){throw n.code===12?tn():n}})(i.getChannelData)},Zu={numberOfChannels:1},Yu=(i,e,t,n,r,a,h,f)=>{let d=null;return class Ra{constructor(y){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:b,numberOfChannels:S,sampleRate:N}={...Zu,...y};d===null&&(d=new r(1,1,44100));const C=n!==null&&e(a,a)?new n({length:b,numberOfChannels:S,sampleRate:N}):d.createBuffer(S,b,N);if(C.numberOfChannels===0)throw t();return typeof C.copyFromChannel!="function"?(h(C),$r(C)):e(Ei,()=>Ei(C))||f(C),i.add(C),C}static[Symbol.hasInstance](y){return y!==null&&typeof y=="object"&&Object.getPrototypeOf(y)===Ra.prototype||i.has(y)}}},bt=-34028234663852886e22,dt=-bt,dn=i=>cs.has(i),Qu={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Ju=(i,e,t,n,r,a,h,f)=>class extends i{constructor(p,y){const b=a(p),S={...Qu,...y},N=r(b,S),C=h(b),k=C?e():null;super(p,!1,N,k),this._audioBufferSourceNodeRenderer=k,this._isBufferNullified=!1,this._isBufferSet=S.buffer!==null,this._nativeAudioBufferSourceNode=N,this._onended=null,this._playbackRate=t(this,C,N.playbackRate,dt,bt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(p){if(this._nativeAudioBufferSourceNode.buffer=p,p!==null){if(this._isBufferSet)throw n();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(p){this._nativeAudioBufferSourceNode.loop=p}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(p){this._nativeAudioBufferSourceNode.loopEnd=p}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(p){this._nativeAudioBufferSourceNode.loopStart=p}get onended(){return this._onended}set onended(p){const y=typeof p=="function"?f(this,p):null;this._nativeAudioBufferSourceNode.onended=y;const b=this._nativeAudioBufferSourceNode.onended;this._onended=b!==null&&b===y?p:b}get playbackRate(){return this._playbackRate}start(p=0,y=0,b){if(this._nativeAudioBufferSourceNode.start(p,y,b),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=b===void 0?[p,y]:[p,y,b]),this.context.state!=="closed"){us(this);const S=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",S),dn(this)&&Ys(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",S)}}stop(p=0){this._nativeAudioBufferSourceNode.stop(p),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=p)}},el=(i,e,t,n,r)=>()=>{const a=new WeakMap;let h=null,f=null;const d=async(p,y)=>{let b=t(p);const S=ht(b,y);if(!S){const N={buffer:b.buffer,channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,loop:b.loop,loopEnd:b.loopEnd,loopStart:b.loopStart,playbackRate:b.playbackRate.value};b=e(y,N),h!==null&&b.start(...h),f!==null&&b.stop(f)}return a.set(y,b),S?await i(y,p.playbackRate,b.playbackRate):await n(y,p.playbackRate,b.playbackRate),await r(p,y,b),b};return{set start(p){h=p},set stop(p){f=p},render(p,y){const b=a.get(y);return b!==void 0?Promise.resolve(b):d(p,y)}}},tl=i=>"playbackRate"in i,nl=i=>"frequency"in i&&"gain"in i,sl=i=>"offset"in i,il=i=>!("frequency"in i)&&"gain"in i,rl=i=>"detune"in i&&"frequency"in i,ol=i=>"pan"in i,pt=i=>Kt(Na,i),Qs=i=>Kt(Ma,i),Lr=(i,e)=>{const{activeInputs:t}=pt(i);t.forEach(r=>r.forEach(([a])=>{e.includes(i)||Lr(a,[...e,i])}));const n=tl(i)?[i.playbackRate]:Ia(i)?Array.from(i.parameters.values()):nl(i)?[i.Q,i.detune,i.frequency,i.gain]:sl(i)?[i.offset]:il(i)?[i.gain]:rl(i)?[i.detune,i.frequency]:ol(i)?[i.pan]:[];for(const r of n){const a=Qs(r);a!==void 0&&a.activeInputs.forEach(([h])=>Lr(h,e))}dn(i)&&Ys(i)},Pa=i=>{Lr(i.destination,[])},al=i=>i===void 0||typeof i=="number"||typeof i=="string"&&(i==="balanced"||i==="interactive"||i==="playback"),cl=(i,e,t,n,r,a,h,f,d)=>class extends i{constructor(y={}){if(d===null)throw new Error("Missing the native AudioContext constructor.");let b;try{b=new d(y)}catch(C){throw C.code===12&&C.message==="sampleRate is not in range"?t():C}if(b===null)throw n();if(!al(y.latencyHint))throw new TypeError(`The provided value '${y.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(y.sampleRate!==void 0&&b.sampleRate!==y.sampleRate)throw t();super(b,2);const{latencyHint:S}=y,{sampleRate:N}=b;if(this._baseLatency=typeof b.baseLatency=="number"?b.baseLatency:S==="balanced"?512/N:S==="interactive"||S===void 0?256/N:S==="playback"?1024/N:Math.max(2,Math.min(128,Math.round(S*N/128)))*128/N,this._nativeAudioContext=b,d.name==="webkitAudioContext"?(this._nativeGainNode=b.createGain(),this._nativeOscillatorNode=b.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(b.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,b.state==="running"){this._state="suspended";const C=()=>{this._state==="suspended"&&(this._state=null),b.removeEventListener("statechange",C)};b.addEventListener("statechange",C)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Pa(this)}))}createMediaElementSource(y){return new r(this,{mediaElement:y})}createMediaStreamDestination(){return new a(this)}createMediaStreamSource(y){return new h(this,{mediaStream:y})}createMediaStreamTrackSource(y){return new f(this,{mediaStreamTrack:y})}resume(){return this._state==="suspended"?new Promise((y,b)=>{const S=()=>{this._nativeAudioContext.removeEventListener("statechange",S),this._nativeAudioContext.state==="running"?y():this.resume().then(y,b)};this._nativeAudioContext.addEventListener("statechange",S)}):this._nativeAudioContext.resume().catch(y=>{throw y===void 0||y.code===15?e():y})}suspend(){return this._nativeAudioContext.suspend().catch(y=>{throw y===void 0?e():y})}},ul=(i,e,t,n,r,a,h,f)=>class extends i{constructor(p,y){const b=a(p),S=h(b),N=r(b,y,S),C=S?e(f):null;super(p,!1,N,C),this._isNodeOfNativeOfflineAudioContext=S,this._nativeAudioDestinationNode=N}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(p){if(this._isNodeOfNativeOfflineAudioContext)throw n();if(p>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=p}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(p){if(this._isNodeOfNativeOfflineAudioContext)throw n();this._nativeAudioDestinationNode.channelCountMode=p}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},ll=i=>{const e=new WeakMap,t=async(n,r)=>{const a=r.destination;return e.set(r,a),await i(n,r,a),a};return{render(n,r){const a=e.get(r);return a!==void 0?Promise.resolve(a):t(n,r)}}},hl=(i,e,t,n,r,a,h,f)=>(d,p)=>{const y=p.listener,b=()=>{const w=new Float32Array(1),D=e(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),c=h(p);let O=!1,j=[0,0,-1,0,1,0],U=[0,0,0];const $=()=>{if(O)return;O=!0;const oe=n(p,256,9,0);oe.onaudioprocess=({inputBuffer:Q})=>{const J=[a(Q,w,0),a(Q,w,1),a(Q,w,2),a(Q,w,3),a(Q,w,4),a(Q,w,5)];J.some((ie,fe)=>ie!==j[fe])&&(y.setOrientation(...J),j=J);const pe=[a(Q,w,6),a(Q,w,7),a(Q,w,8)];pe.some((ie,fe)=>ie!==U[fe])&&(y.setPosition(...pe),U=pe)},D.connect(oe)},H=oe=>Q=>{Q!==j[oe]&&(j[oe]=Q,y.setOrientation(...j))},z=oe=>Q=>{Q!==U[oe]&&(U[oe]=Q,y.setPosition(...U))},Y=(oe,Q,J)=>{const pe=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Q});pe.connect(D,0,oe),pe.start(),Object.defineProperty(pe.offset,"defaultValue",{get(){return Q}});const ie=i({context:d},c,pe.offset,dt,bt);return f(ie,"value",fe=>()=>fe.call(ie),fe=>he=>{try{fe.call(ie,he)}catch(Me){if(Me.code!==9)throw Me}$(),c&&J(he)}),ie.cancelAndHoldAtTime=(fe=>c?()=>{throw r()}:(...he)=>{const Me=fe.apply(ie,he);return $(),Me})(ie.cancelAndHoldAtTime),ie.cancelScheduledValues=(fe=>c?()=>{throw r()}:(...he)=>{const Me=fe.apply(ie,he);return $(),Me})(ie.cancelScheduledValues),ie.exponentialRampToValueAtTime=(fe=>c?()=>{throw r()}:(...he)=>{const Me=fe.apply(ie,he);return $(),Me})(ie.exponentialRampToValueAtTime),ie.linearRampToValueAtTime=(fe=>c?()=>{throw r()}:(...he)=>{const Me=fe.apply(ie,he);return $(),Me})(ie.linearRampToValueAtTime),ie.setTargetAtTime=(fe=>c?()=>{throw r()}:(...he)=>{const Me=fe.apply(ie,he);return $(),Me})(ie.setTargetAtTime),ie.setValueAtTime=(fe=>c?()=>{throw r()}:(...he)=>{const Me=fe.apply(ie,he);return $(),Me})(ie.setValueAtTime),ie.setValueCurveAtTime=(fe=>c?()=>{throw r()}:(...he)=>{const Me=fe.apply(ie,he);return $(),Me})(ie.setValueCurveAtTime),ie};return{forwardX:Y(0,0,H(0)),forwardY:Y(1,0,H(1)),forwardZ:Y(2,-1,H(2)),positionX:Y(6,0,z(0)),positionY:Y(7,0,z(1)),positionZ:Y(8,0,z(2)),upX:Y(3,0,H(3)),upY:Y(4,1,H(4)),upZ:Y(5,0,H(5))}},{forwardX:S,forwardY:N,forwardZ:C,positionX:k,positionY:I,positionZ:v,upX:P,upY:T,upZ:A}=y.forwardX===void 0?b():y;return{get forwardX(){return S},get forwardY(){return N},get forwardZ(){return C},get positionX(){return k},get positionY(){return I},get positionZ(){return v},get upX(){return P},get upY(){return T},get upZ(){return A}}},Oi=i=>"context"in i,Js=i=>Oi(i[0]),Hn=(i,e,t,n)=>{for(const r of i)if(t(r)){if(n)return!1;throw Error("The set contains at least one similar element.")}return i.add(e),!0},ca=(i,e,[t,n],r)=>{Hn(i,[e,t,n],a=>a[0]===e&&a[1]===t,r)},ua=(i,[e,t,n],r)=>{const a=i.get(e);a===void 0?i.set(e,new Set([[t,n]])):Hn(a,[t,n],h=>h[0]===t,r)},ps=i=>"inputs"in i,Di=(i,e,t,n)=>{if(ps(e)){const r=e.inputs[n];return i.connect(r,t,0),[r,t,0]}return i.connect(e,t,n),[e,t,n]},Fa=(i,e,t)=>{for(const n of i)if(n[0]===e&&n[1]===t)return i.delete(n),n;return null},fl=(i,e,t)=>Zi(i,n=>n[0]===e&&n[1]===t),qa=(i,e)=>{if(!Zs(i).delete(e))throw new Error("Missing the expected event listener.")},Va=(i,e,t)=>{const n=Kt(i,e),r=Zi(n,a=>a[0]===t);return n.size===0&&i.delete(e),r},Ii=(i,e,t,n)=>{ps(e)?i.disconnect(e.inputs[n],t,0):i.disconnect(e,t,n)},Le=i=>Kt(Ur,i),Ds=i=>Kt(Hr,i),jn=i=>Pr.has(i),Si=i=>!cs.has(i),la=(i,e)=>new Promise(t=>{if(e!==null)t(!0);else{const n=i.createScriptProcessor(256,1,1),r=i.createGain(),a=i.createBuffer(1,2,44100),h=a.getChannelData(0);h[0]=1,h[1]=1;const f=i.createBufferSource();f.buffer=a,f.loop=!0,f.connect(n).connect(i.destination),f.connect(r),f.disconnect(r),n.onaudioprocess=d=>{const p=d.inputBuffer.getChannelData(0);Array.prototype.some.call(p,y=>y===1)?t(!0):t(!1),f.stop(),n.onaudioprocess=null,f.disconnect(n),n.disconnect(i.destination)},f.start()}}),Nr=(i,e)=>{const t=new Map;for(const n of i)for(const r of n){const a=t.get(r);t.set(r,a===void 0?1:a+1)}t.forEach((n,r)=>e(r,n))},Ri=i=>"context"in i,dl=i=>{const e=new Map;i.connect=(t=>(n,r=0,a=0)=>{const h=Ri(n)?t(n,r,a):t(n,r),f=e.get(n);return f===void 0?e.set(n,[{input:a,output:r}]):f.every(d=>d.input!==a||d.output!==r)&&f.push({input:a,output:r}),h})(i.connect.bind(i)),i.disconnect=(t=>(n,r,a)=>{if(t.apply(i),n===void 0)e.clear();else if(typeof n=="number")for(const[h,f]of e){const d=f.filter(p=>p.output!==n);d.length===0?e.delete(h):e.set(h,d)}else if(e.has(n))if(r===void 0)e.delete(n);else{const h=e.get(n);if(h!==void 0){const f=h.filter(d=>d.output!==r&&(d.input!==a||a===void 0));f.length===0?e.delete(n):e.set(n,f)}}for(const[h,f]of e)f.forEach(d=>{Ri(h)?i.connect(h,d.output,d.input):i.connect(h,d.output)})})(i.disconnect)},pl=(i,e,t,n)=>{const{activeInputs:r,passiveInputs:a}=Qs(e),{outputs:h}=pt(i),f=Zs(i),d=p=>{const y=Le(i),b=Ds(e);if(p){const S=Va(a,i,t);ca(r,i,S,!1),!n&&!jn(i)&&y.connect(b,t)}else{const S=fl(r,i,t);ua(a,S,!1),!n&&!jn(i)&&y.disconnect(b,t)}};return Hn(h,[e,t],p=>p[0]===e&&p[1]===t,!0)?(f.add(d),dn(i)?ca(r,i,[t,d],!0):ua(a,[i,t,d],!0),!0):!1},ml=(i,e,t,n)=>{const{activeInputs:r,passiveInputs:a}=pt(e),h=Fa(r[n],i,t);return h===null?[Da(a,i,t,n)[2],!1]:[h[2],!0]},gl=(i,e,t)=>{const{activeInputs:n,passiveInputs:r}=Qs(e),a=Fa(n,i,t);return a===null?[Va(r,i,t)[1],!1]:[a[2],!0]},zr=(i,e,t,n,r)=>{const[a,h]=ml(i,t,n,r);if(a!==null&&(qa(i,a),h&&!e&&!jn(i)&&Ii(Le(i),Le(t),n,r)),dn(t)){const{activeInputs:f}=pt(t);Vr(t,f)}},Gr=(i,e,t,n)=>{const[r,a]=gl(i,t,n);r!==null&&(qa(i,r),a&&!e&&!jn(i)&&Le(i).disconnect(Ds(t),n))},vl=(i,e)=>{const t=pt(i),n=[];for(const r of t.outputs)Js(r)?zr(i,e,...r):Gr(i,e,...r),n.push(r[0]);return t.outputs.clear(),n},_l=(i,e,t)=>{const n=pt(i),r=[];for(const a of n.outputs)a[1]===t&&(Js(a)?zr(i,e,...a):Gr(i,e,...a),r.push(a[0]),n.outputs.delete(a));return r},yl=(i,e,t,n,r)=>{const a=pt(i);return Array.from(a.outputs).filter(h=>h[0]===t&&(n===void 0||h[1]===n)&&(r===void 0||h[2]===r)).map(h=>(Js(h)?zr(i,e,...h):Gr(i,e,...h),a.outputs.delete(h),h[0]))},bl=(i,e,t,n,r,a,h,f,d,p,y,b,S,N,C,k)=>class extends p{constructor(v,P,T,A){super(T),this._context=v,this._nativeAudioNode=T;const w=y(v);b(w)&&t(la,()=>la(w,k))!==!0&&dl(T),Ur.set(this,T),Ea.set(this,new Set),v.state!=="closed"&&P&&us(this),i(this,A,T)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(v){this._nativeAudioNode.channelCount=v}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(v){this._nativeAudioNode.channelCountMode=v}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(v){this._nativeAudioNode.channelInterpretation=v}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(v,P=0,T=0){if(P<0||P>=this._nativeAudioNode.numberOfOutputs)throw r();const A=y(this._context),w=C(A);if(S(v)||N(v))throw a();if(Oi(v)){const O=Le(v);try{const U=Di(this._nativeAudioNode,O,P,T),$=Si(this);(w||$)&&this._nativeAudioNode.disconnect(...U),this.context.state!=="closed"&&!$&&Si(v)&&us(v)}catch(U){throw U.code===12?a():U}if(e(this,v,P,T,w)){const U=d([this],v);Nr(U,n(w))}return v}const D=Ds(v);if(D.name==="playbackRate"&&D.maxValue===1024)throw h();try{this._nativeAudioNode.connect(D,P),(w||Si(this))&&this._nativeAudioNode.disconnect(D,P)}catch(O){throw O.code===12?a():O}if(pl(this,v,P,w)){const O=d([this],v);Nr(O,n(w))}}disconnect(v,P,T){let A;const w=y(this._context),D=C(w);if(v===void 0)A=vl(this,D);else if(typeof v=="number"){if(v<0||v>=this.numberOfOutputs)throw r();A=_l(this,D,v)}else{if(P!==void 0&&(P<0||P>=this.numberOfOutputs)||Oi(v)&&T!==void 0&&(T<0||T>=v.numberOfInputs))throw r();if(A=yl(this,D,v,P,T),A.length===0)throw a()}for(const c of A){const O=d([this],c);Nr(O,f)}}},wl=(i,e,t,n,r,a,h,f,d,p,y,b,S)=>(N,C,k,I=null,v=null)=>{const P=k.value,T=new Ou(P),A=C?n(T):null,w={get defaultValue(){return P},get maxValue(){return I===null?k.maxValue:I},get minValue(){return v===null?k.minValue:v},get value(){return k.value},set value(D){k.value=D,w.setValueAtTime(D,N.context.currentTime)},cancelAndHoldAtTime(D){if(typeof k.cancelAndHoldAtTime=="function")A===null&&T.flush(N.context.currentTime),T.add(r(D)),k.cancelAndHoldAtTime(D);else{const c=Array.from(T).pop();A===null&&T.flush(N.context.currentTime),T.add(r(D));const O=Array.from(T).pop();k.cancelScheduledValues(D),c!==O&&O!==void 0&&(O.type==="exponentialRampToValue"?k.exponentialRampToValueAtTime(O.value,O.endTime):O.type==="linearRampToValue"?k.linearRampToValueAtTime(O.value,O.endTime):O.type==="setValue"?k.setValueAtTime(O.value,O.startTime):O.type==="setValueCurve"&&k.setValueCurveAtTime(O.values,O.startTime,O.duration))}return w},cancelScheduledValues(D){return A===null&&T.flush(N.context.currentTime),T.add(a(D)),k.cancelScheduledValues(D),w},exponentialRampToValueAtTime(D,c){if(D===0)throw new RangeError;if(!Number.isFinite(c)||c<0)throw new RangeError;const O=N.context.currentTime;return A===null&&T.flush(O),Array.from(T).length===0&&(T.add(p(P,O)),k.setValueAtTime(P,O)),T.add(h(D,c)),k.exponentialRampToValueAtTime(D,c),w},linearRampToValueAtTime(D,c){const O=N.context.currentTime;return A===null&&T.flush(O),Array.from(T).length===0&&(T.add(p(P,O)),k.setValueAtTime(P,O)),T.add(f(D,c)),k.linearRampToValueAtTime(D,c),w},setTargetAtTime(D,c,O){return A===null&&T.flush(N.context.currentTime),T.add(d(D,c,O)),k.setTargetAtTime(D,c,O),w},setValueAtTime(D,c){return A===null&&T.flush(N.context.currentTime),T.add(p(D,c)),k.setValueAtTime(D,c),w},setValueCurveAtTime(D,c,O){const j=D instanceof Float32Array?D:new Float32Array(D);if(b!==null&&b.name==="webkitAudioContext"){const U=c+O,$=N.context.sampleRate,H=Math.ceil(c*$),z=Math.floor(U*$),Y=z-H,oe=new Float32Array(Y);for(let J=0;J<Y;J+=1){const pe=(j.length-1)/O*((H+J)/$-c),ie=Math.floor(pe),fe=Math.ceil(pe);oe[J]=ie===fe?j[ie]:(1-(pe-ie))*j[ie]+(1-(fe-pe))*j[fe]}A===null&&T.flush(N.context.currentTime),T.add(y(oe,c,O)),k.setValueCurveAtTime(oe,c,O);const Q=z/$;Q<U&&S(w,oe[oe.length-1],Q),S(w,j[j.length-1],U)}else A===null&&T.flush(N.context.currentTime),T.add(y(j,c,O)),k.setValueCurveAtTime(j,c,O);return w}};return t.set(w,k),e.set(w,N),i(w,A),w},Tl=i=>({replay(e){for(const t of i)if(t.type==="exponentialRampToValue"){const{endTime:n,value:r}=t;e.exponentialRampToValueAtTime(r,n)}else if(t.type==="linearRampToValue"){const{endTime:n,value:r}=t;e.linearRampToValueAtTime(r,n)}else if(t.type==="setTarget"){const{startTime:n,target:r,timeConstant:a}=t;e.setTargetAtTime(r,n,a)}else if(t.type==="setValue"){const{startTime:n,value:r}=t;e.setValueAtTime(r,n)}else if(t.type==="setValueCurve"){const{duration:n,startTime:r,values:a}=t;e.setValueCurveAtTime(a,r,n)}else throw new Error("Can't apply an unknown automation.")}});class La{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((n,r)=>e.call(t,n,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const Cl={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},xl=(i,e,t,n,r,a,h,f,d,p,y,b,S,N)=>class extends e{constructor(k,I,v){var P;const T=f(k),A=d(T),w=y({...Cl,...v});S(w);const D=Fr.get(T),c=D==null?void 0:D.get(I),O=A||T.state!=="closed"?T:(P=h(T))!==null&&P!==void 0?P:T,j=r(O,A?null:k.baseLatency,p,I,c,w),U=A?n(I,w,c):null;super(k,!0,j,U);const $=[];j.parameters.forEach((z,Y)=>{const oe=t(this,A,z);$.push([Y,oe])}),this._nativeAudioWorkletNode=j,this._onprocessorerror=null,this._parameters=new La($),A&&i(T,this);const{activeInputs:H}=a(this);b(j,H)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(k){const I=typeof k=="function"?N(this,k):null;this._nativeAudioWorkletNode.onprocessorerror=I;const v=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=v!==null&&v===I?k:v}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Pi(i,e,t,n,r){if(typeof i.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),i.copyFromChannel(e[t],n,r);else{const a=i.getChannelData(n);if(e[t].byteLength===0)e[t]=a.slice(r,r+128);else{const h=new Float32Array(a.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(h)}}}const ja=(i,e,t,n,r)=>{typeof i.copyToChannel=="function"?e[t].byteLength!==0&&i.copyToChannel(e[t],n,r):e[t].byteLength!==0&&i.getChannelData(n).set(e[t],r)},Fi=(i,e)=>{const t=[];for(let n=0;n<i;n+=1){const r=[],a=typeof e=="number"?e:e[n];for(let h=0;h<a;h+=1)r.push(new Float32Array(128));t.push(r)}return t},Sl=(i,e)=>{const t=Kt(qr,i),n=Le(e);return Kt(t,n)},Al=async(i,e,t,n,r,a,h)=>{const f=e===null?Math.ceil(i.context.length/128)*128:e.length,d=n.channelCount*n.numberOfInputs,p=r.reduce((I,v)=>I+v,0),y=p===0?null:t.createBuffer(p,f,t.sampleRate);if(a===void 0)throw new Error("Missing the processor constructor.");const b=pt(i),S=await Sl(t,i),N=Fi(n.numberOfInputs,n.channelCount),C=Fi(n.numberOfOutputs,r),k=Array.from(i.parameters.keys()).reduce((I,v)=>({...I,[v]:new Float32Array(128)}),{});for(let I=0;I<f;I+=128){if(n.numberOfInputs>0&&e!==null)for(let v=0;v<n.numberOfInputs;v+=1)for(let P=0;P<n.channelCount;P+=1)Pi(e,N[v],P,P,I);a.parameterDescriptors!==void 0&&e!==null&&a.parameterDescriptors.forEach(({name:v},P)=>{Pi(e,k,v,d+P,I)});for(let v=0;v<n.numberOfInputs;v+=1)for(let P=0;P<r[v];P+=1)C[v][P].byteLength===0&&(C[v][P]=new Float32Array(128));try{const v=N.map((T,A)=>b.activeInputs[A].size===0?[]:T),P=h(I/t.sampleRate,t.sampleRate,()=>S.process(v,C,k));if(y!==null)for(let T=0,A=0;T<n.numberOfOutputs;T+=1){for(let w=0;w<r[T];w+=1)ja(y,C[T],w,A+w,I);A+=r[T]}if(!P)break}catch(v){i.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return y},kl=(i,e,t,n,r,a,h,f,d,p,y,b,S,N,C,k)=>(I,v,P)=>{const T=new WeakMap;let A=null;const w=async(D,c)=>{let O=y(D),j=null;const U=ht(O,c),$=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(b===null){const H=$.reduce((Q,J)=>Q+J,0),z=r(c,{channelCount:Math.max(1,H),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,H)}),Y=[];for(let Q=0;Q<D.numberOfOutputs;Q+=1)Y.push(n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:$[Q]}));const oe=h(c,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});oe.connect=e.bind(null,Y),oe.disconnect=d.bind(null,Y),j=[z,Y,oe]}else U||(O=new b(c,I));if(T.set(c,j===null?O:j[2]),j!==null){if(A===null){if(P===void 0)throw new Error("Missing the processor constructor.");if(S===null)throw new Error("Missing the native OfflineAudioContext constructor.");const J=D.channelCount*D.numberOfInputs,pe=P.parameterDescriptors===void 0?0:P.parameterDescriptors.length,ie=J+pe;A=Al(D,ie===0?null:await(async()=>{const he=new S(ie,Math.ceil(D.context.length/128)*128,c.sampleRate),Me=[],it=[];for(let Re=0;Re<v.numberOfInputs;Re+=1)Me.push(h(he,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),it.push(r(he,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const ct=await Promise.all(Array.from(D.parameters.values()).map(async Re=>{const rt=a(he,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Re.value});return await N(he,Re,rt.offset),rt})),ye=n(he,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,J+pe)});for(let Re=0;Re<v.numberOfInputs;Re+=1){Me[Re].connect(it[Re]);for(let rt=0;rt<v.channelCount;rt+=1)it[Re].connect(ye,rt,Re*v.channelCount+rt)}for(const[Re,rt]of ct.entries())rt.connect(ye,0,J+Re),rt.start(0);return ye.connect(he.destination),await Promise.all(Me.map(Re=>C(D,he,Re))),k(he)})(),c,v,$,P,p)}const H=await A,z=t(c,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[Y,oe,Q]=j;H!==null&&(z.buffer=H,z.start(0)),z.connect(Y);for(let J=0,pe=0;J<D.numberOfOutputs;J+=1){const ie=oe[J];for(let fe=0;fe<$[J];fe+=1)Y.connect(ie,pe+fe,fe);pe+=$[J]}return Q}if(U)for(const[H,z]of D.parameters.entries())await i(c,z,O.parameters.get(H));else for(const[H,z]of D.parameters.entries())await N(c,z,O.parameters.get(H));return await C(D,c,O),O};return{render(D,c){f(c,D);const O=T.get(c);return O!==void 0?Promise.resolve(O):w(D,c)}}},Nl=(i,e,t,n,r,a,h,f,d,p,y,b,S,N,C,k,I,v,P,T)=>class extends C{constructor(w,D){super(w,D),this._nativeContext=w,this._audioWorklet=i===void 0?void 0:{addModule:(c,O)=>i(this,c,O)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(w,D,c){return new t({length:D,numberOfChannels:w,sampleRate:c})}createBufferSource(){return new n(this)}createChannelMerger(w=6){return new a(this,{numberOfInputs:w})}createChannelSplitter(w=6){return new h(this,{numberOfOutputs:w})}createConstantSource(){return new f(this)}createConvolver(){return new d(this)}createDelay(w=1){return new y(this,{maxDelayTime:w})}createDynamicsCompressor(){return new b(this)}createGain(){return new S(this)}createIIRFilter(w,D){return new N(this,{feedback:D,feedforward:w})}createOscillator(){return new k(this)}createPanner(){return new I(this)}createPeriodicWave(w,D,c={disableNormalization:!1}){return new v(this,{...c,imag:D,real:w})}createStereoPanner(){return new P(this)}createWaveShaper(){return new T(this)}decodeAudioData(w,D,c){return p(this._nativeContext,w).then(O=>(typeof D=="function"&&D(O),O),O=>{throw typeof c=="function"&&c(O),O})}},Ml={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},El=(i,e,t,n,r,a,h,f)=>class extends i{constructor(p,y){const b=a(p),S={...Ml,...y},N=r(b,S),C=h(b),k=C?t():null;super(p,!1,N,k),this._Q=e(this,C,N.Q,dt,bt),this._detune=e(this,C,N.detune,1200*Math.log2(dt),-1200*Math.log2(dt)),this._frequency=e(this,C,N.frequency,p.sampleRate/2,0),this._gain=e(this,C,N.gain,40*Math.log10(dt),bt),this._nativeBiquadFilterNode=N,f(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(p){this._nativeBiquadFilterNode.type=p}getFrequencyResponse(p,y,b){try{this._nativeBiquadFilterNode.getFrequencyResponse(p,y,b)}catch(S){throw S.code===11?n():S}if(p.length!==y.length||y.length!==b.length)throw n()}},Ol=(i,e,t,n,r)=>()=>{const a=new WeakMap,h=async(f,d)=>{let p=t(f);const y=ht(p,d);if(!y){const b={Q:p.Q.value,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,detune:p.detune.value,frequency:p.frequency.value,gain:p.gain.value,type:p.type};p=e(d,b)}return a.set(d,p),y?(await i(d,f.Q,p.Q),await i(d,f.detune,p.detune),await i(d,f.frequency,p.frequency),await i(d,f.gain,p.gain)):(await n(d,f.Q,p.Q),await n(d,f.detune,p.detune),await n(d,f.frequency,p.frequency),await n(d,f.gain,p.gain)),await r(f,d,p),p};return{render(f,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):h(f,d)}}},Dl=(i,e)=>(t,n)=>{const r=e.get(t);if(r!==void 0)return r;const a=i.get(t);if(a!==void 0)return a;try{const h=n();return h instanceof Promise?(i.set(t,h),h.catch(()=>!1).then(f=>(i.delete(t),e.set(t,f),f))):(e.set(t,h),h)}catch{return e.set(t,!1),!1}},Il={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Rl=(i,e,t,n,r)=>class extends i{constructor(h,f){const d=n(h),p={...Il,...f},y=t(d,p),b=r(d)?e():null;super(h,!1,y,b)}},Pl=(i,e,t)=>()=>{const n=new WeakMap,r=async(a,h)=>{let f=e(a);if(!ht(f,h)){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,numberOfInputs:f.numberOfInputs};f=i(h,p)}return n.set(h,f),await t(a,h,f),f};return{render(a,h){const f=n.get(h);return f!==void 0?Promise.resolve(f):r(a,h)}}},Fl={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},ql=(i,e,t,n,r,a)=>class extends i{constructor(f,d){const p=n(f),y=a({...Fl,...d}),b=t(p,y),S=r(p)?e():null;super(f,!1,b,S)}},Vl=(i,e,t)=>()=>{const n=new WeakMap,r=async(a,h)=>{let f=e(a);if(!ht(f,h)){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,numberOfOutputs:f.numberOfOutputs};f=i(h,p)}return n.set(h,f),await t(a,h,f),f};return{render(a,h){const f=n.get(h);return f!==void 0?Promise.resolve(f):r(a,h)}}},Ll=i=>(e,t,n)=>i(t,e,n),jl=i=>(e,t,n=0,r=0)=>{const a=e[n];if(a===void 0)throw i();return Ri(t)?a.connect(t,0,r):a.connect(t,0)},Wl=i=>(e,t)=>{const n=i(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return n.buffer=r,n.loop=!0,n.connect(t),n.start(),()=>{n.stop(),n.disconnect(t)}},Bl={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Kl=(i,e,t,n,r,a,h)=>class extends i{constructor(d,p){const y=r(d),b={...Bl,...p},S=n(y,b),N=a(y),C=N?t():null;super(d,!1,S,C),this._constantSourceNodeRenderer=C,this._nativeConstantSourceNode=S,this._offset=e(this,N,S.offset,dt,bt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(d){const p=typeof d=="function"?h(this,d):null;this._nativeConstantSourceNode.onended=p;const y=this._nativeConstantSourceNode.onended;this._onended=y!==null&&y===p?d:y}start(d=0){if(this._nativeConstantSourceNode.start(d),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=d),this.context.state!=="closed"){us(this);const p=()=>{this._nativeConstantSourceNode.removeEventListener("ended",p),dn(this)&&Ys(this)};this._nativeConstantSourceNode.addEventListener("ended",p)}}stop(d=0){this._nativeConstantSourceNode.stop(d),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=d)}},Ul=(i,e,t,n,r)=>()=>{const a=new WeakMap;let h=null,f=null;const d=async(p,y)=>{let b=t(p);const S=ht(b,y);if(!S){const N={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,offset:b.offset.value};b=e(y,N),h!==null&&b.start(h),f!==null&&b.stop(f)}return a.set(y,b),S?await i(y,p.offset,b.offset):await n(y,p.offset,b.offset),await r(p,y,b),b};return{set start(p){h=p},set stop(p){f=p},render(p,y){const b=a.get(y);return b!==void 0?Promise.resolve(b):d(p,y)}}},Hl=i=>e=>(i[0]=e,i[0]),$l={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},zl=(i,e,t,n,r,a)=>class extends i{constructor(f,d){const p=n(f),y={...$l,...d},b=t(p,y),N=r(p)?e():null;super(f,!1,b,N),this._isBufferNullified=!1,this._nativeConvolverNode=b,y.buffer!==null&&a(this,y.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(f){if(this._nativeConvolverNode.buffer=f,f===null&&this._nativeConvolverNode.buffer!==null){const d=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=d.createBuffer(1,1,d.sampleRate),this._isBufferNullified=!0,a(this,0)}else this._isBufferNullified=!1,a(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(f){this._nativeConvolverNode.normalize=f}},Gl=(i,e,t)=>()=>{const n=new WeakMap,r=async(a,h)=>{let f=e(a);if(!ht(f,h)){const p={buffer:f.buffer,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,disableNormalization:!f.normalize};f=i(h,p)}return n.set(h,f),ps(f)?await t(a,h,f.inputs[0]):await t(a,h,f),f};return{render(a,h){const f=n.get(h);return f!==void 0?Promise.resolve(f):r(a,h)}}},Xl=(i,e)=>(t,n,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,n,r)}catch(a){throw a.name==="SyntaxError"?i():a}},Zl=()=>new DOMException("","DataCloneError"),ha=i=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(n=>{const r=()=>{t.onmessage=null,e.close(),t.close(),n()};t.onmessage=()=>r();try{e.postMessage(i,[i])}catch{}finally{r()}})},Yl=(i,e,t,n,r,a,h,f,d,p,y)=>(b,S)=>{const N=h(b)?b:a(b);if(r.has(S)){const C=t();return Promise.reject(C)}try{r.add(S)}catch{}return e(d,()=>d(N))?N.decodeAudioData(S).then(C=>(ha(S).catch(()=>{}),e(f,()=>f(C))||y(C),i.add(C),C)):new Promise((C,k)=>{const I=async()=>{try{await ha(S)}catch{}},v=P=>{k(P),I()};try{N.decodeAudioData(S,P=>{typeof P.copyFromChannel!="function"&&(p(P),$r(P)),i.add(P),I().then(()=>C(P))},P=>{v(P===null?n():P)})}catch(P){v(P)}})},Ql=(i,e,t,n,r,a,h,f)=>(d,p)=>{const y=e.get(d);if(y===void 0)throw new Error("Missing the expected cycle count.");const b=a(d.context),S=f(b);if(y===p){if(e.delete(d),!S&&h(d)){const N=n(d),{outputs:C}=t(d);for(const k of C)if(Js(k)){const I=n(k[0]);i(N,I,k[1],k[2])}else{const I=r(k[0]);N.connect(I,k[1])}}}else e.set(d,y-p)},Jl={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},eh=(i,e,t,n,r,a,h)=>class extends i{constructor(d,p){const y=r(d),b={...Jl,...p},S=n(y,b),N=a(y),C=N?t(b.maxDelayTime):null;super(d,!1,S,C),this._delayTime=e(this,N,S.delayTime),h(this,b.maxDelayTime)}get delayTime(){return this._delayTime}},th=(i,e,t,n,r)=>a=>{const h=new WeakMap,f=async(d,p)=>{let y=t(d);const b=ht(y,p);if(!b){const S={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,delayTime:y.delayTime.value,maxDelayTime:a};y=e(p,S)}return h.set(p,y),b?await i(p,d.delayTime,y.delayTime):await n(p,d.delayTime,y.delayTime),await r(d,p,y),y};return{render(d,p){const y=h.get(p);return y!==void 0?Promise.resolve(y):f(d,p)}}},nh=i=>(e,t,n,r)=>i(e[r],a=>a[0]===t&&a[1]===n),sh=i=>(e,t)=>{i(e).delete(t)},ih=i=>"delayTime"in i,rh=(i,e,t)=>function n(r,a){const h=Oi(a)?a:t(i,a);if(ih(h))return[];if(r[0]===h)return[r];if(r.includes(h))return[];const{outputs:f}=e(h);return Array.from(f).map(d=>n([...r,h],d[0])).reduce((d,p)=>d.concat(p),[])},_i=(i,e,t)=>{const n=e[t];if(n===void 0)throw i();return n},oh=i=>(e,t=void 0,n=void 0,r=0)=>t===void 0?e.forEach(a=>a.disconnect()):typeof t=="number"?_i(i,e,t).disconnect():Ri(t)?n===void 0?e.forEach(a=>a.disconnect(t)):r===void 0?_i(i,e,n).disconnect(t,0):_i(i,e,n).disconnect(t,0,r):n===void 0?e.forEach(a=>a.disconnect(t)):_i(i,e,n).disconnect(t,0),ah={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},ch=(i,e,t,n,r,a,h,f)=>class extends i{constructor(p,y){const b=a(p),S={...ah,...y},N=n(b,S),C=h(b),k=C?t():null;super(p,!1,N,k),this._attack=e(this,C,N.attack),this._knee=e(this,C,N.knee),this._nativeDynamicsCompressorNode=N,this._ratio=e(this,C,N.ratio),this._release=e(this,C,N.release),this._threshold=e(this,C,N.threshold),f(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(p){const y=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=p,p>2)throw this._nativeDynamicsCompressorNode.channelCount=y,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(p){const y=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=p,p==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=y,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},uh=(i,e,t,n,r)=>()=>{const a=new WeakMap,h=async(f,d)=>{let p=t(f);const y=ht(p,d);if(!y){const b={attack:p.attack.value,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,knee:p.knee.value,ratio:p.ratio.value,release:p.release.value,threshold:p.threshold.value};p=e(d,b)}return a.set(d,p),y?(await i(d,f.attack,p.attack),await i(d,f.knee,p.knee),await i(d,f.ratio,p.ratio),await i(d,f.release,p.release),await i(d,f.threshold,p.threshold)):(await n(d,f.attack,p.attack),await n(d,f.knee,p.knee),await n(d,f.ratio,p.ratio),await n(d,f.release,p.release),await n(d,f.threshold,p.threshold)),await r(f,d,p),p};return{render(f,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):h(f,d)}}},lh=()=>new DOMException("","EncodingError"),hh=i=>e=>new Promise((t,n)=>{if(i===null){n(new SyntaxError);return}const r=i.document.head;if(r===null)n(new SyntaxError);else{const a=i.document.createElement("script"),h=new Blob([e],{type:"application/javascript"}),f=URL.createObjectURL(h),d=i.onerror,p=()=>{i.onerror=d,URL.revokeObjectURL(f)};i.onerror=(y,b,S,N,C)=>{if(b===f||b===i.location.href&&S===1&&N===1)return p(),n(C),!1;if(d!==null)return d(y,b,S,N,C)},a.onerror=()=>{p(),n(new SyntaxError)},a.onload=()=>{p(),t()},a.src=f,a.type="module",r.appendChild(a)}}),fh=i=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,n,r){if(n!==null){let a=this._listeners.get(n);a===void 0&&(a=i(this,n),typeof n=="function"&&this._listeners.set(n,a)),this._nativeEventTarget.addEventListener(t,a,r)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,n,r){const a=n===null?void 0:this._listeners.get(n);this._nativeEventTarget.removeEventListener(t,a===void 0?null:a,r)}},dh=i=>(e,t,n)=>{Object.defineProperties(i,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return n()}finally{i!==null&&(delete i.currentFrame,delete i.currentTime)}},ph=i=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw i()},mh={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},gh=(i,e,t,n,r,a)=>class extends i{constructor(f,d){const p=r(f),y={...mh,...d},b=n(p,y),S=a(p),N=S?t():null;super(f,!1,b,N),this._gain=e(this,S,b.gain,dt,bt)}get gain(){return this._gain}},vh=(i,e,t,n,r)=>()=>{const a=new WeakMap,h=async(f,d)=>{let p=t(f);const y=ht(p,d);if(!y){const b={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:p.gain.value};p=e(d,b)}return a.set(d,p),y?await i(d,f.gain,p.gain):await n(d,f.gain,p.gain),await r(f,d,p),p};return{render(f,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):h(f,d)}}},_h=(i,e)=>t=>e(i,t),yh=i=>e=>{const t=i(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},bh=i=>e=>{var t;return(t=i.get(e))!==null&&t!==void 0?t:0},wh=i=>e=>{const t=i(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},Th=i=>e=>i.get(e),nt=()=>new DOMException("","InvalidStateError"),Ch=i=>e=>{const t=i.get(e);if(t===void 0)throw nt();return t},xh=(i,e)=>t=>{let n=i.get(t);if(n!==void 0)return n;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return n=new e(1,1,44100),i.set(t,n),n},Sh=i=>e=>{const t=i.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},Yi=()=>new DOMException("","InvalidAccessError"),Ah=i=>{i.getFrequencyResponse=(e=>(t,n,r)=>{if(t.length!==n.length||n.length!==r.length)throw Yi();return e.call(i,t,n,r)})(i.getFrequencyResponse)},kh={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Nh=(i,e,t,n,r,a)=>class extends i{constructor(f,d){const p=n(f),y=r(p),b={...kh,...d},S=e(p,y?null:f.baseLatency,b),N=y?t(b.feedback,b.feedforward):null;super(f,!1,S,N),Ah(S),this._nativeIIRFilterNode=S,a(this,1)}getFrequencyResponse(f,d,p){return this._nativeIIRFilterNode.getFrequencyResponse(f,d,p)}},Wa=(i,e,t,n,r,a,h,f,d,p,y)=>{const b=p.length;let S=f;for(let N=0;N<b;N+=1){let C=t[0]*p[N];for(let k=1;k<r;k+=1){const I=S-k&d-1;C+=t[k]*a[I],C-=i[k]*h[I]}for(let k=r;k<n;k+=1)C+=t[k]*a[S-k&d-1];for(let k=r;k<e;k+=1)C-=i[k]*h[S-k&d-1];a[S]=p[N],h[S]=C,S=S+1&d-1,y[N]=C}return S},Mh=(i,e,t,n)=>{const r=t instanceof Float64Array?t:new Float64Array(t),a=n instanceof Float64Array?n:new Float64Array(n),h=r.length,f=a.length,d=Math.min(h,f);if(r[0]!==1){for(let C=0;C<h;C+=1)a[C]/=r[0];for(let C=1;C<f;C+=1)r[C]/=r[0]}const p=32,y=new Float32Array(p),b=new Float32Array(p),S=e.createBuffer(i.numberOfChannels,i.length,i.sampleRate),N=i.numberOfChannels;for(let C=0;C<N;C+=1){const k=i.getChannelData(C),I=S.getChannelData(C);y.fill(0),b.fill(0),Wa(r,h,a,f,d,y,b,0,p,k,I)}return S},Eh=(i,e,t,n,r)=>(a,h)=>{const f=new WeakMap;let d=null;const p=async(y,b)=>{let S=null,N=e(y);const C=ht(N,b);if(b.createIIRFilter===void 0?S=i(b,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):C||(N=b.createIIRFilter(h,a)),f.set(b,S===null?N:S),S!==null){if(d===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const I=new t(y.context.destination.channelCount,y.context.length,b.sampleRate);d=(async()=>{await n(y,I,I.destination);const v=await r(I);return Mh(v,b,a,h)})()}const k=await d;return S.buffer=k,S.start(0),S}return await n(y,b,N),N};return{render(y,b){const S=f.get(b);return S!==void 0?Promise.resolve(S):p(y,b)}}},Oh=(i,e,t,n,r,a)=>h=>(f,d)=>{const p=i.get(f);if(p===void 0){if(!h&&a(f)){const y=n(f),{outputs:b}=t(f);for(const S of b)if(Js(S)){const N=n(S[0]);e(y,N,S[1],S[2])}else{const N=r(S[0]);y.disconnect(N,S[1])}}i.set(f,d)}else i.set(f,p+d)},Dh=(i,e)=>t=>{const n=i.get(t);return e(n)||e(t)},Ih=(i,e)=>t=>i.has(t)||e(t),Rh=(i,e)=>t=>i.has(t)||e(t),Ph=(i,e)=>t=>{const n=i.get(t);return e(n)||e(t)},Fh=i=>e=>i!==null&&e instanceof i,qh=i=>e=>i!==null&&typeof i.AudioNode=="function"&&e instanceof i.AudioNode,Vh=i=>e=>i!==null&&typeof i.AudioParam=="function"&&e instanceof i.AudioParam,Lh=(i,e)=>t=>i(t)||e(t),jh=i=>e=>i!==null&&e instanceof i,Wh=i=>i!==null&&i.isSecureContext,Bh=(i,e,t,n)=>class extends i{constructor(a,h){const f=t(a),d=e(f,h);if(n(f))throw TypeError();super(a,!0,d,null),this._nativeMediaElementAudioSourceNode=d}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},Kh={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Uh=(i,e,t,n)=>class extends i{constructor(a,h){const f=t(a);if(n(f))throw new TypeError;const d={...Kh,...h},p=e(f,d);super(a,!1,p,null),this._nativeMediaStreamAudioDestinationNode=p}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},Hh=(i,e,t,n)=>class extends i{constructor(a,h){const f=t(a),d=e(f,h);if(n(f))throw new TypeError;super(a,!0,d,null),this._nativeMediaStreamAudioSourceNode=d}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},$h=(i,e,t)=>class extends i{constructor(r,a){const h=t(r),f=e(h,a);super(r,!0,f,null)}},zh=(i,e,t,n,r,a)=>class extends t{constructor(f,d){super(f),this._nativeContext=f,Xi.set(this,f),n(f)&&r.set(f,new Set),this._destination=new i(this,d),this._listener=e(this,f),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(f){const d=typeof f=="function"?a(this,f):null;this._nativeContext.onstatechange=d;const p=this._nativeContext.onstatechange;this._onstatechange=p!==null&&p===d?f:p}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Is=i=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=i.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},Gh=(i,e)=>(t,n,r)=>{const a=new Set;return t.connect=(h=>(f,d=0,p=0)=>{const y=a.size===0;if(e(f))return h.call(t,f,d,p),i(a,[f,d,p],b=>b[0]===f&&b[1]===d&&b[2]===p,!0),y&&n(),f;h.call(t,f,d),i(a,[f,d],b=>b[0]===f&&b[1]===d,!0),y&&n()})(t.connect),t.disconnect=(h=>(f,d,p)=>{const y=a.size>0;if(f===void 0)h.apply(t),a.clear();else if(typeof f=="number"){h.call(t,f);for(const S of a)S[1]===f&&a.delete(S)}else{e(f)?h.call(t,f,d,p):h.call(t,f,d);for(const S of a)S[0]===f&&(d===void 0||S[1]===d)&&(p===void 0||S[2]===p)&&a.delete(S)}const b=a.size===0;y&&b&&r()})(t.disconnect),t},Be=(i,e,t)=>{const n=e[t];n!==void 0&&n!==i[t]&&(i[t]=n)},Je=(i,e)=>{Be(i,e,"channelCount"),Be(i,e,"channelCountMode"),Be(i,e,"channelInterpretation")},fa=i=>typeof i.getFloatTimeDomainData=="function",Xh=i=>{i.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);i.getByteTimeDomainData(t);const n=Math.max(t.length,i.fftSize);for(let r=0;r<n;r+=1)e[r]=(t[r]-128)*.0078125;return e}},Zh=(i,e)=>(t,n)=>{const r=t.createAnalyser();if(Je(r,n),!(n.maxDecibels>n.minDecibels))throw e();return Be(r,n,"fftSize"),Be(r,n,"maxDecibels"),Be(r,n,"minDecibels"),Be(r,n,"smoothingTimeConstant"),i(fa,()=>fa(r))||Xh(r),r},Yh=i=>i===null?null:i.hasOwnProperty("AudioBuffer")?i.AudioBuffer:null,He=(i,e,t)=>{const n=e[t];n!==void 0&&n!==i[t].value&&(i[t].value=n)},Qh=i=>{i.start=(e=>{let t=!1;return(n=0,r=0,a)=>{if(t)throw nt();e.call(i,n,r,a),t=!0}})(i.start)},Xr=i=>{i.start=(e=>(t=0,n=0,r)=>{if(typeof r=="number"&&r<0||n<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(i,t,n,r)})(i.start)},Zr=i=>{i.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(i,t)})(i.stop)},Jh=(i,e,t,n,r,a,h,f,d,p,y)=>(b,S)=>{const N=b.createBufferSource();return Je(N,S),He(N,S,"playbackRate"),Be(N,S,"buffer"),Be(N,S,"loop"),Be(N,S,"loopEnd"),Be(N,S,"loopStart"),e(t,()=>t(b))||Qh(N),e(n,()=>n(b))||d(N),e(r,()=>r(b))||p(N,b),e(a,()=>a(b))||Xr(N),e(h,()=>h(b))||y(N,b),e(f,()=>f(b))||Zr(N),i(b,N),N},ef=i=>i===null?null:i.hasOwnProperty("AudioContext")?i.AudioContext:i.hasOwnProperty("webkitAudioContext")?i.webkitAudioContext:null,tf=(i,e)=>(t,n,r)=>{const a=t.destination;if(a.channelCount!==n)try{a.channelCount=n}catch{}r&&a.channelCountMode!=="explicit"&&(a.channelCountMode="explicit"),a.maxChannelCount===0&&Object.defineProperty(a,"maxChannelCount",{value:n});const h=i(t,{channelCount:n,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1});return e(h,"channelCount",f=>()=>f.call(h),f=>d=>{f.call(h,d);try{a.channelCount=d}catch(p){if(d>a.maxChannelCount)throw p}}),e(h,"channelCountMode",f=>()=>f.call(h),f=>d=>{f.call(h,d),a.channelCountMode=d}),e(h,"channelInterpretation",f=>()=>f.call(h),f=>d=>{f.call(h,d),a.channelInterpretation=d}),Object.defineProperty(h,"maxChannelCount",{get:()=>a.maxChannelCount}),h.connect(a),h},nf=i=>i===null?null:i.hasOwnProperty("AudioWorkletNode")?i.AudioWorkletNode:null,sf=i=>{const{port1:e}=new MessageChannel;try{e.postMessage(i)}finally{e.close()}},rf=(i,e,t,n,r)=>(a,h,f,d,p,y)=>{if(f!==null)try{const b=new f(a,d,y),S=new Map;let N=null;if(Object.defineProperties(b,{channelCount:{get:()=>y.channelCount,set:()=>{throw i()}},channelCountMode:{get:()=>"explicit",set:()=>{throw i()}},onprocessorerror:{get:()=>N,set:C=>{typeof N=="function"&&b.removeEventListener("processorerror",N),N=typeof C=="function"?C:null,typeof N=="function"&&b.addEventListener("processorerror",N)}}}),b.addEventListener=(C=>(...k)=>{if(k[0]==="processorerror"){const I=typeof k[1]=="function"?k[1]:typeof k[1]=="object"&&k[1]!==null&&typeof k[1].handleEvent=="function"?k[1].handleEvent:null;if(I!==null){const v=S.get(k[1]);v!==void 0?k[1]=v:(k[1]=P=>{P.type==="error"?(Object.defineProperties(P,{type:{value:"processorerror"}}),I(P)):I(new ErrorEvent(k[0],{...P}))},S.set(I,k[1]))}}return C.call(b,"error",k[1],k[2]),C.call(b,...k)})(b.addEventListener),b.removeEventListener=(C=>(...k)=>{if(k[0]==="processorerror"){const I=S.get(k[1]);I!==void 0&&(S.delete(k[1]),k[1]=I)}return C.call(b,"error",k[1],k[2]),C.call(b,k[0],k[1],k[2])})(b.removeEventListener),y.numberOfOutputs!==0){const C=t(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return b.connect(C).connect(a.destination),r(b,()=>C.disconnect(),()=>C.connect(a.destination))}return b}catch(b){throw b.code===11?n():b}if(p===void 0)throw n();return sf(y),e(a,h,p,y)},Ba=(i,e)=>i===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(i*e))))),of=i=>new Promise((e,t)=>{const{port1:n,port2:r}=new MessageChannel;n.onmessage=({data:a})=>{n.close(),r.close(),e(a)},n.onmessageerror=({data:a})=>{n.close(),r.close(),t(a)},r.postMessage(i)}),af=async(i,e)=>{const t=await of(e);return new i(t)},cf=(i,e,t,n)=>{let r=qr.get(i);r===void 0&&(r=new WeakMap,qr.set(i,r));const a=af(t,n);return r.set(e,a),a},uf=(i,e,t,n,r,a,h,f,d,p,y,b,S)=>(N,C,k,I)=>{if(I.numberOfInputs===0&&I.numberOfOutputs===0)throw d();const v=Array.isArray(I.outputChannelCount)?I.outputChannelCount:Array.from(I.outputChannelCount);if(v.some(ne=>ne<1))throw d();if(v.length!==I.numberOfOutputs)throw e();if(I.channelCountMode!=="explicit")throw d();const P=I.channelCount*I.numberOfInputs,T=v.reduce((ne,ue)=>ne+ue,0),A=k.parameterDescriptors===void 0?0:k.parameterDescriptors.length;if(P+A>6||T>6)throw d();const w=new MessageChannel,D=[],c=[];for(let ne=0;ne<I.numberOfInputs;ne+=1)D.push(h(N,{channelCount:I.channelCount,channelCountMode:I.channelCountMode,channelInterpretation:I.channelInterpretation,gain:1})),c.push(r(N,{channelCount:I.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:I.channelCount}));const O=[];if(k.parameterDescriptors!==void 0)for(const{defaultValue:ne,maxValue:ue,minValue:je,name:Se}of k.parameterDescriptors){const Ae=a(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:I.parameterData[Se]!==void 0?I.parameterData[Se]:ne===void 0?0:ne});Object.defineProperties(Ae.offset,{defaultValue:{get:()=>ne===void 0?0:ne},maxValue:{get:()=>ue===void 0?dt:ue},minValue:{get:()=>je===void 0?bt:je}}),O.push(Ae)}const j=n(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,P+A)}),U=Ba(C,N.sampleRate),$=f(N,U,P+A,Math.max(1,T)),H=r(N,{channelCount:Math.max(1,T),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,T)}),z=[];for(let ne=0;ne<I.numberOfOutputs;ne+=1)z.push(n(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[ne]}));for(let ne=0;ne<I.numberOfInputs;ne+=1){D[ne].connect(c[ne]);for(let ue=0;ue<I.channelCount;ue+=1)c[ne].connect(j,ue,ne*I.channelCount+ue)}const Y=new La(k.parameterDescriptors===void 0?[]:k.parameterDescriptors.map(({name:ne},ue)=>{const je=O[ue];return je.connect(j,0,P+ue),je.start(0),[ne,je.offset]}));j.connect($);let oe=I.channelInterpretation,Q=null;const J=I.numberOfOutputs===0?[$]:z,pe={get bufferSize(){return U},get channelCount(){return I.channelCount},set channelCount(ne){throw t()},get channelCountMode(){return I.channelCountMode},set channelCountMode(ne){throw t()},get channelInterpretation(){return oe},set channelInterpretation(ne){for(const ue of D)ue.channelInterpretation=ne;oe=ne},get context(){return $.context},get inputs(){return D},get numberOfInputs(){return I.numberOfInputs},get numberOfOutputs(){return I.numberOfOutputs},get onprocessorerror(){return Q},set onprocessorerror(ne){typeof Q=="function"&&pe.removeEventListener("processorerror",Q),Q=typeof ne=="function"?ne:null,typeof Q=="function"&&pe.addEventListener("processorerror",Q)},get parameters(){return Y},get port(){return w.port2},addEventListener(...ne){return $.addEventListener(ne[0],ne[1],ne[2])},connect:i.bind(null,J),disconnect:p.bind(null,J),dispatchEvent(...ne){return $.dispatchEvent(ne[0])},removeEventListener(...ne){return $.removeEventListener(ne[0],ne[1],ne[2])}},ie=new Map;w.port1.addEventListener=(ne=>(...ue)=>{if(ue[0]==="message"){const je=typeof ue[1]=="function"?ue[1]:typeof ue[1]=="object"&&ue[1]!==null&&typeof ue[1].handleEvent=="function"?ue[1].handleEvent:null;if(je!==null){const Se=ie.get(ue[1]);Se!==void 0?ue[1]=Se:(ue[1]=Ae=>{y(N.currentTime,N.sampleRate,()=>je(Ae))},ie.set(je,ue[1]))}}return ne.call(w.port1,ue[0],ue[1],ue[2])})(w.port1.addEventListener),w.port1.removeEventListener=(ne=>(...ue)=>{if(ue[0]==="message"){const je=ie.get(ue[1]);je!==void 0&&(ie.delete(ue[1]),ue[1]=je)}return ne.call(w.port1,ue[0],ue[1],ue[2])})(w.port1.removeEventListener);let fe=null;Object.defineProperty(w.port1,"onmessage",{get:()=>fe,set:ne=>{typeof fe=="function"&&w.port1.removeEventListener("message",fe),fe=typeof ne=="function"?ne:null,typeof fe=="function"&&(w.port1.addEventListener("message",fe),w.port1.start())}}),k.prototype.port=w.port1;let he=null;cf(N,pe,k,I).then(ne=>he=ne);const it=Fi(I.numberOfInputs,I.channelCount),ct=Fi(I.numberOfOutputs,v),ye=k.parameterDescriptors===void 0?[]:k.parameterDescriptors.reduce((ne,{name:ue})=>({...ne,[ue]:new Float32Array(128)}),{});let Re=!0;const rt=()=>{I.numberOfOutputs>0&&$.disconnect(H);for(let ne=0,ue=0;ne<I.numberOfOutputs;ne+=1){const je=z[ne];for(let Se=0;Se<v[ne];Se+=1)H.disconnect(je,ue+Se,Se);ue+=v[ne]}},ae=new Map;$.onaudioprocess=({inputBuffer:ne,outputBuffer:ue})=>{if(he!==null){const je=b(pe);for(let Se=0;Se<U;Se+=128){for(let Ae=0;Ae<I.numberOfInputs;Ae+=1)for(let We=0;We<I.channelCount;We+=1)Pi(ne,it[Ae],We,We,Se);k.parameterDescriptors!==void 0&&k.parameterDescriptors.forEach(({name:Ae},We)=>{Pi(ne,ye,Ae,P+We,Se)});for(let Ae=0;Ae<I.numberOfInputs;Ae+=1)for(let We=0;We<v[Ae];We+=1)ct[Ae][We].byteLength===0&&(ct[Ae][We]=new Float32Array(128));try{const Ae=it.map((gt,Ye)=>{if(je[Ye].size>0)return ae.set(Ye,U/128),gt;const on=ae.get(Ye);return on===void 0?[]:(gt.every(re=>re.every(ut=>ut===0))&&(on===1?ae.delete(Ye):ae.set(Ye,on-1)),gt)});Re=y(N.currentTime+Se/N.sampleRate,N.sampleRate,()=>he.process(Ae,ct,ye));for(let gt=0,Ye=0;gt<I.numberOfOutputs;gt+=1){for(let Ft=0;Ft<v[gt];Ft+=1)ja(ue,ct[gt],Ft,Ye+Ft,Se);Ye+=v[gt]}}catch(Ae){Re=!1,pe.dispatchEvent(new ErrorEvent("processorerror",{colno:Ae.colno,filename:Ae.filename,lineno:Ae.lineno,message:Ae.message}))}if(!Re){for(let Ae=0;Ae<I.numberOfInputs;Ae+=1){D[Ae].disconnect(c[Ae]);for(let We=0;We<I.channelCount;We+=1)c[Se].disconnect(j,We,Ae*I.channelCount+We)}if(k.parameterDescriptors!==void 0){const Ae=k.parameterDescriptors.length;for(let We=0;We<Ae;We+=1){const gt=O[We];gt.disconnect(j,0,P+We),gt.stop()}}j.disconnect($),$.onaudioprocess=null,zt?rt():At();break}}}};let zt=!1;const et=h(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),yn=()=>$.connect(et).connect(N.destination),At=()=>{$.disconnect(et),et.disconnect()},Gn=()=>{if(Re){At(),I.numberOfOutputs>0&&$.connect(H);for(let ne=0,ue=0;ne<I.numberOfOutputs;ne+=1){const je=z[ne];for(let Se=0;Se<v[ne];Se+=1)H.connect(je,ue+Se,Se);ue+=v[ne]}}zt=!0},ai=()=>{Re&&(yn(),rt()),zt=!1};return yn(),S(pe,Gn,ai)},Ka=(i,e)=>{const t=i.createBiquadFilter();return Je(t,e),He(t,e,"Q"),He(t,e,"detune"),He(t,e,"frequency"),He(t,e,"gain"),Be(t,e,"type"),t},lf=(i,e)=>(t,n)=>{const r=t.createChannelMerger(n.numberOfInputs);return i!==null&&i.name==="webkitAudioContext"&&e(t,r),Je(r,n),r},hf=i=>{const e=i.numberOfOutputs;Object.defineProperty(i,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw nt()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw nt()}}),Object.defineProperty(i,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw nt()}})},ei=(i,e)=>{const t=i.createChannelSplitter(e.numberOfOutputs);return Je(t,e),hf(t),t},ff=(i,e,t,n,r)=>(a,h)=>{if(a.createConstantSource===void 0)return t(a,h);const f=a.createConstantSource();return Je(f,h),He(f,h,"offset"),e(n,()=>n(a))||Xr(f),e(r,()=>r(a))||Zr(f),i(a,f),f},ms=(i,e)=>(i.connect=e.connect.bind(e),i.disconnect=e.disconnect.bind(e),i),df=(i,e,t,n)=>(r,{offset:a,...h})=>{const f=r.createBuffer(1,2,44100),d=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),p=t(r,{...h,gain:a}),y=f.getChannelData(0);y[0]=1,y[1]=1,d.buffer=f,d.loop=!0;const b={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(C){p.channelCount=C},get channelCountMode(){return p.channelCountMode},set channelCountMode(C){p.channelCountMode=C},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(C){p.channelInterpretation=C},get context(){return p.context},get inputs(){return[]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get offset(){return p.gain},get onended(){return d.onended},set onended(C){d.onended=C},addEventListener(...C){return d.addEventListener(C[0],C[1],C[2])},dispatchEvent(...C){return d.dispatchEvent(C[0])},removeEventListener(...C){return d.removeEventListener(C[0],C[1],C[2])},start(C=0){d.start.call(d,C)},stop(C=0){d.stop.call(d,C)}},S=()=>d.connect(p),N=()=>d.disconnect(p);return i(r,d),n(ms(b,p),S,N)},pf=(i,e)=>(t,n)=>{const r=t.createConvolver();if(Je(r,n),n.disableNormalization===r.normalize&&(r.normalize=!n.disableNormalization),Be(r,n,"buffer"),n.channelCount>2||(e(r,"channelCount",a=>()=>a.call(r),a=>h=>{if(h>2)throw i();return a.call(r,h)}),n.channelCountMode==="max"))throw i();return e(r,"channelCountMode",a=>()=>a.call(r),a=>h=>{if(h==="max")throw i();return a.call(r,h)}),r},Ua=(i,e)=>{const t=i.createDelay(e.maxDelayTime);return Je(t,e),He(t,e,"delayTime"),t},mf=i=>(e,t)=>{const n=e.createDynamicsCompressor();if(Je(n,t),t.channelCount>2||t.channelCountMode==="max")throw i();return He(n,t,"attack"),He(n,t,"knee"),He(n,t,"ratio"),He(n,t,"release"),He(n,t,"threshold"),n},xt=(i,e)=>{const t=i.createGain();return Je(t,e),He(t,e,"gain"),t},gf=i=>(e,t,n)=>{if(e.createIIRFilter===void 0)return i(e,t,n);const r=e.createIIRFilter(n.feedforward,n.feedback);return Je(r,n),r};function vf(i,e){const t=e[0]*e[0]+e[1]*e[1];return[(i[0]*e[0]+i[1]*e[1])/t,(i[1]*e[0]-i[0]*e[1])/t]}function _f(i,e){return[i[0]*e[0]-i[1]*e[1],i[0]*e[1]+i[1]*e[0]]}function da(i,e){let t=[0,0];for(let n=i.length-1;n>=0;n-=1)t=_f(t,e),t[0]+=i[n];return t}const yf=(i,e,t,n)=>(r,a,{channelCount:h,channelCountMode:f,channelInterpretation:d,feedback:p,feedforward:y})=>{const b=Ba(a,r.sampleRate),S=p instanceof Float64Array?p:new Float64Array(p),N=y instanceof Float64Array?y:new Float64Array(y),C=S.length,k=N.length,I=Math.min(C,k);if(C===0||C>20)throw n();if(S[0]===0)throw e();if(k===0||k>20)throw n();if(N[0]===0)throw e();if(S[0]!==1){for(let O=0;O<k;O+=1)N[O]/=S[0];for(let O=1;O<C;O+=1)S[O]/=S[0]}const v=t(r,b,h,h);v.channelCount=h,v.channelCountMode=f,v.channelInterpretation=d;const P=32,T=[],A=[],w=[];for(let O=0;O<h;O+=1){T.push(0);const j=new Float32Array(P),U=new Float32Array(P);j.fill(0),U.fill(0),A.push(j),w.push(U)}v.onaudioprocess=O=>{const j=O.inputBuffer,U=O.outputBuffer,$=j.numberOfChannels;for(let H=0;H<$;H+=1){const z=j.getChannelData(H),Y=U.getChannelData(H);T[H]=Wa(S,C,N,k,I,A[H],w[H],T[H],P,z,Y)}};const D=r.sampleRate/2;return ms({get bufferSize(){return b},get channelCount(){return v.channelCount},set channelCount(O){v.channelCount=O},get channelCountMode(){return v.channelCountMode},set channelCountMode(O){v.channelCountMode=O},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(O){v.channelInterpretation=O},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener(...O){return v.addEventListener(O[0],O[1],O[2])},dispatchEvent(...O){return v.dispatchEvent(O[0])},getFrequencyResponse(O,j,U){if(O.length!==j.length||j.length!==U.length)throw i();const $=O.length;for(let H=0;H<$;H+=1){const z=-Math.PI*(O[H]/D),Y=[Math.cos(z),Math.sin(z)],oe=da(N,Y),Q=da(S,Y),J=vf(oe,Q);j[H]=Math.sqrt(J[0]*J[0]+J[1]*J[1]),U[H]=Math.atan2(J[1],J[0])}},removeEventListener(...O){return v.removeEventListener(O[0],O[1],O[2])}},v)},bf=(i,e)=>i.createMediaElementSource(e.mediaElement),wf=(i,e)=>{const t=i.createMediaStreamDestination();return Je(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},Tf=(i,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((a,h)=>a.id<h.id?-1:a.id>h.id?1:0);const n=t.slice(0,1),r=i.createMediaStreamSource(new MediaStream(n));return Object.defineProperty(r,"mediaStream",{value:e}),r},Cf=(i,e)=>(t,{mediaStreamTrack:n})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(n);const r=new MediaStream([n]),a=t.createMediaStreamSource(r);if(n.kind!=="audio")throw i();if(e(t))throw new TypeError;return a},xf=i=>i===null?null:i.hasOwnProperty("OfflineAudioContext")?i.OfflineAudioContext:i.hasOwnProperty("webkitOfflineAudioContext")?i.webkitOfflineAudioContext:null,Sf=(i,e,t,n,r,a)=>(h,f)=>{const d=h.createOscillator();return Je(d,f),He(d,f,"detune"),He(d,f,"frequency"),f.periodicWave!==void 0?d.setPeriodicWave(f.periodicWave):Be(d,f,"type"),e(t,()=>t(h))||Xr(d),e(n,()=>n(h))||a(d,h),e(r,()=>r(h))||Zr(d),i(h,d),d},Af=i=>(e,t)=>{const n=e.createPanner();return n.orientationX===void 0?i(e,t):(Je(n,t),He(n,t,"orientationX"),He(n,t,"orientationY"),He(n,t,"orientationZ"),He(n,t,"positionX"),He(n,t,"positionY"),He(n,t,"positionZ"),Be(n,t,"coneInnerAngle"),Be(n,t,"coneOuterAngle"),Be(n,t,"coneOuterGain"),Be(n,t,"distanceModel"),Be(n,t,"maxDistance"),Be(n,t,"panningModel"),Be(n,t,"refDistance"),Be(n,t,"rolloffFactor"),n)},kf=(i,e,t,n,r,a,h,f,d,p)=>(y,{coneInnerAngle:b,coneOuterAngle:S,coneOuterGain:N,distanceModel:C,maxDistance:k,orientationX:I,orientationY:v,orientationZ:P,panningModel:T,positionX:A,positionY:w,positionZ:D,refDistance:c,rolloffFactor:O,...j})=>{const U=y.createPanner();if(j.channelCount>2||j.channelCountMode==="max")throw h();Je(U,j);const $={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},H=t(y,{...$,channelInterpretation:"speakers",numberOfInputs:6}),z=n(y,{...j,gain:1}),Y=n(y,{...$,gain:1}),oe=n(y,{...$,gain:0}),Q=n(y,{...$,gain:0}),J=n(y,{...$,gain:0}),pe=n(y,{...$,gain:0}),ie=n(y,{...$,gain:0}),fe=r(y,256,6,1),he=a(y,{...$,curve:new Float32Array([1,1]),oversample:"none"});let Me=[I,v,P],it=[A,w,D];const ct=new Float32Array(1);fe.onaudioprocess=({inputBuffer:ae})=>{const zt=[d(ae,ct,0),d(ae,ct,1),d(ae,ct,2)];zt.some((yn,At)=>yn!==Me[At])&&(U.setOrientation(...zt),Me=zt);const et=[d(ae,ct,3),d(ae,ct,4),d(ae,ct,5)];et.some((yn,At)=>yn!==it[At])&&(U.setPosition(...et),it=et)},Object.defineProperty(oe.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(J.gain,"defaultValue",{get:()=>0}),Object.defineProperty(pe.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ie.gain,"defaultValue",{get:()=>0});const ye={get bufferSize(){},get channelCount(){return U.channelCount},set channelCount(ae){if(ae>2)throw h();z.channelCount=ae,U.channelCount=ae},get channelCountMode(){return U.channelCountMode},set channelCountMode(ae){if(ae==="max")throw h();z.channelCountMode=ae,U.channelCountMode=ae},get channelInterpretation(){return U.channelInterpretation},set channelInterpretation(ae){z.channelInterpretation=ae,U.channelInterpretation=ae},get coneInnerAngle(){return U.coneInnerAngle},set coneInnerAngle(ae){U.coneInnerAngle=ae},get coneOuterAngle(){return U.coneOuterAngle},set coneOuterAngle(ae){U.coneOuterAngle=ae},get coneOuterGain(){return U.coneOuterGain},set coneOuterGain(ae){if(ae<0||ae>1)throw e();U.coneOuterGain=ae},get context(){return U.context},get distanceModel(){return U.distanceModel},set distanceModel(ae){U.distanceModel=ae},get inputs(){return[z]},get maxDistance(){return U.maxDistance},set maxDistance(ae){if(ae<0)throw new RangeError;U.maxDistance=ae},get numberOfInputs(){return U.numberOfInputs},get numberOfOutputs(){return U.numberOfOutputs},get orientationX(){return Y.gain},get orientationY(){return oe.gain},get orientationZ(){return Q.gain},get panningModel(){return U.panningModel},set panningModel(ae){U.panningModel=ae},get positionX(){return J.gain},get positionY(){return pe.gain},get positionZ(){return ie.gain},get refDistance(){return U.refDistance},set refDistance(ae){if(ae<0)throw new RangeError;U.refDistance=ae},get rolloffFactor(){return U.rolloffFactor},set rolloffFactor(ae){if(ae<0)throw new RangeError;U.rolloffFactor=ae},addEventListener(...ae){return z.addEventListener(ae[0],ae[1],ae[2])},dispatchEvent(...ae){return z.dispatchEvent(ae[0])},removeEventListener(...ae){return z.removeEventListener(ae[0],ae[1],ae[2])}};b!==ye.coneInnerAngle&&(ye.coneInnerAngle=b),S!==ye.coneOuterAngle&&(ye.coneOuterAngle=S),N!==ye.coneOuterGain&&(ye.coneOuterGain=N),C!==ye.distanceModel&&(ye.distanceModel=C),k!==ye.maxDistance&&(ye.maxDistance=k),I!==ye.orientationX.value&&(ye.orientationX.value=I),v!==ye.orientationY.value&&(ye.orientationY.value=v),P!==ye.orientationZ.value&&(ye.orientationZ.value=P),T!==ye.panningModel&&(ye.panningModel=T),A!==ye.positionX.value&&(ye.positionX.value=A),w!==ye.positionY.value&&(ye.positionY.value=w),D!==ye.positionZ.value&&(ye.positionZ.value=D),c!==ye.refDistance&&(ye.refDistance=c),O!==ye.rolloffFactor&&(ye.rolloffFactor=O),(Me[0]!==1||Me[1]!==0||Me[2]!==0)&&U.setOrientation(...Me),(it[0]!==0||it[1]!==0||it[2]!==0)&&U.setPosition(...it);const Re=()=>{z.connect(U),i(z,he,0,0),he.connect(Y).connect(H,0,0),he.connect(oe).connect(H,0,1),he.connect(Q).connect(H,0,2),he.connect(J).connect(H,0,3),he.connect(pe).connect(H,0,4),he.connect(ie).connect(H,0,5),H.connect(fe).connect(y.destination)},rt=()=>{z.disconnect(U),f(z,he,0,0),he.disconnect(Y),Y.disconnect(H),he.disconnect(oe),oe.disconnect(H),he.disconnect(Q),Q.disconnect(H),he.disconnect(J),J.disconnect(H),he.disconnect(pe),pe.disconnect(H),he.disconnect(ie),ie.disconnect(H),H.disconnect(fe),fe.disconnect(y.destination)};return p(ms(ye,U),Re,rt)},Nf=i=>(e,{disableNormalization:t,imag:n,real:r})=>{const a=n instanceof Float32Array?n:new Float32Array(n),h=r instanceof Float32Array?r:new Float32Array(r),f=e.createPeriodicWave(h,a,{disableNormalization:t});if(Array.from(n).length<2)throw i();return f},ti=(i,e,t,n)=>i.createScriptProcessor(e,t,n),Mf=(i,e)=>(t,n)=>{const r=n.channelCountMode;if(r==="clamped-max")throw e();if(t.createStereoPanner===void 0)return i(t,n);const a=t.createStereoPanner();return Je(a,n),He(a,n,"pan"),Object.defineProperty(a,"channelCountMode",{get:()=>r,set:h=>{if(h!==r)throw e()}}),a},Ef=(i,e,t,n,r,a)=>{const f=new Float32Array([1,1]),d=Math.PI/2,p={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},y={...p,oversample:"none"},b=(C,k,I,v)=>{const P=new Float32Array(16385),T=new Float32Array(16385);for(let j=0;j<16385;j+=1){const U=j/16384*d;P[j]=Math.cos(U),T[j]=Math.sin(U)}const A=t(C,{...p,gain:0}),w=n(C,{...y,curve:P}),D=n(C,{...y,curve:f}),c=t(C,{...p,gain:0}),O=n(C,{...y,curve:T});return{connectGraph(){k.connect(A),k.connect(D.inputs===void 0?D:D.inputs[0]),k.connect(c),D.connect(I),I.connect(w.inputs===void 0?w:w.inputs[0]),I.connect(O.inputs===void 0?O:O.inputs[0]),w.connect(A.gain),O.connect(c.gain),A.connect(v,0,0),c.connect(v,0,1)},disconnectGraph(){k.disconnect(A),k.disconnect(D.inputs===void 0?D:D.inputs[0]),k.disconnect(c),D.disconnect(I),I.disconnect(w.inputs===void 0?w:w.inputs[0]),I.disconnect(O.inputs===void 0?O:O.inputs[0]),w.disconnect(A.gain),O.disconnect(c.gain),A.disconnect(v,0,0),c.disconnect(v,0,1)}}},S=(C,k,I,v)=>{const P=new Float32Array(16385),T=new Float32Array(16385),A=new Float32Array(16385),w=new Float32Array(16385),D=Math.floor(16385/2);for(let J=0;J<16385;J+=1)if(J>D){const pe=(J-D)/(16384-D)*d;P[J]=Math.cos(pe),T[J]=Math.sin(pe),A[J]=0,w[J]=1}else{const pe=J/(16384-D)*d;P[J]=1,T[J]=0,A[J]=Math.cos(pe),w[J]=Math.sin(pe)}const c=e(C,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),O=t(C,{...p,gain:0}),j=n(C,{...y,curve:P}),U=t(C,{...p,gain:0}),$=n(C,{...y,curve:T}),H=n(C,{...y,curve:f}),z=t(C,{...p,gain:0}),Y=n(C,{...y,curve:A}),oe=t(C,{...p,gain:0}),Q=n(C,{...y,curve:w});return{connectGraph(){k.connect(c),k.connect(H.inputs===void 0?H:H.inputs[0]),c.connect(O,0),c.connect(U,0),c.connect(z,1),c.connect(oe,1),H.connect(I),I.connect(j.inputs===void 0?j:j.inputs[0]),I.connect($.inputs===void 0?$:$.inputs[0]),I.connect(Y.inputs===void 0?Y:Y.inputs[0]),I.connect(Q.inputs===void 0?Q:Q.inputs[0]),j.connect(O.gain),$.connect(U.gain),Y.connect(z.gain),Q.connect(oe.gain),O.connect(v,0,0),z.connect(v,0,0),U.connect(v,0,1),oe.connect(v,0,1)},disconnectGraph(){k.disconnect(c),k.disconnect(H.inputs===void 0?H:H.inputs[0]),c.disconnect(O,0),c.disconnect(U,0),c.disconnect(z,1),c.disconnect(oe,1),H.disconnect(I),I.disconnect(j.inputs===void 0?j:j.inputs[0]),I.disconnect($.inputs===void 0?$:$.inputs[0]),I.disconnect(Y.inputs===void 0?Y:Y.inputs[0]),I.disconnect(Q.inputs===void 0?Q:Q.inputs[0]),j.disconnect(O.gain),$.disconnect(U.gain),Y.disconnect(z.gain),Q.disconnect(oe.gain),O.disconnect(v,0,0),z.disconnect(v,0,0),U.disconnect(v,0,1),oe.disconnect(v,0,1)}}},N=(C,k,I,v,P)=>{if(k===1)return b(C,I,v,P);if(k===2)return S(C,I,v,P);throw r()};return(C,{channelCount:k,channelCountMode:I,pan:v,...P})=>{if(I==="max")throw r();const T=i(C,{...P,channelCount:1,channelCountMode:I,numberOfInputs:2}),A=t(C,{...P,channelCount:k,channelCountMode:I,gain:1}),w=t(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:v});let{connectGraph:D,disconnectGraph:c}=N(C,k,A,w,T);Object.defineProperty(w.gain,"defaultValue",{get:()=>0}),Object.defineProperty(w.gain,"maxValue",{get:()=>1}),Object.defineProperty(w.gain,"minValue",{get:()=>-1});const O={get bufferSize(){},get channelCount(){return A.channelCount},set channelCount(H){A.channelCount!==H&&(j&&c(),{connectGraph:D,disconnectGraph:c}=N(C,H,A,w,T),j&&D()),A.channelCount=H},get channelCountMode(){return A.channelCountMode},set channelCountMode(H){if(H==="clamped-max"||H==="max")throw r();A.channelCountMode=H},get channelInterpretation(){return A.channelInterpretation},set channelInterpretation(H){A.channelInterpretation=H},get context(){return A.context},get inputs(){return[A]},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},get pan(){return w.gain},addEventListener(...H){return A.addEventListener(H[0],H[1],H[2])},dispatchEvent(...H){return A.dispatchEvent(H[0])},removeEventListener(...H){return A.removeEventListener(H[0],H[1],H[2])}};let j=!1;const U=()=>{D(),j=!0},$=()=>{c(),j=!1};return a(ms(O,T),U,$)}},Of=(i,e,t,n,r,a,h)=>(f,d)=>{const p=f.createWaveShaper();if(a!==null&&a.name==="webkitAudioContext"&&f.createGain().gain.automationRate===void 0)return t(f,d);Je(p,d);const y=d.curve===null||d.curve instanceof Float32Array?d.curve:new Float32Array(d.curve);if(y!==null&&y.length<2)throw e();Be(p,{curve:y},"curve"),Be(p,d,"oversample");let b=null,S=!1;return h(p,"curve",k=>()=>k.call(p),k=>I=>(k.call(p,I),S&&(n(I)&&b===null?b=i(f,p):!n(I)&&b!==null&&(b(),b=null)),I)),r(p,()=>{S=!0,n(p.curve)&&(b=i(f,p))},()=>{S=!1,b!==null&&(b(),b=null)})},Df=(i,e,t,n,r)=>(a,{curve:h,oversample:f,...d})=>{const p=a.createWaveShaper(),y=a.createWaveShaper();Je(p,d),Je(y,d);const b=t(a,{...d,gain:1}),S=t(a,{...d,gain:-1}),N=t(a,{...d,gain:1}),C=t(a,{...d,gain:-1});let k=null,I=!1,v=null;const P={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(w){b.channelCount=w,S.channelCount=w,p.channelCount=w,N.channelCount=w,y.channelCount=w,C.channelCount=w},get channelCountMode(){return p.channelCountMode},set channelCountMode(w){b.channelCountMode=w,S.channelCountMode=w,p.channelCountMode=w,N.channelCountMode=w,y.channelCountMode=w,C.channelCountMode=w},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(w){b.channelInterpretation=w,S.channelInterpretation=w,p.channelInterpretation=w,N.channelInterpretation=w,y.channelInterpretation=w,C.channelInterpretation=w},get context(){return p.context},get curve(){return v},set curve(w){if(w!==null&&w.length<2)throw e();if(w===null)p.curve=w,y.curve=w;else{const D=w.length,c=new Float32Array(D+2-D%2),O=new Float32Array(D+2-D%2);c[0]=w[0],O[0]=-w[D-1];const j=Math.ceil((D+1)/2),U=(D+1)/2-1;for(let $=1;$<j;$+=1){const H=$/j*U,z=Math.floor(H),Y=Math.ceil(H);c[$]=z===Y?w[z]:(1-(H-z))*w[z]+(1-(Y-H))*w[Y],O[$]=z===Y?-w[D-1-z]:-((1-(H-z))*w[D-1-z])-(1-(Y-H))*w[D-1-Y]}c[j]=D%2===1?w[j-1]:(w[j-2]+w[j-1])/2,p.curve=c,y.curve=O}v=w,I&&(n(v)&&k===null?k=i(a,b):k!==null&&(k(),k=null))},get inputs(){return[b]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get oversample(){return p.oversample},set oversample(w){p.oversample=w,y.oversample=w},addEventListener(...w){return b.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return b.dispatchEvent(w[0])},removeEventListener(...w){return b.removeEventListener(w[0],w[1],w[2])}};h!==null&&(P.curve=h instanceof Float32Array?h:new Float32Array(h)),f!==P.oversample&&(P.oversample=f);const T=()=>{b.connect(p).connect(N),b.connect(S).connect(y).connect(C).connect(N),I=!0,n(v)&&(k=i(a,b))},A=()=>{b.disconnect(p),p.disconnect(N),b.disconnect(S),S.disconnect(y),y.disconnect(C),C.disconnect(N),I=!1,k!==null&&(k(),k=null)};return r(ms(P,N),T,A)},mt=()=>new DOMException("","NotSupportedError"),If={numberOfChannels:1},Rf=(i,e,t,n,r)=>class extends i{constructor(h,f,d){let p;if(typeof h=="number"&&f!==void 0&&d!==void 0)p={length:f,numberOfChannels:h,sampleRate:d};else if(typeof h=="object")p=h;else throw new Error("The given parameters are not valid.");const{length:y,numberOfChannels:b,sampleRate:S}={...If,...p},N=n(b,y,S);e(Is,()=>Is(N))||N.addEventListener("statechange",(()=>{let C=0;const k=I=>{this._state==="running"&&(C>0?(N.removeEventListener("statechange",k),I.stopImmediatePropagation(),this._waitForThePromiseToSettle(I)):C+=1)};return k})()),super(N,b),this._length=y,this._nativeOfflineAudioContext=N,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Pa(this)}))}_waitForThePromiseToSettle(h){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(h):setTimeout(()=>this._waitForThePromiseToSettle(h))}},Pf={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Ff=(i,e,t,n,r,a,h)=>class extends i{constructor(d,p){const y=r(d),b={...Pf,...p},S=t(y,b),N=a(y),C=N?n():null,k=d.sampleRate/2;super(d,!1,S,C),this._detune=e(this,N,S.detune,153600,-153600),this._frequency=e(this,N,S.frequency,k,-k),this._nativeOscillatorNode=S,this._onended=null,this._oscillatorNodeRenderer=C,this._oscillatorNodeRenderer!==null&&b.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=b.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(d){const p=typeof d=="function"?h(this,d):null;this._nativeOscillatorNode.onended=p;const y=this._nativeOscillatorNode.onended;this._onended=y!==null&&y===p?d:y}get type(){return this._nativeOscillatorNode.type}set type(d){this._nativeOscillatorNode.type=d,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(d){this._nativeOscillatorNode.setPeriodicWave(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=d)}start(d=0){if(this._nativeOscillatorNode.start(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=d),this.context.state!=="closed"){us(this);const p=()=>{this._nativeOscillatorNode.removeEventListener("ended",p),dn(this)&&Ys(this)};this._nativeOscillatorNode.addEventListener("ended",p)}}stop(d=0){this._nativeOscillatorNode.stop(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=d)}},qf=(i,e,t,n,r)=>()=>{const a=new WeakMap;let h=null,f=null,d=null;const p=async(y,b)=>{let S=t(y);const N=ht(S,b);if(!N){const C={channelCount:S.channelCount,channelCountMode:S.channelCountMode,channelInterpretation:S.channelInterpretation,detune:S.detune.value,frequency:S.frequency.value,periodicWave:h===null?void 0:h,type:S.type};S=e(b,C),f!==null&&S.start(f),d!==null&&S.stop(d)}return a.set(b,S),N?(await i(b,y.detune,S.detune),await i(b,y.frequency,S.frequency)):(await n(b,y.detune,S.detune),await n(b,y.frequency,S.frequency)),await r(y,b,S),S};return{set periodicWave(y){h=y},set start(y){f=y},set stop(y){d=y},render(y,b){const S=a.get(b);return S!==void 0?Promise.resolve(S):p(y,b)}}},Vf={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Lf=(i,e,t,n,r,a,h)=>class extends i{constructor(d,p){const y=r(d),b={...Vf,...p},S=t(y,b),N=a(y),C=N?n():null;super(d,!1,S,C),this._nativePannerNode=S,this._orientationX=e(this,N,S.orientationX,dt,bt),this._orientationY=e(this,N,S.orientationY,dt,bt),this._orientationZ=e(this,N,S.orientationZ,dt,bt),this._positionX=e(this,N,S.positionX,dt,bt),this._positionY=e(this,N,S.positionY,dt,bt),this._positionZ=e(this,N,S.positionZ,dt,bt),h(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(d){this._nativePannerNode.coneInnerAngle=d}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(d){this._nativePannerNode.coneOuterAngle=d}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(d){this._nativePannerNode.coneOuterGain=d}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(d){this._nativePannerNode.distanceModel=d}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(d){this._nativePannerNode.maxDistance=d}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(d){this._nativePannerNode.panningModel=d}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(d){this._nativePannerNode.refDistance=d}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(d){this._nativePannerNode.rolloffFactor=d}},jf=(i,e,t,n,r,a,h,f,d,p)=>()=>{const y=new WeakMap;let b=null;const S=async(N,C)=>{let k=null,I=a(N);const v={channelCount:I.channelCount,channelCountMode:I.channelCountMode,channelInterpretation:I.channelInterpretation},P={...v,coneInnerAngle:I.coneInnerAngle,coneOuterAngle:I.coneOuterAngle,coneOuterGain:I.coneOuterGain,distanceModel:I.distanceModel,maxDistance:I.maxDistance,panningModel:I.panningModel,refDistance:I.refDistance,rolloffFactor:I.rolloffFactor},T=ht(I,C);if("bufferSize"in I)k=n(C,{...v,gain:1});else if(!T){const A={...P,orientationX:I.orientationX.value,orientationY:I.orientationY.value,orientationZ:I.orientationZ.value,positionX:I.positionX.value,positionY:I.positionY.value,positionZ:I.positionZ.value};I=r(C,A)}if(y.set(C,k===null?I:k),k!==null){if(b===null){if(h===null)throw new Error("Missing the native OfflineAudioContext constructor.");const $=new h(6,N.context.length,C.sampleRate),H=e($,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});H.connect($.destination),b=(async()=>{const z=await Promise.all([N.orientationX,N.orientationY,N.orientationZ,N.positionX,N.positionY,N.positionZ].map(async(Y,oe)=>{const Q=t($,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:oe===0?1:0});return await f($,Y,Q.offset),Q}));for(let Y=0;Y<6;Y+=1)z[Y].connect(H,0,Y),z[Y].start(0);return p($)})()}const A=await b,w=n(C,{...v,gain:1});await d(N,C,w);const D=[];for(let $=0;$<A.numberOfChannels;$+=1)D.push(A.getChannelData($));let c=[D[0][0],D[1][0],D[2][0]],O=[D[3][0],D[4][0],D[5][0]],j=n(C,{...v,gain:1}),U=r(C,{...P,orientationX:c[0],orientationY:c[1],orientationZ:c[2],positionX:O[0],positionY:O[1],positionZ:O[2]});w.connect(j).connect(U.inputs[0]),U.connect(k);for(let $=128;$<A.length;$+=128){const H=[D[0][$],D[1][$],D[2][$]],z=[D[3][$],D[4][$],D[5][$]];if(H.some((Y,oe)=>Y!==c[oe])||z.some((Y,oe)=>Y!==O[oe])){c=H,O=z;const Y=$/C.sampleRate;j.gain.setValueAtTime(0,Y),j=n(C,{...v,gain:0}),U=r(C,{...P,orientationX:c[0],orientationY:c[1],orientationZ:c[2],positionX:O[0],positionY:O[1],positionZ:O[2]}),j.gain.setValueAtTime(1,Y),w.connect(j).connect(U.inputs[0]),U.connect(k)}}return k}return T?(await i(C,N.orientationX,I.orientationX),await i(C,N.orientationY,I.orientationY),await i(C,N.orientationZ,I.orientationZ),await i(C,N.positionX,I.positionX),await i(C,N.positionY,I.positionY),await i(C,N.positionZ,I.positionZ)):(await f(C,N.orientationX,I.orientationX),await f(C,N.orientationY,I.orientationY),await f(C,N.orientationZ,I.orientationZ),await f(C,N.positionX,I.positionX),await f(C,N.positionY,I.positionY),await f(C,N.positionZ,I.positionZ)),ps(I)?await d(N,C,I.inputs[0]):await d(N,C,I),I};return{render(N,C){const k=y.get(C);return k!==void 0?Promise.resolve(k):S(N,C)}}},Wf={disableNormalization:!1},Bf=(i,e,t,n)=>class Ha{constructor(a,h){const f=e(a),d=n({...Wf,...h}),p=i(f,d);return t.add(p),p}static[Symbol.hasInstance](a){return a!==null&&typeof a=="object"&&Object.getPrototypeOf(a)===Ha.prototype||t.has(a)}},Kf=(i,e)=>(t,n,r)=>(i(n).replay(r),e(n,t,r)),Uf=(i,e,t)=>async(n,r,a)=>{const h=i(n);await Promise.all(h.activeInputs.map((f,d)=>Array.from(f).map(async([p,y])=>{const S=await e(p).render(p,r),N=n.context.destination;!t(p)&&(n!==N||!t(n))&&S.connect(a,y,d)})).reduce((f,d)=>[...f,...d],[]))},Hf=(i,e,t)=>async(n,r,a)=>{const h=e(n);await Promise.all(Array.from(h.activeInputs).map(async([f,d])=>{const y=await i(f).render(f,r);t(f)||y.connect(a,d)}))},$f=(i,e,t,n)=>r=>i(Is,()=>Is(r))?Promise.resolve(i(n,n)).then(a=>{if(!a){const h=t(r,512,0,1);r.oncomplete=()=>{h.onaudioprocess=null,h.disconnect()},h.onaudioprocess=()=>r.currentTime,h.connect(r.destination)}return r.startRendering()}):new Promise(a=>{const h=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=f=>{h.disconnect(),a(f.renderedBuffer)},h.connect(r.destination),r.startRendering()}),zf=i=>(e,t)=>{i.set(e,t)},Gf=i=>(e,t)=>i.set(e,t),Xf=(i,e,t,n,r,a,h,f)=>(d,p)=>t(d).render(d,p).then(()=>Promise.all(Array.from(n(p)).map(y=>t(y).render(y,p)))).then(()=>r(p)).then(y=>(typeof y.copyFromChannel!="function"?(h(y),$r(y)):e(a,()=>a(y))||f(y),i.add(y),y)),Zf={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Yf=(i,e,t,n,r,a)=>class extends i{constructor(f,d){const p=r(f),y={...Zf,...d},b=t(p,y),S=a(p),N=S?n():null;super(f,!1,b,N),this._pan=e(this,S,b.pan)}get pan(){return this._pan}},Qf=(i,e,t,n,r)=>()=>{const a=new WeakMap,h=async(f,d)=>{let p=t(f);const y=ht(p,d);if(!y){const b={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,pan:p.pan.value};p=e(d,b)}return a.set(d,p),y?await i(d,f.pan,p.pan):await n(d,f.pan,p.pan),ps(p)?await r(f,d,p.inputs[0]):await r(f,d,p),p};return{render(f,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):h(f,d)}}},Jf=i=>()=>{if(i===null)return!1;try{new i({length:1,sampleRate:44100})}catch{return!1}return!0},ed=(i,e)=>async()=>{if(i===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),n=new e(1,128,44100),r=URL.createObjectURL(t);let a=!1,h=!1;try{await n.audioWorklet.addModule(r);const f=new i(n,"a",{numberOfOutputs:0}),d=n.createOscillator();f.port.onmessage=()=>a=!0,f.onprocessorerror=()=>h=!0,d.connect(f),d.start(0),await n.startRendering(),await new Promise(p=>setTimeout(p))}catch{}finally{URL.revokeObjectURL(r)}return a&&!h},td=(i,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),n=i(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{t.oncomplete=()=>{n.disconnect(),r(t.currentTime!==0)},t.startRendering()})},nd=()=>new DOMException("","UnknownError"),sd={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},id=(i,e,t,n,r,a,h)=>class extends i{constructor(d,p){const y=r(d),b={...sd,...p},S=t(y,b),C=a(y)?n():null;super(d,!0,S,C),this._isCurveNullified=!1,this._nativeWaveShaperNode=S,h(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(d){if(d===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(d.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=d}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(d){this._nativeWaveShaperNode.oversample=d}},rd=(i,e,t)=>()=>{const n=new WeakMap,r=async(a,h)=>{let f=e(a);if(!ht(f,h)){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,curve:f.curve,oversample:f.oversample};f=i(h,p)}return n.set(h,f),ps(f)?await t(a,h,f.inputs[0]):await t(a,h,f),f};return{render(a,h){const f=n.get(h);return f!==void 0?Promise.resolve(f):r(a,h)}}},od=()=>typeof window>"u"?null:window,ad=(i,e)=>t=>{t.copyFromChannel=(n,r,a=0)=>{const h=i(a),f=i(r);if(f>=t.numberOfChannels)throw e();const d=t.length,p=t.getChannelData(f),y=n.length;for(let b=h<0?-h:0;b+h<d&&b<y;b+=1)n[b]=p[b+h]},t.copyToChannel=(n,r,a=0)=>{const h=i(a),f=i(r);if(f>=t.numberOfChannels)throw e();const d=t.length,p=t.getChannelData(f),y=n.length;for(let b=h<0?-h:0;b+h<d&&b<y;b+=1)p[b+h]=n[b]}},cd=i=>e=>{e.copyFromChannel=(t=>(n,r,a=0)=>{const h=i(a),f=i(r);if(h<e.length)return t.call(e,n,f,h)})(e.copyFromChannel),e.copyToChannel=(t=>(n,r,a=0)=>{const h=i(a),f=i(r);if(h<e.length)return t.call(e,n,f,h)})(e.copyToChannel)},ud=i=>(e,t)=>{const n=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=n),i(e,"buffer",r=>()=>{const a=r.call(e);return a===n?null:a},r=>a=>r.call(e,a===null?n:a))},ld=(i,e)=>(t,n)=>{n.channelCount=1,n.channelCountMode="explicit",Object.defineProperty(n,"channelCount",{get:()=>1,set:()=>{throw i()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:()=>{throw i()}});const r=t.createBufferSource();e(n,()=>{const f=n.numberOfInputs;for(let d=0;d<f;d+=1)r.connect(n,0,d)},()=>r.disconnect(n))},$a=(i,e,t)=>i.copyFromChannel===void 0?i.getChannelData(t)[0]:(i.copyFromChannel(e,t),e[0]),za=i=>{if(i===null)return!1;const e=i.length;return e%2!==0?i[Math.floor(e/2)]!==0:i[e/2-1]+i[e/2]!==0},ni=(i,e,t,n)=>{let r=i;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:a,set:h}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(i,e,{get:t(a),set:n(h)})},hd=i=>({...i,outputChannelCount:i.outputChannelCount!==void 0?i.outputChannelCount:i.numberOfInputs===1&&i.numberOfOutputs===1?[i.channelCount]:Array.from({length:i.numberOfOutputs},()=>1)}),fd=i=>({...i,channelCount:i.numberOfOutputs}),dd=i=>{const{imag:e,real:t}=i;return e===void 0?t===void 0?{...i,imag:[0,0],real:[0,0]}:{...i,imag:Array.from(t,()=>0),real:t}:t===void 0?{...i,imag:e,real:Array.from(e,()=>0)}:{...i,imag:e,real:t}},Ga=(i,e,t)=>{try{i.setValueAtTime(e,t)}catch(n){if(n.code!==9)throw n;Ga(i,e,t+1e-7)}},pd=i=>{const e=i.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},md=i=>{const e=i.createBufferSource(),t=i.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},gd=i=>{const e=i.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Yr=i=>{const e=i.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},Xa=i=>{const e=i.createBuffer(1,1,44100),t=i.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},Qr=i=>{const e=i.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},vd=i=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(i)}finally{e.close(),t.close()}},_d=i=>{i.start=(e=>(t=0,n=0,r)=>{const a=i.buffer,h=a===null?n:Math.min(a.duration,n);a!==null&&h>a.duration-.5/i.context.sampleRate?e.call(i,t,0,0):e.call(i,t,h,r)})(i.start)},Za=(i,e)=>{const t=e.createGain();i.connect(t);const n=(r=>()=>{r.call(i,t),i.removeEventListener("ended",n)})(i.disconnect);i.addEventListener("ended",n),ms(i,t),i.stop=(r=>{let a=!1;return(h=0)=>{if(a)try{r.call(i,h)}catch{t.gain.setValueAtTime(0,h)}else r.call(i,h),a=!0}})(i.stop)},gs=(i,e)=>t=>{const n={value:i};return Object.defineProperties(t,{currentTarget:n,target:n}),typeof e=="function"?e.call(i,t):e.handleEvent.call(i,t)},yd=Vu(Hn),bd=Uu(Hn),wd=nh(Zi),Ya=new WeakMap,Td=bh(Ya),Ut=Dl(new Map,new WeakMap),Jt=od(),Qa=Zh(Ut,tn),Jr=yh(pt),at=Uf(pt,Jr,jn),Cd=Xu(Qa,Le,at),qe=Ch(Xi),gn=xf(Jt),De=jh(gn),Ja=new WeakMap,ec=fh(gs),si=ef(Jt),eo=Fh(si),to=qh(Jt),tc=Vh(Jt),Rs=nf(Jt),Xe=bl(Lu(Na),Ku(yd,bd,Di,wd,Ii,pt,Td,Zs,Le,Hn,dn,jn,Si),Ut,Oh(Pr,Ii,pt,Le,Ds,dn),tn,Yi,mt,Ql(Di,Pr,pt,Le,Ds,qe,dn,De),rh(Ja,pt,Kt),ec,qe,eo,to,tc,De,Rs),xd=Gu(Xe,Cd,tn,Qa,qe,De),no=new WeakSet,pa=Yh(Jt),nc=Hl(new Uint32Array(1)),so=ad(nc,tn),io=cd(nc),Sd=Yu(no,Ut,mt,pa,gn,Jf(pa),so,io),Qi=Hu(xt),sc=Hf(Jr,Qs,jn),nn=Ll(sc),vs=Jh(Qi,Ut,pd,md,gd,Yr,Xa,Qr,_d,ud(ni),Za),sn=Kf(wh(Qs),sc),Ad=el(nn,vs,Le,sn,at),Ht=wl(ju(Ma),Ja,Hr,Tl,Du,Iu,Ru,Pu,Fu,Dr,Aa,si,Ga),kd=Ju(Xe,Ad,Ht,nt,vs,qe,De,gs),Nd=ul(Xe,ll,tn,nt,tf(xt,ni),qe,De,at),Md=Ol(nn,Ka,Le,sn,at),$n=Gf(Ya),Ed=El(Xe,Ht,Md,Yi,Ka,qe,De,$n),En=Gh(Hn,to),Od=ld(nt,En),On=lf(si,Od),Dd=Pl(On,Le,at),Id=Rl(Xe,Dd,On,qe,De),Rd=Vl(ei,Le,at),Pd=ql(Xe,Rd,ei,qe,De,fd),Fd=df(Qi,vs,xt,En),_s=ff(Qi,Ut,Fd,Yr,Qr),qd=Ul(nn,_s,Le,sn,at),Vd=Kl(Xe,Ht,qd,_s,qe,De,gs),ic=pf(mt,ni),Ld=Gl(ic,Le,at),jd=zl(Xe,Ld,ic,qe,De,$n),Wd=th(nn,Ua,Le,sn,at),Bd=eh(Xe,Ht,Wd,Ua,qe,De,$n),rc=mf(mt),Kd=uh(nn,rc,Le,sn,at),Ud=ch(Xe,Ht,Kd,rc,mt,qe,De,$n),Hd=vh(nn,xt,Le,sn,at),$d=gh(Xe,Ht,Hd,xt,qe,De),zd=yf(Yi,nt,ti,mt),Ji=$f(Ut,xt,ti,td(xt,gn)),Gd=Eh(vs,Le,gn,at,Ji),Xd=gf(zd),Zd=Nh(Xe,Xd,Gd,qe,De,$n),Yd=hl(Ht,On,_s,ti,mt,$a,De,ni),oc=new WeakMap,Qd=zh(Nd,Yd,ec,De,oc,gs),ac=Sf(Qi,Ut,Yr,Xa,Qr,Za),Jd=qf(nn,ac,Le,sn,at),ep=Ff(Xe,Ht,ac,Jd,qe,De,gs),cc=Wl(vs),tp=Df(cc,nt,xt,za,En),er=Of(cc,nt,tp,za,En,si,ni),np=kf(Di,nt,On,xt,ti,er,mt,Ii,$a,En),uc=Af(np),sp=jf(nn,On,_s,xt,uc,Le,gn,sn,at,Ji),ip=Lf(Xe,Ht,uc,sp,qe,De,$n),rp=Nf(tn),op=Bf(rp,qe,new WeakSet,dd),ap=Ef(On,ei,xt,er,mt,En),lc=Mf(ap,mt),cp=Qf(nn,lc,Le,sn,at),up=Yf(Xe,Ht,lc,cp,qe,De),lp=rd(er,Le,at),hp=id(Xe,nt,er,lp,qe,De,$n),hc=Wh(Jt),ro=dh(Jt),fc=new WeakMap,fp=xh(fc,gn),dp=hc?Bu(Ut,mt,hh(Jt),ro,ph(qu),qe,fp,De,Rs,new WeakMap,new WeakMap,ed(Rs,gn),Jt):void 0,pp=Lh(eo,De),mp=Yl(no,Ut,Zl,lh,new WeakSet,qe,pp,Ei,Is,so,io),dc=Nl(dp,xd,Sd,kd,Ed,Id,Pd,Vd,jd,mp,Bd,Ud,$d,Zd,Qd,ep,ip,op,up,hp),gp=Bh(Xe,bf,qe,De),vp=Uh(Xe,wf,qe,De),_p=Hh(Xe,Tf,qe,De),yp=Cf(nt,De),bp=$h(Xe,yp,qe),wp=cl(dc,nt,mt,nd,gp,vp,_p,bp,si),oo=Sh(oc),Tp=$u(oo),pc=jl(tn),Cp=sh(oo),mc=oh(tn),gc=new WeakMap,xp=_h(gc,Kt),Sp=uf(pc,tn,nt,On,ei,_s,xt,ti,mt,mc,ro,xp,En),Ap=rf(nt,Sp,xt,mt,En),kp=kl(nn,pc,vs,On,ei,_s,xt,Cp,mc,ro,Le,Rs,gn,sn,at,Ji),Np=Th(fc),Mp=zf(gc),ma=hc?xl(Tp,Xe,Ht,kp,Ap,pt,Np,qe,De,Rs,hd,Mp,vd,gs):void 0,Ep=Xl(mt,gn),Op=Xf(no,Ut,Jr,oo,Ji,Ei,so,io),Dp=Rf(dc,Ut,nt,Ep,Op),Ip=Dh(Xi,eo),Rp=Ih(Ur,to),Pp=Rh(Hr,tc),Fp=Ph(Xi,De);function ve(i,e){if(!i)throw new Error(e)}function pn(i,e,t=1/0){if(!(e<=i&&i<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${i}`)}function vc(i){!i.isOffline&&i.state!=="running"&&yc('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let _c=console;function qp(...i){_c.log(...i)}function yc(...i){_c.warn(...i)}function Rt(i){return typeof i>"u"}function Ce(i){return!Rt(i)}function Vp(i){return typeof i=="function"}function An(i){return typeof i=="number"}function Vn(i){return Object.prototype.toString.call(i)==="[object Object]"&&i.constructor===Object}function Lp(i){return typeof i=="boolean"}function Bt(i){return Array.isArray(i)}function en(i){return typeof i=="string"}function yi(i){return en(i)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(i)}function jp(i){return new wp(i)}function Wp(i,e,t){return new Dp(i,e,t)}const Ln=typeof self=="object"?self:null,Bp=Ln&&(Ln.hasOwnProperty("AudioContext")||Ln.hasOwnProperty("webkitAudioContext"));function Kp(i,e,t){return ve(Ce(ma),"This node only works in a secure context (https or localhost)"),new ma(i,e,t)}function $t(i,e,t,n){var r=arguments.length,a=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,t,n);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(a=(r<3?h(a):r>3?h(e,t,a):h(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a}function Ze(i,e,t,n){function r(a){return a instanceof t?a:new t(function(h){h(a)})}return new(t||(t=Promise))(function(a,h){function f(y){try{p(n.next(y))}catch(b){h(b)}}function d(y){try{p(n.throw(y))}catch(b){h(b)}}function p(y){y.done?a(y.value):r(y.value).then(f,d)}p((n=n.apply(i,e||[])).next())})}class Up{constructor(e,t,n){this._callback=e,this._type=t,this._updateInterval=n,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),n=new Worker(t);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){this._updateInterval=Math.max(e,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(e*1e3,1))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Wn(i){return Pp(i)}function Sn(i){return Rp(i)}function Ai(i){return Fp(i)}function ss(i){return Ip(i)}function bc(i){return i instanceof AudioBuffer}function Hp(i,e){return i==="value"||Wn(e)||Sn(e)||bc(e)}function os(i,...e){if(!e.length)return i;const t=e.shift();if(Vn(i)&&Vn(t))for(const n in t)Hp(n,t[n])?i[n]=t[n]:Vn(t[n])?(i[n]||Object.assign(i,{[n]:{}}),os(i[n],t[n])):Object.assign(i,{[n]:t[n]});return os(i,...e)}function $p(i,e){return i.length===e.length&&i.every((t,n)=>e[n]===t)}function X(i,e,t=[],n){const r={},a=Array.from(e);if(Vn(a[0])&&n&&!Reflect.has(a[0],n)&&(Object.keys(a[0]).some(f=>Reflect.has(i,f))||(os(r,{[n]:a[0]}),t.splice(t.indexOf(n),1),a.shift())),a.length===1&&Vn(a[0]))os(r,a[0]);else for(let h=0;h<t.length;h++)Ce(a[h])&&(r[t[h]]=a[h]);return os(i,r)}function zp(i){return i.constructor.getDefaults()}function as(i,e){return Rt(i)?e:i}function rs(i,e){return e.forEach(t=>{Reflect.has(i,t)&&delete i[t]}),i}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class vn{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Ln&&this.toString()===Ln.TONE_DEBUG_CLASS)&&qp(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}vn.version=Sa;const ao=1e-6;function qi(i,e){return i>e+ao}function jr(i,e){return qi(i,e)||Lt(i,e)}function wc(i,e){return i+ao<e}function Lt(i,e){return Math.abs(i-e)<ao}function Gp(i,e,t){return Math.max(Math.min(i,t),e)}class rn extends vn{constructor(){super(),this.name="Timeline",this._timeline=[];const e=X(rn.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(ve(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];ve(jr(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const n=this._search(e,t);return n!==-1?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const n=this._search(e,t);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const n=this._search(e);return n-1>=0?this._timeline[n-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(Lt(this._timeline[t].time,e)){for(let n=t;n>=0&&Lt(this._timeline[n].time,e);n--)t=n;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&jr(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let n=0;const r=this._timeline.length;let a=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;n<a;){let h=Math.floor(n+(a-n)/2);const f=this._timeline[h],d=this._timeline[h+1];if(Lt(f[t],e)){for(let p=h;p<this._timeline.length;p++){const y=this._timeline[p];if(Lt(y[t],e))h=p;else break}return h}else{if(wc(f[t],e)&&qi(d[t],e))return h;qi(f[t],e)?a=h:n=h+1}}return-1}_iterate(e,t=0,n=this._timeline.length-1){this._timeline.slice(t,n+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const n=this._search(e);return n!==-1&&this._iterate(t,0,n),this}forEachAfter(e,t){const n=this._search(e);return this._iterate(t,n+1),this}forEachBetween(e,t,n){let r=this._search(e),a=this._search(t);return r!==-1&&a!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[a].time===t&&(a-=1),this._iterate(n,r,a)):r===-1&&this._iterate(n,0,a),this}forEachFrom(e,t){let n=this._search(e);for(;n>=0&&this._timeline[n].time>=e;)n--;return this._iterate(t,n+1),this}forEachAtTime(e,t){const n=this._search(e);if(n!==-1&&Lt(this._timeline[n].time,e)){let r=n;for(let a=n;a>=0&&Lt(this._timeline[a].time,e);a--)r=a;this._iterate(a=>{t(a)},r,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Tc=[];function tr(i){Tc.push(i)}function Xp(i){Tc.forEach(e=>e(i))}const Cc=[];function nr(i){Cc.push(i)}function Zp(i){Cc.forEach(e=>e(i))}class ii extends vn{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(r=>{Rt(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(t)}),this}once(e,t){const n=(...r)=>{t(...r),this.off(e,n)};return this.on(e,n),this}off(e,t){return e.split(/\W+/).forEach(r=>{if(Rt(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if(Rt(t))this._events[e]=[];else{const a=this._events[e];for(let h=a.length-1;h>=0;h--)a[h]===t&&a.splice(h,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const n=this._events[e].slice(0);for(let r=0,a=n.length;r<a;r++)n[r].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const n=Object.getOwnPropertyDescriptor(ii.prototype,t);Object.defineProperty(e.prototype,t,n)})}dispose(){return super.dispose(),this._events=void 0,this}}class xc extends ii{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class ri extends xc{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new rn,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const e=X(ri.getDefaults(),arguments,["context"]);e.context?this._context=e.context:this._context=jp({latencyHint:e.latencyHint}),this._ticker=new Up(this.emit.bind(this,"tick"),e.clockSource,e.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(e.latencyHint),this.lookAhead=e.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(Xp(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,n){return this._context.createBuffer(e,t,n)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,n){return this._context.createPeriodicWave(e,t,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return ve(ss(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return ve(ss(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return ve(ss(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){ve(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){ve(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){ve(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){ve(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return Kp(this.rawContext,e,t)}addAudioWorkletModule(e,t){return Ze(this,void 0,void 0,function*(){ve(Ce(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(t)||this._workletModules.set(t,this.rawContext.audioWorklet.addModule(e)),yield this._workletModules.get(t)})}workletsAreReady(){return Ze(this,void 0,void 0,function*(){const e=[];this._workletModules.forEach(t=>e.push(t)),yield Promise.all(e)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get latencyHint(){return this._latencyHint}_setLatencyHint(e){let t=0;if(this._latencyHint=e,en(e))switch(e){case"interactive":t=.1;break;case"playback":t=.5;break;case"balanced":t=.25;break}this.lookAhead=t,this.updateInterval=t/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return ss(this._context)?this._context.resume():Promise.resolve()}close(){return Ze(this,void 0,void 0,function*(){ss(this._context)&&(yield this._context.close()),this._initialized&&Zp(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),n=t.getChannelData(0);for(let a=0;a<n.length;a++)n[a]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=t,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this}_timeoutLoop(){const e=this.now();let t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:n+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const n=++this._timeoutIds,r=()=>{const a=this.now();this._timeouts.add({callback:()=>{e(),r()},id:n,time:a+t})};return r(),n}}class Yp extends xc{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,n){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e,t){return Ze(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Ke(i,e){Bt(e)?e.forEach(t=>Ke(i,t)):Object.defineProperty(i,e,{enumerable:!0,writable:!1})}function co(i,e){Bt(e)?e.forEach(t=>co(i,t)):Object.defineProperty(i,e,{writable:!0})}const Ie=()=>{};class Fe extends vn{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Ie;const e=X(Fe.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,e.url&&bc(e.url)||e.url instanceof Fe?this.set(e.url):en(e.url)&&this.load(e.url).catch(e.onerror)}static getDefaults(){return{onerror:Ie,onload:Ie,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:jt().sampleRate}set(e){return e instanceof Fe?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return Ze(this,void 0,void 0,function*(){const t=Fe.load(e).then(n=>{this.set(n),this.onload(this)});Fe.downloads.push(t);try{yield t}finally{const n=Fe.downloads.indexOf(t);Fe.downloads.splice(n,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=Bt(e)&&e[0].length>0,n=t?e.length:1,r=t?e[0].length:e.length,a=jt(),h=a.createBuffer(n,r,a.sampleRate),f=!t&&n===1?[e]:e;for(let d=0;d<n;d++)h.copyToChannel(f[d],d);return this._buffer=h,this}toMono(e){if(An(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const n=this.numberOfChannels;for(let r=0;r<n;r++){const a=this.toArray(r);for(let h=0;h<a.length;h++)t[h]+=a[h]}t=t.map(r=>r/n),this.fromArray(t)}return this}toArray(e){if(An(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let n=0;n<this.numberOfChannels;n++)t[n]=this.getChannelData(n);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){const n=Math.floor(e*this.sampleRate),r=Math.floor(t*this.sampleRate);ve(n<r,"The start time must be less than the end time");const a=r-n,h=jt().createBuffer(this.numberOfChannels,a,this.sampleRate);for(let f=0;f<this.numberOfChannels;f++)h.copyToChannel(this.getChannelData(f).subarray(n,r),f);return new Fe(h)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Fe().fromArray(e)}static fromUrl(e){return Ze(this,void 0,void 0,function*(){return yield new Fe().load(e)})}static load(e){return Ze(this,void 0,void 0,function*(){const t=e.match(/\[([^\]\[]+\|.+)\]$/);if(t){const f=t[1].split("|");let d=f[0];for(const p of f)if(Fe.supportsType(p)){d=p;break}e=e.replace(t[0],d)}const n=Fe.baseUrl===""||Fe.baseUrl.endsWith("/")?Fe.baseUrl:Fe.baseUrl+"/",r=yield fetch(n+e);if(!r.ok)throw new Error(`could not load url: ${e}`);const a=yield r.arrayBuffer();return yield jt().decodeAudioData(a)})}static supportsType(e){const t=e.split("."),n=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+n)!==""}static loaded(){return Ze(this,void 0,void 0,function*(){for(yield Promise.resolve();Fe.downloads.length;)yield Fe.downloads[0]})}}Fe.baseUrl="";Fe.downloads=[];class uo extends ri{constructor(){super({clockSource:"offline",context:Ai(arguments[0])?arguments[0]:Wp(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Ai(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Ai(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return Ze(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const n=Math.floor(this.sampleRate/128);e&&t%n===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(e=!0){return Ze(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new Fe(t)})}close(){return Promise.resolve()}}const Sc=new Yp;let Es=Sc;function jt(){return Es===Sc&&Bp&&Qp(new ri),Es}function Qp(i){ss(i)?Es=new ri(i):Ai(i)?Es=new uo(i):Es=i}if(Ln&&!Ln.TONE_SILENCE_LOGGING){const e=` * Tone.js v${Sa} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function Jp(i){return Math.pow(10,i/20)}function em(i){return 20*(Math.log(i)/Math.LN10)}function Ac(i){return Math.pow(2,i/12)}let sr=440;function tm(){return sr}function nm(i){sr=i}function Wr(i){return Math.round(kc(i))}function kc(i){return 69+12*Math.log2(i/sr)}function sm(i){return sr*Math.pow(2,(i-69)/12)}class lo extends vn{constructor(e,t,n){super(),this.defaultUnits="s",this._val=t,this._units=n,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const n=parseInt(e,10),r=t==="."?1.5:1;return n===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/n)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,n)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r+=this._beatsToUnits(parseFloat(t))),n&&n!=="0"&&(r+=this._beatsToUnits(parseFloat(n)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof lo&&this.fromType(this._val),Rt(this._val))return this._noArg();if(en(this._val)&&Rt(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Vn(this._val)){let e=0;for(const t in this._val)if(Ce(this._val[t])){const n=this._val[t],r=new this.constructor(this.context,t).valueOf()*n;e+=r}return e}if(Ce(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return en(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Wt extends lo{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new Wt(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const n=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),f=Math.round(r/n)*n-r;return r+f*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let a=1;a<9;a++){const h=Math.pow(2,a);t.push(h+"n."),t.push(h+"n"),t.push(h+"t")}t.push("0");let n=t[0],r=new Wt(this.context,t[0]).toSeconds();return t.forEach(a=>{const h=new Wt(this.context,a).toSeconds();Math.abs(h-e)<Math.abs(r-e)&&(n=a,r=h)}),n}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const n=Math.floor(t/this._getTimeSignature());let r=t%1*4;t=Math.floor(t)%this._getTimeSignature();const a=r.toString();return a.length>3&&(r=parseFloat(parseFloat(a).toFixed(3))),[n,t,r].join(":")}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.round(t*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Wr(this.toFrequency())}_now(){return this.context.now()}}class It extends Wt{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return tm()}static set A4(e){nm(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:It.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(e,t){const r=im[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?r:It.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,n){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r*=this._beatsToUnits(parseFloat(t))),n&&n!=="0"&&(r*=this._beatsToUnits(parseFloat(n)/4)),r}}})}transpose(e){return new It(this.context,this.valueOf()*Ac(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return Wr(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/It.A4);let n=Math.round(12*t)+57;const r=Math.floor(n/12);return r<0&&(n+=-12*r),rm[n%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return sm(e)}static ftom(e){return Wr(e)}}const im={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},rm=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Os extends Wt{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Tt extends vn{constructor(){super();const e=X(Tt.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:jt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return new Wt(this.context,e).toSeconds()}toFrequency(e){return new It(this.context,e).toFrequency()}toTicks(e){return new Os(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(n=>{Rt(e[n])&&delete t[n]}),t}get(){const e=zp(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const n=this[t];Ce(n)&&Ce(n.value)&&Ce(n.setValueAtTime)?e[t]=n.value:n instanceof Tt?e[t]=n._getPartialProperties(e[t]):Bt(n)||An(n)||en(n)||Lp(n)?e[t]=n:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Ce(this[t])&&(this[t]&&Ce(this[t].value)&&Ce(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof Tt?this[t].set(e[t]):this[t]=e[t])}),this}}class ho extends rn{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,n){return pn(t,0),this.add(Object.assign({},n,{state:e,time:t})),this}getLastState(e,t){const n=this._search(t);for(let r=n;r>=0;r--){const a=this._timeline[r];if(a.state===e)return a}}getNextState(e,t){const n=this._search(t);if(n!==-1)for(let r=n;r<this._timeline.length;r++){const a=this._timeline[r];if(a.state===e)return a}}}class Oe extends Tt{constructor(){super(X(Oe.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=X(Oe.getDefaults(),arguments,["param","units","convert"]);for(ve(Ce(e.param)&&(Wn(e.param)||e.param instanceof Oe),"param must be an AudioParam");!Wn(e.param);)e.param=e.param._param;this._swappable=Ce(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new rn(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Ce(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Tt.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Ce(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Ce(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Ce(this.maxValue)&&Ce(this.minValue)&&pn(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?Jp(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?em(e):e}setValueAtTime(e,t){const n=this.toSeconds(t),r=this._fromType(e);return ve(isFinite(r)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,n),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),n=this._events.getAfter(t),r=this._events.get(t);let a=this._initialValue;if(r===null)a=this._initialValue;else if(r.type==="setTargetAtTime"&&(n===null||n.type==="setValueAtTime")){const h=this._events.getBefore(r.time);let f;h===null?f=this._initialValue:f=h.value,r.type==="setTargetAtTime"&&(a=this._exponentialApproach(r.time,f,r.value,r.constant,t))}else if(n===null)a=r.value;else if(n.type==="linearRampToValueAtTime"||n.type==="exponentialRampToValueAtTime"){let h=r.value;if(r.type==="setTargetAtTime"){const f=this._events.getBefore(r.time);f===null?h=this._initialValue:h=f.value}n.type==="linearRampToValueAtTime"?a=this._linearInterpolate(r.time,h,n.time,n.value,t):a=this._exponentialInterpolate(r.time,h,n.time,n.value,t)}else a=r.value;return this._toType(a)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const n=this._fromType(e),r=this.toSeconds(t);return ve(isFinite(n)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(n),this._events.add({time:r,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(n,r),this}exponentialRampToValueAtTime(e,t){let n=this._fromType(e);n=Lt(n,0)?this._minOutput:n,this._assertRange(n);const r=this.toSeconds(t);return ve(isFinite(n)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(n,r),this}exponentialRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(e,n+this.toSeconds(t)),this}linearRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(e,n+this.toSeconds(t)),this}targetRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(e,n,t),this}exponentialApproachValueAtTime(e,t,n){t=this.toSeconds(t),n=this.toSeconds(n);const r=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(e,t,r),this.cancelAndHoldAtTime(t+n*.9),this.linearRampToValueAtTime(e,t+n),this}setTargetAtTime(e,t,n){const r=this._fromType(e);ve(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const a=this.toSeconds(t);return this._assertRange(r),ve(isFinite(r)&&isFinite(a),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:n,time:a,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,a,n),this._param.setTargetAtTime(r,a,n),this}setValueCurveAtTime(e,t,n,r=1){n=this.toSeconds(n),t=this.toSeconds(t);const a=this._fromType(e[0])*r;this.setValueAtTime(this._toType(a),t);const h=n/(e.length-1);for(let f=1;f<e.length;f++){const d=this._fromType(e[f])*r;this.linearRampToValueAtTime(this._toType(d),t+f*h)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return ve(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),n=this._fromType(this.getValueAtTime(t));ve(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+n);const r=this._events.get(t),a=this._events.getAfter(t);return r&&Lt(r.time,t)?a?(this._param.cancelScheduledValues(a.time),this._events.cancel(a.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):a&&(this._param.cancelScheduledValues(a.time),this._events.cancel(a.time),a.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(n),t):a.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(n),t)),this._events.add({time:t,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,t),this}rampTo(e,t=.1,n){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,n):this.linearRampTo(e,t,n),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const n=this._events.get(t);if(n&&n.type==="setTargetAtTime"){const r=this._events.getAfter(n.time),a=r?r.time:t+2,h=(a-t)/10;for(let f=t;f<a;f+=h)e.linearRampToValueAtTime(this.getValueAtTime(f),f)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){ve(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,n,r,a){return n+(t-n)*Math.exp(-(a-e)/r)}_linearInterpolate(e,t,n,r,a){return t+(r-t)*((a-e)/(n-e))}_exponentialInterpolate(e,t,n,r,a){return t*Math.pow(r/t,(a-e)/(n-e))}}class ge extends Tt{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return Ce(this.input)?Wn(this.input)||this.input instanceof Oe?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Ce(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Ce(e)&&(e instanceof ge||Sn(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(n=>{n.channelCount=e.channelCount,n.channelCountMode=e.channelCountMode,n.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();ve(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,n=0){return ys(this,e,t,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return yc("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,n=0){return om(this,e,t,n),this}chain(...e){return Ps(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),Ce(this.input)&&(this.input instanceof ge?this.input.dispose():Sn(this.input)&&this.input.disconnect()),Ce(this.output)&&(this.output instanceof ge?this.output.dispose():Sn(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Ps(...i){const e=i.shift();i.reduce((t,n)=>(t instanceof ge?t.connect(n):Sn(t)&&ys(t,n),n),e)}function ys(i,e,t=0,n=0){for(ve(Ce(i),"Cannot connect from undefined node"),ve(Ce(e),"Cannot connect to undefined node"),(e instanceof ge||Sn(e))&&ve(e.numberOfInputs>0,"Cannot connect to node with no inputs"),ve(i.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof ge||e instanceof Oe;)Ce(e.input)&&(e=e.input);for(;i instanceof ge;)Ce(i.output)&&(i=i.output);Wn(e)?i.connect(e,t):i.connect(e,t,n)}function om(i,e,t=0,n=0){if(Ce(e))for(;e instanceof ge;)e=e.input;for(;!Sn(i);)Ce(i.output)&&(i=i.output);Wn(e)?i.disconnect(e,t):Sn(e)?i.disconnect(e,t,n):i.disconnect()}class st extends ge{constructor(){super(X(st.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=X(st.getDefaults(),arguments,["gain","units"]);this.gain=new Oe({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Ke(this,"gain")}static getDefaults(){return Object.assign(ge.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class ls extends ge{constructor(e){super(e),this.onended=Ie,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new st({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const n=this.toSeconds(t);return this._startTime!==-1&&n>=this._startTime&&(this._stopTime===-1||n<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(ge.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Ie})}_startGain(e,t=1){ve(this._startTime===-1,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=e+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+n):this._gainNode.gain.exponentialApproachValueAtTime(t,e,n)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){ve(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.context.currentTime),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const n=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+n),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Ie&&(this.onended(this),this.onended=Ie,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),ve(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class Vi extends ls{constructor(){super(X(Vi.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=X(Vi.getDefaults(),arguments,["offset"]);ys(this._source,this._gainNode),this.offset=new Oe({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(ls.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Ve extends ge{constructor(){super(X(Ve.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=X(Ve.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Vi({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ge.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,n=0){return fo(this,e,t,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,n){return this._param.exponentialRampTo(e,t,n),this}linearRampTo(e,t,n){return this._param.linearRampTo(e,t,n),this}targetRampTo(e,t,n){return this._param.targetRampTo(e,t,n),this}exponentialApproachValueAtTime(e,t,n){return this._param.exponentialApproachValueAtTime(e,t,n),this}setTargetAtTime(e,t,n){return this._param.setTargetAtTime(e,t,n),this}setValueCurveAtTime(e,t,n,r){return this._param.setValueCurveAtTime(e,t,n,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,n){return this._param.rampTo(e,t,n),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function fo(i,e,t,n){(e instanceof Oe||Wn(e)||e instanceof Ve&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof Ve&&(e.overridden=!0)),ys(i,e,t,n)}class Li extends Oe{constructor(){super(X(Li.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new rn(1/0),this._multiplier=1;const e=X(Li.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Oe.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,n){t=this.toSeconds(t),this.setRampPoint(t);const r=this._fromType(e),a=this._events.get(t),h=Math.round(Math.max(1/n,1));for(let f=0;f<=h;f++){const d=n*f+t,p=this._exponentialApproach(a.time,a.value,r,n,d);this.linearRampToValueAtTime(this._toType(p),d)}return this}setValueAtTime(e,t){const n=this.toSeconds(t);super.setValueAtTime(e,t);const r=this._events.get(n),a=this._events.previousEvent(r),h=this._getTicksUntilEvent(a,n);return r.ticks=Math.max(h,0),this}linearRampToValueAtTime(e,t){const n=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const r=this._events.get(n),a=this._events.previousEvent(r),h=this._getTicksUntilEvent(a,n);return r.ticks=Math.max(h,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const n=this._fromType(e),r=this._events.get(t),a=Math.round(Math.max((t-r.time)*10,1)),h=(t-r.time)/a;for(let f=0;f<=a;f++){const d=h*f+r.time,p=this._exponentialInterpolate(r.time,r.value,t,n,d);this.linearRampToValueAtTime(this._toType(p),d)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Rt(e.ticks)){const h=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(h,e.time)}const n=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(t));const a=this._events.get(t);return a&&a.time===t&&a.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(n+r)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),n=this._events.get(t);return Math.max(this._getTicksUntilEvent(n,t),0)}getDurationOfTicks(e,t){const n=this.toSeconds(t),r=this.getTicksAtTime(t);return this.getTimeOfTick(r+e)-n}getTimeOfTick(e){const t=this._events.get(e,"ticks"),n=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&n&&n.type==="linearRampToValueAtTime"&&t.value!==n.value){const r=this._fromType(this.getValueAtTime(t.time)),h=(this._fromType(this.getValueAtTime(n.time))-r)/(n.time-t.time),f=Math.sqrt(Math.pow(r,2)-2*h*(t.ticks-e)),d=(-r+f)/h,p=(-r-f)/h;return(d>0?d:p)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const n=this.toSeconds(t),r=this.toSeconds(e),a=this.getTicksAtTime(n);return this.getTicksAtTime(n+r)-a}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class ji extends Ve{constructor(){super(X(ji.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=X(ji.getDefaults(),arguments,["value"]);this.input=this._param=new Li({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(Ve.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Wi extends Tt{constructor(){super(X(Wi.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new ho,this._tickOffset=new rn;const e=X(Wi.getDefaults(),arguments,["frequency"]);this.frequency=new ji({context:this.context,units:e.units,value:e.frequency}),Ke(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Tt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const n=this.toSeconds(e);return this._state.getValueAtTime(n)!=="started"&&(this._state.setStateAtTime("started",n),Ce(t)&&this.setTicksAtTime(t,n)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const n=this._state.get(t);n&&n.time>0&&(this._tickOffset.cancel(n.time),this._state.cancel(n.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&this._state.setStateAtTime("paused",t),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),n=this._state.getLastState("stopped",t),r={state:"paused",time:t};this._state.add(r);let a=n,h=0;return this._state.forEachBetween(n.time,t+this.sampleTime,f=>{let d=a.time;const p=this._tickOffset.get(f.time);p&&p.time>=a.time&&(h=p.ticks,d=p.time),a.state==="started"&&f.state!=="started"&&(h+=this.frequency.getTicksAtTime(f.time)-this.frequency.getTicksAtTime(d)),a=f}),this._state.remove(r),h}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),n=this.frequency.timeToTicks(e,t);this.setTicksAtTime(n,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),n={state:"paused",time:e};this._state.add(n);let r=t,a=0;return this._state.forEachBetween(t.time,e+this.sampleTime,h=>{let f=r.time;const d=this._tickOffset.get(h.time);d&&d.time>=r.time&&(a=d.seconds,f=d.time),r.state==="started"&&h.state!=="started"&&(a+=h.time-f),r=h}),this._state.remove(n),a}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const n=this._tickOffset.get(t),r=this._state.get(t),a=Math.max(n.time,r.time),h=this.frequency.getTicksAtTime(a)+e-n.ticks;return this.frequency.getTimeOfTick(h)}forEachTickBetween(e,t,n){let r=this._state.get(e);this._state.forEachBetween(e,t,h=>{r&&r.state==="started"&&h.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),h.time-this.sampleTime,n),r=h});let a=null;if(r&&r.state==="started"){const h=Math.max(r.time,e),f=this.frequency.getTicksAtTime(h),d=this.frequency.getTicksAtTime(r.time),p=f-d;let y=Math.ceil(p)-p;y=Lt(y,1)?0:y;let b=this.frequency.getTimeOfTick(f+y);for(;b<t;){try{n(b,Math.round(this.getTicksAtTime(b)))}catch(S){a=S;break}b+=this.frequency.getDurationOfTicks(1,b)}}if(a)throw a;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class Fs extends Tt{constructor(){super(X(Fs.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Ie,this._lastUpdate=0,this._state=new ho("stopped"),this._boundLoop=this._loop.bind(this);const e=X(Fs.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new Wi({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ke(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Tt.getDefaults(),{callback:Ie,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){vc(this.context);const n=this.toSeconds(e);return this.log("start",n),this._state.getValueAtTime(n)!=="started"&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,t),n<this._lastUpdate&&this.emit("start",n,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const n=this.toSeconds(t),r=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(r+e,n)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,n=>{switch(n.state){case"started":const r=this._tickSource.getTicksAtTime(n.time);this.emit("start",n.time,r);break;case"stopped":n.time!==0&&this.emit("stop",n.time);break;case"paused":this.emit("pause",n.time);break}}),this._tickSource.forEachTickBetween(e,t,(n,r)=>{this.callback(n,r)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}ii.mixin(Fs);class po extends vn{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=X(po.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const n=e.urls[t];this.add(t,n,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Ie,onload:Ie,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return ve(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,n=Ie,r=Ie){return en(t)?this._buffers.set(e.toString(),new Fe(this.baseUrl+t,n,r)):this._buffers.set(e.toString(),new Fe(t,n,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class fn extends Os{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class am extends Tt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new rn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}tr(i=>{i.draw=new am({context:i})});nr(i=>{i.draw.dispose()});class cm extends vn{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){ve(Ce(e.time),"Events must have a time property"),ve(Ce(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new um(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const n of t)if(n.event===e){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let n,r=null;if(t>0)if(e.left.right===null)n=e.left,n.right=e.right,r=n;else{for(n=e.left.right;n.right!==null;)n=n.right;n.parent&&(n.parent.right=n.left,r=n.parent,n.left=e.left,n.right=e.right)}else if(e.right.left===null)n=e.right,n.left=e.left,r=n;else{for(n=e.right.left;n.left!==null;)n=n.left;n.parent&&(n.parent.left=n.right,r=n.parent,n.left=e.left,n.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=n:e.parent.right=n:this._setRoot(n),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const t=e.parent,n=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),t!==null?n?t.left=r:t.right=r:this._setRoot(r)}_rotateRight(e){const t=e.parent,n=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),t!==null?n?t.left=r:t.right=r:this._setRoot(r)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let n=t[0];for(let r=1;r<t.length;r++)t[r].low>n.low&&(n=t[r]);return n.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(n=>t.push(n)),t.forEach(n=>{n.event&&e(n.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const n=[];this._root.search(e,n),n.forEach(r=>{r.event&&t(r.event)})}return this}forEachFrom(e,t){if(this._root!==null){const n=[];this._root.searchAfter(e,n),n.forEach(r=>{r.event&&t(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class um{constructor(e,t,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Bn extends ge{constructor(){super(X(Bn.getDefaults(),arguments,["volume"])),this.name="Volume";const e=X(Bn.getDefaults(),arguments,["volume"]);this.input=this.output=new st({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Ke(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(ge.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Bi extends ge{constructor(){super(X(Bi.getDefaults(),arguments)),this.name="Destination",this.input=new Bn({context:this.context}),this.output=new st({context:this.context}),this.volume=this.input.volume;const e=X(Bi.getDefaults(),arguments);Ps(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ge.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Ps(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}tr(i=>{i.destination=new Bi({context:i})});nr(i=>{i.destination.dispose()});class lm extends vn{constructor(e){super(),this.name="TimelineValue",this._timeline=new rn({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class kn{constructor(e,t){this.id=kn._eventId++;const n=Object.assign(kn.getDefaults(),t);this.transport=e,this.callback=n.callback,this._once=n.once,this.time=n.time}static getDefaults(){return{callback:Ie,once:!1,time:0}}invoke(e){this.callback&&(this.callback(e),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}kn._eventId=0;class mo extends kn{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(mo.getDefaults(),t);this.duration=new fn(e.context,n.duration).valueOf(),this._interval=new fn(e.context,n.interval).valueOf(),this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},kn.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvents(e){const t=this.transport.getTicksAtTime(e);t>=this.time&&t>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new fn(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const t=this.transport.getTicksAtTime(e);t>this.time&&(this._nextTick=this.time+Math.ceil((t-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new fn(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new fn(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class qs extends Tt{constructor(){super(X(qs.getDefaults(),arguments)),this.name="Transport",this._loop=new lm(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new rn,this._repeatedEvents=new cm,this._syncedSignals=[],this._swingAmount=0;const e=X(qs.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new Fs({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Ke(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Tt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const n=t%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(n*Math.PI)*this._swingAmount;e+=new fn(this.context,this._swingTicks*2/3).toSeconds()*r}this._timeline.forEachAtTime(t,n=>n.invoke(e))}schedule(e,t){const n=new kn(this,{callback:e,time:new Os(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(e,t,n,r=1/0){const a=new mo(this,{callback:e,duration:new Wt(this.context,r).toTicks(),interval:new Wt(this.context,t).toTicks(),time:new Os(this.context,n).toTicks()});return this._addEvent(a,this._repeatedEvents)}scheduleOnce(e,t){const n=new kn(this,{callback:e,once:!0,time:new Os(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,n=>this.clear(n.id)),this._repeatedEvents.forEachFrom(t,n=>this.clear(n.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new fn(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){let n;return Ce(t)&&(n=this.toTicks(t)),this._clock.start(e,n),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Bt(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Wt(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Wt(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new fn(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new fn(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),n=this._clock.frequency.timeToTicks(e,t);this.ticks=n}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const n=this._clock.getTicksAtTime(t),r=this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,t),a=t+r;this.emit("stop",a),this._clock.setTicksAtTime(e,a),this.emit("start",a,this._clock.getSecondsAtTime(a))}else this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return Math.round(this._clock.getTicksAtTime(e))}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),n=this.getTicksAtTime(t),r=e-n%e;return this._clock.nextTickTime(r,t)}}syncSignal(e,t){if(!t){const r=this.now();if(e.getValueAtTime(r)!==0){const h=1/(60/this.bpm.getValueAtTime(r)/this.PPQ);t=e.getValueAtTime(r)/h}else t=0}const n=new st(t);return this.bpm.connect(n),n.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:n,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const n=this._syncedSignals[t];n.signal===e&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),co(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}ii.mixin(qs);tr(i=>{i.transport=new qs({context:i})});nr(i=>{i.transport.dispose()});class St extends ge{constructor(e){super(e),this.input=void 0,this._state=new ho("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Ie,this._syncedStop=Ie,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Bn({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Ke(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(ge.getDefaults(),{mute:!1,onstop:Ie,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,n){let r=Rt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")ve(qi(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,t,n);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const a=this._state.get(r);a&&(a.offset=this.toSeconds(as(t,0)),a.duration=n?this.toSeconds(n):void 0);const h=this.context.transport.schedule(f=>{this._start(f,t,n)},r);this._scheduled.push(h),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else vc(this.context),this._start(r,t,n);return this}stop(e){let t=Rt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||Ce(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const n=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(n)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,n){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(t>0){const n=this._state.get(t);if(n&&n.state==="started"&&n.time!==t){const r=t-this.toSeconds(n.time);let a;n.duration&&(a=this.toSeconds(n.duration)-r),this._start(e,this.toSeconds(n.offset)+r,a)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Ie,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Vs extends ls{constructor(){super(X(Vs.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=X(Vs.getDefaults(),arguments,["url","onload"]);ys(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Oe({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Fe(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(ls.getDefaults(),{url:new Fe,loop:!1,loopEnd:0,loopStart:0,onload:Ie,onerror:Ie,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,n,r=1){ve(this.buffer.loaded,"buffer is either not set or not loaded");const a=this.toSeconds(e);this._startGain(a,r),this.loop?t=as(t,this.loopStart):t=as(t,0);let h=Math.max(this.toSeconds(t),0);if(this.loop){const f=this.toSeconds(this.loopEnd)||this.buffer.duration,d=this.toSeconds(this.loopStart),p=f-d;jr(h,f)&&(h=(h-d)%p+d),Lt(h,this.buffer.duration)&&(h=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,wc(h,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(a,h)),Ce(n)){let f=this.toSeconds(n);f=Math.max(f,0),this.stop(a+f)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function zn(i,e){return Ze(this,void 0,void 0,function*(){const t=e/i.context.sampleRate,n=new uo(1,t,i.context.sampleRate);return new i.constructor(Object.assign(i.get(),{frequency:2/t,detune:0,context:n})).toDestination().start(0),(yield n.render()).getChannelData(0)})}class Ki extends ls{constructor(){super(X(Ki.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=X(Ki.getDefaults(),arguments,["frequency","type"]);ys(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Oe({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Oe({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Ke(this,["frequency","detune"])}static getDefaults(){return Object.assign(ls.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Ge extends St{constructor(){super(X(Ge.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=X(Ge.getDefaults(),arguments,["frequency","type"]);this.frequency=new Ve({context:this.context,units:"frequency",value:e.frequency}),Ke(this,"frequency"),this.detune=new Ve({context:this.context,units:"cents",value:e.detune}),Ke(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(St.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),n=new Ki({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Ge._periodicWaveCache.find(t=>t.phase===this._phase&&$p(t.partials,this._partials));{const e=Ge._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const n=this._getCachedPeriodicWave();if(Ce(n)){const{partials:r,wave:a}=n;this._wave=a,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,a]=this._getRealImaginary(e,this._phase),h=this.context.createPeriodicWave(r,a);this._wave=h,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Ge._periodicWaveCache.push({imag:a,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),Ge._periodicWaveCache.length>100&&Ge._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){pn(e,0);let t=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(t=n[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const r=new Float32Array(e);this._partials.forEach((a,h)=>r[h]=a),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,t){let r=2048;const a=new Float32Array(r),h=new Float32Array(r);let f=1;if(e==="custom"){if(f=this._partials.length+1,this._partialCount=this._partials.length,r=f,this._partials.length===0)return[a,h]}else{const d=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);d?(f=parseInt(d[2],10)+1,this._partialCount=parseInt(d[2],10),e=d[1],f=Math.max(f,2),r=f):this._partialCount=0,this._partials=[]}for(let d=1;d<r;++d){const p=2/(d*Math.PI);let y;switch(e){case"sine":y=d<=f?1:0,this._partials[d-1]=y;break;case"square":y=d&1?2*p:0,this._partials[d-1]=y;break;case"sawtooth":y=p*(d&1?1:-1),this._partials[d-1]=y;break;case"triangle":d&1?y=2*(p*p)*(d-1>>1&1?-1:1):y=0,this._partials[d-1]=y;break;case"custom":y=this._partials[d-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}y!==0?(a[d]=-y*Math.sin(t*d),h[d]=y*Math.cos(t*d)):(a[d]=0,h[d]=0)}return[a,h]}_inverseFFT(e,t,n){let r=0;const a=e.length;for(let h=0;h<a;h++)r+=e[h]*Math.cos(h*n)+t[h]*Math.sin(h*n);return r}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let n=0;const r=Math.PI*2,a=32;for(let h=0;h<a;h++)n=Math.max(this._inverseFFT(e,t,h/a*r),n);return Gp(-this._inverseFFT(e,t,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return Ze(this,void 0,void 0,function*(){return zn(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Ge._periodicWaveCache=[];class Nn extends ge{constructor(){super(Object.assign(X(Nn.getDefaults(),arguments,["context"])))}connect(e,t=0,n=0){return fo(this,e,t,n),this}}class hs extends Nn{constructor(){super(Object.assign(X(hs.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=X(hs.getDefaults(),arguments,["mapping","length"]);Bt(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):Vp(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(Ve.getDefaults(),{length:1024})}setMap(e,t=1024){const n=new Float32Array(t);for(let r=0,a=t;r<a;r++){const h=r/(a-1)*2-1;n[r]=e(h,r)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(n=>n.includes(e));ve(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class hm extends Nn{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new hs({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Mn extends Ve{constructor(){super(Object.assign(X(Mn.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=X(Mn.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new st({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ve.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Ls extends St{constructor(){super(X(Ls.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new hm({context:this.context}),this._modulationNode=new st({context:this.context});const e=X(Ls.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ge({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Ge({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Mn({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ke(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ge.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return Ze(this,void 0,void 0,function*(){return zn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class js extends St{constructor(){super(X(js.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new st({context:this.context,gain:0});const e=X(js.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ge({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new Ve({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Ge({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Mn({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Mn({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ke(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ge.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return Ze(this,void 0,void 0,function*(){return zn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class fs extends St{constructor(){super(X(fs.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new st({context:this.context,gain:0}),this._thresh=new hs({context:this.context,mapping:t=>t<=0?-1:1});const e=X(fs.getDefaults(),arguments,["frequency","width"]);this.width=new Ve({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Ge({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ke(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(St.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return Ze(this,void 0,void 0,function*(){return zn(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Ws extends St{constructor(){super(X(Ws.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=X(Ws.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Ve({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Ve({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Ke(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ge.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,n=e/(this._oscillators.length-1);this._forEach((r,a)=>r.detune.value=t+n*a)}}get count(){return this._oscillators.length}set count(e){if(pn(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const n=new Ge({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):Ie});this.type==="custom"&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[t]=n}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,n)=>t.phase=this._phase+n/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return Ze(this,void 0,void 0,function*(){return zn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Bs extends St{constructor(){super(X(Bs.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Mn({context:this.context,value:2});const e=X(Bs.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new fs({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Ge({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ke(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(St.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return Ze(this,void 0,void 0,function*(){return zn(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const ga={am:Ls,fat:Ws,fm:js,oscillator:Ge,pulse:fs,pwm:Bs};class Kn extends St{constructor(){super(X(Kn.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=X(Kn.getDefaults(),arguments,["frequency","type"]);this.frequency=new Ve({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Ve({context:this.context,units:"cents",value:e.detune}),Ke(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Ge.getDefaults(),js.getDefaults(),Ls.getDefaults(),Ws.getDefaults(),fs.getDefaults(),Bs.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=ga[e],n=this.now();if(this._oscillator){const r=this._oscillator;r.stop(n),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof ga[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&An(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&An(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&en(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return Ze(this,void 0,void 0,function*(){return zn(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class go extends Ve{constructor(){super(Object.assign(X(go.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new st({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Ps(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Ve.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Ui extends Nn{constructor(){super(Object.assign(X(Ui.getDefaults(),arguments,["min","max"]))),this.name="Scale";const e=X(Ui.getDefaults(),arguments,["min","max"]);this._mult=this.input=new Mn({context:this.context,value:e.max-e.min}),this._add=this.output=new go({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Nn.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}function Nc(i,e=1/0){const t=new WeakMap;return function(n,r){Reflect.defineProperty(n,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(a){pn(a,i,e),t.set(this,a)}})}}function _n(i,e=1/0){const t=new WeakMap;return function(n,r){Reflect.defineProperty(n,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(a){pn(this.toSeconds(a),i,e),t.set(this,a)}})}}class Ks extends St{constructor(){super(X(Ks.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=X(Ks.getDefaults(),arguments,["url","onload"]);this._buffer=new Fe({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(St.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Ie,onerror:Ie,playbackRate:1,reverse:!1})}load(e){return Ze(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=Ie){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,n){return super.start(e,t,n),this}_start(e,t,n){this._loop?t=as(t,this._loopStart):t=as(t,0);const r=this.toSeconds(t),a=n;n=as(n,Math.max(this._buffer.duration-r,0));let h=this.toSeconds(n);h=h/this._playbackRate,e=this.toSeconds(e);const f=new Vs({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+h),this._state.setStateAtTime("stopped",e+h,{implicitEnd:!0})),this._activeSources.add(f),this._loop&&Rt(a)?f.start(e,r):f.start(e,r,h-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(n=>n.stop(t))}restart(e,t,n){return super.restart(e,t,n),this}_restart(e,t,n){this._stop(e),this._start(e,t,n)}seek(e,t){const n=this.toSeconds(t);if(this._state.getValueAtTime(n)==="started"){const r=this.toSeconds(e);this._stop(n),this._start(n,r)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&pn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&pn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),n=this._state.getNextState("stopped",t);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}$t([_n(0)],Ks.prototype,"fadeIn",void 0);$t([_n(0)],Ks.prototype,"fadeOut",void 0);class Hi extends Nn{constructor(){super(Object.assign(X(Hi.getDefaults(),arguments,["value"]))),this.name="Pow";const e=X(Hi.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new hs({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Nn.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Pt extends ge{constructor(){super(X(Pt.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Ve({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=X(Pt.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(ge.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(en(e))return e;{let n;for(n in bi)if(bi[n][t]===e)return n;return e}}_setCurve(e,t,n){if(en(n)&&Reflect.has(bi,n)){const r=bi[n];Vn(r)?e!=="_decayCurve"&&(this[e]=r[t]):this[e]=r}else if(Bt(n)&&e!=="_decayCurve")this[e]=n;else throw new Error("Envelope: invalid curve: "+n)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){ve(["linear","exponential"].some(t=>t===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const a=this.toSeconds(this.decay),h=this.getValueAtTime(e);if(h>0){const f=1/r;r=(1-h)/f}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,r,e);else{this._sig.cancelAndHoldAtTime(e);let f=this._attackCurve;for(let d=1;d<f.length;d++)if(f[d-1]<=h&&h<=f[d]){f=this._attackCurve.slice(d),f[0]=h;break}this._sig.setValueCurveAtTime(f,e,r,t)}if(a&&this.sustain<1){const f=t*this.sustain,d=e+r;this.log("decay",d),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(f,a+d):this._sig.exponentialApproachValueAtTime(f,d,a)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,n,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,n,e):(ve(Bt(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,n,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,n=1){return t=this.toSeconds(t),this.triggerAttack(t,n),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,n=0){return fo(this,e,t,n),this}asArray(e=1024){return Ze(this,void 0,void 0,function*(){const t=e/this.context.sampleRate,n=new uo(1,t,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),a=r+this.toSeconds(this.release),h=a*.1,f=a+h,d=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/f,decay:t*this.toSeconds(this.decay)/f,release:t*this.toSeconds(this.release)/f,context:n}));return d._sig.toDestination(),d.triggerAttackRelease(t*(r+h)/f,0),(yield n.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}$t([_n(0)],Pt.prototype,"attack",void 0);$t([_n(0)],Pt.prototype,"decay",void 0);$t([Nc(0,1)],Pt.prototype,"sustain",void 0);$t([_n(0)],Pt.prototype,"release",void 0);const bi=(()=>{let e,t;const n=[];for(e=0;e<128;e++)n[e]=Math.sin(e/(128-1)*(Math.PI/2));const r=[],a=6.4;for(e=0;e<128-1;e++){t=e/(128-1);const S=Math.sin(t*(Math.PI*2)*a-Math.PI/2)+1;r[e]=S/10+t*.83}r[128-1]=1;const h=[],f=5;for(e=0;e<128;e++)h[e]=Math.ceil(e/(128-1)*f)/f;const d=[];for(e=0;e<128;e++)t=e/(128-1),d[e]=.5*(1-Math.cos(Math.PI*t));const p=[];for(e=0;e<128;e++){t=e/(128-1);const S=Math.pow(t,3)*4+.2,N=Math.cos(S*Math.PI*2*t);p[e]=Math.abs(N*(1-t))}function y(S){const N=new Array(S.length);for(let C=0;C<S.length;C++)N[C]=1-S[C];return N}function b(S){return S.slice(0).reverse()}return{bounce:{In:y(p),Out:p},cosine:{In:n,Out:b(n)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:y(r)},sine:{In:d,Out:y(d)},step:{In:h,Out:y(h)}}})();class Un extends ge{constructor(){super(X(Un.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const e=X(Un.getDefaults(),arguments);this._volume=this.output=new Bn({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Ke(this,"volume")}static getDefaults(){return Object.assign(ge.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const n=this["_original_"+e]=this[e];this[e]=(...r)=>{const a=r[t],h=this.context.transport.schedule(f=>{r[t]=f,n.apply(this,r)},a);this._scheduledEvents.push(h)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(e,t,n,r){const a=this.toSeconds(n),h=this.toSeconds(t);return this.triggerAttack(e,a,r),this.triggerRelease(a+h),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class mn extends Un{constructor(){super(X(mn.getDefaults(),arguments));const e=X(mn.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Un.getDefaults(),{detune:0,onsilence:Ie,portamento:0})}triggerAttack(e,t,n=1){this.log("triggerAttack",e,t,n);const r=this.toSeconds(t);return this._triggerEnvelopeAttack(r,n),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const n=this.toSeconds(t),r=e instanceof It?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const a=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,a,n)}else this.frequency.setValueAtTime(r,n);return this}}$t([_n(0)],mn.prototype,"portamento",void 0);class ir extends Pt{constructor(){super(X(ir.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new st({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Us extends mn{constructor(){super(X(Us.getDefaults(),arguments)),this.name="Synth";const e=X(Us.getDefaults(),arguments);this.oscillator=new Kn(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new ir(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Ke(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(mn.getDefaults(),{envelope:Object.assign(rs(Pt.getDefaults(),Object.keys(ge.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(rs(Kn.getDefaults(),[...Object.keys(St.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const n=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+n+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Hs extends ge{constructor(){super(X(Hs.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const e=X(Hs.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Oe({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new Oe({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new Oe({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new Oe({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(ge.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){ve(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let h=0;h<e;h++){const d=Math.pow(h/e,2)*(2e4-20)+20;t[h]=d}const n=new Float32Array(e),r=new Float32Array(e),a=this.context.createBiquadFilter();return a.type=this.type,a.Q.value=this.Q.value,a.frequency.value=this.frequency.value,a.gain.value=this.gain.value,a.getFrequencyResponse(t,n,r),n}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class $s extends ge{constructor(){super(X($s.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new st({context:this.context}),this.output=new st({context:this.context}),this._filters=[];const e=X($s.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new Ve({context:this.context,units:"positive",value:e.Q}),this.frequency=new Ve({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Ve({context:this.context,units:"cents",value:e.detune}),this.gain=new Ve({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,Ke(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(ge.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){ve(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(n=>n.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=An(e)?e:parseInt(e,10),n=[-12,-24,-48,-96];let r=n.indexOf(t);ve(r!==-1,`rolloff can only be ${n.join(", ")}`),r+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(a=>a.disconnect()),this._filters=new Array(r);for(let a=0;a<r;a++){const h=new Hs({context:this.context});h.type=this._type,this.frequency.connect(h.frequency),this.detune.connect(h.detune),this.Q.connect(h.Q),this.gain.connect(h.gain),this._filters[a]=h}this._internalChannels=this._filters,Ps(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new Hs({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),n=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((a,h)=>n[h]*=a)}),t.dispose(),n}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),co(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class zs extends Pt{constructor(){super(X(zs.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const e=X(zs.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new Hi({context:this.context,value:e.exponent}),this._scale=this.output=new Ui({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(Pt.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);pn(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class $i extends mn{constructor(){super(X($i.getDefaults(),arguments)),this.name="MonoSynth";const e=X($i.getDefaults(),arguments);this.oscillator=new Kn(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new $s(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new zs(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new ir(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),Ke(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(mn.getDefaults(),{envelope:Object.assign(rs(Pt.getDefaults(),Object.keys(ge.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(rs($s.getDefaults(),Object.keys(ge.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(rs(zs.getDefaults(),Object.keys(ge.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(rs(Kn.getDefaults(),Object.keys(St.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,t=1){if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){const n=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+n+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Gs extends Us{constructor(){super(X(Gs.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=X(Gs.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Ke(this,["oscillator","envelope"])}static getDefaults(){return os(mn.getDefaults(),Us.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const n=this.toSeconds(t),r=this.toFrequency(e instanceof It?e.toFrequency():e),a=r*this.octaves;return this.oscillator.frequency.setValueAtTime(a,n),this.oscillator.frequency.exponentialRampToValueAtTime(r,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}$t([Nc(0)],Gs.prototype,"octaves",void 0);$t([_n(0)],Gs.prototype,"pitchDecay",void 0);const Mc=new Set;function vo(i){Mc.add(i)}function Ec(i,e){const t=`registerProcessor("${i}", ${e})`;Mc.add(t)}const fm=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;vo(fm);const dm=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;vo(dm);const pm=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;vo(pm);const mm="feedback-comb-filter",gm=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;Ec(mm,gm);class Xs extends Un{constructor(){super(X(Xs.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=X(Xs.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),t={};Object.keys(e.urls).forEach(n=>{const r=parseInt(n,10);if(ve(yi(n)||An(r)&&isFinite(r),`url key is neither a note or midi pitch: ${n}`),yi(n)){const a=new It(this.context,n).toMidi();t[a]=e.urls[n]}else An(r)&&isFinite(r)&&(t[r]=e.urls[r])}),this._buffers=new po({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Un.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Ie,onerror:Ie,release:.1,urls:{}})}_findClosest(e){let n=0;for(;n<96;){if(this._buffers.has(e+n))return-n;if(this._buffers.has(e-n))return n;n++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,n=1){return this.log("triggerAttack",e,t,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{const a=kc(new It(this.context,r).toFrequency()),h=Math.round(a),f=a-h,d=this._findClosest(h),p=h-d,y=this._buffers.get(p),b=Ac(d+f),S=new Vs({url:y,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:b}).connect(this.output);S.start(t,0,y.duration/b,n),Bt(this._activeSources.get(h))||this._activeSources.set(h,[]),this._activeSources.get(h).push(S),S.onended=()=>{if(this._activeSources&&this._activeSources.has(h)){const N=this._activeSources.get(h),C=N.indexOf(S);C!==-1&&N.splice(C,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(n=>{const r=new It(this.context,n).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const a=this._activeSources.get(r);t=this.toSeconds(t),a.forEach(h=>{h.stop(t)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(n=>{for(;n.length;)n.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,n,r=1){const a=this.toSeconds(n);return this.triggerAttack(e,a,r),Bt(t)?(ve(Bt(e),"notes must be an array when duration is array"),e.forEach((h,f)=>{const d=t[Math.min(f,t.length-1)];this.triggerRelease(h,a+this.toSeconds(d))})):this.triggerRelease(e,a+this.toSeconds(t)),this}add(e,t,n){if(ve(yi(e)||isFinite(e),`note must be a pitch or midi: ${e}`),yi(e)){const r=new It(this.context,e).toMidi();this._buffers.add(r,t,n)}else this._buffers.add(e,t,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}$t([_n(0)],Xs.prototype,"attack",void 0);$t([_n(0)],Xs.prototype,"release",void 0);class zi extends ge{constructor(){super(Object.assign(X(zi.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=X(zi.getDefaults(),arguments,["pan"]);this.pan=new Oe({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Ke(this,"pan")}static getDefaults(){return Object.assign(ge.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const vm="bit-crusher",_m=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;Ec(vm,_m);class ze extends ge{constructor(){super(X(ze.getDefaults(),arguments,["solo"])),this.name="Solo";const e=X(ze.getDefaults(),arguments,["solo"]);this.input=this.output=new st({context:this.context}),ze._allSolos.has(this.context)||ze._allSolos.set(this.context,new Set),ze._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(ge.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),ze._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){ze._soloed.has(this.context)||ze._soloed.set(this.context,new Set),ze._soloed.get(this.context).add(this)}_removeSolo(){ze._soloed.has(this.context)&&ze._soloed.get(this.context).delete(this)}_isSoloed(){return ze._soloed.has(this.context)&&ze._soloed.get(this.context).has(this)}_noSolos(){return!ze._soloed.has(this.context)||ze._soloed.has(this.context)&&ze._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),ze._allSolos.get(this.context).delete(this),this._removeSolo(),this}}ze._allSolos=new Map;ze._soloed=new Map;class Gi extends ge{constructor(){super(X(Gi.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=X(Gi.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new zi({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Bn({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Ke(this,["pan","volume"])}static getDefaults(){return Object.assign(ge.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class qn extends ge{constructor(){super(X(qn.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=X(qn.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new ze({solo:e.solo,context:this.context}),this._panVol=this.output=new Gi({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ke(this,["pan","volume"])}static getDefaults(){return Object.assign(ge.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return qn.buses.has(e)||qn.buses.set(e,new st({context:this.context})),qn.buses.get(e)}send(e,t=0){const n=this._getBus(e),r=new st({context:this.context,units:"decibels",gain:t});return this.connect(r),r.connect(n),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}qn.buses=new Map;class ym extends ge{constructor(){super(...arguments),this.name="Listener",this.positionX=new Oe({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Oe({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Oe({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Oe({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Oe({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Oe({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Oe({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Oe({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Oe({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ge.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}tr(i=>{i.listener=new ym({context:i})});nr(i=>{i.listener.dispose()});jt().transport;const wi=jt().destination;jt().destination;jt().listener;jt().draw;jt();var Oc={exports:{}},bs={exports:{}},ki={c:[0,0],d:[-1,2],e:[-2,4],f:[1,-1],g:[0,1],a:[-1,3],b:[-2,5],h:[-2,5]};bs.exports=function(i){return i in ki?[ki[i][0],ki[i][1]]:null};bs.exports.notes=ki;bs.exports.A4=[3,3];bs.exports.sharp=[-4,7];var rr={exports:{}},Dc={bb:-2,b:-1,"":0,"#":1,x:2};rr.exports=function(e){return Dc[e]};rr.exports.interval=function(e){var t=Dc[e];return[-4*t,7*t]};var Mr=bs.exports,bm=rr.exports,wm=function(e){var t=/^([a-h])(x|#|bb|b?)(-?\d*)/i,n=e.match(t);if(!!(n&&e===n[0]&&n[3].length)){var r=n[1],a=+n[3],h=n[2].length?n[2].toLowerCase():"",f=bm.interval(h),d=Mr(r.toLowerCase());return d[0]+=a,d[0]+=f[0]-Mr.A4[0],d[1]+=f[1]-Mr.A4[1],d}},Er=bs.exports,Tm=rr.exports,Cm=function(t){var t=t.replace(/\u2032/g,"'").replace(/\u0375/g,","),n=t.match(/^(,*)([a-h])(x|#|bb|b?)([,\']*)$/i);if(!n||t!==n[0])throw new Error("Invalid formatting");var r=n[2],a=n[1],h=n[4],f=r===r.toLowerCase(),d;if(a){if(f)throw new Error("Invalid formatting - found commas before lowercase note");d=2-a.length}else if(h)if(h.match(/^'+$/)&&f)d=3+h.length;else if(h.match(/^,+$/)&&!f)d=2-h.length;else throw new Error("Invalid formatting - mismatch between octave indicator and letter case");else d=f?3:2;var p=Tm.interval(n[3].toLowerCase()),y=Er(r.toLowerCase());return y[0]+=d,y[0]+=p[0]-Er.A4[0],y[1]+=p[1]-Er.A4[1],y},xm=function(i,e){return typeof i=="number"?(e=i,function(t){return e*Math.pow(2,(t[0]*12+t[1]*7)/12)}):(e=e||440,e*Math.pow(2,(i[0]*12+i[1]*7)/12))},oi={notes:{c:[0,0],d:[-1,2],e:[-2,4],f:[1,-1],g:[0,1],a:[-1,3],b:[-2,5],h:[-2,5]},intervals:{unison:[0,0],second:[3,-5],third:[2,-3],fourth:[1,-1],fifth:[0,1],sixth:[3,-4],seventh:[2,-2],octave:[1,0]},intervalFromFifth:["second","sixth","third","seventh","fourth","unison","fifth"],intervalsIndex:["unison","second","third","fourth","fifth","sixth","seventh","octave","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth"],fifths:["f","c","g","d","a","e","b"],accidentals:["bb","b","","#","x"],sharp:[-4,7],A4:[3,3],durations:{"0.25":"longa","0.5":"breve",1:"whole",2:"half",4:"quarter",8:"eighth",16:"sixteenth",32:"thirty-second",64:"sixty-fourth",128:"hundred-twenty-eighth"},qualityLong:{P:"perfect",M:"major",m:"minor",A:"augmented",AA:"doubly augmented",d:"diminished",dd:"doubly diminished"},alterations:{perfect:["dd","d","P","A","AA"],minor:["dd","d","m","M","A","AA"]},symbols:{min:["m3","P5"],m:["m3","P5"],"-":["m3","P5"],M:["M3","P5"],"":["M3","P5"],"+":["M3","A5"],aug:["M3","A5"],dim:["m3","d5"],o:["m3","d5"],maj:["M3","P5","M7"],dom:["M3","P5","m7"],\u00F8:["m3","d5","m7"],5:["P5"]},chordShort:{major:"M",minor:"m",augmented:"aug",diminished:"dim","half-diminished":"7b5",power:"5",dominant:"7"},stepNumber:{unison:1,first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,octave:8,ninth:9,eleventh:11,thirteenth:13},intervalSolfege:{dd1:"daw",d1:"de",P1:"do",A1:"di",AA1:"dai",d2:"raw",m2:"ra",M2:"re",A2:"ri",AA2:"rai",d3:"maw",m3:"me",M3:"mi",A3:"mai",dd4:"faw",d4:"fe",P4:"fa",A4:"fi",AA4:"fai",dd5:"saw",d5:"se",P5:"so",A5:"si",AA5:"sai",d6:"law",m6:"le",M6:"la",A6:"li",AA6:"lai",d7:"taw",m7:"te",M7:"ti",A7:"tai",dd8:"daw",d8:"de",P8:"do",A8:"di",AA8:"dai"}},Ic={add:function(i,e){return[i[0]+e[0],i[1]+e[1]]},sub:function(i,e){return[i[0]-e[0],i[1]-e[1]]},mul:function(i,e){return typeof e=="number"?[i[0]*e,i[1]*e]:[i[0]*e[0],i[1]*e[1]]},sum:function(i){return i[0]+i[1]}},_o={exports:{}},Sm=/^(AA|A|P|M|m|d|dd)(-?\d+)$/,va=[-4,7],Am=["dd","d","P","A","AA"],km=["dd","d","m","M","A","AA"],Rc=[[0,0],[3,-5],[2,-3],[1,-1],[0,1],[3,-4],[2,-2],[1,0]];_o.exports=function(i){var e=i.match(Sm);if(!e)return null;var t=e[1],n=+e[2],r=n<0?-1:1;n=r<0?-n:n;var a=n>8?n%7||7:n,h=(n-a)/7,f=Rc[a-1],d=f[0]<=1?Am:km,p=d.indexOf(t)-2;return p===-3?null:[r*(f[0]+h+va[0]*p),r*(f[1]+va[1]*p)]};_o.exports.coords=Rc.slice(0);var $e=oi,tt=Ic,Nm=_o.exports;function wt(i){if(!(this instanceof wt))return new wt(i);this.coord=i}wt.prototype={name:function(){return $e.intervalsIndex[this.number()-1]},semitones:function(){return tt.sum(tt.mul(this.coord,[12,7]))},number:function(){return Math.abs(this.value())},value:function(){var i=Math.floor((this.coord[1]-2)/7)+1,e=tt.mul($e.sharp,i),t=tt.sub(this.coord,e),n=$e.intervalFromFifth[t[1]+5],r=t[0]-$e.intervals[n][0],a=$e.stepNumber[n]+r*7;return a>0?a:a-2},type:function(){return $e.intervals[this.base()][0]<=1?"perfect":"minor"},base:function(){var i=tt.mul($e.sharp,this.qualityValue()),e=tt.sub(this.coord,i)[1];e=this.value()>0?e+5:-(e-5)%7,e=e<0?$e.intervalFromFifth.length+e:e;var t=$e.intervalFromFifth[e];return t==="unison"&&this.number()>=8&&(t="octave"),t},direction:function(i){if(i){var e=this.value()>=1?"up":"down";return e!==i&&(this.coord=tt.mul(this.coord,-1)),this}else return this.value()>=1?"up":"down"},simple:function(i){var e=$e.intervals[this.base()],t=tt.mul($e.sharp,this.qualityValue());return e=tt.add(e,t),i||(e=this.direction()==="down"?tt.mul(e,-1):e),new wt(e)},isCompound:function(){return this.number()>8},octaves:function(){var i,e,t;return this.direction()==="up"?(i=tt.mul($e.sharp,this.qualityValue()),e=tt.sub(this.coord,i),t=e[0]-$e.intervals[this.base()][0]):(i=tt.mul($e.sharp,-this.qualityValue()),e=tt.sub(this.coord,i),t=-(e[0]+$e.intervals[this.base()][0])),t},invert:function(){var i=this.base(),e=this.qualityValue(),t=this.type()==="minor"?-(e-1):-e,n=9-$e.stepNumber[i]-1,r=$e.intervals[$e.intervalsIndex[n]];return r=tt.add(r,tt.mul($e.sharp,t)),new wt(r)},quality:function(i){var e=$e.alterations[this.type()][this.qualityValue()+2];return i?$e.qualityLong[e]:e},qualityValue:function(){return this.direction()==="down"?Math.floor((-this.coord[1]-2)/7)+1:Math.floor((this.coord[1]-2)/7)+1},equal:function(i){return this.coord[0]===i.coord[0]&&this.coord[1]===i.coord[1]},greater:function(i){var e=this.semitones(),t=i.semitones();return e===t?this.number()>i.number():e>t},smaller:function(i){return!this.equal(i)&&!this.greater(i)},add:function(i){return new wt(tt.add(this.coord,i.coord))},toString:function(i){var e=i?this.number():this.value();return this.quality()+e}};wt.toCoord=function(i){var e=Nm(i);if(!e)throw new Error("Invalid simple format interval");return new wt(e)};wt.from=function(i,e){return i.interval(e)};wt.between=function(i,e){return new wt(tt.sub(e.coord,i.coord))};wt.invert=function(i){return wt.toCoord(i).invert().toString()};var or=wt,Mm=wm,Em=Cm,Om=xm,kt=oi,Nt=Ic,Ti=or;function _a(i,e,t){for(;t>0;t--)i+=e;return i}function Ct(i,e){if(!(this instanceof Ct))return new Ct(i,e);e=e||{},this.duration={value:e.value||4,dots:e.dots||0},this.coord=i}Ct.prototype={octave:function(){return this.coord[0]+kt.A4[0]-kt.notes[this.name()][0]+this.accidentalValue()*4},name:function(){var i=this.accidentalValue(),e=this.coord[1]+kt.A4[1]-i*7+1;return kt.fifths[e]},accidentalValue:function(){return Math.round((this.coord[1]+kt.A4[1]-2)/7)},accidental:function(){return kt.accidentals[this.accidentalValue()+2]},key:function(i){return i?this.coord[0]*7+this.coord[1]*4+29:this.coord[0]*12+this.coord[1]*7+49},midi:function(){return this.key()+20},fq:function(i){return Om(this.coord,i)},chroma:function(){var i=(Nt.sum(Nt.mul(this.coord,[12,7]))-3)%12;return i<0?i+12:i},interval:function(i){if(typeof i=="string"&&(i=Ti.toCoord(i)),i instanceof Ti)return new Ct(Nt.add(this.coord,i.coord),this.duration);if(i instanceof Ct)return new Ti(Nt.sub(i.coord,this.coord))},transpose:function(i){return this.coord=Nt.add(this.coord,i.coord),this},helmholtz:function(){var i=this.octave(),e=this.name();e=i<3?e.toUpperCase():e.toLowerCase();var t=i<3?",":"'",n=i<2?2-i:i-3;return _a(e+this.accidental(),t,n)},scientific:function(){return this.name().toUpperCase()+this.accidental()+this.octave()},enharmonics:function(i){var e=this.key(),t=i?2:3;return["m3","m2","m-2","m-3"].map(this.interval.bind(this)).filter(function(n){var r=n.accidentalValue(),a=e-(n.key()-r);if(a<t&&a>-t){var h=Nt.mul(kt.sharp,a-r);return n.coord=Nt.add(n.coord,h),!0}})},solfege:function(i,e){var t=i.tonic.interval(this),n,r,a;return t.direction()==="down"&&(t=t.invert()),e&&(a=(this.key(!0)-i.tonic.key(!0))/7,a=a>=0?Math.floor(a):-Math.ceil(-a),r=a>=0?"'":","),n=kt.intervalSolfege[t.simple(!0).toString()],e?_a(n,r,Math.abs(a)):n},scaleDegree:function(i){var e=i.tonic.interval(this);return(e.direction()==="down"||e.coord[1]===0&&e.coord[0]!==0)&&(e=e.invert()),e=e.simple(!0).coord,i.scale.reduce(function(t,n,r){var a=Ti.toCoord(n).coord;return a[0]===e[0]&&a[1]===e[1]?r+1:t},0)},durationName:function(){return kt.durations[this.duration.value]},durationInSeconds:function(i,e){var t=60/i/(this.duration.value/4)/(e/4);return t*2-t/Math.pow(2,this.duration.dots)},toString:function(i){return this.name()+this.accidental()+(i?"":this.octave())}};Ct.fromString=function(i,e){var t=Mm(i);return t||(t=Em(i)),new Ct(t,e)};Ct.fromKey=function(i){var e=Math.floor((i-4)/12),t=i-e*12-4,n=kt.fifths[(2*Math.round(t/2)+1)%7],r=Nt.sub(kt.notes[n],kt.A4),a=Nt.add(r,[e+1,0]),h=i-49-Nt.sum(Nt.mul(a,[12,7])),f=h?Nt.add(a,Nt.mul(kt.sharp,h)):a;return new Ct(f)};Ct.fromFrequency=function(i,e){var t,n,r;return e=e||440,t=49+12*((Math.log(i)-Math.log(e))/Math.log(2)),t=Math.round(t),r=e*Math.pow(2,(t-49)/12),n=1200*(Math.log(i/r)/Math.log(2)),{note:Ct.fromKey(t),cents:n}};Ct.fromMIDI=function(i){return Ct.fromKey(i-20)};var Pc=Ct,Ci={m:["m3","P5"],mi:["m3","P5"],min:["m3","P5"],"-":["m3","P5"],M:["M3","P5"],ma:["M3","P5"],"":["M3","P5"],"+":["M3","A5"],aug:["M3","A5"],dim:["m3","d5"],o:["m3","d5"],maj:["M3","P5","M7"],dom:["M3","P5","m7"],\u00F8:["m3","d5","m7"],5:["P5"],"6/9":["M3","P5","M6","M9"]},Dm=function(i){var e,t="quality",n=[],r,a=2,h=["P1","M3","P5","m7","M9","P11","M13"],f=!1;function d(v){for(var P=Ci[v],T=0,A=P.length;T<A;T++)h[T+1]=P[T];a=P.length}i=i.replace(/[,\s\(\)]/g,"");for(var p=0,y=i.length;p<y;p++){if(!(e=i[p]))return;if(t==="quality"){var b=p+2<y?i.substr(p,3).toLowerCase():null,S=p+1<y?i.substr(p,2).toLowerCase():null;b in Ci?r=b:S in Ci?r=S:e in Ci?r=e:r="",r&&d(r),(r==="M"||r==="ma"||r==="maj")&&(f=!0),p+=r.length-1,t="extension"}else if(t==="extension"){if(e=e==="1"&&i[p+1]?+i.substr(p,2):+e,!isNaN(e)&&e!==6){if(a=(e-1)/2,a!==Math.round(a))return new Error("Invalid interval extension: "+e.toString(10));r==="o"||r==="dim"?h[3]="d7":f&&(h[3]="M7"),p+=e>=10?1:0}else e===6?(h[3]="M6",a=Math.max(3,a)):p-=1;t="alterations"}else if(t==="alterations"){var N=i.substr(p).split(/(#|b|add|maj|sus|M)/i),C=!1,k=!1;if(N.length===1)return new Error("Invalid alteration");if(N[0].length!==0)return new Error("Invalid token: '"+N[0]+"'");var I=!1;N.forEach(function(v,P,T){if(I||!v.length)return I=!1;var A=T[P+1],w=v.toLowerCase();if(v==="M"||w==="maj")A==="7"&&(I=!0),a=Math.max(3,a),h[3]="M7";else if(w==="sus"){var D="P4";(A==="2"||A==="4")&&(I=!0,A==="2"&&(D="M2")),h[1]=D}else if(w==="add")A==="9"?n.push("M9"):A==="11"?n.push("P11"):A==="13"&&n.push("M13"),I=!0;else if(w==="b")C=!0;else if(w==="#")k=!0;else{var c=+v,O,j;if(isNaN(c)||String(c).length!==v.length)return new Error("Invalid token: '"+v+"'");if(c===6){k?h[3]="A6":C?h[3]="m6":h[3]="M6",a=Math.max(3,a);return}if(j=(c-1)/2,a<j&&(a=j),c<5||c===7||j!==Math.round(j))return new Error("Invalid interval alteration: "+c);O=h[j][0],k?O==="d"?O="m":O==="m"?O="M":(O==="M"||O==="P")&&(O="A"):C&&(O==="A"?O="M":O==="M"?O="m":(O==="m"||O==="P")&&(O="d")),k=C=!1,h[j]=O+c}}),t="ended"}else if(t==="ended")break}return h.slice(0,a+1).concat(n)},Im=Dm,ya=oi,Rm=Pc,Br=or;function hn(i,e){if(!(this instanceof hn))return new hn(i,e);e=e||"",this.name=i.name().toUpperCase()+i.accidental()+e,this.symbol=e,this.root=i,this.intervals=[],this._voicing=[];var t=e.split("/");if(t.length===2&&t[1].trim()!=="9"?(e=t[0],t=t[1].trim()):t=null,this.intervals=Im(e).map(Br.toCoord),this._voicing=this.intervals.slice(),t){var n=this.intervals,r,a;a=Rm.fromString(t+(i.octave()+1)),r=Br.between(i,a),t=r.simple(),r=r.invert().direction("down"),this._voicing=[r];for(var h=0,f=n.length;h<f;h++)n[h].simple().equal(t)||this._voicing.push(n[h])}}hn.prototype={notes:function(){var i=this.root;return this.voicing().map(function(e){return i.interval(e)})},simple:function(){return this.notes().map(function(i){return i.toString(!0)})},bass:function(){return this.root.interval(this._voicing[0])},voicing:function(i){if(!i)return this._voicing;this._voicing=[];for(var e=0,t=i.length;e<t;e++)this._voicing[e]=Br.toCoord(i[e]);return this},resetVoicing:function(){this._voicing=this.intervals},dominant:function(i){return i=i||"",new hn(this.root.interval("P5"),i)},subdominant:function(i){return i=i||"",new hn(this.root.interval("P4"),i)},parallel:function(i){var e=this.quality();if(this.chordType()!=="triad"||e==="diminished"||e==="augmented")throw new Error("Only major/minor triads have parallel chords");return e==="major"?new hn(this.root.interval("m3","down"),"m"):new hn(this.root.interval("m3","up"))},quality:function(){for(var i,e,t,n=this.intervals,r=0,a=n.length;r<a;r++)n[r].number()===3?i=n[r]:n[r].number()===5?e=n[r]:n[r].number()===7&&(t=n[r]);if(!!i){if(i=i.direction()==="down"?i.invert():i,i=i.simple().toString(),e&&(e=e.direction==="down"?e.invert():e,e=e.simple().toString()),t&&(t=t.direction==="down"?t.invert():t,t=t.simple().toString()),i==="M3")return e==="A5"?"augmented":e==="P5"&&t==="m7"?"dominant":"major";if(i==="m3")return e==="P5"?"minor":e==="d5"?t==="m7"?"half-diminished":"diminished":"minor"}},chordType:function(){var i=this.intervals.length,e,t,n,r,a;if(i===2)return"dyad";if(i===3){for(t={unison:!1,third:!1,fifth:!1},r=0;r<i;r++)e=this.intervals[r],n=e.invert(),e.base()in t?t[e.base()]=!0:n.base()in t&&(t[n.base()]=!0);a=t.unison&&t.third&&t.fifth?"triad":"trichord"}else if(i===4){for(t={unison:!1,third:!1,fifth:!1,seventh:!1},r=0;r<i;r++)e=this.intervals[r],n=e.invert(),e.base()in t?t[e.base()]=!0:n.base()in t&&(t[n.base()]=!0);t.unison&&t.third&&t.fifth&&t.seventh&&(a="tetrad")}return a||"unknown"},get:function(i){if(typeof i=="string"&&i in ya.stepNumber){var e=this.intervals,t,n;for(i=ya.stepNumber[i],t=0,n=e.length;t<n;t++)if(e[t].number()===i)return this.root.interval(e[t]);return null}else throw new Error("Invalid interval name")},interval:function(i){return new hn(this.root.interval(i),this.symbol)},transpose:function(i){return this.root.transpose(i),this.name=this.root.name().toUpperCase()+this.root.accidental()+this.symbol,this},toString:function(){return this.name}};var Pm=hn,ba=oi,wa=or,Mt={aeolian:["P1","M2","m3","P4","P5","m6","m7"],blues:["P1","m3","P4","d5","P5","m7"],chromatic:["P1","m2","M2","m3","M3","P4","A4","P5","m6","M6","m7","M7"],dorian:["P1","M2","m3","P4","P5","M6","m7"],doubleharmonic:["P1","m2","M3","P4","P5","m6","M7"],harmonicminor:["P1","M2","m3","P4","P5","m6","M7"],ionian:["P1","M2","M3","P4","P5","M6","M7"],locrian:["P1","m2","m3","P4","d5","m6","m7"],lydian:["P1","M2","M3","A4","P5","M6","M7"],majorpentatonic:["P1","M2","M3","P5","M6"],melodicminor:["P1","M2","m3","P4","P5","M6","M7"],minorpentatonic:["P1","m3","P4","P5","m7"],mixolydian:["P1","M2","M3","P4","P5","M6","m7"],phrygian:["P1","m2","m3","P4","P5","m6","m7"],wholetone:["P1","M2","M3","A4","A5","A6"]};Mt.harmonicchromatic=Mt.chromatic;Mt.minor=Mt.aeolian;Mt.major=Mt.ionian;Mt.flamenco=Mt.doubleharmonic;function ds(i,e){if(!(this instanceof ds))return new ds(i,e);var t,n;if(!("coord"in i))throw new Error("Invalid Tonic");if(typeof e=="string"){if(t=e,e=Mt[e],!e)throw new Error("Invalid Scale")}else for(n in Mt)if(Mt.hasOwnProperty(n)&&Mt[n].toString()===e.toString()){t=n;break}this.name=t,this.tonic=i,this.scale=e}ds.prototype={notes:function(){for(var i=[],e=0,t=this.scale.length;e<t;e++)i.push(this.tonic.interval(this.scale[e]));return i},simple:function(){return this.notes().map(function(i){return i.toString(!0)})},type:function(){var i=this.scale.length-2;if(i<8)return["di","tri","tetra","penta","hexa","hepta","octa"][i]+"tonic"},get:function(i){var e=typeof i=="string"&&i in ba.stepNumber;i=e?ba.stepNumber[i]:i;var t=this.scale.length,n,r;return i<0?(n=this.scale[i%t+t-1],r=Math.floor((i-1)/t)):i%t===0?(n=this.scale[t-1],r=i/t-1):(n=this.scale[i%t-1],r=Math.floor(i/t)),this.tonic.interval(n).interval(new wa([r,0]))},solfege:function(i,e){return i?this.get(i).solfege(this,e):this.notes().map(function(t){return t.solfege(this,e)})},interval:function(i){return i=typeof i=="string"?wa.toCoord(i):i,new ds(this.tonic.interval(i),this.scale)},transpose:function(i){var e=this.interval(i);return this.scale=e.scale,this.tonic=e.tonic,this}};ds.KNOWN_SCALES=Object.keys(Mt);var Fm=ds,Or,Ta;function qm(){if(Ta)return Or;Ta=1;var i=oi;return Or=function(e){var t=e.Note,n=e.Chord,r=e.Scale;t.prototype.chord=function(a){var h=a in i.chordShort;return a=h?i.chordShort[a]:a,new n(this,a)},t.prototype.scale=function(a){return new r(this,a)}},Or}(function(i,e){var t=Pc,n=or,r=Pm,a=Fm,h;function f(b,S){if(typeof b=="string")return n.toCoord(b);if(typeof S=="string"&&b instanceof t)return n.from(b,n.toCoord(S));if(S instanceof n&&b instanceof t)return n.from(b,S);if(S instanceof t&&b instanceof t)return n.between(b,S);throw new Error("Invalid parameters")}f.toCoord=n.toCoord,f.from=n.from,f.between=n.between,f.invert=n.invert;function d(b,S){return typeof b=="string"?t.fromString(b,S):new t(b,S)}d.fromString=t.fromString,d.fromKey=t.fromKey,d.fromFrequency=t.fromFrequency,d.fromMIDI=t.fromMIDI;function p(b,S){if(typeof b=="string"){var N,C;if(N=b.match(/^([a-h])(x|#|bb|b?)/i),N&&N[0])return C=typeof S=="number"?S.toString(10):"4",new r(t.fromString(N[0].toLowerCase()+C),b.substr(N[0].length))}else if(b instanceof t)return new r(b,S);throw new Error("Invalid Chord. Couldn't find note name")}function y(b,S){return b=b instanceof t?b:h.note(b),new a(b,S)}h={note:d,chord:p,interval:f,scale:y,Note:t,Chord:r,Scale:a,Interval:n},qm()(h),i.exports=h})(Oc);const Ca=Oc.exports;var Fc={exports:{}};(function(i,e){(function(t,n){i.exports=n()})(xi,function(){function t(v){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(P){return typeof P}:t=function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},t(v)}function n(v,P){if(!(v instanceof P))throw new TypeError("Cannot call a class as a function")}function r(v,P){for(var T=0;T<P.length;T++){var A=P[T];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(v,A.key,A)}}function a(v,P,T){return P&&r(v.prototype,P),T&&r(v,T),v}function h(v){return f(v)||d(v)||p(v)||b()}function f(v){if(Array.isArray(v))return y(v)}function d(v){if(typeof Symbol<"u"&&Symbol.iterator in Object(v))return Array.from(v)}function p(v,P){if(!!v){if(typeof v=="string")return y(v,P);var T=Object.prototype.toString.call(v).slice(8,-1);if(T==="Object"&&v.constructor&&(T=v.constructor.name),T==="Map"||T==="Set")return Array.from(v);if(T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return y(v,P)}}function y(v,P){(P==null||P>v.length)&&(P=v.length);for(var T=0,A=new Array(P);T<P;T++)A[T]=v[T];return A}function b(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S=function(){function v(P){n(this,v),this.sourceStr=P,this.subCombos=v.parseComboStr(P),this.keyNames=this.subCombos.reduce(function(T,A){return T.concat(A)},[])}return a(v,[{key:"check",value:function(T){for(var A=0,w=0;w<this.subCombos.length;w+=1)if(A=this._checkSubCombo(this.subCombos[w],A,T),A===-1)return!1;return!0}},{key:"isEqual",value:function(T){if(!T||typeof T!="string"&&t(T)!=="object"||(typeof T=="string"&&(T=new v(T)),this.subCombos.length!==T.subCombos.length))return!1;for(var A=0;A<this.subCombos.length;A+=1)if(this.subCombos[A].length!==T.subCombos[A].length)return!1;for(var w=0;w<this.subCombos.length;w+=1){for(var D=this.subCombos[w],c=T.subCombos[w].slice(0),O=0;O<D.length;O+=1){var j=D[O],U=c.indexOf(j);U>-1&&c.splice(U,1)}if(c.length!==0)return!1}return!0}},{key:"_checkSubCombo",value:function(T,A,w){T=T.slice(0),w=w.slice(A);for(var D=A,c=0;c<T.length;c+=1){var O=T[c];if(O[0]==="\\"){var j=O.slice(1);(j===v.comboDeliminator||j===v.keyDeliminator)&&(O=j)}var U=w.indexOf(O);if(U>-1&&(T.splice(c,1),c-=1,U>D&&(D=U),T.length===0))return D}return-1}}]),v}();S.comboDeliminator=">",S.keyDeliminator="+",S.parseComboStr=function(v){for(var P=S._splitStr(v,S.comboDeliminator),T=[],A=0;A<P.length;A+=1)T.push(S._splitStr(P[A],S.keyDeliminator));return T},S._splitStr=function(v,P){for(var T=v,A=P,w="",D=[],c=0;c<T.length;c+=1)c>0&&T[c]===A&&T[c-1]!=="\\"&&(D.push(w.trim()),w="",c+=1),w+=T[c];return w&&D.push(w.trim()),D};var N=function(){function v(P){n(this,v),this.localeName=P,this.activeTargetKeys=[],this.pressedKeys=[],this._appliedMacros=[],this._keyMap={},this._killKeyCodes=[],this._macros=[]}return a(v,[{key:"bindKeyCode",value:function(T,A){typeof A=="string"&&(A=[A]),this._keyMap[T]=A}},{key:"bindMacro",value:function(T,A){typeof A=="string"&&(A=[A]);var w=null;typeof A=="function"&&(w=A,A=null);var D={keyCombo:new S(T),keyNames:A,handler:w};this._macros.push(D)}},{key:"getKeyCodes",value:function(T){var A=[];for(var w in this._keyMap){var D=this._keyMap[w].indexOf(T);D>-1&&A.push(w|0)}return A}},{key:"getKeyNames",value:function(T){return this._keyMap[T]||[]}},{key:"setKillKey",value:function(T){if(typeof T=="string"){for(var A=this.getKeyCodes(T),w=0;w<A.length;w+=1)this.setKillKey(A[w]);return}this._killKeyCodes.push(T)}},{key:"pressKey",value:function(T){if(typeof T=="string"){for(var A=this.getKeyCodes(T),w=0;w<A.length;w+=1)this.pressKey(A[w]);return}this.activeTargetKeys.length=0;for(var D=this.getKeyNames(T),c=0;c<D.length;c+=1)this.activeTargetKeys.push(D[c]),this.pressedKeys.indexOf(D[c])===-1&&this.pressedKeys.push(D[c]);this._applyMacros()}},{key:"releaseKey",value:function(T){if(typeof T=="string")for(var A=this.getKeyCodes(T),w=0;w<A.length;w+=1)this.releaseKey(A[w]);else{var D=this.getKeyNames(T),c=this._killKeyCodes.indexOf(T);if(c!==-1)this.pressedKeys.length=0;else for(var O=0;O<D.length;O+=1){var j=this.pressedKeys.indexOf(D[O]);j>-1&&this.pressedKeys.splice(j,1)}this.activeTargetKeys.length=0,this._clearMacros()}}},{key:"_applyMacros",value:function(){for(var T=this._macros.slice(0),A=0;A<T.length;A+=1){var w=T[A];if(w.keyCombo.check(this.pressedKeys)){w.handler&&(w.keyNames=w.handler(this.pressedKeys));for(var D=0;D<w.keyNames.length;D+=1)this.pressedKeys.indexOf(w.keyNames[D])===-1&&this.pressedKeys.push(w.keyNames[D]);this._appliedMacros.push(w)}}}},{key:"_clearMacros",value:function(){for(var T=0;T<this._appliedMacros.length;T+=1){var A=this._appliedMacros[T];if(!A.keyCombo.check(this.pressedKeys)){for(var w=0;w<A.keyNames.length;w+=1){var D=this.pressedKeys.indexOf(A.keyNames[w]);D>-1&&this.pressedKeys.splice(D,1)}A.handler&&(A.keyNames=null),this._appliedMacros.splice(T,1),T-=1}}}}]),v}(),C=function(){function v(P,T,A,w){n(this,v),this._locale=null,this._currentContext="",this._contexts={},this._listeners=[],this._appliedListeners=[],this._locales={},this._targetElement=null,this._targetWindow=null,this._targetPlatform="",this._targetUserAgent="",this._isModernBrowser=!1,this._targetKeyDownBinding=null,this._targetKeyUpBinding=null,this._targetResetBinding=null,this._paused=!1,this._contexts.global={listeners:this._listeners,targetWindow:P,targetElement:T,targetPlatform:A,targetUserAgent:w},this.setContext("global")}return a(v,[{key:"setLocale",value:function(T,A){var w=null;return typeof T=="string"?A?(w=new N(T),A(w,this._targetPlatform,this._targetUserAgent)):w=this._locales[T]||null:(w=T,T=w._localeName),this._locale=w,this._locales[T]=w,w&&(this._locale.pressedKeys=w.pressedKeys),this}},{key:"getLocale",value:function(T){return T||(T=this._locale.localeName),this._locales[T]||null}},{key:"bind",value:function(T,A,w,D){if((T===null||typeof T=="function")&&(D=w,w=A,A=T,T=null),T&&t(T)==="object"&&typeof T.length=="number"){for(var c=0;c<T.length;c+=1)this.bind(T[c],A,w);return this}return this._listeners.push({keyCombo:T?new S(T):null,pressHandler:A||null,releaseHandler:w||null,preventRepeat:!1,preventRepeatByDefault:D||!1,executingHandler:!1}),this}},{key:"addListener",value:function(T,A,w,D){return this.bind(T,A,w,D)}},{key:"on",value:function(T,A,w,D){return this.bind(T,A,w,D)}},{key:"bindPress",value:function(T,A,w){return this.bind(T,A,null,w)}},{key:"bindRelease",value:function(T,A){return this.bind(T,null,A,preventRepeatByDefault)}},{key:"unbind",value:function(T,A,w){if((T===null||typeof T=="function")&&(w=A,A=T,T=null),T&&t(T)==="object"&&typeof T.length=="number"){for(var D=0;D<T.length;D+=1)this.unbind(T[D],A,w);return this}for(var c=0;c<this._listeners.length;c+=1){var O=this._listeners[c],j=!T&&!O.keyCombo||O.keyCombo&&O.keyCombo.isEqual(T),U=!A&&!w||!A&&!O.pressHandler||A===O.pressHandler,$=!A&&!w||!w&&!O.releaseHandler||w===O.releaseHandler;j&&U&&$&&(this._listeners.splice(c,1),c-=1)}return this}},{key:"removeListener",value:function(T,A,w){return this.unbind(T,A,w)}},{key:"off",value:function(T,A,w){return this.unbind(T,A,w)}},{key:"setContext",value:function(T){if(this._locale&&this.releaseAllKeys(),!this._contexts[T]){var A=this._contexts.global;this._contexts[T]={listeners:[],targetWindow:A.targetWindow,targetElement:A.targetElement,targetPlatform:A.targetPlatform,targetUserAgent:A.targetUserAgent}}var w=this._contexts[T];return this._currentContext=T,this._listeners=w.listeners,this.stop(),this.watch(w.targetWindow,w.targetElement,w.targetPlatform,w.targetUserAgent),this}},{key:"getContext",value:function(){return this._currentContext}},{key:"withContext",value:function(T,A){var w=this.getContext();return this.setContext(T),A(),this.setContext(w),this}},{key:"watch",value:function(T,A,w,D){var c=this;this.stop();var O=typeof globalThis<"u"?globalThis:typeof xi<"u"?xi:typeof window<"u"?window:{};if(!T){if(!O.addEventListener&&!O.attachEvent){if(this._currentContext==="global")return;throw new Error("Cannot find window functions addEventListener or attachEvent.")}T=O}if(typeof T.nodeType=="number"&&(D=w,w=A,A=T,T=O),!T.addEventListener&&!T.attachEvent)throw new Error("Cannot find addEventListener or attachEvent methods on targetWindow.");this._isModernBrowser=!!T.addEventListener;var j=T.navigator&&T.navigator.userAgent||"",U=T.navigator&&T.navigator.platform||"";A&&A!==null||(A=T.document),w&&w!==null||(w=U),D&&D!==null||(D=j),this._targetKeyDownBinding=function(H){c.pressKey(H.keyCode,H),c._handleCommandBug(H,U)},this._targetKeyUpBinding=function(H){c.releaseKey(H.keyCode,H)},this._targetResetBinding=function(H){c.releaseAllKeys(H)},this._bindEvent(A,"keydown",this._targetKeyDownBinding),this._bindEvent(A,"keyup",this._targetKeyUpBinding),this._bindEvent(T,"focus",this._targetResetBinding),this._bindEvent(T,"blur",this._targetResetBinding),this._targetElement=A,this._targetWindow=T,this._targetPlatform=w,this._targetUserAgent=D;var $=this._contexts[this._currentContext];return $.targetWindow=this._targetWindow,$.targetElement=this._targetElement,$.targetPlatform=this._targetPlatform,$.targetUserAgent=this._targetUserAgent,this}},{key:"stop",value:function(){if(!(!this._targetElement||!this._targetWindow))return this._unbindEvent(this._targetElement,"keydown",this._targetKeyDownBinding),this._unbindEvent(this._targetElement,"keyup",this._targetKeyUpBinding),this._unbindEvent(this._targetWindow,"focus",this._targetResetBinding),this._unbindEvent(this._targetWindow,"blur",this._targetResetBinding),this._targetWindow=null,this._targetElement=null,this}},{key:"pressKey",value:function(T,A){if(this._paused)return this;if(!this._locale)throw new Error("Locale not set");return this._locale.pressKey(T),this._applyBindings(A),this}},{key:"releaseKey",value:function(T,A){if(this._paused)return this;if(!this._locale)throw new Error("Locale not set");return this._locale.releaseKey(T),this._clearBindings(A),this}},{key:"releaseAllKeys",value:function(T){if(this._paused)return this;if(!this._locale)throw new Error("Locale not set");return this._locale.pressedKeys.length=0,this._clearBindings(T),this}},{key:"pause",value:function(){return this._paused?this:(this._locale&&this.releaseAllKeys(),this._paused=!0,this)}},{key:"resume",value:function(){return this._paused=!1,this}},{key:"reset",value:function(){return this.releaseAllKeys(),this._listeners.length=0,this}},{key:"_bindEvent",value:function(T,A,w){return this._isModernBrowser?T.addEventListener(A,w,!1):T.attachEvent("on"+A,w)}},{key:"_unbindEvent",value:function(T,A,w){return this._isModernBrowser?T.removeEventListener(A,w,!1):T.detachEvent("on"+A,w)}},{key:"_getGroupedListeners",value:function(){var T=[],A=[],w=this._listeners;return this._currentContext!=="global"&&(w=[].concat(h(w),h(this._contexts.global.listeners))),w.sort(function(D,c){return(c.keyCombo?c.keyCombo.keyNames.length:0)-(D.keyCombo?D.keyCombo.keyNames.length:0)}).forEach(function(D){for(var c=-1,O=0;O<A.length;O+=1)(A[O]===null&&D.keyCombo===null||A[O]!==null&&A[O].isEqual(D.keyCombo))&&(c=O);c===-1&&(c=A.length,A.push(D.keyCombo)),T[c]||(T[c]=[]),T[c].push(D)}),T}},{key:"_applyBindings",value:function(T){var A=this,w=!1;T||(T={}),T.preventRepeat=function(){w=!0},T.pressedKeys=this._locale.pressedKeys.slice(0);for(var D=this._locale.activeTargetKeys,c=this._locale.pressedKeys.slice(0),O=this._getGroupedListeners(),j=function(H){var z=O[H],Y=z[0].keyCombo;if(Y===null||Y.check(c)&&D.some(function(ie){return Y.keyNames.includes(ie)})){for(var oe=0;oe<z.length;oe+=1){var Q=z[oe];!Q.executingHandler&&Q.pressHandler&&!Q.preventRepeat&&(Q.executingHandler=!0,Q.pressHandler.call(A,T),Q.executingHandler=!1,(w||Q.preventRepeatByDefault)&&(Q.preventRepeat=!0,w=!1)),A._appliedListeners.indexOf(Q)===-1&&A._appliedListeners.push(Q)}if(Y)for(var J=0;J<Y.keyNames.length;J+=1){var pe=c.indexOf(Y.keyNames[J]);pe!==-1&&(c.splice(pe,1),J-=1)}}},U=0;U<O.length;U+=1)j(U)}},{key:"_clearBindings",value:function(T){T||(T={}),T.pressedKeys=this._locale.pressedKeys.slice(0);for(var A=0;A<this._appliedListeners.length;A+=1){var w=this._appliedListeners[A],D=w.keyCombo;(D===null||!D.check(this._locale.pressedKeys))&&(w.preventRepeat=!1,(D!==null||T.pressedKeys.length===0)&&(this._appliedListeners.splice(A,1),A-=1),!w.executingHandler&&w.releaseHandler&&(w.executingHandler=!0,w.releaseHandler.call(this,T),w.executingHandler=!1))}}},{key:"_handleCommandBug",value:function(T,A){var w=["shift","ctrl","alt","capslock","tab","command"];A.match("Mac")&&this._locale.pressedKeys.includes("command")&&!w.includes(this._locale.getKeyNames(T.keyCode)[0])&&this._targetKeyUpBinding(T)}}]),v}();function k(v,P,T){v.bindKeyCode(3,["cancel"]),v.bindKeyCode(8,["backspace"]),v.bindKeyCode(9,["tab"]),v.bindKeyCode(12,["clear"]),v.bindKeyCode(13,["enter"]),v.bindKeyCode(16,["shift"]),v.bindKeyCode(17,["ctrl"]),v.bindKeyCode(18,["alt","menu"]),v.bindKeyCode(19,["pause","break"]),v.bindKeyCode(20,["capslock"]),v.bindKeyCode(27,["escape","esc"]),v.bindKeyCode(32,["space","spacebar"]),v.bindKeyCode(33,["pageup"]),v.bindKeyCode(34,["pagedown"]),v.bindKeyCode(35,["end"]),v.bindKeyCode(36,["home"]),v.bindKeyCode(37,["left"]),v.bindKeyCode(38,["up"]),v.bindKeyCode(39,["right"]),v.bindKeyCode(40,["down"]),v.bindKeyCode(41,["select"]),v.bindKeyCode(42,["printscreen"]),v.bindKeyCode(43,["execute"]),v.bindKeyCode(44,["snapshot"]),v.bindKeyCode(45,["insert","ins"]),v.bindKeyCode(46,["delete","del"]),v.bindKeyCode(47,["help"]),v.bindKeyCode(145,["scrolllock","scroll"]),v.bindKeyCode(188,["comma",","]),v.bindKeyCode(190,["period","."]),v.bindKeyCode(191,["slash","forwardslash","/"]),v.bindKeyCode(192,["graveaccent","`"]),v.bindKeyCode(219,["openbracket","["]),v.bindKeyCode(220,["backslash","\\"]),v.bindKeyCode(221,["closebracket","]"]),v.bindKeyCode(222,["apostrophe","'"]),v.bindKeyCode(48,["zero","0"]),v.bindKeyCode(49,["one","1"]),v.bindKeyCode(50,["two","2"]),v.bindKeyCode(51,["three","3"]),v.bindKeyCode(52,["four","4"]),v.bindKeyCode(53,["five","5"]),v.bindKeyCode(54,["six","6"]),v.bindKeyCode(55,["seven","7"]),v.bindKeyCode(56,["eight","8"]),v.bindKeyCode(57,["nine","9"]),v.bindKeyCode(96,["numzero","num0"]),v.bindKeyCode(97,["numone","num1"]),v.bindKeyCode(98,["numtwo","num2"]),v.bindKeyCode(99,["numthree","num3"]),v.bindKeyCode(100,["numfour","num4"]),v.bindKeyCode(101,["numfive","num5"]),v.bindKeyCode(102,["numsix","num6"]),v.bindKeyCode(103,["numseven","num7"]),v.bindKeyCode(104,["numeight","num8"]),v.bindKeyCode(105,["numnine","num9"]),v.bindKeyCode(106,["nummultiply","num*"]),v.bindKeyCode(107,["numadd","num+"]),v.bindKeyCode(108,["numenter"]),v.bindKeyCode(109,["numsubtract","num-"]),v.bindKeyCode(110,["numdecimal","num."]),v.bindKeyCode(111,["numdivide","num/"]),v.bindKeyCode(144,["numlock","num"]),v.bindKeyCode(112,["f1"]),v.bindKeyCode(113,["f2"]),v.bindKeyCode(114,["f3"]),v.bindKeyCode(115,["f4"]),v.bindKeyCode(116,["f5"]),v.bindKeyCode(117,["f6"]),v.bindKeyCode(118,["f7"]),v.bindKeyCode(119,["f8"]),v.bindKeyCode(120,["f9"]),v.bindKeyCode(121,["f10"]),v.bindKeyCode(122,["f11"]),v.bindKeyCode(123,["f12"]),v.bindKeyCode(124,["f13"]),v.bindKeyCode(125,["f14"]),v.bindKeyCode(126,["f15"]),v.bindKeyCode(127,["f16"]),v.bindKeyCode(128,["f17"]),v.bindKeyCode(129,["f18"]),v.bindKeyCode(130,["f19"]),v.bindKeyCode(131,["f20"]),v.bindKeyCode(132,["f21"]),v.bindKeyCode(133,["f22"]),v.bindKeyCode(134,["f23"]),v.bindKeyCode(135,["f24"]),v.bindMacro("shift + `",["tilde","~"]),v.bindMacro("shift + 1",["exclamation","exclamationpoint","!"]),v.bindMacro("shift + 2",["at","@"]),v.bindMacro("shift + 3",["number","#"]),v.bindMacro("shift + 4",["dollar","dollars","dollarsign","$"]),v.bindMacro("shift + 5",["percent","%"]),v.bindMacro("shift + 6",["caret","^"]),v.bindMacro("shift + 7",["ampersand","and","&"]),v.bindMacro("shift + 8",["asterisk","*"]),v.bindMacro("shift + 9",["openparen","("]),v.bindMacro("shift + 0",["closeparen",")"]),v.bindMacro("shift + -",["underscore","_"]),v.bindMacro("shift + =",["plus","+"]),v.bindMacro("shift + [",["opencurlybrace","opencurlybracket","{"]),v.bindMacro("shift + ]",["closecurlybrace","closecurlybracket","}"]),v.bindMacro("shift + \\",["verticalbar","|"]),v.bindMacro("shift + ;",["colon",":"]),v.bindMacro("shift + '",["quotationmark","'"]),v.bindMacro("shift + !,",["openanglebracket","<"]),v.bindMacro("shift + .",["closeanglebracket",">"]),v.bindMacro("shift + /",["questionmark","?"]),P.match("Mac")?v.bindMacro("command",["mod","modifier"]):v.bindMacro("ctrl",["mod","modifier"]);for(var A=65;A<=90;A+=1){var w=String.fromCharCode(A+32),D=String.fromCharCode(A);v.bindKeyCode(A,w),v.bindMacro("shift + "+w,D),v.bindMacro("capslock + "+w,D)}var c=T.match("Firefox")?59:186,O=T.match("Firefox")?173:189,j=T.match("Firefox")?61:187,U,$;P.match("Mac")&&(T.match("Safari")||T.match("Chrome"))?(U=91,$=93):P.match("Mac")&&T.match("Opera")?(U=17,$=17):P.match("Mac")&&T.match("Firefox")&&(U=224,$=224),v.bindKeyCode(c,["semicolon",";"]),v.bindKeyCode(O,["dash","-"]),v.bindKeyCode(j,["equal","equalsign","="]),v.bindKeyCode(U,["command","windows","win","super","leftcommand","leftwindows","leftwin","leftsuper"]),v.bindKeyCode($,["command","windows","win","super","rightcommand","rightwindows","rightwin","rightsuper"]),v.setKillKey("command")}var I=new C;return I.setLocale("us",k),I.Keyboard=C,I.Locale=N,I.KeyCombo=S,I})})(Fc);const Vm=Fc.exports;Ne(function(){const i={HOME_ROW:["a","s","d","f","j","k","l","semicolon"],DEFAULT_SCALE:["C4","D4","E4","F4","G4","A4","B4","C5"],MODES:["ionian","dorian","phrygian","lydian","mixolydian","aeolian","locrian"],NOTE_RANGE:[{MIN:"a0"},{MAX:"c8"}]},e={synthObj:{},currentScale:[],bindEvents:function(t){var n=document.querySelectorAll(".keyboard button");i.HOME_ROW.forEach(function(r,a){Vm.bind(r,function(h){h.preventRepeat(),t.triggerAttack(e.currentScale[a]),Ne(n).removeClass("active"),Ne(n[a]).addClass("active")},function(){Ne(n[a]).removeClass("active"),t.triggerRelease()})}),document.querySelectorAll(".keyboard label").forEach(function(r,a){r.addEventListener("mousedown",function(){t.triggerAttack(e.currentScale[a])}),r.addEventListener("mouseup",function(){t.triggerRelease()})}),Ne(".mute").on("change",function(){Ne(this).is(":checked")?wi.mute=!0:wi.mute=!1}),Ne(".volume").on("change",function(){wi.volume.value=Ne(this).val()}),Ne(".waveforms input").on("change",function(){var r=Ne(this).val();t.oscillator.type=r}),Ne(".detune").on("change",function(){t.detune.value=Ne(this).val()}),Ne(".portamento").on("change",function(){t.portamento=Ne(this).val()}),Ne(".envelope input").on("change",function(){var r=this.name,a=Ne(this).val(),h=t.envelope;h[r]=a}),Ne(".filter .q").on("change",function(){t.filter.Q.value=Ne(this).val()}),Ne(".filter-envelope input").on("change",function(){var r=this.name,a=Ne(this).val(),h=t.filterEnvelope;h[r]=a})},generateScale:function(t,n){var r=Ca.note(t),a=r.scale(n),h=a.notes(),f=[];return h.forEach(function(d,p){f.push(d.scientific())}),f.push(Ca.interval(r,"P8").scientific()),f},initControls:function(t){var n='input[value="'+t.oscillator.type+'"]';Ne(n).attr("checked","checked"),Ne(".envelope .attack").val(t.envelope.attack),Ne(".envelope .sustain").val(t.envelope.sustain),Ne(".envelope .decay").val(t.envelope.decay),Ne(".envelope .release").val(t.envelope.release),Ne(".portamento").val(t.portamento),Ne(".detune").val(t.detune.value),Ne(".filter .q").val(t.filter.Q.value),Ne(".filter-envelope .attack").val(t.filterEnvelope.attack),Ne(".filter-envelope .sustain").val(t.filterEnvelope.sustain),Ne(".filter-envelope .decay").val(t.filterEnvelope.decay),Ne(".filter-envelope .release").val(t.filterEnvelope.release)},view:()=>{const n=String.raw`
        <div class="device">
          <div class="keyboard">
            <div class="left hand">
              <label><span>Do </span><button>A</button></label>
              <label><span>re </span><button>S</button></label>
              <label><span>mi </span><button>D</button></label>
              <label><span>fa </span><button>F</button></label>
            </div>
            <div class="right hand">
              <label><span>sol</span><button>J</button></label>
              <label><span>la </span><button>K</button></label>
              <label><span>ti </span><button>L</button></label>
              <label><span>do </span><button>;</button></label>
            </div>
          </div>
          <div class="controls">
            <div class="master-vol">
              <label>
                <span>Mute</span>
                <input
                  type="checkbox"
                  class="mute"
                  name="mute">
              </label>
              <label>
                <span>Volume</span>
                <input type="range"
                  class="volume"
                  name="volume"
                  min="-60"
                  max="0"
                  step="-3">
              </label>
            </div>
            <div class="waveforms">
              <label>
                <span>sine</span>
                <input type="radio"
                  name="wave"
                  value="sine">
              </label>
              <label>
                <span>square</span>
                <input type="radio"
                  name="wave"
                  value="square">
              </label>
              <label>
                <span>triangle</span>
                <input
                  type="radio"
                  name="wave"
                  value="triangle">
              </label>
              <label>
                <span>sawtooth</span>
                <input
                  type="radio"
                  name="wave"
                  value="sawtooth">
              </label>
            </div>
            <div>
              <label>
                <span>Detune</span>
                <input type="range"
                  class="detune"
                  name="detune"
                  value=""
                  min="0"
                  max="50">
              </label>
              <label>
                <span>Portamento</span>
                <input
                  type="range"
                  class="portamento"
                  name="portamento"
                  min="0"
                  max="1"
                  value=""
                  step="0.1">
              </label>
            </div>
            <div class="envelope">
              <h2>Amplifier</h2>
              <label>
                Attack
                <input
                  type="range"
                  class="attack"
                  name="attack"
                  min="0"
                  max="5"
                  step="0.1">
              </label>
              <label>
                Decay
                <input
                  type="range"
                  class="decay"
                  name="decay"
                  min="0"
                  max="10"
                  step="0.5">
              </label>
              <label>
                Sustain
                <input
                  type="range"
                  class="sustain"
                  name="sustain"
                  min="0"
                  max="1"
                  step="0.1">
              </label>
              <label>
                Release
                <input
                  type="range"
                  class="release"
                  name="release"
                  min="0.5"
                  max="10"
                  step="0.5">
              </label>
            </div>
            <div class="filter">
              <h2>Filter</h2>
              <div class="filter-envelope">
                <label>
                  <span>Attack</span>
                  <input
                    type="range"
                    class="attack"
                    name="attack"
                    min="0"
                    max="5"
                    step="0.1">
                </label>
                <label>
                  <span>Decay</span>
                  <input
                    type="range"
                    class="decay"
                    name="decay"
                    min="0"
                    max="10"
                    step="0.5">
                </label>
                <label>
                  <span>Sustain</span>
                  <input
                    type="range"
                    class="sustain"
                    name="sustain"
                    min="0"
                    max="1"
                    step="0.1">
                </label>
                <label>
                  <span>Release</span>
                  <input
                    type="range"
                    class="release"
                    name="release"
                    min="0.5"
                    max="10"
                    step="0.5">
                </label>
              </div>
              <label>
                <span>“Q”</span>
                <input
                  type="range"
                  class="q"
                  name="q"
                  min="0"
                  max="10"
                  step="1">
              </label>
            </div>
          </div>
        </div>`;Ne(".app").html(()=>n)},init:function(){e.view(),e.synthObj=new $i,e.synthObj.toDestination(),e.currentScale=e.generateScale("c2",i.MODES[0]),wi.volume.value=-6,e.initControls(e.synthObj),e.bindEvents(e.synthObj)}};e.init()});
